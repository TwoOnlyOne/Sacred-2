-- DO NOT EDIT - AUTOMATICALLY GENERATED --
-- vim:ft=lua ts=2 nu
-- exported by: S2Quest@S2QUEST-VPC
-- exported at: 10/21/09 14:56:36
-- exporter version: 1.0.0.132
-- exported to: server\questscripts.txt


questAccepted = function(args)

  -- empty

end

questFailed = function(args)

  -- empty

end


--Diese Funktion ist nur fuer die Studio 2 Buero Megaquest! Bitte nirgendwo verwenden!

bueroQuestTalk = function()
local lokaids = {	"QUEST_2255_TALK_01","QUEST_2255_TALK_02",
  									"QUEST_2255_TALK_03","QUEST_2255_TALK_04",
  									"QUEST_2255_TALK_05","QUEST_2255_TALK_06",
  									"QUEST_2255_TALK_07","QUEST_2255_TALK_08",
  									"QUEST_2255_TALK_09","QUEST_2255_TALK_10"}
  local index = 1 + tonumber( math.floor( math.random() * 10 ) )
  return lokaids[index]

end


--This function will be called if the player finally solved the quest!
--
--
--Arguments:
--
--args.heroRef    is the current hero
--args.id         is the current quest ID

creatureTeleportPosition = function(tcid, delay,  position)
changeCreature {
  	tcid = tcid,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_RAISE-HANDS",
  	loopCount = 1,
  	effect = "FXTYPE_GEN_TELEPORT",
  	delay = delay
  }
  local positions = { sx=position[1], sy=position[2], sz=position[3],
  							px=position[4], py=position[5], pz=position[6] }
  if position[7] ~= nil then
  	local orientation = position[7]	
  	teleport {
  		tcid = tcid,
  		position = positions,
  		orientation = orientation,
  		delay = delay + 2
  	}
  else
  	teleport {
  		tcid = tcid,
  		position = positions,
  		delay = delay + 2
  	}
  end
  
  changeCreature {
  	tcid = tcid,
  	effect = "FXTYPE_INVALID",
  	delay = delay + 3
  }

end


--Diese Funktion ist nur fuer die Studio 2 Buero Megaquest! Bitte nirgendwo verwenden!

bueroQuestReach = function()
local lokaids = {	"QUEST_2255_REACH_01","QUEST_2255_REACH_02",
  									"QUEST_2255_REACH_03","QUEST_2255_REACH_04",
  									"QUEST_2255_REACH_05","QUEST_2255_REACH_06",
  									"QUEST_2255_REACH_07","QUEST_2255_REACH_08",
  									"QUEST_2255_REACH_09","QUEST_2255_REACH_10"}
  local index = 1 + tonumber( math.floor( math.random() * 10 ) )
  return lokaids[index]
  
  

end


--This function will be called from the questmgr on the server, if you've won a quest
--

msg_questWon = function(args)
local id = getQuestBookEntryID{ id = args.id }
  
  questMessage {
   line = 1,
   lokaid = "QUEST_COMPLETED",
   duration = 9.0,
   fadeIn = 0.5,
   fadeOut = 1.0,
   delay = 1.0,
   color = "#00ff00",
  }
  
  questMessage {
   line = 0,
   textid = "QUEST_TITLE",
   questid = id,
   duration = 10.0,
   fadeIn = 0.5,
   fadeOut = 1.0,
   color = "#ffff11",
  }
  

end


--Nur fuer die Mainquest -> Ork Region -> Quelle/Wasserfall anzeigen / entfernen.

showWaterfall = function()
if 	getQuestState { id = 1287 } == "WON" or 
  		getQuestState { id = 1559 } == "WON" then --state ueberpruefen!
  	
  	setWoobEffect {
  		woid = 1017622491,
  		effect = "FXTYPE_WATERFALL2",
  	}
  end
  
  if getQuestState { id = 1540 } == "TASK_FULFILLED" then
  	setWoobEffect {
  		woid = 1017622491,
  		effect = "FXTYPE_QFX_WASSERFALL",
  	}
  end
  

end


--
--^
--
--im triggervolume 

enterValley = function(heroRef)
local position = {}
  local orientation = 0
  
  if getQuestState { id = 667 } == "WON" then
  	position = {sx=9;sy=50;sz=-2;px=1650;py=1550;pz=0}
  	orientation = 270
  else
    position = {sx=9;sy=50;sz=0;px=1600;py=1550;pz=0}
  	orientation = 270
  end
  
  teleportHero {
  	heroRef = heroRef,
  	position = position,
  	orientation = orientation,
  	noEffect = true,
  }
  

end


--This function will be called from the questmgr on the server, if you've lost a quest

msg_questLost = function(args)
local id = getQuestBookEntryID{ id = args.id }
  
  questMessage {
   line = 1,
   lokaid = "QUEST_FAILED",
   duration = 9.0,
   fadeIn = 0.5,
   fadeOut = 1.0,
   delay = 1.0,
   color = "#ff0000",
  }
  
  questMessage {
   line = 0,
   textid = "QUEST_TITLE",
   questid = id,
   duration = 10.0,
   fadeIn = 0.5,
   fadeOut = 1.0,
   color = "#ffff11",
  }
  

end

_AREA_CENTER_HE_VILLAGE = function(wpos)
-- empty 
  -- creatures for area:
  -- Daytime: 1 is morning; 2 is daytime; 3 evening; 4 is night;
  -- Tags are: 1 - noble ; 2 - Kid ; 3 - Poor
  local AreaCreatures={
  -- highelve noble definition start
  	{
  		Tag=1,
  		CID=84,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true,},
  	},
  	{
  		Tag=1,
  		CID=828,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true,},
  	},
  	{
  		Tag=1,
  		CID=829,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true,},
  	},
  	{
  		Tag=1,
  		CID=830,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true,},
  	
  	},
  	{
  		Tag=1,
  		CID=519,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true,},
  	
  	},
  	{
  		Tag=1,
  		CID=85,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true,},
  	
  	},
  	{
  		Tag=1,
  		CID=831,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true,},
  	
  	},
  	{
  		Tag=1,
  		CID=833,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=834,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=835,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=836,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=837,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=838,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=5,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=815,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=816,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=817,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=8,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=821,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=822,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=823,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=9,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=824,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=825,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=826,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=10,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=11,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=138,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=658,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=83,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=133,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=134,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=135,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=136,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=844,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=845,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=118,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  
  -- highelve child definition start
  
  	{
  		Tag=2,
  		CID=92,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=699,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=700,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=701,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=989,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=990,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=290,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=683,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=684,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=846,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=613,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=687,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=688,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=847,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  		
  
  -- highelve poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=575,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=576,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=320,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=322,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=997,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=998,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=999,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  	{
  		Tag=3,
  		CID=1000,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1001,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=330,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=324,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=983,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=984,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=985,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=978,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=332,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=979,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=980,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  	
  }
  
   
  local  points,numPoints = getSpawnPoints { position=wpos,radius=300 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
  
     
    

end


--quest: geisterdorf

enterDarkVillage = function(heroRef)
local position = {}
  local orientation = 0
  
  if getQuestState { id = 1570 } ~= "WON" then
  	position = toWorldPosition("46;45;-2;1618.900024;18.850000;3301.454834;0.000000")
  	orientation = 160
  else
    return
  end
  
  teleportHero {
  	heroRef = heroRef,
  	position = position,
  	orientation = orientation,
  	noEffect = true,
  }
  

end


--quest: geisterdorf

leaveDarkVillage = function(heroRef)
teleportHero {
  	heroRef = heroRef,
  	position = toWorldPosition("46;44;0;1384.750000;2942.750000;3313.996094;317.726318"),
  	orientation = 317.726318,
  	noEffect = true,
  }
  

end

golemUnten = function(heroRef)
local position = {}
  local orientation = 0
  
  if 	getQuestState {id = 3327} == "WON" then
  	position = {sx=26;sy=44;sz=0;px=464.632813;py=2857.359375;pz=-100.702850}
  	orientation = 23.043610
  else
  	return
  end
  
  teleportHero {
  	heroRef = heroRef,
  	position = position,
  	orientation = orientation,
  }

end


--
--de- or increase the total value of the heroes gold
--
--returns false if you want to decrease more than the player has
--
--returns true when it was possible to change the value

_AREA_CENTER_HUMANS_CAPITAL = function(wpos)

  local AreaCreatures={
  
  -- human noble definition start
  	{
  		Tag=1,
  		CID=316,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=325,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=318,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1072,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=327,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=994,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=995,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1043,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  -- human child definition start
  
  	{
  		Tag=2,
  		CID=321,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=736,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=691,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=692,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=966,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=329,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=963,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=578,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=965,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=323,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=331,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=712,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  
  -- human poor statist definition start
  
  	{
  		Tag=3,
  		CID=574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=575,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=576,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=320,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=322,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=997,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=998,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=999,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  	{
  		Tag=3,
  		CID=1000,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1001,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=330,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=324,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=983,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=984,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=985,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=978,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=332,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=979,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=980,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  }	
        
  	local  points,numPoints = getSpawnPoints { position=wpos,radius=500 }
  	--local richmax = 2
  	--local richcounter = 0  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  	
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  	
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
  
  

end

_AREA_CENTER_HUMANS_VILLAGE = function(wpos)

  local AreaCreatures={
  
  -- human noble definition start
  	{
  		Tag=1,
  		CID=316,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=325,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=318,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1072,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=327,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=994,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=995,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1043,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  -- human child definition start
  
  	{
  		Tag=2,
  		CID=321,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=736,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=691,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=692,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=966,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=329,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=963,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=578,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=965,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=323,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=331,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=712,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  
  -- human poor statist definition start
  
  	{
  		Tag=3,
  		CID=574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=575,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=576,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=320,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=322,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=997,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=998,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=999,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  	{
  		Tag=3,
  		CID=1000,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1001,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=330,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=324,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=983,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=984,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=985,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=978,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=332,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=979,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=980,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  }	
        
  local  points,numPoints = getSpawnPoints { position=wpos,radius=400 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
     
    
  

end

Platte8D = function(heroRef)
setWoobEffect {
    woid = 1049076194,
    effect = "FXTYPE_CHEST2G"
  }

end


--Author: Daniel Balster
--
--Simpler Wrapper um changeCreature()
--

setBehaviour = function(tcid,behaviour)
changeCreature {
  	tcid = tcid,
  	behaviour = behaviour,
  }
  

end

_AREA_CENTER_DESERT_BACKUP_2 = function(wpos)
--empty
  
  local AreaCreatures={
  
  -- DESERT noble definition start
  	{
  		Tag=1,
  		CID=1464,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1647,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1465,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1466,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1467,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1642,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1643,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1644,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1645,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1646,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1493,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1652,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1494,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},	
  	{
  		Tag=1,
  		CID=1495,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1496,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1573,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1648,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1649,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1650,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1651,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	
  
  
  -- DESERT child definition start
  
  	{
  		Tag=2,
  		CID=962,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1216,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1217,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1218,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1219,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=481,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1575,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1576,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1577,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=480,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1212,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1213,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1214,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1215,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1492,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1578,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1579,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1580,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	
  	
  
  
  
  		
  
  -- DESERT poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=476,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1659,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1220,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1221,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1222,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1223,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1653,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1655,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1657,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1658,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=477,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1662,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1497,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1498,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1499,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1654,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1656,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1660,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1661,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	
  	
  	
  }
  
  	local  points,numPoints = getSpawnPoints { position=wpos,radius=150 }
  	--local richmax = 2
  	--local richcounter = 0  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  	--	if AreaCreatures[randomnumber].Tag = 1 then 
  		--	richcounter = richcounter + 1
  			--if richcounte== richmax then 
  	
  			--else
  
  			--end
  	--end
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
  
     
    
  

end

_AREA_CENTER_HE_TOWN = function(wpos)
-- empty 
  -- creatures for area:
  -- Daytime: 1 is morning; 2 is daytime; 3 evening; 4 is night;
  -- Tags are: 1 - noble ; 2 - Kid ; 3 - Poor
  local AreaCreatures={
  -- highelve noble definition start
  	{
  		Tag=1,
  		CID=84,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true,},
  	},
  	{
  		Tag=1,
  		CID=828,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true,},
  	},
  	{
  		Tag=1,
  		CID=829,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true,},
  	},
  	{
  		Tag=1,
  		CID=830,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true,},
  	
  	},
  	{
  		Tag=1,
  		CID=519,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true,},
  	
  	},
  	{
  		Tag=1,
  		CID=85,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true,},
  	
  	},
  	{
  		Tag=1,
  		CID=831,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true,},
  	
  	},
  	{
  		Tag=1,
  		CID=833,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=834,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=835,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=836,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=837,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=838,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=5,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=815,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=816,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=817,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=8,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=821,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=822,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=823,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=9,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=824,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=825,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=826,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=10,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=11,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=138,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=658,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=83,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=133,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=134,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=135,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=136,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=844,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=845,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=118,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=14,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  
  -- highelve child definition start
  
  	{
  		Tag=2,
  		CID=92,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=699,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=700,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=701,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=989,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=990,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=290,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=683,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=684,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=846,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=613,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=687,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=688,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=847,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  		
  
  -- highelve poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=575,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=576,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=320,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=322,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=997,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=998,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=999,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  	{
  		Tag=3,
  		CID=1000,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1001,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=330,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=324,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=983,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=984,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=985,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=978,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=332,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=979,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=980,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  	
  }
  
   local  points,numPoints = getSpawnPoints { position=wpos,radius=400 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
  
     
    

end


--This function will be called if the player failed the task!
--
--
--Arguments:
--
--args.heroRef    is the current hero
--args.id         is the current quest ID

_AREA_CENTER_DRYADS_CAPITAL = function(wpos)
-- empty 
  
  local AreaCreatures={
  
  -- DRYAD noble definition start
  	{
  		Tag=1,
  		CID=218,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=219,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=220,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=221,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=222,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=223,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=224,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=225,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  
  
  -- DRYAD child definition start
  
  	{
  		Tag=2,
  		CID=294,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=533,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1600,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1688,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1689,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1690,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1691,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=295,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=534,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1601,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	
  
  -- DRYAD poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=1500,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  
  	{
  		Tag=3,
  		CID=1569,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1570,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1602,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1603,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1604,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1605,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1625,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1692,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1693,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1694,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1695,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1696,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1697,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1698,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1699,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1479,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1480,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1481,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1482,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1565,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1566,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1567,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1568,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1700,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1701,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1702,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1703,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1704,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1705,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1706,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1707,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1708,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	
  	
  	
  }
  
  
  	local  points,numPoints = getSpawnPoints { position=wpos,radius=500 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
  
     

end


--Custom Teleporter!
--
--- called by a triggervolume with "onenter=lua:leaveValley(%0)"   %0 = current hero
--

leaveValley = function(heroRef)
teleportHero {
  	heroRef = heroRef,
  	position = {sx=9;sy=50;sz=0;px=2350;py=1050;pz=0},
  	orientation = 45,
  	noEffect = true,
  }
  

end


--Gives the length of a table. 
--
--When the returned value is 0, the table has no entries left.

getn = function(table)
	local max = 0
    for i, n in table do
      max = i
    end
    return max

end


--Die Role einer TC aendern. 
--Wichtig, wenn man _Gegner_ ueber das Grouping-Tab spawnen moechte. Diese bekommen immer ROLE_INVALID. Deshalb muss die Role von Hand auf ROLE_ATTACKER geaendert werden.

setRole = function(tcid,role)
changeCreature {
  	tcid = tcid,
  	role = role,
  }

end


--Call this to show the quest message dialog

questCompleted = function(args)

  -- empty

end

oldDragonBack = function(heroRef)
local position = {}
  local orientation = 0
  
  if 	getQuestState {id = 730} 	== "TASK_AWAITING" 	or
  		getQuestState {id = 730} 	== "WON" 						or
  		getQuestState {id = 712} 	== "TASK_AWAITING" 	or
  		getQuestState {id = 712} 	== "WON" 						or
  		getQuestState {id = 3347} == "WON" 						then
  
  	position = toWorldPosition("44;54;0;166.703125;960.046875;200.095566;264.363556")
  	orientation = 264.363556
  else
  	return
  end
  
  teleportHero {
  	heroRef = heroRef,
  	position = position,
  	orientation = orientation,
  }

end


--NOT YET IMPLEMENTED !!!

_AREA_CENTER_HUMANS_TOWN = function(wpos)

  local AreaCreatures={
  
  -- human noble definition start
  	{
  		Tag=1,
  		CID=316,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=325,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=318,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1072,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=327,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=994,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=995,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1043,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  -- human child definition start
  
  	{
  		Tag=2,
  		CID=321,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=736,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=691,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=692,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=966,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=329,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=963,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=578,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=965,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=323,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=331,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=712,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  
  -- human poor statist definition start
  
  	{
  		Tag=3,
  		CID=574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=575,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=576,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=320,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=322,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=997,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=998,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=999,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  	{
  		Tag=3,
  		CID=1000,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1001,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=330,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=324,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=983,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=984,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=985,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=978,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=332,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=979,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=980,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  }	
        
  
  
  local  points,numPoints = getSpawnPoints { position=wpos,radius=400 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end

end


--This function will be called from the questmgr on the server, if an item has been collected

msg_itemReceived = function(args)

  questMessage {
   line = 2,
   lokaid = "QUEST_ITEM",
   paramid = args.paramid,
   duration = 9.5,
   fadeIn = 0.5,
   fadeOut = 1.0,
   delay = 1.0,
   color = "#ffff11",
  }
  

end


--This function will be called from the questmgr on the server, if you've accepted a new quest

msg_questAccepted = function(args)
local id = args.id
  
  questMessage {
   line = 1,
   lokaid = "QUEST_ACCEPTED",
   duration = 10.0,
   fadeIn = 0.5,
   fadeOut = 1.0,
   color = "#0088ff",
  }
  
  questMessage {
   line = 0,
   textid = "QUEST_TITLE",
   questid = id,
   color = "#ffff11",
   duration = 9.0,
   fadeIn = 0.5,
   fadeOut = 1.0,
   delay = 1.0,
  }
  

end

_AREA_CENTER_DRYADS_BACKUP_1 = function(wpos)
--empty
  -- empty 
  
  local AreaCreatures={
  
  -- DRYAD noble definition start
  	{
  		Tag=1,
  		CID=218,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=219,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=220,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=221,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=222,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=223,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=224,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=225,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  
  
  -- DRYAD child definition start
  
  	{
  		Tag=2,
  		CID=294,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=533,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1600,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1688,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1689,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1690,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1691,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=295,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=534,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1601,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	
  
  -- DRYAD poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=1500,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  
  	{
  		Tag=3,
  		CID=1569,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1570,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1602,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1603,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1604,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1605,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1625,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1692,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1693,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1694,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1695,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1696,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1697,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1698,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1699,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1479,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1480,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1481,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1482,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1565,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1566,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1567,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1568,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1700,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1701,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1702,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1703,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1704,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1705,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1706,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1707,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1708,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	
  	
  	
  }
  
  
  	local  points,numPoints = getSpawnPoints { position=wpos,radius=200 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
  
     

end

Platte3E = function(heroRef)
setWoobEffect {
    woid = 1049076010,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte3F = function(heroRef)
setWoobEffect {
    woid = 1049076014,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte8B = function(heroRef)
--dungeon 3
  
  teleportHero {
  	heroRef = heroRef,
  	position = toWorldPosition("57;10;-1;1363.046875;2380.750000;-192.856201;41.436737"),
  	orientation = 41.436737,
  	noEffect = true,
  }
  
  --setWoobEffect {
    --woid = 1049076189,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte8C = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076191,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte8E = function(heroRef)
setWoobEffect {
    woid = 1049076196,
    effect = "FXTYPE_CHEST2G"
  }

end


--This function will be called if the action starts; the questsystem is waiting for the completion of the task.
--
--
--Arguments:
--
--args.heroRef    is the current hero
--args.id         is the current quest ID

_AREA_CENTER_DRYADS_TOWN = function(wpos)
-- empty 
  
  local AreaCreatures={
  
  -- DRYAD noble definition start
  	{
  		Tag=1,
  		CID=218,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=219,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=220,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=221,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=222,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=223,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=224,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=225,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  
  
  -- DRYAD child definition start
  
  	{
  		Tag=2,
  		CID=294,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=533,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1600,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1688,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1689,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1690,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1691,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=295,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=534,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1601,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	
  
  -- DRYAD poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=1500,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  
  	{
  		Tag=3,
  		CID=1569,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1570,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1602,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1603,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1604,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1605,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1625,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1692,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1693,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1694,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1695,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1696,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1697,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1698,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1699,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1479,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1480,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1481,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1482,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1565,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1566,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1567,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1568,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1700,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1701,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1702,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1703,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1704,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1705,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1706,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1707,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1708,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	
  	
  	
  }
  
  	local  points,numPoints = getSpawnPoints { position=wpos,radius=400 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end

end

setFaction = function(tcid,faction)
changeCreature {
  	tcid = tcid,
  	faction = faction,
  }
  

end

cutscene_HE_bad = function(args)
cutscenePosition = toWorldPosition("19;24;0;633.105469;1008.164063;1093.987061;118.467346")
  
  feedback = function(args)
    if args.event == "QEVT_ONWELCOME" then
  
  		for index,heroRef in getHeroRefs() do   
  			changeCreature { --Hero unsichtbar schalten
  				not_in_quests_ref = heroRef,     
  				visible = false,     
  			}
  		end
      
      playMovie { movie=MOVIE_INTRO }
    end
    if args.event == "QEVT_CUTSCENE" then
    -- 1000 = movie has ended.
    local next_title
    if args.param == 1000 then
      playCutScene { camera=11093, music = 5 }
      changeCreature {	--Hase laeuft kurz durchs Bild
        tcid = 7921,
        behaviour = "JOB_QUESTSTAGING",
        gotoPosition = {sx=19;sy=24;sz=0;px=747.550781;py=1303.648438;pz=1095.624512},
        speed = 2,
        followUpAngle = 327.600861,
        followUpBhv = "rabbit",
      }
      changeCreature {	--Student Freundlich schalten
        tcid = 2986,   
        behaviour = "JOB_QUESTSTAGING",   
        faction = "FACTION_FRIEND_HERO_ALL",   
        role = "ROLE_INVALID", 
      }
      return
    end
    
    if args.param == 2 then
        changeCreature { --Erzmagier faengt an zu reden
  		    tcid = 2987,       
  		    behaviour = "JOB_QUESTSTAGING",        
  		    emotion = "ANIM_TYPE_TALK",      
  		    loopCount = -1,        
  		  }
  			setFixedListener {
  				position = toWorldPosition("19;24;0;634.210938;1147.992188;1095.355469;243.762177"),
  			}
        playQuestSpeech { --Text des Magiers
          lokaid = "QUEST_1069_GIVER_START", 
          tcid = 2987,
        }
    end
    if args.param == 3 then
  		setFixedListener {
  			position = nil,
  		}
  	  changeCreature { --Erzmagier hoert auf zu reden
    		tcid = 2987,       
    		behaviour = "JOB_QUESTSTAGING",        
    		emotion = "ANIM_TYPE_EM01",      
    		loopCount = 1,        
  	  }
  	  changeCreature {      --Student geht auf Position
    		tcid = 2986,      
    		behaviour = "JOB_QUESTSTAGING",     
    		gotoPosition = {sx=19,sy=24,sz=0,px=843.449219,py=1081.953125,pz=1092.012695},      
    		followUpAngle = 288,      
    		followUpBhv = "questCreatures",      
  	  }
  	  changeCreature {     --Helf geht auf Position
    		tcid = 7113,      
    		behaviour = "JOB_QUESTSTAGING",      
    		gotoPosition = {sx=19,sy=24,sz=0,px=633.105469,py=1008.164063,pz=1093.987061},      
    		followUpAngle = 118.467346,     
    		followUpBhv = "questCreatures",      
  	  }
  		next_title = 1009
    end
  		if args.param == 4 then
  			teleport {	--Student auf Position zum reden
  				tcid = 2986,
  				position = {sx=19,sy=24,sz=0,px=843.449219,py=1081.953125,pz=1092.012695},
  				orientation = 288,
  			}
  			changeCreature {   --Student Redet   
  		    tcid = 2986,      
  		    behaviour = "JOB_QUESTSTAGING",      
  		    emotion = "ANIM_TYPE_EM08",      
  		    loopCount = 1,       
  		  }
        --playQuestSpeech { --Text des Studenten
        --  lokaid = "", 
        --  tcid = 2986,
        --}
        
  		  --changeCreature {	--Student Nickt kurz
  		  -- 	tcid = 2986,   
  			--	behaviour = "JOB_QUESTSTAGING",   
  			--	emotion = "ANIM_TYPE_EM01",   
  			--	delay = 3.000000, --Delay anpassen, wenn das Sprachsample da ist
  		  --}
  		end
  		if args.param == 0 then
  			stopQuestSpeech {
  				tcid = 2987,
  			}
  			setFixedListener {
  				position = nil,
  			}
  			for index,heroRef in getHeroRefs() do 
  		    teleportHero {   --Held auf Endposition porten
  			    position = toWorldPosition("19;24;0;633.105469;1008.164063;1093.987061;118.467346"),   
  					heroRef = heroRef,   
  					noEffect = true,   
  					orientation = 118.467346,   
  		    }
  				changeCreature {	--Held sichtbar schalten
  				  not_in_quests_ref = heroRef,     
  				  visible = true,     
  				  delay = 0.5,
  				}
  			end
  			destroyCreature {	--Hero Klon entfernen
  				tcid = 7113,  
  				splatter = false,
  				delay = 0.5
  			}
  			changeCreature {	--Student Feindlich schalten
  				tcid = 2986,   
  				behaviour = "Enemy_trap_magic",   
  				faction = "FACTION_ENEMY_HERO",   
  				role = "ROLE_ATTACKER",   
  				delay = 2, 
  			}
  			changeCreature { --Magier Behaviour aendern, damit er wieder zuschaut
  				tcid = 7506,
  				behaviour = "JOB_QUESTSTAGING",
  				emotion = "ANIM_TYPE_IDLE",
          loopCount = -1,
  				bubble = 1,
  			}
  			teleport { --Magier wieder zum Zuschauer machen
  				tcid = 7506,
  				position = {sx=19;sy=24;sz=0;px=529.101990;py=909.953003;pz=1095.640015},
  				orientation = 94.000000,
  			}
  			teleport { --Student auf Endposition
  				tcid = 2986,
  				position = {sx=19,sy=24,sz=0,px=843.449219,py=1081.953125,pz=1092.012695},
  				orientation = 288,
  			}
        
  			feedback = nil
  			cutscenePosition = nil
  			return
        -- END OF CUTSCENE!!!!
  	  end
  	    nextCutScene {music=next_title}
  	end
  end
  

end

_AREA_CENTER_ORC_FACTION_BLUE = function(wpos)
-- empty 
  local AreaCreatures={
  
  -- ORC noble definition start (COLORED ORCS)
  	{
  		Tag=1,
  		CID=1439,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=16,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1443,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=16,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1448,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=16,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1452,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=16,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  -- ORC children DO NOT EXIST -- NOT A BUG
  
  			
  
  -- ORC poor statist definition start (NEUTRAL ORCS)
  
  
  	{
  		Tag=3,
  		CID=1155,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1156,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1157,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1158,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1159,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1160,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1583,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1584,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1585,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=297,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1442,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=298,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1446,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1617,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=299,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1619,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1447,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=300,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1451,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1620,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1622,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  	
  	
  }
  
  
   local  points,numPoints = getSpawnPoints { position=wpos,radius=500 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end

end

_AREA_CENTER_ORC_FACTION_RED = function(wpos)
-- empty 
  local AreaCreatures={
  
  -- ORC noble definition start (COLORED ORCS)
  	{
  		Tag=1,
  		CID=1440,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=16,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1444	,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=16,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1449,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=16,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1453,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=16,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=945,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=16,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  
  
  -- ORC children DO NOT EXIST -- NOT A BUG
  
  			
  
  -- ORC poor statist definition start (NEUTRAL ORCS)
  
  
  	{
  		Tag=3,
  		CID=1155,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1156,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1157,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1158,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1159,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1160,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1583,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1584,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1585,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=297,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1442,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=298,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1446,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1617,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=299,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1619,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1447,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=300,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1451,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1620,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1622,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  	
  	
  }
  
  
   local  points,numPoints = getSpawnPoints { position=wpos,radius=500 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end

end

_AREA_CENTER_ORC_FACTION_YELLOW = function(wpos)
-- empty 
  local AreaCreatures={
  
  -- ORC noble definition start (COLORED ORCS)
  	{
  		Tag=1,
  		CID=1441,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=16,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1445,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=16,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1450,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=16,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1454,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=16,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=920,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=16,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  
  -- ORC children DO NOT EXIST -- NOT A BUG
  
  			
  
  -- ORC poor statist definition start (NEUTRAL ORCS)
  
  
  	{
  		Tag=3,
  		CID=1155,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1156,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1157,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1158,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1159,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1160,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1583,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1584,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1585,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=297,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1442,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=298,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1446,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1617,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=299,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1619,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1447,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=300,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1451,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1620,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1622,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=16,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  	
  	
  }
  	local  points,numPoints = getSpawnPoints { position=wpos,radius=500 }
  	--local richmax = 2
  	--local richcounter = 0  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  	--	if AreaCreatures[randomnumber].Tag = 1 then 
  		--	richcounter = richcounter + 1
  			--if richcounte== richmax then 
  	
  			--else
  
  			--end
  	--end
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
  
     
    
  
  

end

_AREA_CENTER_HUMANS_BACKUP_3 = function(wpos)

  local AreaCreatures={
  
  -- human noble definition start
  	{
  		Tag=1,
  		CID=316,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=325,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=318,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1072,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=327,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=994,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=995,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1043,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  -- human child definition start
  
  	{
  		Tag=2,
  		CID=321,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=736,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=691,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=692,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=966,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=329,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=963,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=578,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=965,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=323,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=331,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=712,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  
  -- human poor statist definition start
  
  	{
  		Tag=3,
  		CID=574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=575,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=576,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=320,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=322,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=997,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=998,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=999,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  	{
  		Tag=3,
  		CID=1000,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1001,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=330,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=324,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=983,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=984,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=985,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=978,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=332,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=979,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=980,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  }	
        
  local  points,numPoints = getSpawnPoints { position=wpos,radius=100 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
     
    
  

end

_AREA_CENTER_HUMANS_BACKUP_2 = function(wpos)

  local AreaCreatures={
  
  -- human noble definition start
  	{
  		Tag=1,
  		CID=316,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=325,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=318,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1072,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=327,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=994,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=995,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1043,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  -- human child definition start
  
  	{
  		Tag=2,
  		CID=321,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=736,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=691,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=692,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=966,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=329,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=963,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=578,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=965,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=323,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=331,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=712,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  
  -- human poor statist definition start
  
  	{
  		Tag=3,
  		CID=574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=575,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=576,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=320,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=322,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=997,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=998,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=999,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  	{
  		Tag=3,
  		CID=1000,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1001,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=330,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=324,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=983,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=984,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=985,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=978,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=332,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=979,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=980,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  }	
        
  local  points,numPoints = getSpawnPoints { position=wpos,radius=150 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
     
    
  

end

Platte4A = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076024,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte4G = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076041,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte4H = function(heroRef)
setWoobEffect {
    woid = 1049076044,
    effect = "FXTYPE_CHEST2G"
  }

end

_AREA_CENTER_HUMANS_BACKUP_1 = function(wpos)

  local AreaCreatures={
  
  -- human noble definition start
  	{
  		Tag=1,
  		CID=316,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=325,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=318,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1072,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=327,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=994,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=995,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1043,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=12,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  -- human child definition start
  
  	{
  		Tag=2,
  		CID=321,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=736,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=691,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=692,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=966,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=329,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=963,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=578,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=965,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=323,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=331,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=712,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  
  -- human poor statist definition start
  
  	{
  		Tag=3,
  		CID=574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=575,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=576,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=320,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=322,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=997,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=998,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=999,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  	{
  		Tag=3,
  		CID=1000,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1001,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=330,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=324,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=983,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=984,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=985,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=978,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=332,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=979,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=980,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  }	
        
  local  points,numPoints = getSpawnPoints { position=wpos,radius=200 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
     
    
  

end

_AREA_CENTER_DRAGON_BIG = function(wpos)
-- creatures for area:
  -- Daytime: 1 is morning; 2 is daytime; 3 evening; 4 is night;
  -- Tags are: 1 - noble ; 2 - Kid ; 3 - Poor
  local AreaCreatures={
  -- highelve noble definition start
  	
  
  -- highelve child definition start
  
  	{
  		Tag=2,
  		CID=92,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=699,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=700,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=701,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=989,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=990,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=290,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=683,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=684,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=846,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=613,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=687,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=688,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=847,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  		
  
  -- highelve poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=575,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=576,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=320,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=322,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=997,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=998,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=999,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  	{
  		Tag=3,
  		CID=1000,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1001,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=330,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=324,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=983,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=984,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=985,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=978,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=332,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=979,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=980,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  	
  }
  
   local  points,numPoints = getSpawnPoints { position=wpos,radius=400 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end

end


--function creatureGotoPos(tcid,pos,angle,speed,followBhv,delay)
--

creatureGotoPos = function(tcid, pos, angle, speed, followBhv,delay)
local a,s,fub,d
  
  if pos then
  	if angle then a=angle end
  	if pos[7] then a = pos[7] end
  	if not a then a = 0 end
  	
  	if speed then s = speed else s = 1 end
  	if followBhv then fub=followBhv else fub = "" end
  	if delay then d = delay else d = 0 end
  
  	changeCreature{
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = { 
  			sx=pos[1], 
  			sy=pos[2], 
  			sz=pos[3],
  			px=pos[4], 
  			py=pos[5], 
  			pz=pos[6]},
  		orientation = a,
  		speed = s,
  		followUpBhv = fub,
  		delay = d,
  	}
  end

end

cutscene_TG_bad = function(args)
cutscenePosition = toWorldPosition("24;27;0;1294.150024;2214.250000;1204.939941;280.000000")
  
  feedback = function(args)
    if args.event == "QEVT_ONWELCOME" then
      --An dieser Stelle die ersten Scripte (in Cam-Pfad #1) --Camera faehrt an der Ausgrabungsstaette nach oben
      --Der Held wird unsichtbar geschaltet
      for index,heroRef in getHeroRefs() do
        changeCreature {
          not_in_quests_ref = heroRef,
          visible = false,
        }
      end
  		changeCreature {
  			tcid = 3004,
  			faction = "FACTION_FRIEND_HERO_ALL",
  			behaviour = "JOB_QUESTSTAGING",
  			role = "ROLE_INVALID",
  		}
  		teleport {
  			tcid = 3004,
  			position = toWorldPosition("24;27;0;1326.300049;2182.149902;1199.979980;250.000000"),
  			orientation = 250,
  		}
  		changeCreature {
  			tcid = 3005,
  			faction = "FACTION_FRIEND_HERO_ALL",
  			behaviour = "JOB_QUESTSTAGING",
  			role = "ROLE_INVALID",
  		}
  		teleport {
  			tcid = 3005,
  			position = toWorldPosition("24;27;0;1282.150024;2164.000000;1199.979980;200.000000"),
  			orientation = 200,
  		}
      playMovie { movie = MOVIE_INTRO }
    end
    if args.event == "QEVT_CUTSCENE" then
      local next_title
      if args.param == 1000 then
        --Die 3 Leute sitzen am Lagerfeuer und idlen:
        local tcids = {8686,8687,8688}
        for index,tcid in tcids do
          changeCreature {
            tcid = tcid,
            behaviour = "JOB_QUESTSTAGING",
            emotion = "ANIM_TYPE_SITGROUND-IDLE",
            loopCount = -1,
          }
        end
        --Hologram wird unsichtbar geschaltet.
        changeCreature {  --Hologram sichtbar schalten und reden lassen
          tcid = 3002,
          visible = false,
        }
        -- Helf laeuft von links nach Rechts richtung Lagerfeuer mit einem Fass in der Hand:
        changeCreature {
          tcid = 8690,
          behaviour = "JOB_QUESTSTAGING", --Position ist am Ende der Plattform der Pyramide -> TC wird am Ende geloescht
          gotoPosition = toWorldPosition("24;27;0;602.976563;1202.492188;1027.750977;255.781784"),
          bubble = 11,
          action = "ACTION_CARRY_BARREL",
        }
        -- Ein Hochelf ist rechts am hacken:
        changeCreature {
          tcid = 8689,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_HACKING",
          loopCount = -1,
          bubble = 9,
        }
        --Nachdenklicher Hochelf
        changeCreature {
          tcid = 8692,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_CONTEMPLATE",
          loopCount = -1,
        }
        -- Klon legt sich hin und wird unsichtbar
        changeCreature {
          tcid = 8685,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_LAYGROUND-IDLE",
          visible = false,
          loopCount = -1,
        }
        changeCreature { --Ein Abenteurer Hackt
          tcid = 3005,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_HACKING",
          loopCount = -1,
          bubble = 9,
        }
        changeCreature { --der andere Abenteuerer redet
          tcid = 3004,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_TALK",
          loopCount = -1,
          bubble = 9,
        }
        playCutScene { camera = 11510, music = 5 }      
        --Hochelf kommt die Treppe hochgelaufen:
        --Timing anpassen?!
        changeCreature {
          tcid = 8691,
          behaviour = "JOB_QUESTSTAGING",
          gotoPosition = toWorldPosition("24;27;0;1032.062500;1113.640625;1027.804199;342.699463"),
          delay = 8,
        }
  
  			teleportHero {   --Held auf Endposition porten
  			    position =  toWorldPosition("24;27;0;1294.150024;2214.250000;1204.939941;280.000000"),
  					heroRef = heroRef,   
  					noEffect = true,   
  					orientation = 280.000000,   
  		    }
  
        return
      end
      if args.param == 1 then
        --Nach Scene #1 // In Scene #2
  			setFixedListener {
  				position = toWorldPosition("24;27;0;1282.648438;2211.796875;1205.116821;32.380676"),
  			}
        playQuestSpeech {
          tcid = 3004,
          lokaid = "START_TW_SCRIPT",
        }
      end
      if args.param == 2 then
        -- Nach Scene #2 // In Scene #3
        --Weltobjekte anschalten
        --local woobs = {1024116486,1024116521,1024116531}
        local woobs = {1024116486,1024116531}
        for index,woid in woobs do
          setWoobState {
            woid = woid,
            state = "WOOB_THINGY_ON",
          }
        end
        --TG erwacht -> steht auf.
        changeCreature {
          tcid = 8685,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_LAYGROUND-UP",
          visible = true,
          loopCount = 1,
        }
        --Abenteurer laufen kurz nach hinten:
        --Skooth laeuft 3m nach hinten und dreht sich wieder um:
        changeCreature {
          tcid = 3004,
          behaviour = "JOB_QUESTSTAGING",
          --gotoPosition = toWorldPosition("24;27;0;1359.400024;2096.699951;1218.041626;200.000000"),
          gotoPosition = toWorldPosition("24;27;0;1395.250000;2092.250000;1203.576660;216.539764"),
          followUpAngle = 216,
          followUpBhv = "questCreatures",
          speed = 2,
          bubble = 9,
          delay = 0.7,
        }
        --Levian laeuft 3m nach hinten und dreht sich wieder um:
        changeCreature {
          tcid = 3005,
          behaviour = "JOB_QUESTSTAGING",
          gotoPosition = toWorldPosition("24;27;0;1303.351563;2060.203125;1206.347168;188.285797"),
          followUpAngle = 188,
          followUpBhv = "questCreatures",
          speed = 2,
          bubble = 9,
          delay = 1,
        }
        next_title = 129
      end
      if args.param == 3 then
        -- Nach Scene #3 // In Scene #4
        --Hier erscheint das Hologramm und labert kurz!
        changeCreature {  --Hologram sichtbar schalten und reden lassen
          tcid = 3002,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_TALK",
          loopCount = -1,
          visible = true,
          effect = "FXTYPE_HOLOGRAM",
        }
  			setFixedListener {
  				position = toWorldPosition("24;27;0;1435.718750;2110.125000;1199.889648;128.110764"),
  			}
        playQuestSpeech {
          tcid = 3002,
          lokaid = "QUEST_1079_GIVER_START",  --BAD PATH ID!
        }
        
        --Skooth dreht sich erschrocken zum Hologramm um
        changeCreature {
          tcid = 3004,
          behaviour = "JOB_QUESTSTAGING",
          gotoPosition = toWorldPosition("24;27;0;1352.203125;2025.796875;1206.347046;137.162094"),
          followUpAngle = 137.0,
          followUpBhv = "questCreatures",
          speed = 2,
          bubble = 9,
        }
        
        --Levian dreht sich erschrocken zum Hologramm um
        changeCreature {
          tcid = 3005,
          behaviour = "JOB_QUESTSTAGING",
          --gotoPosition = toWorldPosition("24;27;0;1314.750000;2074.320313;1206.347168;200.000000"),
          gotoPosition = toWorldPosition("24;27;0;1263.578125;2054.976563;1206.347168;92.353394"),
          followUpAngle = 92.0,
          followUpBhv = "questCreatures",
          speed = 2,
          bubble = 9,
        }      
        setWoobState {  --Erde auf Invalid, sonst wackelt sie immer hin und her
          woid = 1024116521,
          state = "WOOB_ANIM_OFF",
        }
      end
      if args.param == 4 then
        -- Nach Scene #4 // In Scene #5
        changeCreature {
          tcid = 3002,
          visible = false,
        }
        setWoobState {  --Erde auf Invalid, sonst wackelt sie immer hin und her
          woid = 1024116521,
          state = "WOOB_ANIM_OFF",
        }
  			setFixedListener {
  				position = toWorldPosition("24;27;0;1322.250000;2172.148438;1205.076782;18.472443"),
  			}
        playQuestSpeech {
          tcid = 3005,
          lokaid = "TG_B_SKOOTH_1",
        }
        changeCreature {
          tcid = 3005,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_TALK",
          bubble = 9,
          loopCount = -1,
        }
      end
      if args.param == 5 then
        -- Nach Scene #5// In Scene #6
        playQuestSpeech {
          tcid = 3004,
          lokaid = "TG_B_LEVIAN_1",
        }
        
        changeCreature {
          tcid = 3005,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_IDLE",
          bubble = 9,
          loopCount = -1,
        }      
        
        changeCreature {
          tcid = 3004,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_TALK",
          bubble = 9,
          loopCount = -1,
        }
      end
  if args.param == 6 then
        -- Nach Scene #6// In Scene #7
        playQuestSpeech {
          tcid = 3005,
          lokaid = "TG_B_SKOOTH_2",
        }
        changeCreature {
          tcid = 3004,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_IDLE",
          bubble = 9,
          loopCount = -1,
        }      
        changeCreature {
          tcid = 3005,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_TALK",
          bubble = 9,
          loopCount = -1,
        }
      end
      if args.param == 0 then
        --Aufraeumscript am Ende der Szene / bei Abbruch
  			stopQuestSpeech {
  				tcid = 3005,
  			}
  			stopQuestSpeech {
  				tcid = 3004,
  			}
  			stopQuestSpeech {
  				tcid = 3002,
  			}
  			setFixedListener {
  				position = nil,
  			}
        for index,heroRef in getHeroRefs() do
          changeCreature {
            not_in_quests_ref = heroRef,
            visible = true,
          }
  			teleportHero {   --Held auf Endposition porten
  			    position = toWorldPosition("24;27;0;1294.150024;2214.250000;1204.939941;280.000000"),
  					heroRef = heroRef,   
  					noEffect = true,   
  					orientation = 280.000000,   
  		    }
        end
        changeCreature {
          tcid = 3002,
          visible = false,
        }
        --destroy v.l.n.r.: Typ mit Fass, TG Klon, Treppen Helf
        local destroy = {8690,8685,8691}
        for index,tcid in destroy do
          destroyCreature {
            tcid = tcid,
            splatter = false,
          }
        end
        setWoobState {  --Erde auf Invalid, sonst wackelt sie immer hin und her
          woid = 1024116521,
          state = "WOOB_INVALID",
        }
        --BAD PATH ONLY:
        --Typen werden feindlich:
        changeCreature {
          tcid = 3004,
          behaviour = "Enemy_warrior_brave",
          faction = "FACTION_ENEMY_HERO",
          role = "ROLE_ATTACKER",
        }
        changeCreature {
          tcid = 3005,
          behaviour = "Enemy_warrior_brave",
          faction = "FACTION_ENEMY_HERO",
          role = "ROLE_ATTACKER",
        }
  			feedback = nil
  			cutscenePosition = nil
        return
      end
      nextCutScene {music = next_title}
    end
  end
  

end

_AREA_CENTER_HE_SLUMS = function(wpos)
-- empty 
  -- creatures for area:
  -- Daytime: 1 is morning; 2 is daytime; 3 evening; 4 is night;
  -- Tags are: 1 - noble ; 2 - Kid ; 3 - Poor
  local AreaCreatures={
  -- highelve noble definition start
  	
  
  -- highelve child definition start
  
  	{
  		Tag=2,
  		CID=92,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=699,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=700,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=701,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=989,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=990,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=290,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=683,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=684,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=846,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=613,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=687,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=688,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=847,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  		
  
  -- highelve poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=575,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=576,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=320,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=322,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=997,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=998,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=999,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  	{
  		Tag=3,
  		CID=1000,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1001,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=330,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=324,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=983,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=984,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=985,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=978,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=332,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=979,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=980,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  	
  }
  
   local  points,numPoints = getSpawnPoints { position=wpos,radius=500 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end

end

_AREA_CENTER_DRYADS_VILLAGE = function(wpos)
-- empty 
  
  local AreaCreatures={
  
  -- DRYAD noble definition start
  	{
  		Tag=1,
  		CID=218,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=219,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=220,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=221,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=222,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=223,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=224,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=225,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  
  
  -- DRYAD child definition start
  
  	{
  		Tag=2,
  		CID=294,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=533,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1600,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1688,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1689,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1690,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1691,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=295,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=534,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1601,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	
  
  -- DRYAD poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=1500,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  
  	{
  		Tag=3,
  		CID=1569,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1570,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1602,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1603,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1604,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1605,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1625,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1692,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1693,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1694,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1695,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1696,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1697,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1698,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1699,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1479,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1480,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1481,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1482,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1565,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1566,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1567,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1568,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1700,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1701,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1702,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1703,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1704,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1705,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1706,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1707,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1708,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	
  	
  	
  }
  
  	local  points,numPoints = getSpawnPoints { position=wpos,radius=300 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
  
     
  

end

cutscene_IN_bad = function(args)
cutscenePosition = toWorldPosition("19;26;0;2860.050049;1044.349976;128.899902;104.807434")
  
  feedback = function(args)
    if args.event == "QEVT_ONWELCOME" then
    	--An dieser Stelle die ersten Scripte (in Cam-Pfad #1) --Fernsicht auf das Haus
      for index,heroRef in getHeroRefs() do
        changeCreature { --Held unsichtbar schalten!
          not_in_quests_ref = heroRef,
          visible = false,
        }
    	teleportHero { --Hero auf die Endpos teleportieren
    		heroRef = heroRef,
    		noEffect = true,
    		position = {sx=19;sy=26;sz=0;px=2860.050781;py=1044.398438;pz=128.924515},
    		orientation = 105.297729,
    	}
      end
      playMovie {movie = MOVIE_INTRO}
    end
    if args.event == "QEVT_CUTSCENE" then
      local next_title
      if args.param == 1000 then
        teleport {  --Wirt auf perfekte Position teleportieren (draussen, damit er laufen kann)
          tcid = 3000,
          position = toWorldPosition("19;26;0;2850.695313;634.304688;132.616348;170.651855"),
          orientation = 242,
        }
        createEffect {--Fledermaeuse aus dem rechten Baum
          position=toWorldPosition("19;26;0;2450.949951;1483.849976;180.253845;0.000000"),
          effect="FXTYPE_FLYINGBATS",
        }
    		playCutScene { camera = 11462, music = 51 }  
  			return
      end
      if args.param == 1 then
  			--Nach Scene #1 // In Scene #2 Camera folgt dem barkeeper
        changeCreature {  --Wirt geht zum Tor der Kneipe
          tcid = 3000,
          behaviour = "JOB_QUESTSTAGING",
          gotoPosition = toWorldPosition("19;26;0;2798.750000;1037.750000;133.715698;291.896545"),
          followUpAngle = 291.896545,
          bubble = 11,
          action = "ACTION_CARRY_BARREL",
        }
        end
      if args.param == 2 then
    		-- Nach Scene #2 // In Scene #3  Schwenk aus einer Ecke durch den Raum
        setWoobState {  --Tuer der Kneipe geht auf
          woid = 1022726181,
          state = "WOOB_DOOR_OPEN",
        }
        changeCreature {  --Wirt kommt durch die Tuer in die Kneipe
          tcid = 3000,  
          behaviour = "JOB_QUESTSTAGING",
          gotoPosition = toWorldPosition("19;26;0;2622.148438;884.500000;133.715698;189.085739"),
          followUpBhv = "JOB_QUESTSTAGING",
          followUpAngle = 242,
          bubble = 11,
        }
        changeCreature {  --Inquisitor Kollege labert seinen ersten Text bevor er trinkt.
          tcid = 2995,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_TALK",
          --bubble = 8,
          loopCount = -1,
        }
  		end
  		if args.param == 3 then
  			-- Nach Scene #3 // In Scene #4 --Nahaufnahme Inq und Kumpel labern
  			teleport { --Wirt teleportieren
  				tcid = 3000,
  				position = toWorldPosition("19;26;0;2622.148438;884.500000;133.715698;189.085739"),
  			}
        changeCreature {  --Wirt faengt an die Bar zu putzen
          tcid = 3000,  
          behaviour = "JOB_QUESTSTAGING",
  				emotion = "ANIM_TYPE_CLEAN-BAR",
  				loopCount = -1,
          bubble = 9,
        }
        playQuestSpeech { --Text des Inquisitor Kollegen
          lokaid = "QUEST_1076_GIVER_START",
          tcid = 2995,
        }
  	    setWoobState {  --Tuer der Kneipe geht wieder zu, nachdem der Wirt herein gelaufen ist
          woid = 1022726181,
          state = "WOOB_DOOR_CLOSE",
          --delay = 5,
        }
        changeCreature {  --Gast labert auch...
          tcid = 3001,  
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_TALK",
          --bubble = 8,
          delay = 0.5,
        }
  		end
  		if args.param == 4 then
  			-- Nach Scene #4 // In Scene #5 Inq trinkt
        changeCreature {  --Inquisitor Kollege trinkt
          tcid = 2995,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_EM15",
          bubble = 9,
        }	
        next_title = 122
  	  end
      if args.param == 5 then
        --Nach Scene #5 // In Scene #6  Inqui labert bist zu dem Punkt, an dem ihm auffaellt, dass das Gift wirkt...schnitt!
        changeCreature {  --Wirt unterhaelt sich mit einem der Gaeste
          tcid = 2995,  
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_TALK",
  				loopCount = -1,
          bubble = 9,
          delay = 0.1,
        } 
  			setFixedListener {
  				position = toWorldPosition("19;26;0;2617.050049;912.500000;172.595688;0.000000"),
  			}
        playQuestSpeech { --Inquisitor Text "WAS HABT IHR GETAN?"
          lokaid = "QUEST_1076_GIVER_ACCOMPLISHED",
          tcid = 2995,
        } 
        --Es geht nicht, dass man vor Ende des Textes einen Schnitt macht. Das wuerde in anderen Sprachen nicht klappen!
      end
      if args.param == 6 then
            --Nach Scene #6 // In Scene #7 ...reisst die Haende hoch und redet "Was habt ihr getan????"
  			setFixedListener {
  				position = nil,
  			}
  
        changeCreature { --letzte anim vor dem tod
          tcid = 2995,
  --        behaviour = "JOB_QUESTSTAGING",
  --        emotion = "ANIM_TYPE_KE07", --ka welche das ist, noch anpassen
  --        bubble = 9,
          mortality = "MORTAL",
        }
        
        changeCreature {  --Hero geht zur Tuer 
          tcid = 7920,
          behaviour = "JOB_QUESTSTAGING",
          gotoPosition = toWorldPosition("19;26;0;2860.050781;1044.398438;128.924515;105.297729"),
          followUpAngle = 105.297729,
          --bubble = 11,
        }
        next_title = 43  
      end
      if args.param == 7 then --Inqui stirbt
  		playQuestSpeech {
  			tcid = 2995,
  			lokaid = "QUEST_1077_IN_SCREAM",
  		}
  		playQuestSpeech { --gelaber des gasts
  			lokaid = "INQUISITOR_GUEST",  --> LokaID aendern!
  			tcid = 3001,
  		}
      killCreature { --tod des inquisitors
        tcid = 2995,
      }
      end
  		if args.param == 0 then
        --Aufraeumscript am Ende der Szene / bei Abbruch
  			stopQuestSpeech {
  				tcid = 2995,
  			}
  			setFixedListener {
  				position = nil,
  			}
      	setWoobState {  --Tuer geht zu da Hero rausgegangen ist
          woid = 1022726181,
          state = "WOOB_DOOR_CLOSE",
        }
        --playQuestSpeech { --gelaber des wirts
        --  lokaid = "",
        --  tcid = ,
        --}
        for index,heroRef in getHeroRefs() do
  				teleportHero { --Hero auf die Endpos teleportieren
  					heroRef = heroRef,
  					noEffect = true,
  					position = {sx=19;sy=26;sz=0;px=2860.050781;py=1044.398438;pz=128.924515},
  					orientation = 105.297729,
  				}
          changeCreature { --Held sichtbar schalten!
            not_in_quests_ref = heroRef,
            visible = true,
          }
        end
        destroyCreature { --Klon loeschen
          tcid = 7920,
          splatter = false,
        }
  			destroyCreature { --inq kollege weg!
          tcid = 2995,
  				splatter = false,
        }
        changeCreature {  --Gast wird feindlich
          tcid = 3001,
          behaviour = "Enemy_warrior_brave",
          faction = "FACTION_ENEMY_HERO",
          role = "ROLE_ATTACKER",
          mortality = "MORTAL",
        }
  			teleport { --Wirt teleportieren
  				tcid = 3000,
  				position = toWorldPosition("19;26;0;2622.148438;884.500000;133.715698;189.085739"),
  			}
  			--changeCreature {
  			--	tcid = 3000,
  			--	
  			--19;26;0;2617.550781;975.203125;133.715714;106.942612
  			--}
        changeCreature {  --Wirt wird feindlich
          tcid = 3000,
          gotoPosition = toWorldPosition("19;26;0;2617.550781;975.203125;133.715714;106.942612"),
          faction = "FACTION_ENEMY_HERO",
          role = "ROLE_ATTACKER",
          mortality = "MORTAL",
  				speed = 2,
  				bubble = 1,
  				followUpBhv = "Enemy_warrior_brave",
  				delay = 0.2,
        }
  			feedback = nil
  			cutscenePosition = nil
  		return
  	  end
  	    nextCutScene {music=next_title}
  	end
  end
  

end

_AREA_CENTER_GHOSTVILLAGE = function(wpos)
--empty
  -- empty 
  -- creatures for area:
  -- Daytime: 1 is morning; 2 is daytime; 3 evening; 4 is night;
  -- Tags are: 1 - noble ; 2 - Kid ; 3 - Poor
  local AreaCreatures={
  -- highelve child definition start
  
  	Creature={
  		Tag=2,
  		CID=1077,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		
  	},
  	Creature={
  		Tag=2,
  		CID=1076,
  		Behaviour="JOB_KID",
  		Faction=12,
  		Equipment=43,
  		
  	},
  	
  
  -- highelve poor statist definition start
  
  	Creature={
  		Tag=3,
  		CID=1080,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		
  	},
  	Creature={
  		Tag=3,
  		CID=1078,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		
  	},
  	Creature={
  		Tag=3,
  		CID=1079,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		
  	},
  	Creature={
  		Tag=3,
  		CID=1081,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		
  	},
  		
  }
  
   local  points,numPoints = getSpawnPoints { position=wpos,radius=300 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end

end

_AREA_CENTER_DESERT_VILLAGE = function(wpos)

  local AreaCreatures={
  
  -- DESERT noble definition start
  	{
  		Tag=1,
  		CID=1464,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1647,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1465,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1466,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1467,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1642,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1643,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1644,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1645,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1646,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1493,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1652,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1494,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},	
  	{
  		Tag=1,
  		CID=1495,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1496,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1573,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1648,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1649,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1650,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1651,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	
  
  
  -- DESERT child definition start
  
  	{
  		Tag=2,
  		CID=962,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1216,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1217,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1218,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1219,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=481,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1575,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1576,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1577,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=480,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1212,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1213,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1214,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1215,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1492,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1578,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1579,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1580,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	
  	
  
  
  
  		
  
  -- DESERT poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=476,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1659,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1220,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1221,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1222,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1223,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1653,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1655,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1657,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1658,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=477,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1662,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1497,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1498,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1499,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1654,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1656,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1660,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1661,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	
  	
  	
  }
  
  
  	local  points,numPoints = getSpawnPoints { position=wpos,radius=300 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
    

end


--This function will be called during the setup of the quest.
--
--Arguments:
--
--args.questgiver is the ID of the questgiver
--args.targetnpc  is the ID of the target person
--args.heroRef    is the current hero
--args.id         is the current quest ID
--
--All creatures/items/areas have been created for this quest if this function is called.

cutscene_SW = function(args)
feedback = function(args)
    if args.event == "QEVT_ONWELCOME" then
    	--An dieser Stelle die ersten Scripte (in Cam-Pfad #1)
      changeCreature { --SW unsichtbar schalten
        tcid = 7982,
        visible = false,
      }
      for index,heroRef in getHeroRefs() do
        changeCreature { --Held unsichtbar schalten!
          not_in_quests_ref = heroRef,
          visible = false,
        }
      end
      playMovie { movie = MOVIE_INTRO }
    end
    if args.event == "QEVT_CUTSCENE" then
      local next_title
      if args.param == 1000 then
  			changeCreature { --Magier labert!
  				tcid = 2985,
  				behaviour = "JOB_QUESTSTAGING",
  				emotion = "ANIM_TYPE_TALK",
  				loopCount = -1,
  			}
  			playCutScene { camera=11221, music = 43 } 
  			return
      end
      if args.param == 1 then
  			--Nach Scene #1 // In Scene #2
  			setFixedListener {
  				position = toWorldPosition("17;25;-1;1627.203125;1509.304688;124.984398;338.498535"),
  			}
        playQuestSpeech { --Text des Magiers
          lokaid = "START_SK_SCRIPT", 
          tcid = 2985,
        }
      end
      if args.param == 2 then
    		-- Nach Scene #2 // In Scene #3
  			setFixedListener {
  				position = toWorldPosition("17;25;-1;1597.750000;1656.750000;168.298187;189.819290"),
  			}
        teleport { 
  				tcid = 3028,--Tybor auf perfekte Position setzen fuer den Anfang der Szene (summon spell des nekros...)
  				position = toWorldPosition("17;25;-1;1680.300781;1503.250000;125.084351;206.269516"),
  				orientation = 206.269516,
  			}
        teleport { 
  				tcid = 2985,--Magier auf perfekte Position setzen fuer den Anfang der Szene - beschwoerung
  				position = toWorldPosition("17;25;-1;1599.650024;1464.050049;126.456001;180.000000"),
  				orientation = 180,
  			}
        changeCreature { --Beschwoerung
  				tcid = 2985,
  				behaviour = "JOB_QUESTSTAGING",
  				emotion = "ANIM_TYPE_MAGICB",
  				effect = "FXTYPE_GEN_SPAWN1_I",
  				effectParam = { --Position des Zaubers
  				paramtype="position", 
  				position={sx=17;sy=25;sz=-1;px=1594.250000;py=1748.750000;pz=199.624954},
  				duration=1.8,
  				--fxImpact="FXTYPE_GEN_SPAWN1", --koennte raus, ist nur der gruene kringel. der muss spaeter ueber createEffect() auf die passende Position gesetzt werden
          fxImpact = "FXTYPE_SK_KOHORTE_I",
  				},
  				loopCount = 1,
  			}
  		end
  		if args.param == 3 then
  			-- Nach Scene #3 // In Scene #4
        createEffect { --noch mehr staub
          position = toWorldPosition("17;25;-1;1594.250000;1748.750000;164.989578;0.000000"),
          effect = "FXTYPE_SK_KOHORTE_I",
          duration = 6,
        }
        changeCreature { --2. mal staub
          tcid = 7982,
          effect = "FXTYPE_SK_KOHORTE_I",
          delay = 2,
        }
  		end
  		if args.param == 4 then
  			-- Nach Scene #4 // In Scene #5
        createEffect { --noch mehr staub
          position = toWorldPosition("17;25;-1;1594.250000;1748.750000;199.625000;0.000000"),
          --17;25;-1;1624.339844;1757.046875;164.989578;246.708557
          effect = "FXTYPE_SK_KOHORTE_I",
          duration = 6,
        }
        createEffect { --noch mehr staub
          position = toWorldPosition("17;25;-1;1594.250000;1748.750000;164.989578;0.000000"),
          effect = "FXTYPE_SK_KOHORTE_I",
          duration = 9,
        }
        createEffect { --noch mehr staub
          position = toWorldPosition("17;25;-1;1594.250000;1748.750000;164.989578;0.000000"),
          effect = "FXTYPE_SK_KOHORTE_I",
          duration = 9,
        }
        createEffect { --gruener Kringel Effekt auf dem Boden
          position = toWorldPosition("17;25;-1;1594.250000;1748.750000;199.625000;0.000000"),
          effect = "FXTYPE_GEN_SPAWN1",
          duration = 7,
          delay = 0,
        }
        changeCreature { --meeeehr staub!
          tcid = 7982,
          effect = "FXTYPE_GEN_FRAG_DUST",
          delay = 1,
        }
        changeCreature { --meeeehr staub!
          tcid = 7982,
          effect = "FXTYPE_GEN_FRAG_DUST",
          delay = 2.2,
        }
        setWoobState { --Sarg explodiert
          woid = 1002509550,
          state = "WOOB_CHEST_OPEN", --state anpassen, sobald der Sarg wirklich dort steht
          --delay = 1,
        }
        changeCreature { --Klon sichtbar schalten
          tcid = 7982,
          delay = 1.5,
          visible = true,
        }
        createEffect { --saeulen effekt
          position = toWorldPosition("17;25;-1;1594.250000;1748.750000;199.625000;0.000000"),
          effect = "FXTYPE_SK_KOHORTE_C",
          duration = 4,
          delay = 1,
        }
        next_title = 1001
        changeCreature { --In-die_luft-spring-Animation des SWs
          tcid = 7982,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_SM17",
          loopCount = 1,
          delay = 1,
        }
  	  end
  		if args.param == 0 then
      --  changeCreature { --Alle Effekte vom SW entfernen
      --      tcid = 7982,
      --      effect = "FXTYPE_INVALID",
      --      delay = 5.2,
      --  }
  			stopQuestSpeech {
  				tcid = 2985,
  			}
  			setFixedListener {
  				position = nil,
  			}
  			--quest.print("cleanup cutscene!")
  			for index,heroRef in getHeroRefs() do
          changeCreature { --Held sichtbar schalten!
            not_in_quests_ref = heroRef,
            visible = true,
          }
          teleportHero{ --Endposition des Helden
            heroRef = heroRef,
            position = toWorldPosition("17;25;-1;1594.250000;1748.750000;199.625000;0.000000"),
            orientation = 0,
            noEffect = true,
          }
        end
        destroyCreature {	--Hero Klon entfernen
  				tcid = 7982,  
  				splatter = false,
  			}
        if not (getWoobState{woid = 1002509550} == "WOOB_CHEST_OPEN") then
        setWoobState { --Sarg explodiert
          woid = 1002509550,
          state = "WOOB_CHEST_OPEN", --state anpassen, sobald der Sarg wirklich dort steht
          --delay = 1,
        }
        end
        teleport { 
  				tcid = 3028,--Tybor auf Endposition!
  				position = toWorldPosition("17;25;-1;1680.300781;1503.250000;125.084351;206.269516"),
  				orientation = 206.269516,
  			}
        teleport { 
  				tcid = 2985,--Magier auf Endposition
  				position = toWorldPosition("17;25;-1;1599.650024;1464.050049;126.456001;180.000000"),
  				orientation = 180,
  			}
  			changeCreature { --Magier labert!
  				tcid = 2985,
  				behaviour = "JOB_QUESTSTAGING",
  				emotion = "ANIM_TYPE_EM01",
  				loopCount = 1,
  			}
        --changeCreature { --Tybor feindlich schalten SIMON: brauchen wir nicht, da man erst noch mit dem Magier sprechen muss
          --tcid = 3028,
          --behaviour = "Enemy_warrior_brave",
          --faction = "FACTION_ENEMY_HERO",
        --}
  			feedback = nil
  			return
  	  end
  	    nextCutScene {music=next_title}
  	end
  end
  

end

creatureGotoPositionD = function(tcid,position,delay)
changeCreature{
  	tcid = tcid,
  	behaviour = "JOB_QUESTSTAGING",
  delay = delay,
  	gotoPosition = { 
  		sx=position[1], 
  		sy=position[2], 
  		sz=position[3],
  		px=position[4], 
  		py=position[5], 
  		pz=position[6] 
  	}
  }

end

cutscene_DR_bad = function(args)
cutscenePosition = {sx=20;sy=22;sz=0;px=1605.709961;py=1342.020020;pz=20.067301}
  
  feedback = function(args)
    if args.event == "QEVT_ONWELCOME" then
    	--An dieser Stelle die ersten Scripte (in Cam-Pfad #1)
  		for index,heroRef in getHeroRefs() do   
  			changeCreature {     
  				not_in_quests_ref = heroRef,     
  				visible = false,     
        }
  		end
      playMovie { movie=MOVIE_INTRO }
    end
    if args.event == "QEVT_CUTSCENE" then
      -- param == 1000 --> movie has ended.
      local next_title
      if args.param == 1000 then
  		playCutScene { camera=11217, music = 28 }  
  	  changeCreature {
  			tcid = 7762,--Schildkroete -> Dient nur Atmo Zwecken.
  			behaviour = "JOB_QUESTSTAGING",
  			gotoPosition = {sx=20;sy=22;sz=0;px=1162.949219;py=1913.453125;pz=26.835602},
  			followUpAngle = 237.388458,
  			followUpBhv = "walkAround",
  		}
      return
      end
      if args.param == 1 then
  			-- Nach Scene #1 // In Scene #2
  			changeCreature {      
  				tcid = 2994, -- Schamane -> Talk Anim       
  				behaviour = "JOB_QUESTSTAGING",        
  				emotion = "ANIM_TYPE_TALK",
  				loopCount = -1,
  				--visible = true, --Schamanen wieder sichtbar machen
  			}
      end
      if args.param == 2 then
    		-- Nach Scene #2 // In Scene #3
  			setFixedListener {
  				position = toWorldPosition("20;22;0;1571.250000;1314.296875;19.962917;336.194061"),
  			}
  			playQuestSpeech {
  				tcid = 2994,
  				lokaid = "START_DR_SCRIPT",
  			}
  		end
  		if args.param == 3 then
  			-- Nach Scene #3 // In Scene #4
  			setFixedListener {
  				position = nil,
  			}
  			changeCreature {
  				tcid = 7760, --Gardistin 1 rennt den berg runter
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=20;sy=22;sz=0;px=1671.500000;py=1223.351563;pz=19.446575},
  				speed = 2,
  				followUpAngle = 237.388458,
  				bubble = 4,
  			}
  			changeCreature {
  				tcid = 7761, --Gardistin 2 rennt den berg runter
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=20;sy=22;sz=0;px=1532.851563;py=1303.148438;pz=323.314697},
  				speed = 2,
  				followUpAngle = 237.388458,
  				bubble = 4,
  			}
  			next_title = 1007
  		end
  		if args.param == 4 then
  			-- Nach Scene #4 // In Scene #5
  			teleport { 
  				tcid = 7760,--Gardist 1 auf den Berg ein wenig zuruecksetzen, sonst sind die zu nah!
  				position = {sx=20;sy=22;sz=0;px=1672.296875;py=1933.000000;pz=96.149086},
  				orientation = 181.453552,
  			}
  			teleport { 
  				tcid = 7761,--Gardist 2 auf den Berg ein wenig zuruecksetzen, sonst sind die zu nah!
  				position = {sx=20;sy=22;sz=0;px=1603.703125;py=1984.546875;pz=118.478752},
  				orientation = 233.021759,
  			}
  			changeCreature {
  				tcid = 7760, --Gardistin 1 rennt wieder den berg runter
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=20;sy=22;sz=0;px=1671.500000;py=1223.351563;pz=19.446575},
  				speed = 2,
  				followUpAngle = 237.388458,
  				delay = 0.1,
  				bubble = 4,
  			}
  			changeCreature {
  				tcid = 7761, --Gardistin 2 rennt wieder den berg runter
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=20;sy=22;sz=0;px=1532.851563;py=1303.148438;pz=323.314697},
  				speed = 2,
  				followUpAngle = 237.388458,
  				delay = 0.1,
  				bubble = 4,
  			}
  			changeCreature {
  				tcid = 2994, --Schamane rennt den Gardistinnen entgegen
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=20;sy=22;sz=0;px=1679.72400;py=1711.56700;pz=245.34900},
  				speed = 2,
  				followUpAngle = 177.130768,
  			}
  	  end
  		if args.param == 5 then
  			-- Nach Scene #5 // In Scene #6
  			teleport { 
  				tcid = 7760,--Gardist 1 auf Ausgangstellung fuer die Aufeinander zurenn szene von oben
  				position = {sx=20;sy=22;sz=0;px=1679.724875;py=1815.026000;pz=245.349086},
  				orientation = 181.453552,
  			}
  			teleport { 
  				tcid = 7761,--Gardist 2 auf Ausgangstellung fuer die Aufeinander zurenn szene von oben
  				position = {sx=20;sy=22;sz=0;px=1684.604125;py=1920.969875;pz=107.597752},
  				orientation = 233.021759,
  			}	
  			teleport { 
  				tcid = 2994,--Shamane auf Ausgangstellung fuer die Aufeinander zurenn szene von oben
  				position = {sx=20;sy=22;sz=0;px=1684.604125;py=1321.979875;pz=107.597752},
  				orientation = 233.021759,
  			}
  			changeCreature {
  				tcid = 7760, --Gardistin 1 rennt auf Schamane zu
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=20;sy=22;sz=0;px=1684.604125;py=1386.979875;pz=107.597752},
  				speed = 2,
  				followUpAngle = 237.388458,
  				delay = 0.1,
  				bubble = 4,
  			}
  			changeCreature {
  				tcid = 7761, --Gardistin 2 rennt auf Schamane zu
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=20;sy=22;sz=0;px=1684.604125;py=1386.979875;pz=107.597752},
  				speed = 2,
  				followUpAngle = 237.388458,
  				delay = 0.1,
  				bubble = 4,
  			}
  			changeCreature {
  				tcid = 2994, --Schamane rennt auf Gardisten zu
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=20;sy=22;sz=0;px=1679.724875;py=1740.026000;pz=245.349086},
  				speed = 2,
  				followUpAngle = 177.130768,
  				delay = 0.1,
  			}		
  			teleport {
  				tcid = 7765, --Dryade schonmal fuer die naechste Szene ausrichten
  				position = {sx=20;sy=22;sz=0;px=1605.709961;py=1342.020020;pz=20.067301},
  				orientation = 181.966461,
  			}
  	  end
  		if args.param == 6 then
  		-- Nach Scene #6 // In Scene #7
  		-- Die Leute beim Schnitt auf die perfekte Position teleportieren (vor dem Kampf)
  			changeCreature {
  				tcid = 7760, --Gardistin 1 auf invalid pos damit sie nicht weiter rennt nach dem teleport
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=0;sy=0;sz=-1;px=0;py=0;pz=0},
  				bubble = 4,
  			}	
  			teleport {
  				tcid = 7760,
  				position = {sx=20;sy=22;sz=0;px=1649.601563;py=1576.046875;pz=27.938837},
  				orientation = 29.823406,
  				delay = 0.1
  			}
  			changeCreature {
  				tcid = 7761, --Gardistin 2 auf invalid pos damit sie nicht weiter rennt nach dem teleport
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=0;sy=0;sz=-1;px=0;py=0;pz=0},
  				bubble = 4,
  			}
  			teleport {
  				tcid = 7761,
  				position = {sx=20;sy=22;sz=0;px=1682.601563;py=1581.250000;pz=26.457800},
  				orientation = 356.367188,
  				delay = 0.1,
  			}
  			changeCreature {
  				tcid = 2994, --Schamane auf invalid pos damit er nicht weiter rennt nach dem teleport
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=0;sy=0;sz=-1;px=0;py=0;pz=0},
  			}	
  			teleport {
  				tcid = 2994,
  				position = {sx=20;sy=22;sz=0;px=1680.898438;py=1545.453125;pz=32.670547},
  				orientation = 206.456314,
  				delay = 0.1,
  			}
  		--Die Gardistinnen toeten den Schamanen
  --			castSpell { --ATTACKA_ZW auf den Schamanen
  --			  caster=7760, 
  --			  target=2994,
  --			  slot=1,
  --				delay = 0.2,
  --			}
  --			castSpell { --ATTACKA_ZW auf den Schamanen
  --			  caster=7761, 
  --			  target=2994,
  --			  slot=1,
  --				delay = 0.2,
  --			}
  	
  			changeCreature {
  				tcid = 7760,
  				behaviour = "JOB_QUESTSTAGING",
  				emotion = "ANIM_TYPE_ATTACKA",
  				loopCount = 1,
  				bubble = 4,
  			}
  			changeCreature {
  				tcid = 7761,
  				behaviour = "JOB_QUESTSTAGING",
  				emotion = "ANIM_TYPE_ATTACKA",
  				loopCount = 1,
  				bubble = 4,
  			}
  			playQuestSpeech {
  				tcid = 2994,
  				lokaid = "QUEST_1074_SHAMAN_SCREAM",
  			}
  		--Schamane stirbt.
  			changeCreature {	--Schamane Todes Animation
  			  tcid = 2994,
  			  behaviour = "JOB_QUESTSTAGING",
  			  emotion = "ANIM_TYPE_SM19",
  			  loopCount = 1,
  			}
  			changeCreature {	--Schamane liegt tot auf dem Boden
  			  tcid = 2994,
  			  behaviour = "JOB_QUESTSTAGING",
  			  emotion = "ANIM_TYPE_SM20",
  			  loopCount = -1,
  			  delay = 5.04,
  			}
  
  			
  		end
  		if args.param == 7 then
  		-- Nach Scene #7 // In Scene #8
  		--Ab hier gehen die Gardistinnen weiter in Richtung der Dryade	
  --			changeCreature {
  --				tcid = 7760, --Gardistin 1 geht auf DR zu
  --				behaviour = "JOB_QUESTSTAGING",
  --				gotoPosition = {sx=20;sy=22;sz=0;px=1571.601563;py=1376.546875;pz=19.899618},
  --				followUpAngle = 2.942513,
  --			}
  --			changeCreature {
  --				tcid = 7761, --Gardistin 2 geht auf DR zu
  --				behaviour = "JOB_QUESTSTAGING",
  --				gotoPosition = {sx=20;sy=22;sz=0;px=1644.203125;py=1353.648438;pz=20.067480},
  --				followUpAngle = 336.305786,
  --			}
  			changeCreature {	--Dryade geht in Verteidigunshaltung
  				tcid = 7765,
  				behaviour = "JOB_QUESTSTAGING",
  				emotion = "ANIM_TYPE_DEFENSE",
  				loopCount = -1,
  			}
  		end
  		if args.param == 0 then
  			-- Ganz am Ende - Aufraeum-/Schluss-Scripts
  			stopQuestSpeech {
  				tcid = 2994,
  			}
  			setFixedListener {
  				position = nil,
  			}
  			local enemies = {
  				{
  					tcid = 7760, --Gardistin 1
  					end_pos = {sx=20;sy=22;sz=0;px=1649.601563;py=1576.046875;pz=27.938837},
  					angle = 2.942513,
  				},
  				{
  					tcid = 7761, --Gardistin 2
  					end_pos = {sx=20;sy=22;sz=0;px=1682.601563;py=1581.250000;pz=26.457800},
  					angle = 336.305786,
  				}
  			}
  			local destroy = {7765,7762}
  			for index,tcid in destroy do
  				destroyCreature { --Schildkroete entfernen
  					tcid = tcid,
  					splatter = false,
  				}
  			end
  			for id,object in enemies do
  				teleport { --Gardistinnen Endpositionen
  					tcid = object.tcid,
  					position = object.end_pos,
  					orientation = object.angle,
  				}
  				changeCreature { --Gardistinnen Behaviour/Faction
  					tcid = object.tcid,
  					faction = "FACTION_ENEMY_HERO",
  					behaviour = "Enemy_warrior_brave",
  					delay = 2,
  				}
  			end
  			for index,heroRef in getHeroRefs() do   
  				changeCreature {  --Hero wieder sichtbar machen 
  					not_in_quests_ref = heroRef,     
  					visible = true,     
  				}
  				teleportHero { --Hero auf die Endpos teleportieren
  					heroRef = heroRef,
  					noEffect = true,
  					position = {sx=20;sy=22;sz=0;px=1605.709961;py=1342.020020;pz=20.067301},
  					orientation = 181.966461,
  				}
  			end
  			changeCreature {
  				tcid = 2994, --Schamane auf invalid pos damit er nicht weiter rennt nach dem teleport
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=0;sy=0;sz=-1;px=0;py=0;pz=0},
  			}	
  			teleport {	--schamane auf endpos porten
  				tcid = 2994,
  				position = {sx=20;sy=22;sz=0;px=1680.898438;py=1545.453125;pz=32.670547},
  				orientation = 206.456314,
  				delay = 0.1,
  			}
  			changeCreature { --Schamanen tot auf den Boden legen
  				tcid = 2994,
  				behaviour = "JOB_QUESTSTAGING",
  				emotion = "ANIM_TYPE_SM20",
  				loopCount = -1,
  				dont_turn = true,
  				delay = 0.2,
  			}
  			feedback = nil
  			cutscenePosition = nil
  			return
  	  end
  	    nextCutScene {music=next_title}
  	end
  end
  

end

Platte2C = function(heroRef)
setWoobEffect {
    woid = 1049075981,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte2G = function(heroRef)
setWoobEffect {
    woid = 1049075994,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte2A = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049075976,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte5H = function(heroRef)
setWoobEffect {
    woid = 1049076139,
    effect = "FXTYPE_CHEST2G"
  }

end

_AREA_CENTER_DRAGON_SMALL = function(wpos)
--empty
  -- empty 
  -- creatures for area:
  -- Daytime: 1 is morning; 2 is daytime; 3 evening; 4 is night;
  -- Tags are: 1 - noble ; 2 - Kid ; 3 - Poor
  local AreaCreatures={
  -- highelve noble definition start
  	
  
  -- highelve child definition start
  
  	{
  		Tag=2,
  		CID=92,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=699,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=700,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=701,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=989,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=990,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=290,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=683,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=684,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=846,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=613,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=687,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=688,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=847,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  		
  
  -- highelve poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=575,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=576,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=320,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=322,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=997,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=998,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=999,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  	{
  		Tag=3,
  		CID=1000,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1001,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=330,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=324,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=983,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=984,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=985,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=978,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=332,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=979,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=980,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  	
  }
  
   local  points,numPoints = getSpawnPoints { position=wpos,radius=200 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end

end

_AREA_CENTER_LIZARD_2 = function(wpos)
--empty
  local AreaCreatures={
  
  -- LIZARD noble definition start (COLORED ORCS)
  	{
  		Tag=1,
  		CID=1047,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1473,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1474,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1475,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1476,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1477,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1827,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1828,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1829,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1830,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1831,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1832,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  	
  
  -- LIZARD children DO NOT EXIST -- NOT A BUG
  
  			
  
  -- LIZARD poor statist definition start (NEUTRAL ORCS)
  
  
  	{
  		Tag=3,
  		CID=1105,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=32,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1161,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=32,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1162,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=32,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1106,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=32,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1163,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=32,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1164,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=32,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  		
  }
  
  local  points,numPoints = getSpawnPoints { position=wpos,radius=400 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
     
  

end

cutscene_DR_good = function(args)
cutscenePosition = {sx=20;sy=22;sz=0;px=1605.709961;py=1342.020020;pz=20.067301}
  
  feedback = function(args)
    if args.event == "QEVT_ONWELCOME" then
    	--An dieser Stelle die ersten Scripte (in Cam-Pfad #1)
  		for index,heroRef in getHeroRefs() do   
  			changeCreature {     
  				not_in_quests_ref = heroRef,     
  				visible = false,     
        }
  		end
      playMovie { movie=MOVIE_INTRO }
    end
    if args.event == "QEVT_CUTSCENE" then
      -- param == 1000 --> movie has ended.
      local next_title
      if args.param == 1000 then
  		playCutScene { camera=11217, music = 26 }  
  	  changeCreature {
  			tcid = 7762,--Schildkroete -> Dient nur Atmo Zwecken.
  			behaviour = "JOB_QUESTSTAGING",
  			gotoPosition = {sx=20;sy=22;sz=0;px=1162.949219;py=1913.453125;pz=26.835602},
  			followUpAngle = 237.388458,
  		} 
      return
      end
      if args.param == 1 then
  			-- Nach Scene #1 // In Scene #2
  			changeCreature {      
  				tcid = 2994, -- Schamane -> Talk Anim       
  				behaviour = "JOB_QUESTSTAGING",        
  				emotion = "ANIM_TYPE_TALK",      
  				loopCount = -1,     
  				--visible = true, --Schamanen wieder sichtbar machen
  			}
      end
      if args.param == 2 then
    			-- Nach Scene #2 // In Scene #3
  				setFixedListener {
  					position = toWorldPosition("20;22;0;1571.250000;1314.296875;19.962917;336.194061"),
  				}
          playQuestSpeech {
            tcid = 2994,
            lokaid = "START_DR_SCRIPT",
          }
  		end
  		if args.param == 3 then
  			-- Nach Scene #3 // In Scene #4
  				setFixedListener {
  					position = nil,
  				}
  			changeCreature {
  				tcid = 7760, --Gardistin 1 rennt den berg runter
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=20;sy=22;sz=0;px=1671.500000;py=1223.351563;pz=19.446575},
  				speed = 2,
  				followUpAngle = 237.388458,
  				bubble = 4,
  			}
  			changeCreature {
  				tcid = 7761, --Gardistin 2 rennt den berg runter
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=20;sy=22;sz=0;px=1532.851563;py=1303.148438;pz=323.314697},
  				speed = 2,
  				followUpAngle = 237.388458,
  				bubble = 4,
  			}
  			next_title = 1007
  		end
  	
  		if args.param == 4 then
  			-- Nach Scene #4 // In Scene #5
  			teleport { 
  				tcid = 7760,--Gardist 1 auf den Berg ein wenig zuruecksetzen, sonst sind die zu nah!
  				position = {sx=20;sy=22;sz=0;px=1672.296875;py=1933.000000;pz=96.149086},
  				orientation = 181.453552,
  			}
  			teleport { 
  				tcid = 7761,--Gardist 2 auf den Berg ein wenig zuruecksetzen, sonst sind die zu nah!
  				position = {sx=20;sy=22;sz=0;px=1603.703125;py=1984.546875;pz=118.478752},
  				orientation = 233.021759,
  			}
  			changeCreature {
  				tcid = 7760, --Gardistin 1 rennt wieder den berg runter
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=20;sy=22;sz=0;px=1671.500000;py=1223.351563;pz=19.446575},
  				speed = 2,
  				followUpAngle = 237.388458,
  				delay = 0.1,
  				bubble = 4,
  			}
  			changeCreature {
  				tcid = 7761, --Gardistin 2 rennt wieder den berg runter
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=20;sy=22;sz=0;px=1532.851563;py=1303.148438;pz=323.314697},
  				speed = 2,
  				followUpAngle = 237.388458,
  				delay = 0.1,
  				bubble = 4,
  			}
  			changeCreature {
  				tcid = 2994, --Schamane rennt den Gardistinnen entgegen
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=20;sy=22;sz=0;px=1679.72400;py=1711.56700;pz=245.34900},
  				speed = 2,
  				followUpAngle = 177.130768,
  			}
  	  end
  		if args.param == 5 then
  			-- Nach Scene #5 // In Scene #6
  			teleport { 
  				tcid = 7760,--Gardist 1 auf Ausgangstellung fuer die Aufeinander zurenn szene von oben
  				position = {sx=20;sy=22;sz=0;px=1679.724875;py=1815.026000;pz=245.349086},
  				orientation = 181.453552,
  			}
  			teleport { 
  				tcid = 7761,--Gardist 2 auf Ausgangstellung fuer die Aufeinander zurenn szene von oben
  				position = {sx=20;sy=22;sz=0;px=1684.604125;py=1920.969875;pz=107.597752},
  				orientation = 233.021759,
  			}	
  			teleport { 
  				tcid = 2994,--Shamane auf Ausgangstellung fuer die Aufeinander zurenn szene von oben
  				position = {sx=20;sy=22;sz=0;px=1684.604125;py=1321.979875;pz=107.597752},
  				orientation = 233.021759,
  			}
  			changeCreature {
  				tcid = 7760, --Gardistin 1 rennt auf Schamane zu
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=20;sy=22;sz=0;px=1684.604125;py=1386.979875;pz=107.597752},
  				speed = 2,
  				followUpAngle = 237.388458,
  				delay = 0.1,
  				bubble = 4,
  			}
  			changeCreature {
  				tcid = 7761, --Gardistin 2 rennt auf Schamane zu
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=20;sy=22;sz=0;px=1684.604125;py=1386.979875;pz=107.597752},
  				speed = 2,
  				followUpAngle = 237.388458,
  				delay = 0.1,
  				bubble = 4,
  			}
  			changeCreature {
  				tcid = 2994, --Schamane rennt auf Gardisten zu
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=20;sy=22;sz=0;px=1679.724875;py=1740.026000;pz=245.349086},
  				speed = 2,
  				followUpAngle = 177.130768,
  				delay = 0.1,
  			}		
  			teleport {
  				tcid = 7765, --Dryade schonmal fuer die naechste Szene ausrichten
  				position = {sx=20;sy=22;sz=0;px=1605.709961;py=1342.020020;pz=20.067301},
  				orientation = 181.966461,
  			}
  	  end
  		if args.param == 6 then
  		-- Nach Scene #6 // In Scene #7
  		-- Die Leute beim Schnitt auf die perfekte Position teleportieren (vor dem Kampf)
  			changeCreature {
  				tcid = 7760, --Gardistin 1 auf invalid pos damit sie nicht weiter rennt nach dem teleport
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=0;sy=0;sz=-1;px=0;py=0;pz=0},
  				bubble = 4,
  			}	
  			teleport {
  				tcid = 7760,
  				position = {sx=20;sy=22;sz=0;px=1649.601563;py=1576.046875;pz=27.938837},
  				orientation = 29.823406,
  				delay = 0.1
  			}
  			changeCreature {
  				tcid = 7761, --Gardistin 2 auf invalid pos damit sie nicht weiter rennt nach dem teleport
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=0;sy=0;sz=-1;px=0;py=0;pz=0},
  				bubble = 4,
  			}
  			teleport {
  				tcid = 7761,
  				position = {sx=20;sy=22;sz=0;px=1682.601563;py=1581.250000;pz=26.457800},
  				orientation = 356.367188,
  				delay = 0.1,
  			}
  			changeCreature {
  				tcid = 2994, --Schamane auf invalid pos damit er nicht weiter rennt nach dem teleport
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=0;sy=0;sz=-1;px=0;py=0;pz=0},
  			}	
  			teleport {
  				tcid = 2994,
  				position = {sx=20;sy=22;sz=0;px=1680.898438;py=1545.453125;pz=32.670547},
  				orientation = 206.456314,
  				delay = 0.1,
  			}
  		--Die Gardistinnen toeten den Schamanen
  --			castSpell { --ATTACKA_ZW auf den Schamanen
  --			  caster=7760, 
  --			  target=2994,
  --			  slot=1,
  --				delay = 0.2,
  --			}
  --			castSpell { --ATTACKA_ZW auf den Schamanen
  --			  caster=7761, 
  --			  target=2994,
  --			  slot=1,
  --       delay = 0.2,
  --			}
  
  			changeCreature {
  				tcid = 7760,
  				behaviour = "JOB_QUESTSTAGING",
  				emotion = "ANIM_TYPE_ATTACKA",
  				loopCount = 1,
  				bubble = 4,
  			}
  			changeCreature {
  				tcid = 7761,
  				behaviour = "JOB_QUESTSTAGING",
  				emotion = "ANIM_TYPE_ATTACKA",
  				loopCount = 1,
  				bubble = 4,
  			}
  			playQuestSpeech {
  				tcid = 2994,
  				lokaid = "QUEST_1074_SHAMAN_SCREAM",
  			}
  		--Schamane stirbt.
  			changeCreature {	--Schamane Todes Animation
  			  tcid = 2994,
  			  behaviour = "JOB_QUESTSTAGING",
  			  emotion = "ANIM_TYPE_SM19",
  			  loopCount = 1,
  			}
  			changeCreature {	--Schamane liegt tot auf dem Boden
  			  tcid = 2994,
  			  behaviour = "JOB_QUESTSTAGING",
  			  emotion = "ANIM_TYPE_SM20",
  			  loopCount = -1,
  			  delay = 5.04,
  			}
  
  			
  		end
  		if args.param == 7 then
  		-- Nach Scene #7 // In Scene #8
  		--Ab hier gehen die Gardistinnen weiter in Richtung der Dryade	
  --			changeCreature {
  --				tcid = 7760, --Gardistin 1 geht auf Schamane zu
  --				behaviour = "JOB_QUESTSTAGING",
  --				gotoPosition = {sx=20;sy=22;sz=0;px=1571.601563;py=1376.546875;pz=19.899618},
  --				followUpAngle = 2.942513,
  --			}
  --			changeCreature {
  --				tcid = 7761, --Gardistin 2 geht auf Schamane zu
  --				behaviour = "JOB_QUESTSTAGING",
  --				gotoPosition = {sx=20;sy=22;sz=0;px=1644.203125;py=1353.648438;pz=20.067480},
  --				followUpAngle = 336.305786,
  --			}
  			changeCreature {	--Dryade geht in Verteidigunshaltung
  				tcid = 7765,
  				behaviour = "JOB_QUESTSTAGING",
  				emotion = "ANIM_TYPE_DEFENSE",
  				loopCount = -1,
  			}
  		end
  		if args.param == 0 then
  			-- Ganz am Ende - Aufraeum-/Schluss-Scripts
  			stopQuestSpeech {
  				tcid = 2994,
  			}
  				setFixedListener {
  					position = nil,
  				}
  			local enemies = {
  				{
  					tcid = 7760, --Gardistin 1
  					end_pos = {sx=20;sy=22;sz=0;px=1649.601563;py=1576.046875;pz=27.938837},
  					angle = 2.942513,
  				},
  				{
  					tcid = 7761, --Gardistin 2
  					end_pos = {sx=20;sy=22;sz=0;px=1682.601563;py=1581.250000;pz=26.457800},
  					angle = 336.305786,
  				}
  			}
  			local destroy = {7765,7762}
  			for index,tcid in destroy do
  				destroyCreature { --Schildkroete entfernen
  					tcid = tcid,
  					splatter = false,
  				}
  			end
  			for id,object in enemies do
  				changeCreature { --Gardistinnen Behaviour/Faction
  					tcid = object.tcid,
  					faction = "FACTION_ENEMY_HERO",
  					behaviour = "Enemy_warrior_brave",
  					delay = 2,
  				}
  				teleport { --Gardistinnen Endpositionen
  					tcid = object.tcid,
  					position = object.end_pos,
  					orientation = object.angle,
  				}
  			end
  			for index,heroRef in getHeroRefs() do   
  				changeCreature {  --Hero wieder sichtbar machen 
  					not_in_quests_ref = heroRef,     
  					visible = true,     
  				}
  				teleportHero { --Hero auf die Endpos teleportieren
  					heroRef = heroRef,
  					noEffect = true,
  					position = {sx=20;sy=22;sz=0;px=1605.709961;py=1342.020020;pz=20.067301},
  					orientation = 181.966461,
  				}
  			end
  			changeCreature {
  				tcid = 2994, --Schamane auf invalid pos damit er nicht weiter rennt nach dem teleport
  				behaviour = "JOB_QUESTSTAGING",
  				gotoPosition = {sx=0;sy=0;sz=-1;px=0;py=0;pz=0},
  			}	
  			teleport {	--schamane auf endpos porten
  				tcid = 2994,
  				position = {sx=20;sy=22;sz=0;px=1680.898438;py=1545.453125;pz=32.670547},
  				orientation = 206.456314,
  				delay = 0.1,
  			}
  			changeCreature { --Schamanen tot auf den Boden legen
  				tcid = 2994,
  				behaviour = "JOB_QUESTSTAGING",
  				emotion = "ANIM_TYPE_SM20",
  				loopCount = -1,
  				dont_turn = true,
  				delay = 0.2,
  			}
  			feedback = nil
  			cutscenePosition = nil
  			return
  	  end
  	    nextCutScene {music=next_title}
  	end
  end
  

end


--This function will be called if you talk to a taskcreature (TCID).
--
--Arguments:
--
--args.tcid    is the ID if the clicked taskcreature
--args.heroRef is the current hero
--args.id      is the current quest ID
--args.state   is the state of the current quest ("WON", "LOST", "TASK_AWAITING", ...)
--
--You have to return the new LOKA-ID as a string. As secondary return value you can override the current dialog type, if necessary. false=ok-dialog,true=accept-reject-dialog.
--
--Example:
--
--return "PATA_PATA_PATA_PON"
--return "PATA_PATA_PATA_PON", true   -- we want an ACCEPT_REJECT dialog.

cutscene_SE_good = function(args)
cutscenePosition = toWorldPosition("17;27;0;2650.000000;2550.000000;702.140381;0.000000")
  
  feedback = function(args)
    if args.event == "QEVT_ONWELCOME" then
    	--An dieser Stelle die ersten Scripte (in Cam-Pfad #1) --Fernsicht auf das Haus
    	for index,heroRef in getHeroRefs() do
        changeCreature { --Held unsichtbar schalten!
          not_in_quests_ref = heroRef,
          visible = false,
        }
      end
      local nun = {8611,8612,8613,8614,8615,8616}
      for index,tcid in nun do
        changeCreature {
          tcid = tcid,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_EM24",
          loopCount = -1,
        }
      end
      playMovie { movie = MOVIE_INTRO }
    end
    if args.event == "QEVT_CUTSCENE" then
      local next_title
      if args.param == 1000 then
        playCutScene { camera = 11411, music = 57 }  
        return
      end
      if args.param == 1 then
  			--Nach Scene #1 // In Scene #2
  			setFixedListener {
  				position = toWorldPosition("17;27;0;2532.265625;2766.164063;719.243164;207.576096"),
  			}
        playQuestSpeech { -- erster Text der sterbenden Seraphim
          lokaid = "START_SE_SCRIPT", --StringID muss umbenannt werden in "QUEST_1061_GIVER_PRE" oder aehnliches
          tcid = 2978,
        }
      end
      if args.param == 2 then
    		-- Nach Scene #2 // In Scene #3
        -- Hier sieht man die Spieler Seraphim (Klon) mit 2 Nonnen den Weg zum Turm entlang laufen.
        local run = {
          {
            tcid = 9125,  --Seraphim Klon
            pos = toWorldPosition("17;27;0;2630.000000;2581.148438;702.140381;208.762238"),
            angle = 208.762238,
          },
          {
            tcid = 8617,  --Nonne 1
            pos = toWorldPosition("17;27;0;2691.539063;2568.375000;701.963684;339.037384"),
            angle = 339.037384,
          },
          {
            tcid = 8618,  --Nonne 2
            pos = toWorldPosition("17;27;0;2608.800781;2519.546875;701.963684;11.777924"),
            angle = 11.777924,
          }
        }
        for id,object in run do
          changeCreature {
            tcid = object.tcid,
            behaviour = "JOB_QUESTSTAGING",
            gotoPosition = object.pos,
            followUpAngle = object.angle,
            followUpBhv = "JOB_QUESTSTAGING",
            speed = 2,
          }
        end 
        next_title = 102       
  		end
  		if args.param == 3 then
  			-- Nach Scene #3 // In Scene #4
        setWoobState {  -- Die Tuer des Turms von innen -> geht auf.
          woid = 1010787153,
          state = "WOOB_DOOR_OPEN",
        }
        --Die beiden Nonnen werden auf die perfekte Position teleportiert:
        teleport {  --Nonne 1
          tcid = 8617,
          position = toWorldPosition("17;27;0;2691.539063;2568.375000;701.963684;339.037384"),
          orientation = 339.037384,
        }
        teleport {  --Nonne 2
          tcid = 8618,
          position = toWorldPosition("17;27;0;2608.800781;2519.546875;701.963684;11.777924"),
          orientation = 11.777924,
        }
        --Seraphim Klon betritt langsam das Kloster. Nonnen nach links und rechts, Sera Klon direkt vor den Altar
        changeCreature {  --Seraphim
          tcid = 9125,
          behaviour = "JOB_QUESTSTAGING",
          gotoPosition = toWorldPosition("17;27;0;2563.140625;2710.585938;705.028564;214.432648"),
          followUpAngle = 214.432648,
          followUpBhv = "JOB_QUESTSTAGING",
        }
  		end
  		if args.param == 4 then
  			-- Nach Scene #4 // In Scene #5
        next_title = 99
        -- sterbende Seraphim spricht zu der Seraphim
        setWoobState {  -- Die Tuer des Turms geht zu.
          woid = 1010787153,
          state = "WOOB_DOOR_CLOSE",
        }
  			setFixedListener {
  				position = toWorldPosition("17;27;0;2532.265625;2766.164063;719.243164;207.576096"),
  			}
        playQuestSpeech {
          lokaid = "QUEST_1061_GIVER_START",
          tcid = 2978,
        }
        --Seraphim auf perfekte Position Porten:
        changeCreature {  --Seraphim
          tcid = 9125,
          behaviour = "JOB_QUESTSTAGING",
          gotoPosition = toWorldPosition("0;0;-1;0;0;0;0"),
          --followUpAngle = 214.432648,
          followUpBhv = "JOB_QUESTSTAGING",
        }
        teleport {
          tcid = 9125,
          position = toWorldPosition("17;27;0;2563.140625;2710.585938;705.028564;214.432648"),
          orientation = 214.432648,
        }
  			changeCreature {  --Seraphim
          tcid = 9125,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_IDLE",
          loopCount = -1,
        }
        destroyCreature {
          tcid = 8617,
          splatter = false,
        }
        destroyCreature {
          tcid = 8618,
          splatter = false,
        }
  	  end
      if args.param == 5 then
        --Nach Scene #5 // In Scene #6
        -- sterbende Seraphim stirbt nun endlich richtig!
        changeCreature {  -- sterbende Seraphim auf MORTAL stellen
          tcid = 2978,
          mortality = "MORTAL",
        }
        killCreature {  -- sterbende Seraphim stirbt
          tcid = 2978,
          delay = 0.1,
        }
        next_title = 98
      end
      if args.param == 6 then
        --Nach Scene #6 // In Scene #7
        -- Spieler Seraphim verlaesst den Turm
        setWoobState {  -- Die Tuer des Turms geht auf
          woid = 1010787153,
          state = "WOOB_DOOR_OPEN",
        }
        changeCreature {  --Seraphim
          tcid = 9125,
          behaviour = "JOB_QUESTSTAGING",
          gotoPosition = toWorldPosition("17;27;0;2650.000000;2550.000000;702.140381;0.000000"),
          followUpAngle = 0,
        }
      end      
      if args.param == 7 then
        --Nach Scene #7 // In Scene #8
        -- Tuer geht wieder zu
        setWoobState {  -- Die Tuer des Turms geht 
          woid = 1010787153,
          state = "WOOB_DOOR_CLOSE",
        }
      end
  		if args.param == 0 then
        --Aufraeumscript am Ende der Szene / bei Abbruch
  			stopQuestSpeech {
  				tcid = 2978,
  			}
  			setFixedListener {
  				position = nil,
  			}
        destroyCreature {
          tcid = 8617,
          splatter = false,
        }
        destroyCreature {
          tcid = 8618,
          splatter = false,
        }
        setWoobState {  -- Die Tuer des Turms geht am Ende zu
          woid = 1010787153,
          state = "WOOB_DOOR_CLOSE",
        }
      	for index,heroRef in getHeroRefs() do
          changeCreature { --Held sichtbar schalten!
            not_in_quests_ref = heroRef,
            visible = true,
          }
          teleportHero {
            heroRef = heroRef,
            noEffect = true,
            position = toWorldPosition("17;27;0;2650.000000;2550.000000;702.140381;0.000000"),
            orientation = 0,
          }
        end
        destroyCreature { --Seraphim Klon entfernen
          tcid = 9125,
          splatter = false,
        }
        changeCreature {  -- sterbende Seraphim auf MORTAL stellen
          tcid = 2978,
          mortality = "MORTAL",
        }
        killCreature {  -- sterbende Seraphim stirbt
          tcid = 2978,
          delay = 0.1,
        }
  			feedback = nil
  			cutscenePosition = nil
  			return
  	  end
  	    nextCutScene {music = next_title}
  	end
  end
  

end

creatureGotoPositionA = function(tcid, position,angle)
changeCreature{
  	tcid = tcid,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = { 
  		sx=position[1], 
  		sy=position[2], 
  		sz=position[3],
  		px=position[4], 
  		py=position[5], 
  		pz=position[6] 
  	},
  	followUpAngle = angle,
  }

end


--
--Transforms Creature into creatureid after delay seconds.

transformCreature = function(tcid, creatureid, delay)

  changeCreature {
  	tcid = tcid,
  	creature = creatureid,
  	delay = delay
  }
  	

end

_AREA_CENTER_HE_BACKUP_3 = function(wpos)
-- creatures for area:
  -- Daytime: 1 is morning; 2 is daytime; 3 evening; 4 is night;
  -- Tags are: 1 - noble ; 2 - Kid ; 3 - Poor
  local AreaCreatures={
  -- highelve noble definition start
  	
  
  -- highelve child definition start
  
  	{
  		Tag=2,
  		CID=92,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=699,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=700,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=701,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=989,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=990,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=290,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=683,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=684,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=846,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=613,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=687,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=688,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  	{
  		Tag=2,
  		CID=847,
  		Behaviour="JOB_KID",
  		Faction=14,
  		Equipment=43,
  		--Daytime={1=true,2=true,3=true,4=false},
  	
  	},
  		
  
  -- highelve poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=575,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=576,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=320,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=322,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=997,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=998,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=999,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  
  	{
  		Tag=3,
  		CID=1000,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1001,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=330,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=324,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=983,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=984,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=985,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=978,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=332,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=979,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=980,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=12,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  	
  }
  
   local  points,numPoints = getSpawnPoints { position=wpos,radius=50 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end

end

_AREA_CENTER_DRYADS_BACKUP_3 = function(wpos)
--empty
  -- empty 
  
  local AreaCreatures={
  
  -- DRYAD noble definition start
  	{
  		Tag=1,
  		CID=218,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=219,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=220,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=221,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=222,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=223,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=224,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=225,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  
  
  -- DRYAD child definition start
  
  	{
  		Tag=2,
  		CID=294,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=533,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1600,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1688,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1689,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1690,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1691,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=295,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=534,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1601,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	
  
  -- DRYAD poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=1500,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  
  	{
  		Tag=3,
  		CID=1569,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1570,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1602,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1603,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1604,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1605,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1625,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1692,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1693,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1694,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1695,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1696,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1697,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1698,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1699,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1479,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1480,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1481,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1482,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1565,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1566,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1567,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1568,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1700,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1701,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1702,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1703,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1704,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1705,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1706,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1707,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1708,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	
  	
  	
  }
  
  
  	local  points,numPoints = getSpawnPoints { position=wpos,radius=100 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
  
     

end


--de- or increase the total value of the heroes gold
--
--returns false if you want to decrease more than the player has
--
--returns true when it was possible to change the value

addGold = function(value)

  local current = getGold();
  local value2 = value*(-1);
  
  if value < 0 and value2 > current then
  	return false;
  else 
  	new = current + value;
  	setGold( new );
  	return true;
  end
  

end


--NOT YET IMPLEMENTED !!!

creatureGotoPosition = function(tcid, position)
changeCreature{
  	tcid = tcid,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = { 
  		sx=position[1], 
  		sy=position[2], 
  		sz=position[3],
  		px=position[4], 
  		py=position[5], 
  		pz=position[6] 
  	}
  }

end

_AREA_CENTER_DESERT_TOWN = function(wpos)

  local AreaCreatures={
  
  -- DESERT noble definition start
  	{
  		Tag=1,
  		CID=1464,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1647,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1465,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1466,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1467,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1642,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1643,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1644,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1645,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1646,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1493,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1652,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1494,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},	
  	{
  		Tag=1,
  		CID=1495,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1496,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1573,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1648,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1649,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1650,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1651,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	
  
  
  -- DESERT child definition start
  
  	{
  		Tag=2,
  		CID=962,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1216,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1217,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1218,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1219,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=481,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1575,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1576,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1577,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=480,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1212,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1213,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1214,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1215,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1492,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1578,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1579,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1580,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	
  	
  
  
  
  		
  
  -- DESERT poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=476,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1659,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1220,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1221,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1222,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1223,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1653,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1655,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1657,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1658,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=477,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1662,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1497,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1498,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1499,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1654,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1656,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1660,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1661,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	
  	
  	
  }
  
  	local  points,numPoints = getSpawnPoints { position=wpos,radius=400 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
  
     
    
  

end

_AREA_CENTER_DRYADS_BACKUP_2 = function(wpos)
--empty
  -- empty 
  
  local AreaCreatures={
  
  -- DRYAD noble definition start
  	{
  		Tag=1,
  		CID=218,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=219,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=220,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=221,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=222,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=223,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=224,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=225,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=17,
  		Equipment=34,
  		
  	},
  
  
  -- DRYAD child definition start
  
  	{
  		Tag=2,
  		CID=294,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=533,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1600,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1688,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1689,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1690,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1691,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=295,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=534,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1601,
  		Behaviour="JOB_KID",
  		Faction=17,
  		Equipment=43,
  			
  	},
  	
  
  -- DRYAD poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=1500,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  
  	{
  		Tag=3,
  		CID=1569,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1570,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1602,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1603,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1604,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1605,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1625,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1692,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1693,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1694,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1695,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1696,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1697,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1698,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1699,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1479,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1480,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1481,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1482,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1565,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1566,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1567,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1568,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1700,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1701,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1702,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1703,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1704,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1705,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1706,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1707,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1708,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=17,
  		Equipment=33,
  			
  	},
  	
  	
  	
  }
  
  
  	local  points,numPoints = getSpawnPoints { position=wpos,radius=150 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
  
     

end

Platte2B = function(heroRef)
setWoobEffect {
    woid = 1049075978,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte2F = function(heroRef)
setWoobEffect {
    woid = 1049075991,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte2H = function(heroRef)
setWoobEffect {
    woid = 1049075996,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte3A = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076000,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte3D = function(heroRef)
setWoobEffect {
    woid = 1049076007,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte3G = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076017,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte2D = function(heroRef)
setWoobEffect {
    woid = 1049075983,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte5A = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076122,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte5B = function(heroRef)
setWoobEffect {
    woid = 1049076124,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte5C = function(heroRef)
setWoobEffect {
    woid = 1049076126,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte5D = function(heroRef)
setWoobEffect {
    woid = 1049076128,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte5E = function(heroRef)
setWoobEffect {
    woid = 1049076130,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte5F = function(heroRef)
setWoobEffect {
    woid = 1049076132,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte5G = function(heroRef)
setWoobEffect {
    woid = 1049076137,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte7A = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076165,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte7B = function(heroRef)
setWoobEffect {
    woid = 1049076168,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte7G = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076181,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte8F = function(heroRef)
setWoobEffect {
    woid = 1049076198,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte8G = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076205,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte8G = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076201,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte8A = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076186,
    --effect = "FXTYPE_CHEST2R"
  --}

end

krypta_eod = function(heroRef)
if getQuestState(3771) == "TASK_FULFILLED" then
    teleportHero {
      heroRef = heroRef,
  	  position = toWorldPosition("53;6;0;2500.000000;1600.000000;859.083252;140.000000"),
  	  orientation = 140,
  	  --noEffect = true,
    }
  end 

end

Drachenmagier = function(heroRef)
if 	getQuestState(3635) == "TASK_AWAITING" 	or 
  		getQuestState(3635) == "TASK_FULFILLED" or 
  		getQuestState(3634) == "TASK_AWAITING"	or
  		getQuestState(3634) == "TASK_FULFILLED" 	then
  
  	teleportHero {
  		heroRef = heroRef,
  		position = toWorldPosition("22;24;0;150.148438;2240.500000;13.666462;187.765152"),
  		orientation = 184.927094,
  		noEffect = true,
  	}
  else
  	return
  end
  

end

Platte1H = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049075970,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte3C = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076005,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte3H = function(heroRef)
setWoobEffect {
    woid = 1049076020,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte4B = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076027,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte4C = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076029,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte4D = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076031,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte4E = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076034,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte4F = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076038,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte6B = function(heroRef)
setWoobEffect {
    woid = 1049076148,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte6C = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076150,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte6D = function(heroRef)
-- dungeon 2
  
  teleportHero {
  	heroRef = heroRef,
  	position = toWorldPosition("57;8;-1;1413.796875;1171.300781;-200.017624;181.782944"),
  	orientation = 181.782944,
  	noEffect = true,
  }
  
  --setWoobEffect {
    --woid = 1049076153,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte6A = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076144,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte6E = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076155,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte6F = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076158,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte6G = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076160,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte6H = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076162,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte7C = function(heroRef)
setWoobEffect {
    woid = 1049076171,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte7D = function(heroRef)
setWoobEffect {
    woid = 1049076173,
    effect = "FXTYPE_CHEST2G"
  }

end

Platte7E = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076175,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte7F = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076178,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte7H = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076183,
    --effect = "FXTYPE_CHEST2R"
  --}

end


--NOT YET IMPLEMENTED !!!

creatureTeleportsAway = function(tcid, delay)
if delay == nil then
  	delay = 0
  end
  
  creatureTeleportPosition(tcid,delay,{0,0,0,0,0,0})
  

end

_AREA_CENTER_DESERT_BACKUP_3 = function(wpos)
--empty
  
  local AreaCreatures={
  
  -- DESERT noble definition start
  	{
  		Tag=1,
  		CID=1464,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1647,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1465,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1466,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1467,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1642,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1643,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1644,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1645,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1646,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1493,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1652,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1494,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},	
  	{
  		Tag=1,
  		CID=1495,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1496,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1573,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1648,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1649,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1650,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1651,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	
  
  
  -- DESERT child definition start
  
  	{
  		Tag=2,
  		CID=962,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1216,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1217,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1218,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1219,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=481,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1575,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1576,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1577,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=480,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1212,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1213,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1214,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1215,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1492,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1578,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1579,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1580,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	
  	
  
  
  
  		
  
  -- DESERT poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=476,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1659,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1220,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1221,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1222,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1223,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1653,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1655,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1657,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1658,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=477,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1662,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1497,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1498,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1499,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1654,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1656,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1660,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1661,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	
  	
  	
  }
  
  	local  points,numPoints = getSpawnPoints { position=wpos,radius=100 }
  	--local richmax = 2
  	--local richcounter = 0  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  	--	if AreaCreatures[randomnumber].Tag = 1 then 
  		--	richcounter = richcounter + 1
  			--if richcounte== richmax then 
  	
  			--else
  
  			--end
  	--end
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
  
     
    
  

end

cutscene_HE_good = function(args)
cutscenePosition = toWorldPosition("19;24;0;633.105469;1008.164063;1093.987061;19;24;0;633.105469;1008.164063;1093.987061;118.467346")
  
  changeCreature {
  	tcid = 2986,
  	livesRemaining = 1,
  	useUnconscious = true, -- schickt jedesmal einen kill an die killquest!
  	unconsciousTime = 3,
  }
  ----------------------------------------------------------------------
  
  feedback = function(args)
    if args.event == "QEVT_ONWELCOME" then
  
  		for index,heroRef in getHeroRefs() do   
  			changeCreature { --Hero unsichtbar schalten
  				not_in_quests_ref = heroRef,     
  				visible = false,     
  			}
  		end
      
      playMovie { movie=MOVIE_INTRO }
    end
    if args.event == "QEVT_CUTSCENE" then
    local next_title
    -- 1000 = movie has ended.
    if args.param == 1000 then
      playCutScene { camera=11093, music = 5 }
      changeCreature {	--Hase laeuft kurz durchs Bild
        tcid = 7921,
        behaviour = "JOB_QUESTSTAGING",
        gotoPosition = {sx=19;sy=24;sz=0;px=747.550781;py=1303.648438;pz=1095.624512},
        speed = 2,
        followUpAngle = 327.600861,
        followUpBhv = "rabbit",
      }
      changeCreature {	--Student Freundlich schalten
        tcid = 2986,   
        behaviour = "JOB_QUESTSTAGING",   
        faction = "FACTION_FRIEND_HERO_ALL",   
        role = "ROLE_INVALID", 
      }
      return
    end
    
    if args.param == 2 then
        changeCreature { --Erzmagier faengt an zu reden
  		    tcid = 2987,       
  		    behaviour = "JOB_QUESTSTAGING",        
  		    emotion = "ANIM_TYPE_TALK",      
  		    loopCount = -1,        
  		  }
  			setFixedListener {
  				position = toWorldPosition("19;24;0;634.210938;1147.992188;1095.355469;243.762177"),
  			}
        playQuestSpeech { --Text des Magiers
          lokaid = "QUEST_1067_GIVER_START", 
          tcid = 2987,
        }
    end
    if args.param == 3 then
  			setFixedListener {
  				position = nil,
  			}
  	  changeCreature { --Erzmagier hoert auf zu reden
    		tcid = 2987,       
    		behaviour = "JOB_QUESTSTAGING",        
    		emotion = "ANIM_TYPE_EM01",      
    		loopCount = 1,        
  	  }
  	  changeCreature {      --Student geht auf Position
    		tcid = 2986,      
    		behaviour = "JOB_QUESTSTAGING",     
    		gotoPosition = {sx=19,sy=24,sz=0,px=843.449219,py=1081.953125,pz=1092.012695},      
    		followUpAngle = 288,      
    		followUpBhv = "questCreatures",      
  	  }
  	  changeCreature {     --Helf geht auf Position
    		tcid = 7113,      
    		behaviour = "JOB_QUESTSTAGING",      
    		gotoPosition = {sx=19,sy=24,sz=0,px=633.105469,py=1008.164063,pz=1093.987061},      
    		followUpAngle = 118.467346,     
    		followUpBhv = "questCreatures",      
  	  }
      next_title = 1009
    end
  		if args.param == 4 then
  			teleport {	--Student auf Position zum reden
  				tcid = 2986,
  				position = {sx=19,sy=24,sz=0,px=843.449219,py=1081.953125,pz=1092.012695},
  				orientation = 288,
  			}
  			changeCreature {   --Student Redet   
  		    tcid = 2986,      
  		    behaviour = "JOB_QUESTSTAGING",      
  		    emotion = "ANIM_TYPE_EM08",      
  		    loopCount = 1,       
  		  }
        --playQuestSpeech { --Text des Studenten
        --  lokaid = "", 
        --  tcid = 2986,
        --}
        
  		  --changeCreature {	--Student Nickt kurz
  		  -- 	tcid = 2986,   
  			--	behaviour = "JOB_QUESTSTAGING",   
  			--	emotion = "ANIM_TYPE_EM01",   
  			--	delay = 3.000000, --Delay anpassen, wenn das Sprachsample da ist
  		  --}
  		end
  		if args.param == 0 then
  			stopQuestSpeech {
  				tcid = 2987,
  			}
  			setFixedListener {
  				position = nil,
  			}
  			for index,heroRef in getHeroRefs() do 
  		    teleportHero {   --Held auf Endposition porten
  			    position =  toWorldPosition("19;24;0;633.105469;1008.164063;1093.987061;118.467346"),   
  					heroRef = heroRef,   
  					noEffect = true,   
  					orientation = 118.467346,   
  		    }
  				changeCreature {	--Held sichtbar schalten
  				  not_in_quests_ref = heroRef,     
  				  visible = true,     
  				  delay = 0.5,
  				}
  			end
  			destroyCreature {	--Hero Klon entfernen
  				tcid = 7113,  
  				splatter = false,
  				delay = 0.5
  			}
  			changeCreature {	--Student Feindlich schalten
  				tcid = 2986,   
  				behaviour = "Enemy_trap_magic",   
  				faction = "FACTION_ENEMY_HERO",   
  				role = "ROLE_ATTACKER",   
  				delay = 2, 
  			}
  			changeCreature { --Magier Behaviour aendern, damit er wieder zuschaut
  				tcid = 7506,
  				behaviour = "JOB_QUESTSTAGING",
  				emotion = "ANIM_TYPE_IDLE",
  				loopCount = -1,
  				bubble = 1,
  			}
  			teleport { --Magier wieder zum Zuschauer machen
  				tcid = 7506,
  				position = {sx=19;sy=24;sz=0;px=529.101990;py=909.953003;pz=1095.640015},
  				orientation = 94.000000,
  			}
  			teleport { --Student auf Endposition
  				tcid = 2986,
  				position = {sx=19,sy=24,sz=0,px=843.449219,py=1081.953125,pz=1092.012695},
  				orientation = 288,
  			}
        
  			feedback = nil
  			cutscenePosition = nil
  			return
        -- END OF CUTSCENE!!!!
  	  end
  	    nextCutScene {music=next_title}
  	end
  end
  

end

cutscene_TG_good = function(args)
cutscenePosition = toWorldPosition("24;27;0;1294.150024;2214.250000;1204.939941;280.000000")
  
  feedback = function(args)
    if args.event == "QEVT_ONWELCOME" then
      --An dieser Stelle die ersten Scripte (in Cam-Pfad #1) --Camera faehrt an der Ausgrabungsstaette nach oben
      --Der Held wird unsichtbar geschaltet
      for index,heroRef in getHeroRefs() do
        changeCreature {
          not_in_quests_ref = heroRef,
          visible = false,
        }
      end
      playMovie { movie = MOVIE_INTRO }
    end
    if args.event == "QEVT_CUTSCENE" then
      local next_title
      if args.param == 1000 then
        --Die 3 Leute sitzen am Lagerfeuer und idlen:
        local tcids = {8686,8687,8688}
        for index,tcid in tcids do
          changeCreature {
            tcid = tcid,
            behaviour = "JOB_QUESTSTAGING",
            emotion = "ANIM_TYPE_SITGROUND-IDLE",
            loopCount = -1,
          }
        end
        --Hologram wird unsichtbar geschaltet.
        changeCreature {  --Hologram sichtbar schalten und reden lassen
          tcid = 3002,
          visible = false,
        }
        -- Helf laeuft von links nach Rechts richtung Lagerfeuer mit einem Fass in der Hand:
        changeCreature {
          tcid = 8690,
          behaviour = "JOB_QUESTSTAGING", --Position ist am Ende der Plattform der Pyramide -> TC wird am Ende geloescht
          gotoPosition = toWorldPosition("24;27;0;602.976563;1202.492188;1027.750977;255.781784"),
          bubble = 11,
          action = "ACTION_CARRY_BARREL",
        }
        -- Ein Hochelf ist rechts am hacken:
        changeCreature {
          tcid = 8689,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_HACKING",
          loopCount = -1,
          bubble = 9,
        }
        --Nachdenklicher Hochelf
        changeCreature {
          tcid = 8692,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_CONTEMPLATE",
          loopCount = -1,
        }
        -- Klon legt sich hin und wird unsichtbar
        changeCreature {
          tcid = 8685,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_LAYGROUND-IDLE",
          visible = false,
          loopCount = -1,
        }
        changeCreature { --Ein Abenteurer Hackt
          tcid = 3005,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_HACKING",
          loopCount = -1,
          bubble = 9,
        }
        changeCreature { --der andere Abenteuerer redet
          tcid = 3004,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_TALK",
          loopCount = -1,
          bubble = 9,
        }
        playCutScene { camera = 11510, music = 5 }      
        --Hochelf kommt die Treppe hochgelaufen:
        --Timing anpassen?!
        changeCreature {
          tcid = 8691,
          behaviour = "JOB_QUESTSTAGING",
          gotoPosition = toWorldPosition("24;27;0;1032.062500;1113.640625;1027.804199;342.699463"),
          delay = 8,
        }
  
  			teleportHero {   --Held auf Endposition porten
  			    position =  toWorldPosition("24;27;0;1294.150024;2214.250000;1204.939941;280.000000"),
  					heroRef = heroRef,   
  					noEffect = true,   
  					orientation = 280.000000,
  		    }
  
        return
      end
      if args.param == 1 then
        --Nach Scene #1 // In Scene #2
  			setFixedListener {
  				position = toWorldPosition("24;27;0;1282.648438;2211.796875;1205.116821;32.380676"),
  			}
        playQuestSpeech {
          tcid = 3004,
          lokaid = "START_TW_SCRIPT",
        }
      end
      if args.param == 2 then
        -- Nach Scene #2 // In Scene #3
        --Weltobjekte anschalten
        --local woobs = {1024116486,1024116521,1024116531}
        local woobs = {1024116486,1024116531}
        for index,woid in woobs do
          setWoobState {
            woid = woid,
            state = "WOOB_THINGY_ON",
          }
        end
        --TG erwacht -> steht auf.
        changeCreature {
          tcid = 8685,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_LAYGROUND-UP",
          visible = true,
          loopCount = 1,
        }
        --Abenteurer laufen kurz nach hinten:
        --Skooth laeuft 3m nach hinten und dreht sich wieder um:
        changeCreature {
          tcid = 3004,
          behaviour = "JOB_QUESTSTAGING",
          gotoPosition = toWorldPosition("24;27;0;1395.250000;2092.250000;1203.576660;216.539764"),
          followUpAngle = 216,
          followUpBhv = "questCreatures",
          speed = 2,
          bubble = 9,
          delay = 0.7,
        }
        --Levian laeuft 3m nach hinten und dreht sich wieder um:
        changeCreature {
          tcid = 3005,
          behaviour = "JOB_QUESTSTAGING",
          gotoPosition = toWorldPosition("24;27;0;1303.351563;2060.203125;1206.347168;188.285797"),
          followUpAngle = 188,
          followUpBhv = "questCreatures",
          speed = 2,
          bubble = 9,
          delay = 1,
        }
        next_title = 129
      end
      if args.param == 3 then
        -- Nach Scene #3 // In Scene #4
        --Hier erscheint das Hologramm und labert kurz!
        changeCreature {  --Hologram sichtbar schalten und reden lassen
          tcid = 3002,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_TALK",
          loopCount = -1,
          visible = true,
          effect = "FXTYPE_HOLOGRAM",
        }
  			setFixedListener {
  				position = toWorldPosition("24;27;0;1435.718750;2110.125000;1199.889648;128.110764"),
  			}
        playQuestSpeech {
          tcid = 3002,
          lokaid = "QUEST_1079_GIVER_START",  --GOOD PATH ID!
        }
  
        setWoobState {  --Erde auf Invalid, sonst wackelt sie immer hin und her
          woid = 1024116521,
          state = "WOOB_ANIM_OFF",
        }
        --Skooth dreht sich erschrocken zum Hologramm um
        changeCreature {
          tcid = 3004,
          behaviour = "JOB_QUESTSTAGING",
          gotoPosition = toWorldPosition("24;27;0;1352.203125;2025.796875;1206.347046;137.162094"),
          followUpAngle = 137.0,
          followUpBhv = "questCreatures",
          speed = 2,
          bubble = 9,
          delay = 0.1
        }
        
        --Levian dreht sich erschrocken zum Hologramm um
        changeCreature {
          tcid = 3005,
          behaviour = "JOB_QUESTSTAGING",
          gotoPosition = toWorldPosition("24;27;0;1263.578125;2054.976563;1206.347168;92.353394"),
          followUpAngle = 92.0,
          followUpBhv = "questCreatures",
          speed = 2,
          bubble = 9,
          delay = 0.1,
        }
      end
      if args.param == 4 then
        -- Nach Scene #4 // In Scene #5
        changeCreature {
          tcid = 3002,
          visible = false,
        }
        setWoobState {  --Erde auf Invalid, sonst wackelt sie immer hin und her
          woid = 1024116521,
          state = "WOOB_ANIM_OFF",
        }
  			setFixedListener {
  				position = toWorldPosition("24;27;0;1322.250000;2172.148438;1205.076782;18.472443"),
  			}
        playQuestSpeech {
          tcid = 3005,
          lokaid = "TG_G_SKOOTH_1"  --LokaId anpassen!
        }
        changeCreature {
          tcid = 3005,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_TALK",
          bubble = 9,
          loopCount = -1,
        }
      end
      if args.param == 5 then
        -- Nach Scene #5// In Scene #6
        playQuestSpeech {
          tcid = 3004,
          lokaid = "TG_G_LEVIAN_1"  --LokaId anpassen!
        }
        
        changeCreature {
          tcid = 3005,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_IDLE",
          bubble = 9,
          loopCount = -1,
        }      
        
        changeCreature {
          tcid = 3004,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_TALK",
          bubble = 9,
          loopCount = -1,
        }
      end
      if args.param == 6 then
        -- Nach Scene #6// In Scene #7
        playQuestSpeech {
          tcid = 3005,
          lokaid = "TG_G_SKOOTH_2"  --LokaId anpassen!
        }
        
        changeCreature {
          tcid = 3004,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_IDLE",
          bubble = 9,
          loopCount = -1,
        }      
        
        changeCreature {
          tcid = 3005,
          behaviour = "JOB_QUESTSTAGING",
          emotion = "ANIM_TYPE_TALK",
          bubble = 9,
          loopCount = -1,
        }
      end
      if args.param == 0 then
        --Aufraeumscript am Ende der Szene / bei Abbruch
  			stopQuestSpeech {
  				tcid = 3005,
  			}
  			stopQuestSpeech {
  				tcid = 3004,
  			}
  			stopQuestSpeech {
  				tcid = 3002,
  			}
  			setFixedListener {
  				position = nil,
  			}
        for index,heroRef in getHeroRefs() do
          changeCreature {
            not_in_quests_ref = heroRef,
            visible = true,
          }
  			teleportHero {   --Held auf Endposition porten
  			    position = toWorldPosition("24;27;0;1294.150024;2214.250000;1204.939941;280.000000"),
  					heroRef = heroRef,   
  					noEffect = true,   
  					orientation = 280.000000,   
  		    }
        end
  			changeCreature {
          tcid = 3002,
          visible = false,
        }
        --destroy v.l.n.r.: Typ mit Fass, TG Klon, Treppen Helf
        local destroy = {8690,8685,8691}
        for index,tcid in destroy do
          destroyCreature {
            tcid = tcid,
            splatter = false,
          }
        end
        setWoobState {  --Erde auf Invalid, sonst wackelt sie immer hin und her
          woid = 1024116521,
          state = "WOOB_INVALID",
        }
        
        --GOOD PATH ONLY:
        --Typen laufen weg und werden nach 15 Sekunden weg teleportiert
        changeCreature {
          tcid = 3004,
          behaviour = "JOB_QUESTSTAGING",
          gotoPosition = toWorldPosition("24;27;0;659.484375;91.640625;818.322998;345.715210"),
          speed=2,
        }
        changeCreature {
          tcid = 3005,
          behaviour = "JOB_QUESTSTAGING",
          gotoPosition = toWorldPosition("24;27;0;599.250000;111.148438;820.215759;316.933929"),
          speed=2,
        }
        creatureTeleportsAway(3004,15)
        creatureTeleportsAway(3005,15)
  			feedback = nil
  			cutscenePosition = nil
        return
      end
      nextCutScene {music=next_title}
    end
  end 

end


--function doEmote(tcid, emotion, loopCount, delay)

doEmote = function(tcid, emotion, loopCount, delay)
-- set default values
  if not loopCount then loopCount = -1 end
  if not delay then delay = 0 end
  
  changeCreature {
  	tcid = tcid,
  	behaviour = "JOB_QUESTSTAGING",
  	role = "ROLE_INVALID",
  	emotion = emotion,
  	loopCount = loopCount,
  	delay = delay,
  }

end

labyr_bossdungeon = function(heroRef)
--Platte2E
  
  if getQuestState(3804) == "WON" then
  	teleportHero {
  		heroRef = heroRef,
  		position = toWorldPosition("59;9;0;1352.703125;1942.449219;570.496948;4.931641"),
  		orientation = 4.931641,
  	}
  end 

end


--Diese Funktion wird aufgerufen, wenn der erste Held das Spiel betritt! Das ist noch VOR dem initialisieren des Questsystems, aber NACH dem initialisieren des Worldobject-Systems, d.h. alle Worldobjects sind im Default-Zustand (das was im Questsystem eingestellt wurde) und die MagicalHiddenPlaces sind schon gelootet worden.
--
--hier kann man z.B. Woob-FX einstellen usw.

onInitWorldobjects = function(heroRef)
-- T-Rohr
  setWoobEffect { effect = "FXTYPE_SMOKEBIGWHITE", woid = 1021408807 }
  
  -- set seragate
  setWoobEffect { effect = "FXTYPE_QFX_SERAGATE", woid = 1021159739 }
  setWoobEffect {	effect = "FXTYPE_QFX_SERAGATE", woid = 1022534681 }
  
  --magische barriere verlorene krypta
  setWoobEffect { effect = "FXTYPE_QFX_SERAGATE", woid = 1051481207 }
  setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1051481207 }
  
  --set state of sera gate in big machine dungeon
  setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023046854 }
  setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023046905 }
  setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023046923 }
  setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023046947 }
  setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023047062 }
  setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023047090 }
  setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023047109 }
  setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023047127 }
  
  --buero quest tueren verschliessen
  setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1024204972 }
  setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1022995142 }
  setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1017520695 }
  setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1017465035 }
  setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1024277602 }
  setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023948046 }
  
  -- open door dunkler kult schalter
  setWoobEffect { effect = "FXTYPE_INVALID", woid = 1021159739 }
  
  
  --Big Machine lights -> Red
  setWoobEffect { effect = "FXTYPE_SIMPLELIGHT3", woid = 1023050165 }
  setWoobEffect { effect = "FXTYPE_SIMPLELIGHT3", woid = 1023050183 }
  setWoobEffect { effect = "FXTYPE_SIMPLELIGHT3", woid = 1023050188 }
  setWoobEffect { effect = "FXTYPE_SIMPLELIGHT3", woid = 1023050229 }
  
  --sera Insel Chest with Tcreature drop 
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586748}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586682}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586759}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586825}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586872}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586885}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586900}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586933}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586908}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1017607326}
  
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016587159}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1017608818}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1017608808}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016587115}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016587093}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016587237}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016587057}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016587049}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016587036}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586993}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586997}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016586984}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1016587006}
  setWoobEffect { effect="FXTYPE_CHEST1W", woid=1022534330}
  
  -- One Way Teleport Effekt:
  setWoobEffect {effect="FXTYPE_PORTAL2", woid=1050110364}
  setWoobEffect {effect="FXTYPE_PORTAL2", woid=1052616164}
  
  -- Blood & Ice Mainstory - Diaanjas Tower - Lights
  -- North / East / South / West
  setWoobEffect { effect = "FTYPE_MAGICLIGHT", woid = 1050703067 }
  setWoobEffect { effect = "FTYPE_MAGICLIGHT", woid = 1050703089 }
  setWoobEffect { effect = "FTYPE_MAGICLIGHT", woid = 1050703098 }
  setWoobEffect { effect = "FTYPE_MAGICLIGHT", woid = 1050703107 }

end

_AREA_CENTER_DESERT_BACKUP_1 = function(wpos)
--empty
  
  local AreaCreatures={
  
  -- DESERT noble definition start
  	{
  		Tag=1,
  		CID=1464,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1647,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1465,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1466,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1467,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1642,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1643,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1644,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1645,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1646,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1493,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1652,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1494,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},	
  	{
  		Tag=1,
  		CID=1495,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1496,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1573,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1648,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1649,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1650,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1651,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	
  
  
  -- DESERT child definition start
  
  	{
  		Tag=2,
  		CID=962,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1216,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1217,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1218,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1219,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=481,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1575,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1576,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1577,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=480,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1212,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1213,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1214,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1215,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1492,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1578,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1579,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1580,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	
  	
  
  
  
  		
  
  -- DESERT poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=476,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1659,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1220,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1221,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1222,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1223,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1653,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1655,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1657,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1658,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=477,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1662,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1497,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1498,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1499,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1654,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1656,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1660,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1661,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	
  	
  	
  }
  
  	local  points,numPoints = getSpawnPoints { position=wpos,radius=200 }
  	--local richmax = 2
  	--local richcounter = 0  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  	--	if AreaCreatures[randomnumber].Tag = 1 then 
  		--	richcounter = richcounter + 1
  			--if richcounte== richmax then 
  	
  			--else
  
  			--end
  	--end
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
  
     
    
  

end


--Funktion um das Wetter beeinflussen zu koennen.

onWeather = function(currentHour)
return WeatherDefinitions 

end


--Initialisierung der Quest-Welt!
--
--Das hier geschieht direkt VOR dem Ausfuehren aller Quests, d.h. es gibt zu diesem Zeitpunkt KEINE EINZIGE QUEST und auch KEINEN HELDEN
--
---> Kann benutzt werden um globale Variablen etc. anzulegen.
--

onReset = function()

  WeatherDefinitions = {}
  
  WEATHERFLAG_NIGHT      = 1
  WEATHERFLAG_LIGHTNING  = 2
  WEATHERFLAG_RAIN       = 4
  WEATHERFLAG_WIND			 = 8
  WEATHERFLAG_EARTHQUAKE = 16
  WEATHERFLAG_FOG        = 32
  WEATHERFLAG_GROUNDFOG  = 64
  WEATHERFLAG_HIGHNOON   = 128
  
  MOVIE_INTRO        = 1
  MOVIE_OUTRO_LIGHT  = 2
  MOVIE_OUTRO_SHADOW = 3
  MOVIE_CONCERT      = 4
  
  

end

unlockShipPortal = function(questId,portal,direction,heroref)
local t = getQuestTeamId { questId = questId }
  
  if getTeamIdByHeroRef { ref = heroref } == t then
    for index,heroRef in getTeamRefs { teamId = t } do
      unlockPortal {
        heroRef = heroRef,
        portal = portal,
        type = "PORTALTYPE_SHIP_" .. string.upper(direction),
      }
    end
  end 

end

scorpion = function(heroRef)
local position = {}
  local orientation = 0
  
  if 	getQuestState {id = 339} 	== 	"WON" 	or
  		getQuestState {id = 1622} == 	"WON"		or
  		getQuestState {id = 3347}	==	"WON"		then
  
  	position = {sx=34;sy=11;sz=0;px=2735.632813;py=2001.066406;pz=2799.949707}
  	orientation = 184.811813
  else
  	return
  end
  
  teleportHero {
  	heroRef = heroRef,
  	position = position,
  	orientation = orientation,
  }

end


---- Auf der Spur End of Dungoen Teleporter

Eisdungeon = function(heroRef)
local position = {}
  local orientation = 0
  
  if getQuestState {id = 3782}	== 	"WON" 	then
    position = {sx=4;sy=54;sz=0;px=822.150391;py=826.093750;pz=3164.935547}
    orientation = 336.091614
  else
  	return
  end
  
  teleportHero {
  	heroRef = heroRef,
  	position = position,
  	orientation = orientation,
  }

end

Platte1F = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049075965,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte1G = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049075968,
    --effect = "FXTYPE_CHEST2R"
  --}

end


--This function will be called if the player failed the task!
--
--
--Arguments:
--
--args.heroRef    is the current hero
--args.id         is the current quest ID

enterDamm = function(heroRef)
local position = {}
  local orientation = 0
  
  if getQuestState { id = 667 } == "WON" then
  	position = {sx=9;sy=50;sz=-2;px=1792.354;py=2682.349;pz=3937.008}
  	orientation = 270
  else
    position = {sx=9;sy=50;sz=0;px=1840.887;py=2680.774;pz=3952.586}
  	orientation = 270
  end
  
  teleportHero {
  	heroRef = heroRef,
  	position = position,
  	orientation = orientation,
  	noEffect = true,
  }

end

_AREA_CENTER_LIZARD_1 = function(wpos)
--empty
  local AreaCreatures={
  
  -- LIZARD noble definition start (COLORED ORCS)
  	{
  		Tag=1,
  		CID=1047,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1473,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1474,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1475,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1476,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1477,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1827,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1828,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1829,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1830,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1831,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=1,
  		CID=1832,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=32,
  		Equipment=34,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  	
  
  -- LIZARD children DO NOT EXIST -- NOT A BUG
  
  			
  
  -- LIZARD poor statist definition start (NEUTRAL ORCS)
  
  
  	{
  		Tag=3,
  		CID=1105,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=32,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1161,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=32,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1162,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=32,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1106,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=32,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1163,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=32,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	{
  		Tag=3,
  		CID=1164,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=32,
  		Equipment=33,
  		--Daytime={1=true,2=true,3=true,4=true},
  	
  	},
  	
  
  
  }
  
  local  points,numPoints = getSpawnPoints { position=wpos,radius=400 }
  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
     
  

end

cutscene_DM = function(args)
cutscenePosition = toWorldPosition("5;2;0;2989.000000;1188.200195;799.857361;272.304962")
  
  feedback = function(args)
  
    if args.event == "QEVT_ONWELCOME" then
    	--An dieser Stelle die ersten Scripte (in Cam-Pfad #1)
  		for index,heroRef in getHeroRefs() do   
  			--changeCreature {     
  				--not_in_quests_ref = heroRef,     
  				--visible = false,     
        --}
  			teleportHero {
  				position = toWorldPosition("5;2;0;2989.000000;1188.200195;799.857361;272.304962"),
  				orientation = 289.652222,
  				heroRef = heroRef,
  				noEffect = true,
  			}
  		end
      playMovie { movie=MOVIE_INTRO }
    end
    if args.event == "QEVT_CUTSCENE" then
      -- param == 1000 --> movie has ended.
      local next_title
      if args.param == 1000 then
  		playCutScene { camera=12823, music=28 }
  	  changeCreature {
  			tcid = 10243,
  			behaviour = "JOB_QUESTSTAGING",
  			gotoPosition = toWorldPosition("6;2;0;2190.843750;1092.361816;153.596069;211.424118"),
  			followUpBhv = "questCreatures",
  			extraMode = 0,
  			extra = {
  				toWorldPosition("6;2;0;1669.605469;1801.869141;377.998779;235.382629"),
  			}
  		}	
  		changeCreature {
  			tcid = 10287,
  			behaviour = "JOB_QUESTSTAGING",
  			gotoPosition = toWorldPosition("6;2;0;1981.699219;2057.700195;-1.404968;216.334229"),
  			speed = 2,
  			followUpBhv = "deer",
  			extraMode = 0,
  			extra = {
  				toWorldPosition("6;2;0;2102.375000;1797.160156;8.589723;15.396576"),
  				toWorldPosition("6;2;0;2415.949219;1418.899902;-0.116711;69.913971"),
  			},
  			delay = 2,
  		}
      return
      end
  		if args.param == 0 then
  			-- Ganz am Ende - Aufraeum-/Schluss-Scripts
        teleport {
  				tcid = 10243,
  				position = toWorldPosition("6;2;0;379.115234;567.850098;428.620270;309.267426"),
  			}
  			changeCreature {
  				tcid = 10243,
  				behaviour = "deer",
  				delay = 1,
  			}
        changeCreature {
  				tcid = 10287,
  				behaviour = "deer",
  				delay = 1,
  			}
  			teleportHero {
  				position = toWorldPosition("5;2;0;2989.000000;1188.200195;799.857361;272.304962"),
  				orientation = 289.652222,
  				heroRef = heroRef,
  				noEffect = true,
  			}
  			feedback = nil
  			cutscenePosition = nil
  			return
  	  end
  	    nextCutScene {music=next_title}
  	end
  end 

end

Platte3B = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049076002,
    --effect = "FXTYPE_CHEST2R"
  --}

end

labyr_schatzdungeon = function(heroRef)
--Platte8B
  
  teleportHero {
  	heroRef = heroRef,
  	position = toWorldPosition("59;9;0;1352.703125;1942.449219;570.496948;4.931641"),
  	orientation = 4.931641,
  }

end

labyr_emptydungeon = function(heroRef)
--Platte6D
  
  teleportHero {
  	heroRef = heroRef,
  	position = toWorldPosition("59;9;0;1352.703125;1942.449219;570.496948;4.931641"),
  	orientation = 4.931641,
  }

end

Platte2E = function(heroRef)
--dungeon 1
  
  teleportHero {
  	heroRef = heroRef,
  	position = toWorldPosition("59;10;-1;2355.546875;2322.449219;-193.597321;349.804016"),
  	orientation = 349.804016,
  	noEffect = true,
  }
  
  --setWoobEffect {
  --  woid = 1049075987,
  --  effect = "FXTYPE_CHEST2R"
  --}

end


--NOT YET IMPLEMENTED !!!

oldDragon = function(heroRef)
local position = {}
  local orientation = 0
  
  if 	getQuestState {id = 730} 	== "TASK_AWAITING" 	or
  		getQuestState {id = 730} 	== "WON" 						or
  		getQuestState {id = 712} 	== "TASK_AWAITING" 	or
  		getQuestState {id = 712} 	== "WON" 						or
  		getQuestState {id = 3347} == "WON" 						then
  
  	position = {sx=60;sy=40;sz=0;px=553.5;py=2632.953125;pz=-1599.907349}
  	orientation = 317.563782
  else
  	return
  end
  
  teleportHero {
  	heroRef = heroRef,
  	position = position,
  	orientation = orientation,
  }
  

end


--do not use !!

convertPos = function(arg)
 if type(arg)=="table" then
    if not arg["sx"] then
      return {sx=arg[1]}
    else
      return arg
    end
   elseif type(arg)=="string" then
    local t = string.split(arg,";")
    return {sx=t[1]}
   end
  

end

teleportTeam = function(questId,position)
if questId and position then
    local t = getQuestTeamId(questId)
    local pos = nil
    if type(position)=="string" then
      pos = toWorldPosition(position)
    end
    if type(position)=="table" and position.px and position.py and position.pz then
      pos=position
    end
    if pos then
      for index,heroRef in getTeamRefs{teamId = t} do
        teleportHero {
          heroRef = heroRef,
          position = pos,
          orientation = pos.orient,
        }
      end
    end
  end
  

end

onHeroJoined = function(args)
--Always on hero join:
  -- AddOn Kapitaene freischalten
  -- Crystal Planes
  unlockPortal {
  	heroRef = heroRef,
  	portal = 8,
  	type = "PORTALTYPE_SHIP_NORTH",
  }
  -- Cursed Forest
  unlockPortal {
  	heroRef = heroRef,
  	portal = 7,
  	type = "PORTALTYPE_SHIP_SOUTH",
  }
  
  
  -- Free MP:
  if not args.singleplayer and not args.campaign then
  	--Unlock Ship Portals: DR, SE, WL
  	--DR
  	unlockPortal {
  		heroRef = heroRef,
  		portal = 3,
  		type = "PORTALTYPE_SHIP_SOUTH",
  	}
  	--SE
  	unlockPortal {
  		heroRef = heroRef,
  		portal = 2,
  		type = "PORTALTYPE_SHIP_NORTH",
  	}
  	--WL
  	unlockPortal {
  		heroRef = heroRef,
  		portal = 1,
  		type = "PORTALTYPE_SHIP_SOUTH",
  	}
  end 

end


--This function will be called if the action starts; the questsystem is waiting for the completion of the task.
--
--
--Arguments:
--
--args.heroRef    is the current hero
--args.id         is the current quest ID

_AREA_CENTER_DESERT_CAPITAL = function(wpos)

  local AreaCreatures={
  
  -- DESERT noble definition start
  	{
  		Tag=1,
  		CID=1464,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1647,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1465,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1466,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1467,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1642,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1643,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1644,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1645,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1646,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1493,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1652,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1494,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},	
  	{
  		Tag=1,
  		CID=1495,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1496,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1573,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1648,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1649,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1650,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	{
  		Tag=1,
  		CID=1651,
  		Behaviour="JOB_RICH_STATIST",
  		Faction=31,
  		Equipment=34,
  		
  	},
  	
  
  
  -- DESERT child definition start
  
  	{
  		Tag=2,
  		CID=962,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1216,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1217,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1218,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1219,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=481,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1575,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1576,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1577,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=480,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1212,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1213,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1214,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1215,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1492,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1578,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1579,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	{
  		Tag=2,
  		CID=1580,
  		Behaviour="JOB_KID",
  		Faction=31,
  		Equipment=43,
  			
  	},
  	
  	
  
  
  
  		
  
  -- DESERT poor statist definition start
  
  
  	{
  		Tag=3,
  		CID=476,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1659,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1220,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1221,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1222,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1223,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1653,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1655,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1657,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1658,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=477,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1662,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1497,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1498,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1499,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1574,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1654,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1656,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1660,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	{
  		Tag=3,
  		CID=1661,
  		Behaviour="JOB_POOR_STATIST",
  		Faction=31,
  		Equipment=33,
  			
  	},
  	
  	
  	
  }
  
  	local  points,numPoints = getSpawnPoints { position=wpos,radius=500 }
  	--local richmax = 2
  	--local richcounter = 0  
  	local creatures = getn(AreaCreatures)
  
  	if points then 
  		
  		for id,object in points do
  		
  		local randomnumber = math.floor(math.random(1,creatures))
  		
  	--	if AreaCreatures[randomnumber].Tag = 1 then 
  		--	richcounter = richcounter + 1
  			--if richcounte== richmax then 
  	
  			--else
  
  			--end
  	--end
  		spawnCreature { 
    				behaviour=AreaCreatures[randomnumber].Behaviour,
    				creature_id=AreaCreatures[randomnumber].CID, 
    				faction_id=AreaCreatures[randomnumber].Faction, 
    				equipset_id=AreaCreatures[randomnumber].Equipment, 
    				mortality=0, 
    				position=object }
  
  		end
  	end
  
     
    
  

end

golemOben = function(heroRef)
local position = {}
  local orientation = 0
  
  if 	getQuestState {id = 3327} == "WON" then
  	position = {sx=26;sy=44;sz=0;px=1688.648438;py=2510.703125;pz=-1164.604004}
  	orientation = 25.034119
  else
  	return
  end
  
  teleportHero {
  	heroRef = heroRef,
  	position = position,
  	orientation = orientation,
  }

end

Lichinsel = function(heroRef)

  local position = {}
  local orientation = 0
  
  if 	getQuestState {id = 3714} == "WON" or 
  	getQuestState {id = 3714} == "PRECONDS_AWAITING" then
  	position = {sx=60;sy=11;sz=0;px=2495.015625;py=1729.246094;pz=734.589294}
  	orientation = 282.008179
  else
  	return
  end
  
  teleportHero {
  	heroRef = heroRef,
  	position = position,
  	orientation = orientation,
  }
  

end

leaveDamm = function(heroRef)
teleportHero {
  	heroRef = heroRef,
  	position = {sx=9;sy=51;sz=0;px=2278.700;py=24.600;pz=4060.212},
  	orientation = 95,
  	noEffect = true,
  }
  

end

blutsee = function(heroRef)
if getQuestState(3650) == "WON" then
  	teleportHero {
  		heroRef = heroRef,
  		position = toWorldPosition("60;14;0;957.843750;2005.250000;1168.379395;296.320709"),
  		orientation = 296.320709,
  	}
  else 
  	return
  end 

end

blutgrotte = function(heroRef)
if getQuestState(3649) == "WON" then
  	setWaterType 
  	{ 
  		sx = 62, 
  		sy = 14, 
  		sz = -1, 
  		waterType = 29,
    }
  	return
  else
  	return 
  end 

end


--about "quick = true": do not trigger a TP effect or screen fade.

plattenTeleport = function(heroRef)
teleportHero {
   	heroRef = heroRef,
  	position = toWorldPosition("59;9;0;1352.703125;1942.449219;570.496948;4.931641"),
  	orientation = 4.931641,
    noEffect = true,
    noFade= true,
  }

end


--setPosition {
-- 	heroRef = heroRef,
--	position = toWorldPosition("59;9;0;1352.703125;1942.449219;570.496948;4.931641"),
--	orientation = 4.931641,
--}

Platte1A = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049075938,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte1B = function(heroRef)
if 	getQuestState(3642) == "TASK_AWAITING" or
  		getQuestState(3642) == "TASK_FULFILLED" or
  		getQuestState(3642) == "WON" then
  
  	setWoobEffect {
  		woid = 1049075945,
  		effect = "FXTYPE_CHEST2G",
  	}
  else 
  	plattenTeleport(heroRef)
  end 

end

Platte1C = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049075957,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte1D = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049075960,
    --effect = "FXTYPE_CHEST2R"
  --}

end

Platte1E = function(heroRef)
plattenTeleport(heroRef)
  
  --setWoobEffect {
    --woid = 1049075962,
    --effect = "FXTYPE_CHEST2R"
  --}

end

quest.setScript( 3113, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 8726 then
  	creatureTeleportPosition(8728,1,{14,9,0,2628.398438,1059.699219,1050.455811})
  	creatureTeleportPosition(8729,1,{14,9,0,2566.675781,1046.570313,1050.455811})
  	creatureTeleportPosition(8730,1,{14,9,0,2475.949219,1000.449219,1050.455811})
  	local tcids = { 8728, 8729, 8730 }
  	for i, tcid in tcids do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "cat",
  			delay = 4
  		}
  	end
  end
  

end)

quest.setScript( 3113, "OnStation", function(args)
if args.currentStation == 0 then
  	creatureTeleportPosition(8728,1,{2,2,0,2628.398438,1059.699219,1050.455811})
  elseif args.currentStation == 1 then
  	creatureTeleportPosition(8729,1,{2,2,0,2628.398438,1059.699219,1050.455811})
  elseif args.currentStation == 2 then
  	creatureTeleportPosition(8730,1,{2,2,0,2628.398438,1059.699219,1050.455811})
  end
  

end)

quest.setScript( 3004, "OnLost", function(args)
changeCreature {
  	tcid = 8366,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM25", --question
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 8366,
  	behaviour = "questCreatures",
  	delay = 5,
  }

end)

quest.setScript( 3004, "OnWon", function(args)
changeCreature {
  	tcid = 8366,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM01", --agree
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 8366,
  	behaviour = "questCreatures",
  	delay = 3,
  }

end)

quest.setScript( 3005, "OnWon", function(args)
changeCreature {
  	tcid = 8365,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM28", --sigh
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 8365,
  	behaviour = "questCreatures",
  	delay = 3,
  }

end)

quest.setScript( 2549, "OnStation", function(args)
if args.currentStation == 0 then
  	changeCreature {
  		tcid = 7471,
  		behaviour = "questCreatures"
  	}
  end
  

end)

quest.setScript( 2549, "OnPrecondsFulfilled", function(args)
changeCreature {
  	tcid = 7471,
  	mortality = "IMMORTAL"
  }
  changeCreature {
  	tcid = 7472,
  	mortality = "IMMORTAL"
  }

end)

quest.setScript( 3250, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9179,
  	useUnconscious = true,
  	livesRemaining = 1,
  	unconsciousTime = 3,
  }

end)

quest.setScript( 2546, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 7471,
  	mortality = "MORTAL"
  }
  
  changeCreature {
  	tcid = 7472,
  	behaviour = "JOB_QUESTSTAGING",
  	role = "ROLE_INVALID",
  	gotoPosition = { sx=21,sy=26,sz=0, px=2700,py=50,pz=0 },
  	speed = 2,
  }	
  creatureTeleportsAway( 7472, 10 ) 

end)

quest.setScript( 918, "OnTaskFulfilled", function(args)
teleport {
  	tcid = 2492,
  	position = toWorldPosition("41;17;0;3150.000000;2450.000000;0.000000;0.000000"),
  	orientation = 0,
  }

end)

quest.setScript( 917, "OnWon", function(args)
creatureTeleportsAway( 2621, 2 )
  

end)

quest.setScript( 917, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 2621 then
  	setBehaviour(2621,"questCreatures")
  end
  

end)

quest.setScript( 742, "OnWon", function(args)
changeCreature {
  	tcid = 2217,
  	behaviour = "Enemy_mage_phalanx",
  	faction = "FACTION_LIZARD_BAD",
  }
  creatureTeleportsAway(2217,60)

end)

quest.setScript( 3116, "OnWon", function(args)
destroyCreature {
  	tcid = 7985,
  	splatter = true,
  	delay = 1;
  }

end)

quest.setScript( 2201, "OnWon", function(args)
local creatures = {
  	{
  		tcid = 1207,
  		behaviour = "Enemy_warrior_brave", --dummy
  		faction = "FACTION_ENEMY_HERO",
  		role = "ROLE_DROPPER",
  	},
  	{
  		tcid = 6732,
  		behaviour = "Enemy_warrior_brave", --dummy
  		faction = "FACTION_ENEMY_HERO",
  		role = "ROLE_ATTACKER",
  	},
  	{
  		tcid = 6731,
  		behaviour = "Enemy_warrior_brave", --dummy
  		faction = "FACTION_ENEMY_HERO",
  		role = "ROLE_ATTACKER",
  	}
  }
  
  for id,object in creatures do
  	changeCreature {
  		tcid = object.tcid,
  		behaviour = object.behaviour,
  		faction = object.faction,
  		role = object.role,
  	}
  end
  

end)

quest.setScript( 2200, "OnWon", function(args)
local creatures = {
  	{
  		tcid = 1207,
  		pos = {sx=35;sy=19;sz=0;px=400;py=1100;pz=0},
  		behaviour = "Enemy_warrior_brave", --dummy
  		faction = "FACTION_ENEMY_HERO",
  	},
  	{
  		tcid = 6732,
  		pos = {sx=35;sy=19;sz=0;px=500;py=1150;pz=0},
  		behaviour = "Enemy_warrior_brave", --dummy
  		faction = "FACTION_ENEMY_HERO",
  	},
  	{
  		tcid = 6731,
  		pos = {sx=35;sy=19;sz=0;px=500;py=1050;pz=0},
  		behaviour = "Enemy_warrior_brave", --dummy
  		faction = "FACTION_ENEMY_HERO",
  	}
  }
  
  for id,object in creatures do
  	changeCreature {
  		tcid = object.tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = object.pos,
  		followUpBhv = "questCreatures",--object.behaviour,
  		faction = object.faction,
  	}
  end
  

end)

quest.setScript( 1443, "OnTalk", function(args)

  if args.tcid == 4459 then
  
  	changeCreature {
  		tcid = 4459,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SURRENDER-IDLE",
  		loopCount = -1,
  	}
  
  end
  

end)

quest.setScript( 3696, "OnPrecondsFulfilled", function(args)
changeCreature {
  	tcid = 10029,
  	effect = "FXTYPE_HOLOGRAM",
  }	

end)

quest.setScript( 3696, "OnTaskAwaiting", function(args)
createEffect {
    position = toWorldPosition("2;56;0;450.000000;150.000000;2945.738525;0.000000"),
    effect = "FXTYPE_SMOKEMEDIUMWHITE",
    duration = 2,
  }
  
  
  destroyCreature {
  	tcid = 10029,
  	splatter = false,
  	delay = 1,
  }

end)

quest.setScript( 3246, "OnTaskAwaiting", function(args)
addToGroup(9174,0)
  changeCreature{
   tcid = 9174,
   behaviour = "Hireling_coward",
  }
  removeFromGroup(9174,1)

end)

quest.setScript( 1943, "OnWon", function(args)
tcid = 5492
  
  changeCreature {
  	tcid = tcid,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=25,sy=32,sz=0 , px=2760,py=2686,pz=0},
  	followUpBhv = "Enemy_Simple"
  }
  

end)

quest.setScript( 1943, "OnTaskAwaiting", function(args)
setRole(5492,"ROLE_VICTIM")

end)

quest.setScript( 3248, "OnTaskAwaiting", function(args)
-- Dryadin soll Spieler verfolgen
  
  addToGroup(9178,0)
  changeCreature{
   tcid = 9178,
   behaviour = "Hireling_coward",
  }
  removeFromGroup(9178,1)

end)

quest.setScript( 3247, "OnTaskFulfilled", function(args)
local ids = {8458,8464,8465,8467,8461,8460,9176}
  for i,id in ids do
  	changeCreature{
  		tcid = id,
  		useUnconscious = true,
  		unconsciousTime = 3,
  		livesRemaining = 255,
  	}
  end
  

end)

quest.setScript( 3254, "OnWon", function(args)
local ids = {8458,8464,8465,8467,8461,8460,9176}
  
  for i,id in ids do	
  	changeCreature{
  			tcid = id,
  			effect = "FXTYPE_GEN_TPRISON",
  			delay = 0,
  	}
  	doEmote(id, "ANIM_TYPE_HIT", -1, math.random())
  
  	changeCreature{
  			tcid = id,
  			effect = "FXTYPE_GEN_TRANSFORM",
  			creature = "Dead_skeleton_warrior_No_Rise",
  			clearUnconscious = true,
  			livesRemaining = 0,
  			mortality = "MORTAL",
  			behaviour = " Enemy_warrior_brave",
  			faction = "FACTION_ENEMY_HERO",
  			delay = 5,
  	}
  end
  

end)

quest.setScript( 3254, "OnStation", function(args)
if args.currentStation == 0 then
  	for i,id in {8458,8464,8465,8467,8461,8460,9176} do	
  		removeFromGroup(id, 0)
  		setBehaviour(id, "questCreatures")
  	end
  
  -- Timer Starten!
  	setTimer {
  		id = 3254,
  		interval = 1,
  		count = 10,	
  	}
  
  -- Schmuggler geht auf position (~3 sek)
  	creatureGotoPos(9176, {13;3;-1;2442.800781;2735.599609;-198.704575;91.849884}, false, 2, "questCreatures", 0)
  
  -- Schmuggler macht zauberanim (~6 sek)
  	doEmote(9176, "ANIM_TYPE_EM10", 3, 3)
  
  -- effekt (~9 sek)
  	changeCreature{
  		tcid = 9176,
  		effect = "FXTYPE_GEN_TPRISON",
  		delay = 8,
  	}
  
  -- Schmuggler bricht zusammen, bekommt "!" -> onTaskFulfilled
  	doEmote(9176, "ANIM_TYPE_HIT", -1, 8.5)
  
  -- solve Quest -> onTimer()
  end
  

end)

quest.setScript( 3254, "OnTimer", function(args)
if args.state == "TASK_AWAITING" and args.count == 1 then 
    	solveQuest (args.id)
  end
  

end)

quest.setScript( 2291, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 6929,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 2046, "OnTalk", function(args)
changeCreature {
    		tcid = 6735,
    		dont_turn = true,
    	}

end)

quest.setScript( 2046, "OnTaskAwaiting", function(args)
changeCreature {
    		tcid = 6735,
    		dont_turn = true,
    	}

end)

quest.setScript( 365, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 1156, 
  	mortality = "MORTAL",
  } 

end)

quest.setScript( 365, "OnTaskFulfilled", function(args)
setRole(1156,"ROLE_ATTACKER")

end)

quest.setScript( 2120, "OnWon", function(args)
changeCreature {
  dont_turn = true,
   tcid=6735,
   behaviour = "JOB_QUESTSTAGING",
   emotion = "ANIM_TYPE_DEFENSE",
   loopCount = -1,
   effect="FXTYPE_SMOKEBIGWHITE",
    delay=0.25,
  }
  changeCreature {
   tcid=6735,
  --behaviour = "JOB_QUESTSTAGING",
  creature="Story_Gronkor",
  delay=3,
  }
  
  changeCreature {
    	tcid = 6735,
    	effect = "FXTYPE_INVALID",
    	delay = 5,
    }

end)

quest.setScript( 2675, "OnStation", function(args)
if args.currentStation == 0 and args.tcid == 1464 then
  	changeCreature {
  		tcid = 1464,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  if args.currentStation == 1 and args.tcid == 1465 then
  	changeCreature {
  		tcid = 1465,
  		behaviour = "JOB_POOR_STATIST",
  		}
  end
  
  if args.currentStation == 2 and args.tcid == 1466 then
  	changeCreature {
  		tcid = 1466,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  
  if args.currentStation == 3 and args.tcid == 1473 then
  	changeCreature {
  		tcid = 1473,
  		behaviour = "JOB_POOR_STATIST",
  		}
  end
  
  if args.currentStation == 4 and args.tcid == 1463 then
  	changeCreature {
  		tcid = 1463,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  

end)

quest.setScript( 2675, "OnWon", function(args)
changeCreature {
  	tcid = 1490,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM24", --pray
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 1490,
  	behaviour = "questCreatures",
  	delay = 9,
  }
  
  
  

end)

quest.setScript( 2671, "OnStation", function(args)
if args.currentStation == 0 and args.tcid == 1471 then
  	changeCreature {
  		tcid = 1471,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  if args.currentStation == 1 and args.tcid == 1472 then
  	changeCreature {
  		tcid = 1472,
  		behaviour = "JOB_POOR_STATIST",
  		}
  end
  
  if args.currentStation == 2 and args.tcid == 1473 then
  	changeCreature {
  		tcid = 1473,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  
  if args.currentStation == 3 and args.tcid == 1474 then
  	changeCreature {
  		tcid = 1474,
  		behaviour = "JOB_POOR_STATIST",
  		}
  end
  
  if args.currentStation == 4 and args.tcid == 7692 then
  	changeCreature {
  		tcid = 7692,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  

end)

quest.setScript( 2671, "OnWon", function(args)
changeCreature {
  	tcid = 1470,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM24", --pray
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 1470,
  	behaviour = "questCreatures",
  	delay = 9,
  }
  
  
  

end)

quest.setScript( 2673, "OnStation", function(args)
if args.currentStation == 0 and args.tcid == 1466 then
  	changeCreature {
  		tcid = 1466,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  if args.currentStation == 1 and args.tcid == 1473 then
  	changeCreature {
  		tcid = 1473,
  		behaviour = "JOB_POOR_STATIST",
  		}
  end
  
  if args.currentStation == 2 and args.tcid == 1474 then
  	changeCreature {
  		tcid = 1474,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  
  if args.currentStation == 3 and args.tcid == 1463 then
  	changeCreature {
  		tcid = 1463,
  		behaviour = "JOB_POOR_STATIST",
  		}
  end
  
  if args.currentStation == 4 and args.tcid == 1464 then
  	changeCreature {
  		tcid = 1464,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  

end)

quest.setScript( 2673, "OnWon", function(args)
changeCreature {
  	tcid = 7693,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM24", --pray
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7693,
  	behaviour = "questCreatures",
  	delay = 9,
  }
  
  
  

end)

quest.setScript( 3007, "OnSetup", function(args)
	changeCreature {
  		tcid = 9005,
  		mortality = "IMMORTAL",
  		clearAutoTeleporting = true,
  	}

end)

quest.setScript( 641, "OnWon", function(args)
questCompleted(args)
  

end)

quest.setScript( 641, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 2087,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM01",
  	loopCount = -1,
  }
  changeCreature {
  	tcid = 2085,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_CLEAN-BAR",
  	loopCount = -1,
  	action = "ACTION_CLEAN_BAR",
  	bubble = 9,
  }

end)

quest.setScript( 641, "OnTalk", function(args)
if args.id == 641 and args.tcid == 2087 and args.state == "TASK_FULFILLED" then
  --Kleines Maedchen wird geheilt und steht wieder auf!
  	changeCreature {
  		tcid = 2087,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM02",
  		loopCount = 1,	
  	}
  	changeCreature {
  		tcid = 2087,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM03",
  		loopCount = -1,
  		delay = 3,
  	}
  end
  
  
  if args.id == 641 and args.tcid == 2085 and args.state == "PRECONDS_FULFILLED" then
  	changeCreature {
  		tcid = 2085,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_TALK",
  		loopCount = -1,
  	}
  end
  

end)

quest.setScript( 641, "OnPrecondsFulfilled", function(args)
changeCreature {
  	tcid = 2085,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_CLEAN-BAR",
  	loopCount = -1,
  	action = "ACTION_CLEAN_BAR",
  	bubble = 9,
  	delay = 1,
  }
  
  changeCreature {
  	tcid = 2087,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM01",
  	loopCount = -1,
  	delay = 1,
  }

end)

quest.setScript( 1559, "OnWon", function(args)
--3 MQ Orks - duerfen sich niemals umdrehen!
  tcids = {2112,2111,2110}
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		dont_turn = true,
  	}
  end
  
  --Wasserfall fuer die Orkregion -> muss immer angezeigt werden (MQ!)
  showWaterfall()
  
  --MQ: Captain Teleport erstellen - muessen immer vorhanden sein
  local captains = {8861,8864,8866}
  for index,tcid in captains do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_CAPTAIN",
  		merchantType = "MERCHANT_CAPTAIN",
  	}
  end
  
  --MQ: Dorfaeltester Schlehenfurt -> kniet nieder!
  changeCreature {
  	tcid = 1118,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_KNEE-DOWN",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 1118,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_KNEE-IDLE",
  	loopCount = -1,
  	delay = 1,
  }
  
  --Die 4Tueren am grossen Wall (HE zu HU) - werden am Anfang verschlossen!
  --Ausserdem der Stein in der Ork Region 1018380619
  --Ebenfalls die Tuer in der OR Region (Dungeon) - Wasserfall - 1019420597
  local mainq_doors = {1013397754,1013397761,1013397738,1013397746,1018380619,1019420597}
  for index,woid in mainq_doors do
  	setWoobState {
  		woid = woid,
  		state = "WOOB_DOOR_LOCKED",
  	}
  end 
  
  -- AddOn Kapitaene freischalten
  -- Crystal Planes
  unlockShipPortal(1287,8,"NORTH",args.heroRef)
  -- Cursed Forest
  unlockShipPortal(1287,7,"SOUTH",args.heroRef)
  
  changeCreature {
  	tcid = 10447,
  	merchantType = "MERCHANT_COMBOMASTER",
  	delay = 1,
  }

end)

quest.setScript( 309, "OnWon", function(args)
changeCreature {
  	tcid = 1154,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM01",	--agree
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 1154,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 3,
  }

end)

quest.setScript( 625, "OnWon", function(args)
changeCreature {
  	tcid = 2316,
  	behaviour = "JOB_QUESTSTAGING",
  	mortality = "MORTAL",
  	role = "ROLE_INVALID",
  	emotion = "ANIM_TYPE_SM22",
  	loopCount = 1,
  }
  killCreature {
  	tcid = 2316,
  	deinitragdoll = false,
  	delay = 2,
  }

end)

quest.setScript( 625, "OnSetup", function(args)
changeCreature {
  	tcid = 2316,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 625, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 2316 and args.id == 625 then
  	changeCreature {
  		tcid = 2316,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  end
  

end)

quest.setScript( 625, "OnDeath", function(args)
if 		args.tcid == 4162 or 
  			args.tcid == 4163 or 
  			args.tcid == 2371 then
  		
  		changeCreature {
  			tcid = 2316,
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_SM20",
  			loopCount = -1,
  		}
  end
  
  --4162, 4163, 2371

end)

quest.setScript( 2357, "OnWon", function(args)
changeCreature {
  	tcid = 5078, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM13",
  	loopCount = 2,
  }
  changeCreature {
  	tcid = 5078,
  	behaviour = "questCreatures",
  	delay = 8,
  }

end)

quest.setScript( 2984, "OnTaskAwaiting", function(args)
creatureGotoPos(8289,{29;13;0;850.000000;1400.000000;0.000000;-30.000000},	nil,	nil,	"questCreatures",	0)
  creatureTeleportsAway(8289, 15)
  

end)

quest.setScript( 2984, "OnWon", function(args)
changeCreature {
  	tcid = 8288,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM28", --sigh
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 8288,
  	behaviour = "questCreatures",
  	delay = 3,
  }
  
  
  

end)

quest.setScript( 2983, "OnWon", function(args)
changeCreature {
  	tcid = 8288,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM27", --salute
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 8288,
  	behaviour = "questCreatures",
  	delay = 3,
  }
  
  
  

end)

quest.setScript( 697, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 2154,
  	-- mortality = "IMMORTAL", -- no need, automatically immortal
    clearAutoTeleporting = true,
  }
  

end)

quest.setScript( 697, "OnTaskFulfilled", function(args)

  --changeCreature {
  --  tcid = 2154,
  --  behaviour = "JOB_QUESTSTAGING",
  --  gotoPosition = toWorldPosition("34;57;-1;2321.203125;48.703125;-30.742262;320.826324"),
  --  speed = 2,
  --  followUpAngle = 320,
  --  followUpBhv = "questCreatures",
  --}
  

end)

quest.setScript( 697, "OnWon", function(args)
--2154 Drachenjaeger
  
  teleport {
    tcid = 2154,
    position = toWorldPosition("32;56;-1;1379.349976;3095.300049;-157.479004;15.000000"),
    orientation = 15,
    delay = 30,
  }

end)

quest.setScript( 2908, "OnSetup", function(args)
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1023593803}

end)

quest.setScript( 1547, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 4207,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = { sx=42,sy=41,sz=0,px=1516,py=731,pz=932 },
  	followUpBhv = "questCreatures",
  }
  

end)

quest.setScript( 2905, "OnSetup", function(args)
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1023596411}

end)

quest.setScript( 3009, "OnCounter", function(args)
return "TASKCREATURE_8420"

end)

quest.setScript( 3008, "OnCounter", function(args)
return "TASKCREATURE_8417"

end)

quest.setScript( 303, "OnWon", function(args)
questCompleted(args)
  
  changeCreature {
  	tcid = 1149,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=34,sy=33,sz=0,px=1106.351563,py=1106.148438,pz=1199.873047},
  	followUpBhv = "questCreatures",
  }

end)

quest.setScript( 2024, "OnTimer", function(args)
if args.state == "TASK_AWAITING" 
  	and args.count == 1 then 
  	solveQuest (args.id)
  end
  

end)

quest.setScript( 2024, "OnSetup", function(args)
setTimer {
  	id= 2024,
  	interval=1,
  	count=6,
  }
  

end)

quest.setScript( 2024, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid= 5868,
  	behaviour= "JOB_QUESTSTAGING",
  	emotion= "ANIM_TYPE_MAGICA",
  	loopCount= 3,
  }

end)

quest.setScript( 2055, "OnTaskAwaiting", function(args)
--for i,ref in getTeamRefs() do
  --  teleportHero {
  --    position = { px=2631, py=3000, pz=-1 , sx=40 , sy=42 , sz=0 },
  --    orientation = 300, 
  --    heroRef = ref,
  --    delay = 2,
  --  }
  --end
  --40;42;0;2650.000000;2600.000000;42.000000;0.000000
  --40;42;0;2631.070313;2999.625000;-1.952244;306.939514
  
  teleportTeam(2055,"40;42;0;2631.070313;2999.625000;-1.952244;306.939514")

end)

quest.setScript( 2055, "OnTaskFulfilled", function(args)
--for i,ref in getTeamRefs() do
  --  teleportHero {
  --    position = { px=562, py=2446.046875, pz=1613.688110 , sx=32 , sy=56 , sz=0 },
  --    orientation = 231, 
  --    heroRef = ref,
  --    delay = 2,
  --  }
  --end
  --32;56;0;562.000000;2446.046875;1613.688110;231.903549
  
  
  teleportTeam(2055,"32;56;0;562.000000;2446.046875;1613.688110;231.903549")

end)

quest.setScript( 2055, "OnStation", function(args)
tcids = {6046,6048,6049,6206}
  if args.currentStation == 0 and args.woid == 1018922029 then
  	setWoobEffect {
  		effect = "FXTYPE_QFX_GRUENERDUNST",
  		woid = 1018922029,
  	}
  for index, tcid in tcids do
  		changeCreature{
  		tcid=tcid,
  		role= "INVALID",
  		mortality="MORTAL",
  		}
  	destroyCreature{
  	tcid=tcid,
  	splatter=true, 
  	delay=3,
  	}
  		changeCreature{
  			tcid=6044,
  			behaviour= "QUESTJOB_KILL_RICH",
  			}
  	end
  end
  
  if args.currentStation == 1 then 
  	changeCreature{
  	tcid=6044,
  	role= "INVALID",
  	mortality="MORTAL",
  	}
  	destroyCreature{
  	tcid=6044,
  	splatter=true, 
  	}
  end
  

end)

quest.setScript( 647, "OnWon", function(args)
questCompleted(args)
  

end)

quest.setScript( 647, "OnSetup", function(args)
-- please check!
  --questMessage("QUEST_COMPLETED")
  
  --2087 -> krankes maedchen
  teleport {
  	tcid = 2087,
  	position = toWorldPosition("33;37;0;2450.703125;3155.046875;294.051880;324.196655"),
  }
  changeCreature {
    tcid = 2087,
    behaviour = "JOB_KID",
    faction = "FACTION_FRIEND_HERO_ALL",
    delay = 3,
  }

end)

quest.setScript( 2553, "OnTalk", function(args)
if args.tcid==6863 and args.state=="TASK_AWAITING" and args.id == 2553 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2555, "OnTalk", function(args)
if args.tcid==6879 and args.state=="TASK_AWAITING" and args.id == 2555 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2557, "OnTalk", function(args)
if args.tcid==6889 and args.state=="TASK_AWAITING" and args.id == 2557 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 363, "OnWon", function(args)
changeCreature {
  	tcid = 1362,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM13",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 1362,
  	behaviour = "questCreatures",
  	delay = 4
  }

end)

quest.setScript( 312, "OnWon", function(args)
changeCreature {
  	tcid = 1157,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 1157,
  	behaviour = "questCreatures",
  	delay = 4
  }

end)

quest.setScript( 3030, "OnTalk", function(args)
if args.tcid == 8454 then
  	changeCreature {
  		tcid = 8454,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1
  	}
  end
  

end)

quest.setScript( 3030, "OnWon", function(args)
changeCreature {
  	tcid = 8454,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM21",
  	loopCount = 1
  }
  
  killCreature {
  	tcid = 8454,
  	deinitragdoll = true,
  	delay = 2
  }
  
  tcid8454 = nil;
  

end)

quest.setScript( 3033, "OnWon", function(args)
if Quest3029Lost == nil then
  	solveQuest( 3029 )
  end
  

end)

quest.setScript( 2913, "OnTalk", function(args)
if args.tcid==7854 and args.state=="TASK_AWAITING" and args.id == 2913 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2587, "OnTalk", function(args)
if args.tcid==7228 and args.state=="TASK_AWAITING" and args.id == 2587 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2585, "OnTalk", function(args)
if args.tcid==7227 and args.state=="TASK_AWAITING" and args.id == 2585 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 1631, "OnTalk", function(args)
local demons = { 4322, 4323, 4324, 4325 }
  local names = { "Demon_guard_small", "Demon_guard_armor_elite",
  								"Demon_guard", "Demon_guard_elite" }
  
  if args.tcid == 4322 and args.state == "TASK_AWAITING" then
  	for i, demon in demons do
  		changeCreature {
  			tcid = demon,
  			effect = "FXTYPE_GEN_TRANSFORM",
  		}
  		changeCreature {
  			tcid = demon,
  			creature = names[i],
  			delay = 2,
  		}
  	end
  end
  

end)

quest.setScript( 1631, "OnStateChange", function(args)
local demons = { 4322, 4323, 4324, 4325 }
  if args.state == "PREFIGHT" then
  	for i, demon in demons do
  		changeCreature {
  			tcid = demon,
  			mortality = "MORTAL",
  			faction = "FACTION_ENEMY_HERO",
  			behaviour = "Enemy_warrior_brave_ex",
  		}
  	end
  end 

end)

quest.setScript( 1630, "OnTaskAwaiting", function(args)
local demons = { 4322, 4323, 4324, 4325 }
  local names = { "m01", "m02", "f01", "f02" }
  for i, demon in demons do
  cname = "Human_stat_citizen_child_"..names[i]
  	changeCreature {
  		tcid = demon,
  		creature = cname,
  	}
  end
  

end)

quest.setScript( 3120, "OnSetup", function(args)
local tcids = {8535,8757,8758,8759}
  
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_SPPL_RISE",
  	}	
  
  end

end)

quest.setScript( 3120, "OnTaskAwaiting", function(args)
destroyCreature {
  	tcid = 8535,
  	splatter = true,
  	delay = 1;
  }
  
  destroyCreature {
  	tcid = 8757,
  	splatter = true,
  	delay = 1;
  }
  
  destroyCreature {
  	tcid = 8758,
  	splatter = true,
  	delay = 1;
  }
  
  destroyCreature {
  	tcid = 8759,
  	splatter = true,
  	delay = 1;
  }

end)

quest.setScript( 2991, "OnTalk", function(args)
if args.tcid == 8327 and args.state == "PRECONDS_FULFILLED" then
  	doEmote(8327,"ANIM_TYPE_SM21",-1)
  end
  

end)

quest.setScript( 2991, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	doEmote(8327,"ANIM_TYPE_SM20",-1)
  	changeCreature{ tcid = 8327, clearAutoTeleporting=true}
  end	
  
  if args.state == "TASK_AWAITING" then
  	doEmote(8327,"ANIM_TYPE_LAYGROUND-UP",1)
  	doEmote(8327,"ANIM_TYPE_EM15",3,4) -- drink
  end
  

end)

quest.setScript( 748, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 2220,
  	behaviour = "Hireling_brave",
  	faction = "FACTION_HERO_BAD",
  }

end)

quest.setScript( 3000, "OnStation", function(args)
--if args.currentStation == 0 and args.id == 3000 then 
  --	changeCreature {
  --			tcid = 8310,
  --			behaviour = "Hireling_coward",
  --			mortality = "IMMORTAL",
  --		}
  --		addToGroup(8310,0)
  --	changeCreature {
  --			tcid = 8311,
  --			behaviour = "Hireling_coward",
  --			mortality = "IMMORTAL",
  --		}
  --		addToGroup(8311,0)
  --end
  

end)

quest.setScript( 3000, "OnWon", function(args)

  for i,tcid in {8243,8310,8311} do
  	changeCreature {
  		tcid = tcid,
  		mortality= "MORTAL",
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM16",
  		loopCount = 1,
  	}
  	killCreature {
  		tcid = tcid,
  		splatter = true,
  		delay = 3,
  	}
  end
  

end)

quest.setScript( 3134, "OnTaskAwaiting", function(args)
teleportTeam (3134,{sx=13,sy=2,sz=-1 , px=2150,py=1050,pz=0 , orient=270})
  

end)

quest.setScript( 3134, "OnTalk", function(args)
if args.state == "TASK_AWAITING" and args.tcid == 8799 then
  	teleportTeam (3134,{sx=13,sy=2,sz=-1 , px=2150,py=1050,pz=0 , orient=270})
  end
  

end)

quest.setScript( 3134, "OnTaskFulfilled", function(args)
teleportTeam (3134,{sx=18,sy=3,sz=0 , px=2700,py=1950,pz=0 , orient=180})

end)

quest.setScript( 3134, "OnCounter", function(args)
if args.state == "TASK_AWAITING" then
  	return "TASKCREATURE_8822"
  end
  if args.state ==  "TASK_FULFILLED" then
  	return "TASKCREATURE_8799"
  end 

end)

quest.setScript( 2993, "OnWon", function(args)
--creatureGotoPos(8327,{44;15;0;350.000000;50.000000;0.000000;0.000000})

end)

quest.setScript( 2993, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 8327,
  	clearAutoTeleporting = true,
  }
  

end)

quest.setScript( 3011, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 8425,
  	behaviour = "Enemy_warrior_brave_tenergy",
  	visible = true,
  	delay = 0.1,
  }

end)

quest.setScript( 2829, "OnWon", function(args)
local wachmann = {8084,8085,8086}
  		
  for index,id in wachmann do
  	creatureGotoPosition (id,{39;24;0;2300;2800;0.000000})
  	creatureTeleportsAway (id,25)
  end
  
  
  --39;24;0;2300.000000;2800.000000;0.000000;0.000000

end)

quest.setScript( 281, "OnWon", function(args)

  changeCreature {
  	tcid = 1013,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=33,sy=16,sz=0 , px=650,py=100,pz=0}
  }
  creatureTeleportsAway(1013,25)
  changeCreature {
  	tcid = 1020,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=33,sy=16,sz=0 , px=650,py=100,pz=0}
  }
  creatureTeleportsAway(1020,25)

end)

quest.setScript( 175, "OnWon", function(args)
changeCreature {
  	tcid = 486,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 486,
  	behaviour = "questCreatures",
  	delay = 2
  }

end)

quest.setScript( 2833, "OnLost", function(args)
changeCreature {
  	tcid = 8077,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM02" --angry
  }
  
  changeCreature {
  	tcid = 8077,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 4,
  }

end)

quest.setScript( 2833, "OnWon", function(args)
changeCreature {
  	tcid = 8077,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08" --bow
  }
  
  changeCreature {
  	tcid = 8077,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 4,
  }

end)

quest.setScript( 2647, "OnWon", function(args)
changeCreature {
  	tcid = 1529,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08", --bow
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 1529,
  	behaviour = "questCreatures",
  	delay = 4,
  }
  
  
  

end)

quest.setScript( 2678, "OnStation", function(args)
if args.currentStation == 0 and args.tcid == 1466 then
  	changeCreature {
  		tcid = 1466,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  if args.currentStation == 1 and args.tcid == 1463 then
  	changeCreature {
  		tcid = 1463,
  		behaviour = "JOB_POOR_STATIST",
  		}
  end
  
  if args.currentStation == 2 and args.tcid == 1473 then
  	changeCreature {
  		tcid = 1473,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  
  if args.currentStation == 3 and args.tcid == 1465 then
  	changeCreature {
  		tcid = 1465,
  		behaviour = "JOB_POOR_STATIST",
  		}
  end
  
  if args.currentStation == 4 and args.tcid == 7677 then
  	changeCreature {
  		tcid = 7677,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  

end)

quest.setScript( 2678, "OnWon", function(args)
changeCreature {
  	tcid = 7698,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM24", --pray
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7698,
  	behaviour = "questCreatures",
  	delay = 9,
  }
  
  
  

end)

quest.setScript( 2676, "OnStation", function(args)
if args.currentStation == 0 and args.tcid == 1463 then
  	changeCreature {
  		tcid = 1463,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  if args.currentStation == 1 and args.tcid == 1465 then
  	changeCreature {
  		tcid = 1465,
  		behaviour = "JOB_POOR_STATIST",
  		}
  end
  
  if args.currentStation == 2 and args.tcid == 1466 then
  	changeCreature {
  		tcid = 1466,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  
  if args.currentStation == 3 and args.tcid == 1473 then
  	changeCreature {
  		tcid = 1473,
  		behaviour = "JOB_POOR_STATIST",
  		}
  end
  
  if args.currentStation == 4 and args.tcid == 7677 then
  	changeCreature {
  		tcid = 7677,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  

end)

quest.setScript( 2676, "OnWon", function(args)
changeCreature {
  	tcid = 1485,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM24", --pray
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 1485,
  	behaviour = "questCreatures",
  	delay = 9,
  }
  
  
  

end)

quest.setScript( 1798, "OnWon", function(args)
changeCreature {
   tcid=4806,
   behaviour = "JOB_QUESTSTAGING",
   emotion = "ANIM_TYPE_DEFENSE",
   loopCount = -1,
   effect="FXTYPE_GEN_TRANSFORM",
    delay=4,
  }
  changeCreature {
   tcid=4806,
  behaviour = "JOB_QUESTSTAGING",
  creature="Atmo_crow_black",
  delay=6,
  }

end)

quest.setScript( 2995, "OnWon", function(args)
changeCreature {
  	tcid = 8327,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08", --bow
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 8327,
  	behaviour = "questCreatures",
  	delay = 4,
  }
  
  
  

end)

quest.setScript( 1946, "OnSetup", function(args)
changeCreature {
  	tcid = 5504,
  	useUnconscious = true,
  	unconsciousTime = 3,
  	livesRemaining = 1,
  	clearAutoTeleporting = true
  }

end)

quest.setScript( 1946, "OnUnconscious", function(args)

  if args.tcid == 5504 then
  	changeCreature {
  		tcid = 5504,
  		useUnconscious = false,
  		livesRemaining = 0,
  		mortality = "IMMORTAL",
  		faction = "FACTION_HIGHELVE",
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1
  	}
  end

end)

quest.setScript( 1946, "OnCounter", function(args)
return "TASKCREATURE_5504"

end)

quest.setScript( 1946, "OnWon", function(args)

  changeCreature {
  	tcid = 5504,
  	emotion = "ANIM_TYPE_SM22",
  	loopCount = 1
  }
  
  destroyCreature {
  	tcid = 5504,
  	splatter = false,
  	delay = 6,
  }

end)

quest.setScript( 1946, "OnTalk", function(args)

  if args.tcid == 5504 then
  	changeCreature {
  		tcid = 5504,
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1
  	}
  end
  

end)

quest.setScript( 1065, "OnSetup", function(args)
creatureTeleportsAway( 2985, 2 )
  

end)

quest.setScript( 2202, "OnStation", function(args)
if args.currentStation == 1 then 
  	changeCreature {
  		tcid = 6696,
  		behaviour = "WALKAROUND"
  	}
  end
  

end)

quest.setScript( 3182, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	return "QUEST_3182_BUTTON_CANCEL", "QUEST_3182_BUTTON_OK"
  end 

end)

quest.setScript( 1663, "OnWon", function(args)
local inq = 4410
  
  changeCreature {
    tcid = inq,
    mortality = "MORTAL",
    faction = "FACTION_ENEMY_HERO",
    behaviour = "Enemy_mage",
    role = "ROLE_ATTACKER",
  }

end)

quest.setScript( 1663, "OnTimer", function(args)
local sera = 8433
  local inq = 4410
  
  if args.count == 10 then
  	teleport {
  		tcid = sera,
  		position = toWorldPosition("4;30;0;783.549988;3197.399902;-68.092796;62.000000"),
  		orientation = 62.000000,
  	}
  	changeCreature {
  		tcid = sera,
  		effect = "FXTYPE_GEN_SUMMON",
  	}
  end
  if args.count == 9 then
  	changeCreature {
  		tcid = sera,
  		effect = "FXTYPE_INVALID",
  	}
  end
  if args.count == 8 then
  	castSpell {
  		caster = inq,
  		target = sera,
  		slot = 0,
  	}
  end
  if args.count == 6 then
  	changeCreature {
  		tcid = sera,
  		mortality = "MORTAL",
  	}
  	killCreature {
  		tcid = sera,
  		delay = 0.1,
  	}
  end
  if args.count == 5 then
  	solveQuest(args.id)
  end
  

end)

quest.setScript( 1663, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 8434,
  	visible = false,
  }
  
  setTimer {
  	id = 1663,
  	count = 10,
  	interval = 1,
  }

end)

quest.setScript( 1813, "OnWon", function(args)
changeCreature{
  		tcid=4967,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_KNEE-IDLE",
  		loopCount = 3,
  }

end)

quest.setScript( 1887, "OnTaskAwaiting", function(args)
setTimer {
   id = 1887,
   interval = 1,
   count = 4,
  }

end)

quest.setScript( 1887, "OnTimer", function(args)
if args.count == 1 then
  	solveQuest(args.id)
  end
  
  if args.count == 4 then
  	creatureTeleportPosition(5007,0,{30,26,-1,2602.75,1899.75,-116.946999})
  end

end)

quest.setScript( 1611, "OnTaskAwaiting", function(args)
setTimer {
  	id = 1611,
  	interval = 1,
  	count = 20,
  }

end)

quest.setScript( 1611, "OnTimer", function(args)
local begleiter = 2180
  if args.count == 20 then
  	changeCreature {
  		tcid = begleiter,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = toWorldPosition("48;26;0;2635.296875;1141.796875;-1090.768555;9.462341"),
  		followUpAngle = 9.462341,
  		followUpBhv = "dumbBehaviour",
  	}
  end
  if args.count == 10 then
  	changeCreature {
  		tcid = begleiter,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_MAGICB",
  		loopCount = 3,
  	}
  end
  if args.count == 4 then
  	setWoobState {
  		woid = 1021408807,
  		state = "WOOB_ANIM_ON",
  	}
  	setWoobEffect {
  		woid = 1021408807,
  		effect = "FXTYPE_INVALID",
  	}
  end
  if args.count == 1 then
  	solveQuest(args.id)
  end

end)

quest.setScript( 2017, "OnCounter", function(args)
return "CREATURE_1013"

end)

quest.setScript( 2769, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid= 7962,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx = 27; sy = 23; sz = 0; px = 2230; py = 1240; pz = 100.071999},
  	orientation = 150,
  	speed = 2,
  	followUpBhv = "questCreatures",
  	clearAutoTeleporting = true,
  }
  

end)

quest.setScript( 3591, "OnCounter", function(args)
return "TASKCREATURE_9886"

end)

quest.setScript( 185, "OnTaskAwaiting", function(args)
if nil then
  local tcids = {573,575,576,577,578,579,580,581,582,583,584,585,587,588,589}
  for index,tcid in tcids do 
  	changeCreature {
  	tcid = tcid,
  	role = "ROLE_ATTACKER",
  	behaviour = "Enemy_warrior_brave",
  	faction = "FACTION_ENEMY_HERO",
  	}
  end
  end
  

end)

quest.setScript( 185, "OnCounter", function(args)
return "TASKCREATURE_573"

end)

quest.setScript( 2195, "OnWon", function(args)
changeCreature {
     tcid = 6728,
     mortality = "MORTAL",
    }

end)

quest.setScript( 1736, "OnWon", function(args)
changeCreature {
  	tcid = 4663,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32",
  	loopCount = 1,
  }
  creatureTeleportsAway (4663, 45)

end)

quest.setScript( 713, "OnTalk", function(args)
local tcids = {2172,2174}
  if args.tcid == 2173 and args.id == 713 and args.state == "TASK_FULFILLED" then
  	for index,tcid in tcids do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "questCreatures",
  			faction = "FACTION_FRIEND_HERO_ALL",
  		}
  	end
  end

end)

quest.setScript( 713, "OnWon", function(args)
changeCreature {
  	tcid = 2174, --schamane #2
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=54;sy=36;sz=0;px=415.593994;py=2405.800049;pz=-1213.25},
  	followUpAngle = 249.000000,
  	followUpBhv = "questCreatures",
  }
  
  changeCreature {
  	tcid = 2172, --aeltester
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=54;sy=36;sz=0;px=335.75;py=2316.453125;pz=-1211.353149},
  	followUpAngle = 209.248810,
  	followUpBhv = "questCreatures",
  }

end)

quest.setScript( 3012, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 8364,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 3012, "OnWon", function(args)
changeCreature {
  	tcid = 8435,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM26", --ready
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 8364,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM08", --bow
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 8364,
  	behaviour = "questCreatures",
  	delay = 4,
  }
  changeCreature {
  	tcid = 8435,
  	behaviour = "questCreatures",
  	delay = 5,
  }

end)

quest.setScript( 3213, "OnWon", function(args)
changeCreature {
  	tcid = 9085,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM10", --cheer
  	loopCount = 2,
  }
  changeCreature {
  	tcid = 9085,
    behaviour = "questCreatures",
    delay = 5,
  }
  

end)

quest.setScript( 3197, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
    	return "QUEST_3182_BUTTON_CANCEL", "QUEST_3182_BUTTON_OK"
    end 
  

end)

quest.setScript( 1792, "OnWon", function(args)
changeCreature {
   tcid=4804,
   behaviour = "JOB_QUESTSTAGING",
   emotion = "ANIM_TYPE_DEFENSE",
   loopCount = -1,
   effect="FXTYPE_GEN_TRANSFORM",
    delay=4,
  }
  changeCreature {
   tcid=4804,
  behaviour = "JOB_QUESTSTAGING",
  creature="Atmo_sheep_brown",
  delay=6,
  }

end)

quest.setScript( 3191, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
    	return "QUEST_3182_BUTTON_CANCEL", "QUEST_3182_BUTTON_OK"
  end 
  

end)

quest.setScript( 1976, "OnTaskFulfilled", function(args)
tcids={5605,5606,5607}
  for i, tcid in tcids do
  	setRole(tcid, "ROLE_ATTACKER")
  end
  

end)

quest.setScript( 2062, "OnSetup", function(args)
--setTimer {
  --	id= 2024,
  --	interval=1,
  --	count=6,
  --}
  if args.state == "PRECONDS_FULFILLED" then 
  	solveQuest (args.id)
  end
  

end)

quest.setScript( 3202, "OnTaskNotFulfilled", function(args)
changeCreature {
      tcid = 8964,
      clearAutoTeleporting = true,
    role = "ROLE_DIALOG",
      }

end)

quest.setScript( 3190, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 8964,
  	mortality = "IMMORTAL",
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 3190, "OnTaskFulfilled", function(args)
changeCreature {
     tcid = 8964,
     role = "ROLE_DIALOG",
  }

end)

quest.setScript( 2160, "OnTaskFulfilled", function(args)
--return {}
  

end)

quest.setScript( 2160, "OnTalk", function(args)
if args.state == "TASK_AWAITING" and args.tcid == 6600 then
  	teleportTeam(2160,"32;52;0;1600;1600;1000;0")
  end
  

end)

quest.setScript( 2160, "OnTaskAwaiting", function(args)

  --for i, ref in getTeamRefs() do
  --	teleportHero {
  --		heroRef = ref,
  --		orientation = 0,
  --		position = { sx= 32,sy= 52,sz= 0,px= 1600,py= 1600,pz= 1000}
  --	}
  --end
  
  teleportTeam(2160,"32;52;0;1600;1600;1000;0")
  
  -- This enables the teleport button in the logbook.
  return toWorldPosition("32;52;0;1750.000000;1550.000000;0.000000;0.000000")
  

end)

quest.setScript( 1958, "OnWon", function(args)
creatureTeleportsAway(5529,10)

end)

quest.setScript( 776, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	return "QUEST_DIALOG_NO"
  end
  

end)

quest.setScript( 776, "OnWon", function(args)
changeCreature {
    tcid = 9506,
    mortality = "MORTAL",
    role = "ROLE_INVALID",
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_SM22",
  }
  killCreature {
    tcid = 9506,
    delay = 2,
  }
  

end)

quest.setScript( 776, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.id == 776 and args.tcid ==9506 then
    changeCreature {
      tcid = 9506,
      behaviour = "JOB_QUESTSTAGING",
      emotion = "ANIM_TYPE_SM21",
      loopCount = -1,
    }
  end
  

end)

quest.setScript( 776, "OnStateChange", function(args)
if args.state == "PREFIGHT" then
  	changeCreature {
  		tcid = 9506,
  		useUnconscious = true,
  		livesRemaining = 1,
  		unconsciousTime = 1,
  		clearAutoTeleporting = true,
    	behaviour = "Enemy_warrior_brave_ex",
      faction = "FACTION_ENEMY_HERO",
    }
  
    local guards = {9229,9230}
    for index,tcid in guards do
  	  changeCreature {
  		  tcid = tcid,
  		  behaviour = "JOB_QUESTSTAGING",
  		  gotoPosition = toWorldPosition("3;31;-1;2000.000000;1600.000000;0.000000;0.000000"),
  		  speed = 2,
    	}
    	creatureTeleportsAway(tcid,25)
    end
  end
  

end)

quest.setScript( 776, "OnTaskAwaiting", function(args)
destroyCreature {
    tcid = 1186
  }

end)

quest.setScript( 776, "OnTaskFulfilled", function(args)
changeCreature {
    tcid = 9506,
    clearUnconscious = true,
    livesRemaining = 0,
    behaviour = "JOB_QUESTSTAGING",
    dont_turn = true,
    emotion = "ANIM_TYPE_SM20",
    faction = "FACTION_FRIEND_HERO_ALL",
    mortality = "IMMORTAL",
    role = "ROLE_DIALOG",
    loopCount = -1,
  }
  
  changeCreature {
  	tcid = 8490,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 2170, "OnTalk", function(args)
if args.state == "TASK_AWAITING" and args.tcid == 6600 then
  	teleportTeam(2160,"32;52;0;1600;1600;1000;0")
  end
  

end)

quest.setScript( 2170, "OnTaskAwaiting", function(args)
-- This enables the teleport button in the logbook.
  return toWorldPosition("32;52;0;1750.000000;1550.000000;0.000000;0.000000")
  

end)

quest.setScript( 3487, "OnDialog", function(args)
if args.state == "TASK_FULFILLED" then
  	return "QUEST_3487_TF_DLG"
  end
  

end)

quest.setScript( 3304, "OnTalk", function(args)
if args.tcid==9021 and args.state=="TASK_AWAITING" and args.id == 3304 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2171, "OnTalk", function(args)
if args.state == "TASK_AWAITING" and args.tcid == 6600 then
  	teleportTeam(2160,"32;52;0;1600;1600;1000;0")
  end

end)

quest.setScript( 2171, "OnTaskFulfilled", function(args)
-- This enables the teleport button in the logbook.
  return toWorldPosition("31;57;0;2350;2000;1000;0")

end)

quest.setScript( 2171, "OnTaskAwaiting", function(args)
-- This enables the teleport button in the logbook.
  return toWorldPosition("32;52;0;1750.000000;1550.000000;0.000000;0.000000")
  

end)

quest.setScript( 2171, "OnWon", function(args)
return {}

end)

quest.setScript( 3306, "OnTalk", function(args)
if args.tcid==9022 and args.state=="TASK_AWAITING" and args.id == 3306 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 3488, "OnCounter", function(args)
return "TASKCREATURE_9718"

end)

quest.setScript( 3491, "OnCounter", function(args)
return "TASKCREATURE_9721"

end)

quest.setScript( 3204, "OnWon", function(args)
local verhaftung = {8940,8941,8949,9005}
  		
  for index,id in verhaftung do
  	creatureGotoPosition (id,{38;22;0;2300;2800;0.000000})
  	creatureTeleportsAway (id,25)
  end
  
  removeFromGroup {
    		tcid = 8940,
  }
  removeFromGroup {
    		tcid = 8941,
  }

end)

quest.setScript( 919, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 9505,
  	mortality = "MORTAL",
  }
  killCreature {
  	tcid = 9505,
  	delay = 0,
  }

end)

quest.setScript( 919, "OnTaskAwaiting", function(args)
teleport {
  	tcid = 2492,
  	position = {px=0,py=0,pz=0,sx=0,sy=0,sz=0},
  	orientation = 0,
  }

end)

quest.setScript( 747, "OnTaskFulfilled", function(args)
for index,tcid in {8170,8150} do
  	changeCreature {
  		tcid = tcid,
  		clearUnconscious = true,
  		livesRemaining = 0,
  		mortality = "MORTAL",
  	}
  end
  
  changeCreature {
  	tcid = 2224,
  	effect = "FXTYPE_INVALID",
  }
  

end)

quest.setScript( 747, "OnTaskAwaiting", function(args)
local tcids = {8170,8150}
  local bandits = {2225,2226,2227}
  
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		mortality = "IMMORTAL",
  	}
  end
  
  for index,tcid in bandits do
  	changeCreature {
  		tcid = tcid,
  		faction = "FACTION_ENEMY_HERO",
  	}
  end
  
  changeCreature {
  	tcid = 2224,
  	effect = "FXTYPE_GEN_TPRISON",
  }

end)

quest.setScript( 747, "OnWon", function(args)
local stuntmen = 9439
  local orcs = {8170,8150}
  
  teleport {
  	tcid = stuntmen,
  	position = {sx=16;sy=7;sz=0;px=2350;py=1200;pz=0},
  }
  
  creatureTeleportsAway(stuntmen)
  
  --Orks nach 600 Sekunden aus der Gruppe entfernen, toeten
  --und anschliessend loeschen.
  for index,tcid in orcs do
  	removeFromGroup{
  		tcid = tcid,
  		delay = 600,
  	}
  	killCreature {
  		tcid = tcid,
  		delay = 600,
  	}
  	destroyCreature {
  		tcid = tcid,
  		splatter = false,
  		delay = 605,
  	}
  end
  

end)

quest.setScript( 1600, "OnTimer", function(args)
if args.count == 5 then
  	changeCreature {
  		tcid = 7474,
  		behaviour = "JOB_QUESTSTAGING",
  		role = "ROLE_INVALID",
  		emotion = "ANIM_TYPE_MAGICB",
  		loopCount = 1,
  	}
  	changeCreature {
  		tcid = 7474,
  		effect = "FXTYPE_GEN_NOVA3",
  		delay = 1,
  	}
  end
  
  if args.count == 3 then
  	solveQuest(args.id)
  	changeCreature {
  		tcid = 7474,
  		role = "ROLE_DIALOG",
  	}
  end

end)

quest.setScript( 1600, "OnTaskAwaiting", function(args)
setTimer {
   id = 1600,
   interval = 1,
   count = 5,
  }

end)

quest.setScript( 3206, "OnTalk", function(args)

  -- random idle texts:
  -- tcid=targetperson
  -- state: idle text will be offered after the quest has been won
  
  if nil then	--derzeit auskommentiert, da die Sprueche noch fehlen. ;-)
  	if args.tcid==9018 and args.state=="WON" then
  		local lokaids = {	"QUEST_3206_IDLE_01","QUEST_3206_IDLE_02",
  											"QUEST_3206_IDLE_03","QUEST_3206_IDLE_04"}
  		local index = 1 + tonumber( math.floor( math.random() * 4 ) )
  		return lokaids[index]
  	end
  end 

end)

quest.setScript( 3206, "OnStation", function(args)
if args.currentStation == 0 then
  	changeCreature {
  		tcid = 9018,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_IDLEA",
  		effect = "FXTYPE_GEN_TPRISON",
  		loopCount = 1,
  	}
  end
  if args.currentStation == 1 then
  	changeCreature {
  		tcid = 9018,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_IDLEB",
  		effect = "FXTYPE_INVALID",
  		loopCount = 1,
  	}
  end
  if args.currentStation == 2 then
  	changeCreature {
  		tcid = 9018,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM01",
  		effect = "FXTYPE_GEN_TRANSFORM",
  		loopCount = 1,
  	}
  end
  if args.currentStation == 3 then
  	changeCreature {
  		tcid = 9018,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM02",
  		effect = "FXTYPE_SMOKEBIGWHITE",
  		loopCount = 1,
  	}
  end
  if args.currentStation == 4 then
  	changeCreature {
  		tcid = 9018,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM03",
  		effect = "FXTYPE_GEN_SPAWN1_I",
  		loopCount = 1,
  	}
  end
  if args.currentStation == 5 then
  	changeCreature {
  		tcid = 9018,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM19",
  		effect = "FXTYPE_HOLOGRAM",
  		loopCount = 1,
  	}
  end
  if args.currentStation == 6 then
  	changeCreature {
  		tcid = 9018,
  		behaviour = "JOB_QUESTSTAGING",
  		effect = "FXTYPE_INVALID",
  		loopCount = 1,
  	}
  end
  if args.currentStation == 7 then
  --	changeCreature {
  --		tcid = 9018,
  --		behaviour = "JOB_QUESTSTAGING",
  --		emotion = "ANIM_TYPE_RUN",
  --		loopCount = 4,
  --	}
  creatureTeleportPosition(9018,0,{41,32,0,942.296,1492.601,279.832,71.3})
  end 

end)

quest.setScript( 1529, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 2067,
  	role = "ROLE_ATTACKER",
  	mortality = "MORTAL",
  	behaviour = "Enemy_warrior_brave",
  	faction = "FACTION_ENEMY_HERO",
  }

end)

quest.setScript( 2689, "OnTaskAwaiting", function(args)
teleport {
  	tcid = tcid,
  	position = {sx=28,sy=25,sz=0 , px=400,py=200,pz=0},
  }
  
  local tcids = { 7728, 7730, 7731, 7701 }
  for i, tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = {sx=28, sy=25, sz=0, px=550, py=100, pz=0 },
  		speed = 2,
  		followUpBhv = "Enemy_warrior_brave",
  		delay = 0.1
  	}
  end
  

end)

quest.setScript( 1681, "OnTaskAwaiting", function(args)
local guests = {4425,4426,4427,4428,4429,4430,4431,4432,4433}
  for i,id in guests do
  	doEmote(id, "ANIM_TYPE_EM30", -1, math.random()*5)
  end
  

end)

quest.setScript( 2064, "OnWon", function(args)
changeCreature {
  	tcid = 6059, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM27",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 6059,
  	behaviour = "JOB_MERCENARY",
  	faction = "FACTION_HIGHELVE_GUARD",
  	delay = 3,
  }

end)

quest.setScript( 2123, "OnDeath", function(args)
--Fogmonster easy = 6364
  --Creatures in List, that can fall into sleep:
  --clist[i][1] = Behaviour, clist[i][2] = TCID
  --clist erweitern um mehrere NPC dynamisch hinzuzufuegen
  local clist = { {"Enemy_warrior_simple",				 		6398}}--warrior
  local lizards = {}
  for i, cvar in clist do
  	lizards[i] = {
  		tcid = cvar[2],
  		alive = true,
  		behaviour = cvar[1],
  	}
  end
  
  for i, object in lizards do
  	if args.tcid == lizards[i].tcid then
  		lizards[i].alive = false,
  		changeCreature {
  			tcid = lizards[i].tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_SM20",
  			mortality = "IMMORTAL",
  			loopCount = -1,
  		}
  	end
  end
  
  if args.tcid == 6364 then --wenn das Nebelmonster tot ist, werden die schlafenden creatures wieder aufstehen
  	for i,object in lizards do
  		if lizards[i].alive == false then
  			changeCreature {
  				tcid = lizards[i].tcid,
  				behaviour = "JOB_QUESTSTAGING",
  				emotion = "ANIM_TYPE_IDLE",
  				loopCount = 1,
  			}
  			changeCreature {
  				tcid = lizards[i].tcid,
  				behaviour = lizards[i].behaviour,
  				delay = 3,
  			}
  		end
  	end
  end
  

end)

quest.setScript( 2123, "OnStateChange", function(args)
local statist_lizards = {7332,7333,7334,7335,7336,7337,7338}
  local food = {7339,7340,7341,7342,7343,7344,7345,7346}
  if args.state == "PRECONDS_FULFILLED" then
  	for index,tcid in statist_lizards do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			mortality = "IMMORTAL",
  			dont_turn = true,
  			emotion = "ANIM_TYPE_SM20",
  			role = "ROLE_INVALID",
  			loopCount = -1,
  		}
  	end
  	for index,tcid in food do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			mortality = "IMMORTAL",
  			dont_turn = true,
  			emotion = "ANIM_TYPE_SM01",
  			role = "ROLE_INVALID",
  			loopCount = -1,
  		}
  	end
  end

end)

quest.setScript( 2123, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 6398,
  	useUnconscious = true,
  	unconsciousTime = 3,
  	livesRemaining = 255,
  }
  
  changeCreature {
  	tcid = 6364,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 2123, "OnTaskFulfilled", function(args)
local fight_lizards = {
  	{
  		tcid = 6396,
  		behaviour = "Enemy_mage_phalanx",
  	}
  }
  local statist_lizards = {
  	{
  		tcid = 7332,
  		behaviour = "JOB_RICH_STATIST",
  	},
  	{
  		tcid = 7333,
  		behaviour = "JOB_RICH_STATIST",
  	},
  	{
  		tcid = 7334,
  		behaviour = "JOB_RICH_STATIST",
  	},
  	{
  		tcid = 7335,
  		behaviour = "JOB_RICH_STATIST",
  	},
  	{
  		tcid = 7336,
  		behaviour = "JOB_RICH_STATIST",
  	},
  	{
  		tcid = 7337,
  		behaviour = "JOB_RICH_STATIST",
  	},
  	{
  		tcid = 7338,
  		behaviour = "JOB_RICH_STATIST",
  	}
  }
  local food = {
  	{
  		tcid = 7339,
  		behaviour = "DOG",
  	},
  	{
  		tcid = 7340,
  		behaviour = "DOG",
  	},
  	{
  		tcid = 7341,
  		behaviour = "DOG",
  	},
  	{
  		tcid = 7342,
  		behaviour = "cat",
  	},
  	{
  		tcid = 7343,
  		behaviour = "cat",
  	},
  	{
  		tcid = 7344,
  		behaviour = "sheep",
  	},
  	{
  		tcid = 7345,
  		behaviour = "sheep",
  	},
  	{
  		tcid = 7346,
  		behaviour = "sheep",
  	}
  }
  --DOG cat sheep
  for id,object in fight_lizards do
  	changeCreature {
  		tcid = object.tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		mortality = "IMMORTAL",
  		dont_turn = true,
  		emotion = "ANIM_TYPE_IDLEA",
  		role = "ROLE_INVALID",
  		loopCount = 1,
  	}
  	changeCreature {
  		tcid = object.tcid,
  		behaviour = object.behaviour,
  		delay = 2,
  	}
  end
  for id,object in statist_lizards do
  	changeCreature {
  		tcid = object.tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		mortality = "IMMORTAL",
  		dont_turn = true,
  		emotion = "ANIM_TYPE_IDLEA",
  		role = "ROLE_INVALID",
  		loopCount = 1,
  	}
  	changeCreature {
  		tcid = object.tcid,
  		behaviour = object.behaviour,
  		delay = 2,
  	}
  end
  for id,object in food do
  	changeCreature {
  		tcid = object.tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		mortality = "IMMORTAL",
  		dont_turn = true,
  		emotion = "ANIM_TYPE_IDLEA",
  		role = "ROLE_INVALID",
  		loopCount = 1,
  	}
  	changeCreature {
  		tcid = object.tcid,
  		behaviour = object.behaviour,
  		delay = 2,
  	}
  end
  

end)

quest.setScript( 325, "OnTaskAwaiting", function(args)
local creatures = {
  	{
  		tcid = 2180, --echsenmensch begleiter
  		pos = {sx=46;sy=22;sz=0;px=27.750000;py=248.398438;pz=549.414856},
  		angle = 308.251984,
  	},
  	{
  		tcid = 6719, --desert mensch
  		pos = {sx=46;sy=22;sz=0;px=154.796875;py=274.75;pz=549.415039},
  		angle = 64.983093,
  	}
  }
  
  for id,object in creatures do
  	changeCreature {
  		tcid = object.tcid,
  		gotoPosition = object.pos,
  		behaviour = "JOB_QUESTSTAGING",
  		followUpBhv = "questCreatures",
  		followUpAngle = object.angle,
  	}
  end 

end)

quest.setScript( 1646, "OnWon", function(args)
changeCreature {
  	tcid = 4379,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 4379,
  	behaviour = "questCreatures",
  	delay = 2
  }

end)

quest.setScript( 2784, "OnWon", function(args)
creatureTeleportsAway (7984, 60)

end)

quest.setScript( 2784, "OnStateChange", function(args)

  -- Rauchende Vase
  if args.state == "PRECONDS_AWAITING" then
  	setWoobEffect {
  		woid = 1022876453,
  		effect = "FXTYPE_SMOKESMALLWHITE",
  	}
  end
  
  if args.state == "PRECONDS_FULFILLED" then
  
  	setWoobEffect {
  		woid = 1022876453,
  		effect = "FXTYPE_INVALID",
  	}
  
  	--Dschinn taucht auf
  	changeCreature{
  		tcid = 7984,
  		effect = "FXTYPE_SMOKEBIGWHITE",
  		delay = 0.1,
  		mortality = "MORTAL",
  	}
  	changeCreature{
  		tcid = 7984,
  		effect = "FXTYPE_INVALID",
  		delay = 4,
  		mortality = "MORTAL",
  	}
  	for i,id in {8755,7986,7987} do
  		changeCreature{
  			tcid=id,
  			behaviour = "JOB_QUESTSTAGING",
  			gotoPosition = {sx=46,sy=12,sz=0,px=500,py=950,pz=2246},
  			followUpAngle = 0,
  			speed=2,
  			followUpBhv = "JOB_QUESTSTAGING",
  			clearAutoTeleporting = true,
  			mortality = "MORTAL",
  			}
  		changeCreature{
  			tcid=id,
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_EM22",
  			loopCount = -1,
  			delay = 6+math.random()*2,
  		}
  	end
  end

end)

quest.setScript( 3207, "OnStateChange", function(args)
local tcids = {9027,9028}
  if args.state == "PREFIGHT" then
  	for index,tcid in tcids do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "Enemy_warrior_brave_ex",
  			faction = "FACTION_ENEMY_HERO",
  			mortality = "MORTAL",
  			role = "ROLE_ATTACKER",
  		}
  	end
  end
  

end)

quest.setScript( 2778, "OnTaskAwaiting", function(args)
for i,id in {8755,7986,7987} do
  	changeCreature{
  		tcid=id,
  		faction="FACTION_HERO_GOOD"
  	}
  end
  

end)

quest.setScript( 2778, "OnTaskFulfilled", function(args)
for i,id in {8755,7986,7987} do
  	changeCreature{
  		tcid=id,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM10",
  		loopCount = 5,
  		delay = math.random(),
  	}
  end
  

end)

quest.setScript( 2778, "OnWon", function(args)
changeCreature {
  	tcid = 8755,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM02" --bow
  }
  changeCreature {
  	tcid = 8755,
  	behaviour = "questCreatures",
  	delay = 4,
  }
  
  
  

end)

quest.setScript( 3089, "OnSetup", function(args)
changeCreature {
  	tcid = 8635,
  	useUnconscious = true,
  	livesRemaining = 255,
  	unconsciousTime = 3,
  }

end)

quest.setScript( 2358, "OnTaskAwaiting", function(args)
creatureTeleportsAway(3002, 1)

end)

quest.setScript( 2358, "OnPrecondsFulfilled", function(args)
changeCreature {
  	tcid = 3002,
  	effect = "FXTYPE_HOLOGRAM",
  }

end)

quest.setScript( 2523, "OnWon", function(args)
changeCreature{
  	tcid = 7407,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM02",
  	loopCount = 4,
  }
  changeCreature{
  	tcid = 7408,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM10",
  	loopCount = 4,
  	delay = 1
  }
  changeCreature{
  	tcid = 7409,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM21",
  	loopCount = 3
  }
  changeCreature{
  	tcid = 7410,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM10",
  	loopCount = 5
  }
  

end)

quest.setScript( 1563, "OnWon", function(args)
changeCreature {
  	tcid = 4360,
  	clearUnconscious = true,
  	livesRemaining = 0,
  }

end)

quest.setScript( 1066, "OnSetup", function(args)
creatureTeleportsAway( 2985, 2 )
  
  

end)

quest.setScript( 3069, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	return "QUEST_3065_GIVER_DECLINE","QUEST_3065_GIVER_ACCEPT"
  	-- "Nein danke, alter Mann!", "Es ist mir eine Ehre!"
  end

end)

quest.setScript( 2539, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 7441,
  	livesRemaining = 1,
  	useUnconscious = true,
  	unconsciousTime = 3,
  }

end)

quest.setScript( 2539, "OnUnconscious", function(args)
changeCreature {
  	tcid = 7441,
  	clearUnconscious = true,
  	role = "ROLE_INVALID",
  	behaviour = "HIRELING_COWARD",
  	mortality = "IMMORTAL",
  	faction = "FACTION_FRIEND_HERO_ALL",
  }

end)

quest.setScript( 3072, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	solveQuest(3067)
  	--killCreature {
  	--	tcid = 8559,
  	--}
  end
  

end)

quest.setScript( 3072, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 8065,
    behaviour = "JOB_QUESTSTAGING",
    gotoPosition = toWorldPosition("38;23;0;126.250000;1262.046875;18.436516;273.231018"),
    followUpBhv = "JOB_RICH_STATIST",
  }
  teleport {
    tcid = 8065,
    position = toWorldPosition("37;23;0;1017.648438;2829.453125;7.313374;101.808502"),
    delay = 45,
  }

end)

quest.setScript( 945, "OnTaskAwaiting", function(args)
creatureTeleportsAway(2619,0)
  creatureTeleportPosition( 2621, 0, {31,7,0,1761.203125,1829.050781,32.890640,254.545441} )	

end)

quest.setScript( 2685, "OnStateChange", function(args)
local tc1 = {  --3 Tribeman Soldaten
  	{
  		tcid = 7703,
  		behaviour = "Enemy_warrior_brave",
  	},
  	{
  		tcid = 7704,
  		behaviour = "Enemy_warrior_brave",
  	},
  	{
  		tcid = 7705,
  		behaviour = "Enemy_warrior_brave",
  	}
  }
  local tc2 = { 7707, 7712 } --2 Soldaten
  local tc3 = {  --2 Frauen
  	{
  		tcid = 7713,
  		pos = {sx=39;sy=14;sz=0;px=2850;py=1550;pz=0},
  	},
  	{
  		tcid = 7715,
  		pos = {sx=39;sy=16;sz=0;px=450;py=2200;pz=0},
  	}
  }
  
  if args.state == "PRECONDS_FULFILLED" and args.id == 2685 then
  	for id,object in tc1 do
  		changeCreature {
  			tcid = object.tcid,
  			behaviour = object.behaviour,
  			faction = "FACTION_ENEMY_HERO",
  		}
  	end
  	for index,tcid in tc2 do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "Enemy_warrior_brave",
  			faction = "FACTION_ENEMY_HERO",
  		}
  	end
  	for id,object in tc3 do
  		changeCreature {
  			tcid = object.tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			gotoPosition = object.pos,
  			speed = 2,
  			followUpBhv = "dumbBehaviour",
  		}
  		creatureTeleportsAway(object.tcid,25)
  	end
  end
  

end)

quest.setScript( 1623, "OnTaskAwaiting", function(args)
local tc1 = { 7703, 7704, 7705 } --3 Tribeman Soldaten
  local tc2 = { 7707, 7712 } --2 Soldaten
  local tc3 = { 7713, 7715 } --2 Frauen
  
  for index,tcid in tc1 do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND-IDLE",
  		loopCount = -1,
  	}
  end
  for index,tcid in tc2 do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND-TALK",
  		loopCount = -1,
  	}
  end
  for index,tcid in tc3 do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND-TALK",
  		loopCount = -1,
  	}
  end
  

end)

quest.setScript( 1677, "OnTaskFulfilled", function(args)
setWoobState {
    	woid = 1024713934,
    	state = "WOOB_DOOR_LOCKED",
    }
  gameCompleted()

end)

quest.setScript( 2858, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	changeCreature {
  		tcid = 8135,
  		mortality = "MORTAL",
  		--behaviour = "questCreatures"
  	}
  end 

end)

quest.setScript( 2858, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	return "QUEST_2858_BUTTON_CANCEL", "QUEST_2858_BUTTON_OK"
  end 

end)

quest.setScript( 1745, "OnTaskAwaiting", function(args)
doEmote(4648, "ANIM_TYPE_EM04",1,0)

end)

quest.setScript( 2938, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	local bgtcs = { 8188, 8261, 8262, 8263 }
  	for i, tcid in bgtcs do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			bubble = 9,
  			emotion = "ANIM_TYPE_IDLE",
  			loopCount = 2,
  			delay = 0.1,
  			followUpBhv = "questCreatures"
  		}
  	end
  end
  

end)

quest.setScript( 2938, "OnWon", function(args)
local bgtcs = { 8188, 8261, 8262, 8263 }
  for i, tcid in bgtcs do
  	creatureTeleportsAway( tcid, 2 )
  end
  
  --Timer einbauen (neues modul!) damit man loot einsammeln kann!
  --teleportTeam(2938,"31;30;0;232.429688;600.546875;69.432930;163.726120")

end)

quest.setScript( 3490, "OnDialog", function(args)
if args.state == "TASK_FULFILLED" then
  	return "QUEST_3490_TF_DLG"
  end
  

end)

quest.setScript( 3600, "OnTaskAwaiting", function(args)
local tcids = {9919,10320,10323,10325}
  for index,tcid in tcids do
    changeCreature {
      tcid = tcid,
      effect = "FXTYPE_GEN_SPAWN1",
      delay = 0.2,
    }
  end 

end)

quest.setScript( 3308, "OnTalk", function(args)
if args.tcid==9023 and args.state=="TASK_AWAITING" and args.id == 3308 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2883, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid=8177,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM15",
  	loopCount = 5,
  	delay = 2,
  }

end)

quest.setScript( 2883, "OnWon", function(args)
changeCreature{
   tcid=1770,
   behaviour = "JOB_QUESTSTAGING",
   emotion = "ANIM_TYPE_EM04",
   loopCount = 2,
   delay = 0,
  }

end)

quest.setScript( 3028, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 8477,
  	clearAutoTeleporting = true
  }

end)

quest.setScript( 3208, "OnWon", function(args)
doEmote(9030, "ANIM_TYPE_EM10",1)
  

end)

quest.setScript( 3310, "OnTalk", function(args)
if args.tcid==9024 and args.state=="TASK_AWAITING" and args.id == 3310 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 3312, "OnTalk", function(args)
if args.tcid==9244 and args.state=="TASK_AWAITING" and args.id == 3312 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2964, "OnTalk", function(args)
if args.tcid==8268 and args.state=="TASK_AWAITING" and args.id == 2964 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 3305, "OnTalk", function(args)
if args.tcid==9022 and args.state=="TASK_AWAITING" and args.id == 3305 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 3305, "OnTaskFulfilled", function(args)
creatureTeleportPosition(9022,0,{47;30;-2;1947.953125;281.523438;-0.004158;42.069794})

end)

quest.setScript( 2551, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 7471,
  	mortality = "MORTAL",
  	useUnconscious = true,
  	unconsciousTime = 4,
  	livesRemaining = 1
  }
  changeCreature {
  	tcid = 7472,
  	mortality = "MORTAL",
  	useUnconscious = true,
  	unconsciousTime = 4,
  	livesRemaining = 1
  }
  
  --Wenn diese globale Variable gesetzt wird, weiss ich, dass der Spieler im 
  --Goodpath spielt.
  isDraydGood = true
  
  changeCreature {
  	tcid = 8426,
  	behaviour = "JOB_QUESTSTAGING",
  	role = "ROLE_INVALID",
  	gotoPosition = {sx=21, sy=26, sz=0, px=1900, py=1200, pz=0},
  	speed = 2
  }
  creatureTeleportsAway (8426, 5)
  

end)

quest.setScript( 2551, "OnWon", function(args)
local tcids = { 7471, 7472 }
  
  for i, tcid in tcids do 
  	changeCreature {
  		tcid = tcid,
  		role = "ROLE_INVALID",
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = { sx=21, sy=26, sz=0, px=2700, py=50, pz=0 },
  		speed = 2
  	}
  	creatureTeleportsAway( tcid, 12 )
  end
  

end)

quest.setScript( 2551, "OnUnconscious", function(args)
local tcids = { 7471, 7472 }
  
  for i, tcid in tcids do 
  	if args.tcid == tcid then
  		changeCreature {
  			tcid = tcid,
  			useUnconscious = false,
  			faction = "FACTION_HIGHELVE",
  			behaviour = "questCreatures",
  			role = "ROLE_DIALOG"
  		}
  	end
  end

end)

quest.setScript( 1668, "OnTaskAwaiting", function(args)
setTimer {
    id = 1668,
    count = 8,
    interval = 1,
  }

end)

quest.setScript( 1668, "OnTimer", function(args)
if args.count == 8 then
    changeCreature {
      tcid = 1186,  --gi
      mortality = "IMMORTAL",
      behaviour = "JOB_QUESTSTAGING",
      gotoPosition = toWorldPosition("4;31;-1;849.900391;663.898438;4.897062;240.331726"),
      followUpAngle = 240.331726,
      followUpBhv = "Enemy_warrior_brave_ex",
      speed = 2,
      faction = "FACTION_ENEMY_HERO",
      role = "ROLE_ATTACKER",
    }
  end
  if args.count == 5 then
    castSpell {
      caster = 1186,  --gi
      target = 1147,  --mentor
      slot = 2,
    }
  end
  if args.count == 3 then
  	changeCreature {
      tcid = 1147,
      mortality = "MORTAL",
    }
  end
  if args.count == 2 then
  	removeFromGroup {
  		tcid = 1147,
  	}
    killCreature {
      tcid = 1147,
  		delay = 0.1,
    }
    solveQuest(args.id)
  end
  --Passen die Zeiten alle?

end)

quest.setScript( 2362, "OnCounter", function(args)
if Quest_2362_TA == true then
  	return "QUEST_2377_COUNTER"
  end
  

end)

quest.setScript( 2362, "OnTaskFulfilled", function(args)
Quest_2362_TA = false
  

end)

quest.setScript( 2362, "OnWon", function(args)
Quest_2362_TA = nil
  

end)

quest.setScript( 2362, "OnSetup", function(args)
Quest_2362_TA = true
  

end)

quest.setScript( 1069, "OnTaskFulfilled", function(args)
local creatures = {
  	{
  		tcid = 7503,
  		pos = {sx=18;sy=24;sz=0;px=1408.648438;py=944.648438;pz=1138.015869},
  	},
  	{
  		tcid = 7504,
  		pos = {sx=18;sy=24;sz=0;px=1308.648438;py=942.101563;pz=1161.748047},
  	},
  	{
  		tcid = 7505,
  		pos = {sx=18;sy=24;sz=0;px=1188.632813;py=885.984375;pz=1185.833496},
  	},
  	{
  		tcid = 7506,
  		pos = {sx=18;sy=24;sz=0;px=1130.050781;py=939.546875;pz=1192.100342},
  	}
  }
  for id,object in creatures do
  	changeCreature {
  		tcid = object.tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM22",
  		loopCount = 1,
  	}
  	changeCreature {
  		tcid = object.tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = object.pos,
  		speed = 2,
  		followUpBhv = "questCreatures",
  		delay = 2,
  	}
  	creatureTeleportsAway(object.tcid,15)
  end
  
  feedback = nil

end)

quest.setScript( 1069, "OnSetup", function(args)
cutscene_HE_bad(args)
  

end)

quest.setScript( 3209, "OnTaskAwaiting", function(args)
local ids = {9059,9060,9061}
  for i,id in ids do
  	changeCreature {
  		tcid = id,
  		effect = "FXTYPE_GEN_TPRISON",
  	}
  end
  

end)

quest.setScript( 3209, "OnTaskFulfilled", function(args)
local ids = {9059,9060,9061}
  for i,id in ids do
  	changeCreature {
     tcid = id,
     effect="FXTYPE_INVALID",
    }
  end
  

end)

quest.setScript( 2946, "OnTalk", function(args)
if args.id==2946 and args.state=="TASK_AWAITING" and args.tcid == 8270 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2946, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8270,0,{49;30;-1;1882.296875;793.101563;-0.008900;254.173843})

end)

quest.setScript( 2947, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8271,0,{47;30;-2;1761.750000;57.500000;-0.004158;140.007355})

end)

quest.setScript( 2947, "OnTalk", function(args)
if args.id==2947 and args.state=="TASK_AWAITING" and args.tcid == 8271 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2948, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8272,0,{49;30;-1;1882.000000;1710.953125;-0.012749;204.362442})

end)

quest.setScript( 2948, "OnTalk", function(args)
if args.id==2948 and args.state=="TASK_AWAITING" and args.tcid == 8272 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2949, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8273,0,{49;30;-1;2001.750000;770.601563;-0.008900;189.962296})

end)

quest.setScript( 2949, "OnTalk", function(args)
if args.id==2949 and args.state=="TASK_AWAITING" and args.tcid == 8273 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2951, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8275,0,{49;30;-1;1230.203125;163.500000;-0.012508;58.134003})

end)

quest.setScript( 2951, "OnTalk", function(args)
if args.id==2951 and args.state=="TASK_AWAITING" and args.tcid == 8275 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2952, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8276,0,{49;30;-1;1437.796875;14.414063;-0.010772;209.054596})

end)

quest.setScript( 2952, "OnTalk", function(args)

  if args.id==2952 and args.state=="TASK_AWAITING" and args.tcid == 8276 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 3301, "OnTalk", function(args)
if args.tcid==9020 and args.state=="TASK_AWAITING" and args.id == 3301 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 3301, "OnTaskFulfilled", function(args)
creatureTeleportPosition(9020,0,{47;30;-2;1870.453125;955.648438;0.798508;14.595245})

end)

quest.setScript( 3210, "OnWon", function(args)
if tc_9054_dead == false then
  	removeFromGroup {
  		tcid = 9054,
  		delay = 0,
  	}
  	setBehaviour(9054, "JOB_MERCENARY")
  	setFaction(9054,"FACTION_DRYAD_GUARD")
  end
  
  if tc_9055_dead == false then
  	removeFromGroup {
  		tcid = 9055,
  		delay = 0,
  	}
  	setBehaviour(9055, "JOB_MERCENARY")
  	setFaction(9055,"FACTION_DRYAD_GUARD")
  end
  
  
  tc_9055_dead = nil
  tc_9054_dead = nil 

end)

quest.setScript( 3302, "OnTalk", function(args)
if args.tcid==9020 and args.state=="TASK_AWAITING" and args.id == 3302 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2945, "OnTalk", function(args)
if args.id==2945 and args.state=="TASK_AWAITING" and args.tcid == 8269 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2945, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8269,0,{49;30;-1;1876.593750;2517.203125;-0.008898;354.042877})

end)

quest.setScript( 2944, "OnTalk", function(args)
if args.id==2944 and args.state=="TASK_AWAITING" and args.tcid == 8268 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2944, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8268,0,{49;30;-1;2066.281250;2552.554688;-0.008171;84.326790})

end)

quest.setScript( 2950, "OnTalk", function(args)
if args.id==2950 and args.state=="TASK_AWAITING" and args.tcid == 8274 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2950, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8274,0,{49;30;-1;2110.656250;1916.500000;-0.008898;198.434952})

end)

quest.setScript( 3303, "OnTalk", function(args)
if args.tcid==9021 and args.state=="TASK_AWAITING" and args.id == 3303 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 3303, "OnTaskFulfilled", function(args)
creatureTeleportPosition(9021,0,{47;29;-2;1851.796875;3182.750000;-0.008684;193.421829})

end)

quest.setScript( 298, "OnStateChange", function(args)
if args.state == "TASK_AWAITING" then
  	changeCreature {
  		tcid = 3179,
  		mortality = "MORTAL",
  	}
  	changeCreature {
  		tcid = 3180,
  		mortality = "MORTAL",
  	}
  	changeCreature {
  		tcid = 3181,
  		mortality = "MORTAL",
  	}
  end

end)

quest.setScript( 298, "OnWon", function(args)
changeCreature {
  	tcid = 1119,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=27,sy=24,sz=0,px=1473,py=1569.5,pz=-72.630737},
  	followUpBhv = "questCreatures",
  }
  changeCreature {
  	tcid = 1119,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_TALK",
  	loopCount = 1,
  	delay = 25,
  }
  changeCreature {
  	tcid = 1119,
  	behaviour = "questCreatures",
  	delay = 27,
  }
  changeCreature {
  	tcid = 4751,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM01",
  	loopCount = 1,
  	delay = 27,
  }
  changeCreature {
  	tcid = 4751,
  	behaviour = "questCreatures",
  	delay = 29,
  }
  changeCreature {
  	tcid = 1119,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=27,sy=24,sz=0,px=777.296997,py=2471.75,pz=87.023102},
  	followUpBhv = "questCreatures",
  	delay = 30,
  }

end)

quest.setScript( 3307, "OnTalk", function(args)
if args.tcid==9023 and args.state=="TASK_AWAITING" and args.id == 3307 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 3307, "OnTaskFulfilled", function(args)
creatureTeleportPosition(9023,0,{47;30;-2;2356.906250;1883.351563;-0.004692;276.047668})

end)

quest.setScript( 2884, "OnWon", function(args)
changeCreature {
      tcid = 8187,
      role = "ROLE_VICTIM",
      behaviour = "JOB_QUESTSTAGING",
      emotion = "ANIM_TYPE_EM08",
  }
  
  creatureTeleportsAway(8187,3)
  
  

end)

quest.setScript( 1488, "OnWon", function(args)
local tcids   = { 4041,4042,4043,4044,4045,4046,4047,4048,4101,4102,4103 }
  
  changeCreature {
  	tcid=4101,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_RAISE-HANDS",
  	delay=5,
  }
  for index, tcid in tcids do
  	changeCreature {
  		tcid=tcid,
  		effect="FXTYPE_GEN_TELEPORT",
  		delay=6,
  	}
  	teleport {
  		tcid=tcid,
  		position={px=0,py=0,pz=0,sx=0,sy=0,sz=0},
  		delay=10
  	}
  end

end)

quest.setScript( 1488, "OnSetup", function(args)
local tcids   = { 4041,4042,4043,4044,4045,4046,4047,4048 }
  local xcoords = {  950, 900,1000, 900, 950,900,1000, 950 }
  local ycoords = { 1000,1000,1000, 950, 950,900,950, 900 }
  local position={
  	px=0,
  	py=0,
  	pz=100,
  	sx=42,
  	sy=48,
  	sz=0
  }
  
  for index,tcid in tcids do
  		changeCreature{
  			tcid = tcid,
  			behaviour = "questCreatures",
  		}
  		position.px = xcoords[index]
  		position.py = ycoords[index]
  	teleport {
  		tcid=tcid,
  		position=position,
  	}
  end
  
  teleport {
  	tcid=4051,
  	position={px=850,py=850,pz=100,sx=42,sy=48,sz=0},
  	delay=1
  }
  teleport {
  	tcid=4052,
  	position={px=950,py=850,pz=100,sx=42,sy=48,sz=0},
  	delay=1
  }

end)

quest.setScript( 3309, "OnTalk", function(args)
if args.tcid==9024 and args.state=="TASK_AWAITING" and args.id == 3309 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 3309, "OnTaskFulfilled", function(args)
creatureTeleportPosition(9024,0,{49;30;-1;1232.156250;1932.898438;0.797134;148.226044})

end)

quest.setScript( 3311, "OnTalk", function(args)
if args.tcid==9244 and args.state=="TASK_AWAITING" and args.id == 3311 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 3311, "OnTaskFulfilled", function(args)
creatureTeleportPosition(9244,0,{47;30;-2;2346.046875;1966.648438;-0.004692;280.709869})

end)

quest.setScript( 3135, "OnWon", function(args)
destroyCreature {
  	tcid = 8781,
  }

end)

quest.setScript( 3135, "OnTalk", function(args)
if args.state == "WON" then
  	changeCreature {
  		tcid = 8185,
  		behaviour = "JOB_QUESTSTAGING",
  		role = "ROLE_INVALID",
  		emotion = "ANIM_TYPE_EM30",
  		loopCount = 1,
  		delay = 0.01,
  	}
  elseif args.state == "TASK_FULFILLED" then
  	changeCreature {
  		tcid = 8185,
  		behaviour = "JOB_QUESTSTAGING",
  		role = "ROLE_INVALID",
  		emotion = "ANIM_TYPE_EM10",
  		loopCount = 1,
  		delay = 0.01,
  	}
  end
  

end)

quest.setScript( 1975, "OnTaskFulfilled", function(args)
tcids={5601,5602,5603}
  for i, tcid in tcids do
  	setRole(tcid, "ROLE_ATTACKER")
  end
  

end)

quest.setScript( 3131, "OnTalk", function(args)
if args.state == "WON" then
  	changeCreature {
  		tcid = 8185,
  		behaviour = "JOB_QUESTSTAGING",
  		role = "ROLE_INVALID",
  		emotion = "ANIM_TYPE_EM30",
  		loopCount = 1,
  		delay = 0.01,
  	}
  elseif args.state == "TASK_FULFILLED" then
  	changeCreature {
  		tcid = 8185,
  		behaviour = "JOB_QUESTSTAGING",
  		role = "ROLE_INVALID",
  		emotion = "ANIM_TYPE_EM10",
  		loopCount = 1,
  		delay = 0.01,
  	}
  end
  

end)

quest.setScript( 1977, "OnTaskFulfilled", function(args)
tcids={5609,5610,5611}
  for i, tcid in tcids do
  	setRole(tcid, "ROLE_ATTACKER")
  end
  

end)

quest.setScript( 3119, "OnWon", function(args)
changeCreature {
  	tcid = 8535,
  	clearUnconscious = true,
  	livesRemaining	=	0,
  }

end)

quest.setScript( 3119, "OnSetup", function(args)
changeCreature {
  	tcid = 8535,
  	useUnconscious = true,
  	livesRemaining = 255,
  	unconsciousTime = 3,
  }
  

end)

quest.setScript( 3119, "OnPrecondsFulfilled", function(args)
changeCreature {
  	tcid = 8535,
  	setAutoTeleporting = true,
  }
  creatureTeleportPosition(8535,0,{46,16,0,1550,1100,0})
  

end)

quest.setScript( 3119, "OnTaskAwaiting", function(args)
local tcids = {8535,8757,8758,8759}
  
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_SPPL_RISE",
  	}	
  
  end

end)

quest.setScript( 1956, "OnStateChange", function(args)

  --if args.state == "PRECONDS_FULFILLED" and woid == 1014511916 then
  --	setWoobEffect {
  --			effect = "FXTYPE_QFX_VERGIFTETER_BRUNNEN",
  --			woid = 1014511916}
  --end
  

end)

quest.setScript( 1956, "OnWon", function(args)
changeCreature{
  			behaviour = "JOB_QUESTSTAGING",
  			gotoPosition = {sx=15;sy=49;sz=0;
  											px=2470.601563;py=1146.906250;pz=1172.415161},
  			tcid=5515,
  			followUpBhv = "questCreatures",
  			delay = 0,
  }
  
  changeCreature{
  			behaviour = "JOB_QUESTSTAGING",
  			tcid=5515,
  			emotion = "ANIM_TYPE_MAGICA",
  			loopCount = 3,
  			delay = 4,
  }
  
  --setWoobEffect {
  --		effect = "FXTYPE_QFX_VERGIFTETER_BRUNNEN",
  --		woid = 1014511916
  --}

end)

quest.setScript( 3132, "OnTalk", function(args)
--if args.state == "WON" then
  	--changeCreature {
  		--tcid = 8185,
  		--behaviour = "JOB_QUESTSTAGING",
  		--role = "ROLE_INVALID",
  		--emotion = "ANIM_TYPE_EM30",
  		--loopCount = 1,
  		--delay = 0.01,
  	--}
  --else
  if args.state == "TASK_FULFILLED" then
  	changeCreature {
  		tcid = 8185,
  		behaviour = "JOB_QUESTSTAGING",
  		role = "ROLE_INVALID",
  		emotion = "ANIM_TYPE_EM10",
  		loopCount = 1,
  		delay = 0.01,
  	}
  end
  

end)

quest.setScript( 3132, "OnWon", function(args)
changeCreature {
    tcid = 8185,
    behaviour = "JOB_QUESTSTAGING",
    gotoPosition = toWorldPosition("21;27;0;1655.453125;2842.000000;304.705994;43.522095"),
    speed = 2,
    followUpAngle = 270,
  	followUpBhv = "questCreatures",
  }
  
  changeCreature {
    tcid = 8185,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM30",
    loopCount = -1,
    delay = 10,
  }
  changeCreature {
    tcid = 8781,
    behaviour = "JOB_QUESTSTAGING",
    gotoPosition = toWorldPosition("21;27;0;1630.500000;2788.453125;304.641693;295.757263"),
    speed = 2,
    followUpAngle = 90,
  	followUpBhv = "questCreatures",
  }
  
  changeCreature {
    tcid = 8781,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_IDLEB",
    loopCount = -1,
    delay = 10,
  }
  

end)

quest.setScript( 2559, "OnTalk", function(args)
if args.tcid==6885 and args.state=="TASK_AWAITING" and args.id == 2559 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 3313, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6837,0,{47;30;-2;1790.453125;1381.398438;-0.002632;66.864288})

end)

quest.setScript( 3313, "OnTalk", function(args)
if args.tcid==6837 and args.state=="TASK_AWAITING" and args.id == 3313 then
  	return bueroQuestReach()
  end 

end)

quest.setScript( 2561, "OnTalk", function(args)
if args.tcid==6872 and args.state=="TASK_AWAITING" and args.id == 2561 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 1672, "OnTaskFulfilled", function(args)
setWoobState {
    	woid = 1024713934,
    	state = "WOOB_DOOR_LOCKED",
    }
  gameCompleted()

end)

quest.setScript( 2563, "OnTalk", function(args)
if args.tcid==6860 and args.state=="TASK_AWAITING" and args.id == 2563 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2565, "OnTalk", function(args)
if args.tcid==6849 and args.state=="TASK_AWAITING" and args.id == 2565 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 3314, "OnTalk", function(args)
if args.tcid==6837 and args.state=="TASK_AWAITING" and args.id == 3314 then
  	return bueroQuestTalk()
  end 

end)

quest.setScript( 1667, "OnWon", function(args)
local inq = {8483,8484}
  for index,tcid in inq do
  	changeCreature { --Die beiden Inq-Gardistinnen feindlich schalten
  		tcid = tcid,
  		role = "ROLE_ATTACKER",
  		behaviour = "Enemy_warrior_brave_ex",
  		faction = "FACTION_ENEMY_HERO",
  	}
  end 
  
  changeCreature {
    tcid = 1186,
    clearAutoTeleporting = true,
  }

end)

quest.setScript( 1671, "OnTaskAwaiting", function(args)
local grp = {4413,8492,8491,8493,8490}
  
  for index,tcid in grp do
  	changeCreature {
  		tcid = tcid,
  		addToGroup = 8490,
  	}
  end
  
  changeCreature {
  	tcid = 4413,
  	mortality = "IMMORTAL",
  }
  

end)

quest.setScript( 1671, "OnTaskFulfilled", function(args)
-- Die 3 Bosse, welche nicht im Task stehen on TF loeschen,
  -- damit sie nach dem Laden nicht wieder auftauchen.
  local boss = {8491,8492,8493}
  for index,tcid in boss do
  	destroyCreature {
  		tcid = tcid,
  		splatter = false,
  	}
  end
  
  changeCreature {
  	tcid = 8490,
  	faction = "FACTION_FRIEND_HERO_ALL",
  }
  --Big Machine lights -> Green/Yellow
  setWoobEffect { effect = "FXTYPE_SIMPLELIGHT1", woid = 1023050165 }
  setWoobEffect { effect = "FXTYPE_SIMPLELIGHT1", woid = 1023050183 }
  setWoobEffect { effect = "FXTYPE_SIMPLELIGHT1", woid = 1023050188 }
  setWoobEffect { effect = "FXTYPE_SIMPLELIGHT1", woid = 1023050229 }

end)

quest.setScript( 3188, "OnWon", function(args)
changeCreature {
  	tcid = 8949,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 1742, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 4639,
  	useUnconscious = true,
  	livesRemaining = 255,
  	unconsciousTime = 2,
  	mortality = "MORTAL",
  	behaviour="Hireling_brave",
  	clearAutoTeleporting = true,
  }
  changeCreature {
  	tcid = 4689,
  	mortality = "MORTAL",
  }
  changeCreature {
  	tcid = 4690,
  	mortality = "MORTAL",
  }
  

end)

quest.setScript( 2504, "OnStation", function(args)
if args.currentStation == 0 then
  	changeCreature {
  		tcid = 7105,
  		behaviour = "INVALID",
  		mortality = "MORTAL",
  	}
  
  	killCreature {
  		tcid = 7105,
  		delay = 1,
  	}
  end 

end)

quest.setScript( 2504, "OnWon", function(args)
changeCreature {
  	tcid = 7102,
  	behaviour = "INVALID",
  	mortality = "MORTAL",
  	role = "ROLE_INVALID",
  }
  killCreature {
  	tcid = 7102,
  	delay = 1,
  }

end)

quest.setScript( 2221, "OnDeath", function(args)

  

end)

quest.setScript( 2221, "OnUnconscious", function(args)
changeCreature{
  	tcid = 6796,
  	faction = "FACTION_FRIEND_HERO_ALL",
  	behaviour = "questCreatures",
  	livesRemaining = 0
  }
  changeCreature {
  	tcid=6796,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_MAGICA_BH",
  	loopCount = -1,
  	effect="FXTYPE_SMOKEBIGWHITE",
  	delay=1,
  }
  changeCreature {
  	tcid=6796,
  	creature="Dead_skeleton_lich_elite",
  	delay=3,
  }
  changeCreature {
  	tcid = 6796,
  	effect = "FXTYPE_INVALID",
  	emotion = "ANIM_TYPE_MAGICA_BH",
  	loopCount = 1,
  	delay = 5,
  	faction = "FACTION_ENEMY_HERO",
  	followUpBhv = "Enemy_warrior_brave"
  }
  
  --changeCreature {
  --	tcid = 6796,
  --	delay = 7,
  --	faction = "FACTION_ENEMY_HERO",
  --	behaviour = "Enemy_warrior_brave"
  --}
  
  changeCreature{
  	tcid = 6600,
  	mortality = "MORTAL",
  	effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
  	loopCount = 1,
  	delay = 6
  }
  killCreature{
  	tcid = 6600,
  	delay = 7
  }
  

end)

quest.setScript( 2221, "OnTaskAwaiting", function(args)

  changeCreature {
  	tcid = 6796,
  	livesRemaining = 1,
  	unconsciousTime = 6,
  	useUnconscious = true,
  
  }

end)

quest.setScript( 3270, "OnWon", function(args)
creatureTeleportsAway(9129,4)
  creatureTeleportsAway(8794,4)

end)

quest.setScript( 3029, "OnLost", function(args)
Quest3029Lost = true;
  

end)

quest.setScript( 3315, "OnSetup", function(args)
changeCreature{
  	tcid = 7182,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 3038, "OnWon", function(args)

  --changeCreature {
  --	tcid = 8439,
  --	behaviour = "JOB_QUESTSTAGING",
  --	gotoPosition = {}
  --}

end)

quest.setScript( 1621, "OnTalk", function(args)
if args.tcid == 1198 and args.state == "PRECONDS_FULFILLED" and args.id == 1621 then
  	removeFromGroup {
  		tcid = 1199,
  	}
  	changeCreature {
  		tcid = 1199, --assim
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = {sx=42,sy=17,sz=0,px=118,py=2053.800781,pz=2389.968994},
  		followUpBhv = "questCreatures",
  		followUpAngle = 356.820160,
  	}
  	teleport {
  		tcid = 1199,--assim
  		position = {sx=42,sy=17,sz=0,px=118,py=2053.800781,pz=2389.968994},
  		orientation = 356.820160,
  		delay = 4,
  	}
  end
  

end)

quest.setScript( 1621, "OnTimer", function(args)
local tcids = {1198, 1199}
  
  if args.count == 19 then
  	changeCreature {
  		tcid = 1198,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = {sx=42,sy=17,sz=0,px=136.453125,py=1992.949219,pz=2389.971191},
  		followUpBhv = "questCreatures",
  		followUpAngle = 182.816071,
  	}
  end
  if args.count == 16 then 
  	teleport {
  		tcid = 1198,--al sadim
  		position = {sx=42,sy=17,sz=0,px=136.453125,py=1992.949219,pz=2389.971191},
  		orientation = 182.816071,
  	}
  end
  if args.count == 15 then
  	changeCreature {
  		tcid = 1198,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_TALK",
  		loopCount = 1,
  	}
  	changeCreature {
  		tcid = 1199,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_TALK",
  		loopCount = 1,
  		delay = 0.8
  	}
  end
  if args.count == 10 then
  	for index,tcid in tcids do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_SM01",
  			loopCount = 1,
  		}
  	end
  end
  if args.count == 9 then
  	changeCreature {
  		tcid = 1198,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = {sx=42,sy=17,sz=0,px=126.046875,py=1879.449219,pz=2389.973633},
  		followUpBhv = "questCreatures",
  		followUpAngle = 213.511017,
  	}
  end
  
  if args.count == 6 then
  	for index,tcid in tcids do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "questCreatures",
  		}
  	end
  	solveQuest(args.id)
  end 

end)

quest.setScript( 1621, "OnTaskAwaiting", function(args)
setTimer {
  	id = 1621,
  	interval = 1,
  	count = 19,
  }

end)

quest.setScript( 3016, "OnLost", function(args)
if tcid8454 == true then
  	killCreature {
  		tcid = 8454,
  		deinitragdoll = true,
  		delay = 2
  	}
  	tcid8454 = nil
  end
  

end)

quest.setScript( 3016, "OnSetup", function(args)
changeCreature {
  	tcid = 8454,
  	useUnconscious = true,
  	livesRemaining = 1,
  	unconsciousTime = 1
  }
  tcid8454 = true;
  

end)

quest.setScript( 3016, "OnUnconscious", function(args)
if args.tcid == 8454 then
  	changeCreature {
  		tcid = 8454,
  		useUnconscious = false,
  		livesRemaining = 0,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  		clearAutoTeleporting = true,
  		faction = "FACTION_FRIEND_HERO"
  	}
  end
  

end)

quest.setScript( 2567, "OnTalk", function(args)
if args.tcid==6843 and args.state=="TASK_AWAITING" and args.id == 2567 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2569, "OnTalk", function(args)
if args.tcid==6844 and args.state=="TASK_AWAITING" and args.id == 2569 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2572, "OnTalk", function(args)
if args.tcid==6896 and args.state=="TASK_AWAITING" and args.id == 2572 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2888, "OnTaskAwaiting", function(args)
changeCreature {
    	tcid = 8233,
    	mortality = "IMMORTAL",
  		role = "ROLE_VICTIM",
  		clearAutoTeleporting = true,
    }
  
  changeCreature {
    	tcid = 8234,
    	mortality = "IMMORTAL",
  		role = "ROLE_VICTIM",
  		clearAutoTeleporting = true,
    }

end)

quest.setScript( 2573, "OnTalk", function(args)
if args.tcid==6864 and args.state=="TASK_AWAITING" and args.id == 2573 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 1361, "OnTaskAwaiting", function(args)

  changeCreature {
  	tcid = 3677,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM23",
  	loopCount = -1,
  	dont_turn = true,
  	clearAutoTeleporting = true,
  	role = "ROLE_DIALOG",
  }

end)

quest.setScript( 736, "OnTaskAwaiting", function(args)
for index,tcid in {2210,2211,2212,2213,2214} do
  	changeCreature {
  		tcid = tcid,
  		visible = false,
  	}
  end
  

end)

quest.setScript( 736, "OnStation", function(args)
--------------------------------------
  if args.currentStation == 0 then
  	changeCreature {
  		tcid = 2210,
  		visible = true,
  		behaviour = "questCreatures",
  		effect = "FXTYPE_HOLOGRAM",
  	}
  	setWoobEffect {
  		woid = 1022017760,
  		effect = "FXTYPE_HOLOGRAM_RAY",
  	}
  end
  --------------------------------------
  if args.currentStation == 1 then
  	setWoobState {
  		woid = 1022017751,
  		state = "WOOB_THINGY_OFF",
  	}
  	setWoobEffect {
  		woid = 1022017760,
  		effect = "FXTYPE_INVALID",
  	}
  	changeCreature {
  		tcid = 2210,
  		visible = false,
      delay = 1,
  	}
  end
  --------------------------------------
  if args.currentStation == 2 then
  	changeCreature {
  		tcid = 2211,
  		visible = true,
  		behaviour = "questCreatures",
  		effect = "FXTYPE_HOLOGRAM",
  	}
  	setWoobEffect {
  		woid = 1022017751,
  		effect = "FXTYPE_HOLOGRAM_RAY",
  	}
  end
  --------------------------------------
  if args.currentStation == 3 then
  	setWoobState {
  		woid = 1022017740,
  		state = "WOOB_THINGY_OFF",
  	}
  	setWoobEffect {
  		woid = 1022017751,
  		effect = "FXTYPE_INVALID",
  	}
  	changeCreature {
  		tcid = 2211,
  		visible = false,
  		delay = 1,
  	}
  end
  --------------------------------------
  if args.currentStation == 4 then
  	changeCreature {
  		tcid = 2212,
  		visible = true,
  		behaviour = "questCreatures",
  		effect = "FXTYPE_HOLOGRAM",
  	}
  	setWoobEffect {
  		woid = 1022017740,
  		effect = "FXTYPE_HOLOGRAM_RAY",
  	}
  end
  --------------------------------------
  if args.currentStation == 5 then
  	setWoobState {
  		woid = 1022017703,
  		state = "WOOB_THINGY_OFF",
  	}
  	setWoobEffect {
  		woid = 1022017740,
  		effect = "FXTYPE_INVALID",
  	}
  	changeCreature {
  		tcid = 2212,
  		visible = false,
  		delay = 1,
  	}
  end
  --------------------------------------
  if args.currentStation == 6 then
  	changeCreature {
  		tcid = 2213,
  		visible = true,
  		behaviour = "questCreatures",
  		effect = "FXTYPE_HOLOGRAM",
  	}
  	setWoobEffect {
  		woid = 1022017703,
  		effect = "FXTYPE_HOLOGRAM_RAY",
  	}
  end
  --------------------------------------
  if args.currentStation == 7 then
  	setWoobState {
  		woid = 1022017661,
  		state = "WOOB_THINGY_OFF",
  	}
  	setWoobEffect {
  		woid = 1022017703,
  		effect = "FXTYPE_INVALID",
  	}
  	changeCreature {
  		tcid = 2213,
  		visible = false,
  		delay = 1,
  	}
  end
  --------------------------------------
  if args.currentStation == 8 then
  	changeCreature {
  		tcid = 2214,
  		visible = true,
  		behaviour = "questCreatures",
  		effect = "FXTYPE_HOLOGRAM",
  	}
  	setWoobEffect {
  		woid = 1022017661,
  		effect = "FXTYPE_HOLOGRAM_RAY",
  	}
  end
  --------------------------------------

end)

quest.setScript( 736, "OnPrecondsFulfilled", function(args)
setWoobState {
  	woid = 1022017760,
  	state = "WOOB_THINGY_OFF",
  }

end)

quest.setScript( 736, "OnWon", function(args)
setWoobState {
  	woid = 1022458398,
  	state = "WOOB_THINGY_OFF",
  }
  setWoobEffect {
  	woid = 1022017661,
  	effect = "FXTYPE_INVALID",
  }
  
  changeCreature {
  	tcid = 2214,
  	visible = false,
  	delay = 1,
  }

end)

quest.setScript( 1444, "OnSetup", function(args)

  changeCreature {
  	tcid = 3853,
  	faction = "FACTION_ENEMY_HERO",
  	behaviour = "Enemy_warrior_simple"
  }

end)

quest.setScript( 2575, "OnTalk", function(args)
if args.tcid==6888 and args.state=="TASK_AWAITING" and args.id == 2575 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2505, "OnUnconscious", function(args)
if args.id == 2505 and args.tcid == 7349 then
  	changeCreature {
  		tcid = 7349,
  		role = "ROLE_DIALOG",
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM20",
  		loopCount = 1,
  		livesRemaining = 0,
  		clearUnconscious = true,
  	}
  end 

end)

quest.setScript( 2505, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 7106,
  	behaviour = "HIRELING_COWARD",
  	role = "ROLE_INVALID",
  	mortality = "IMMORTAL",
  }
  changeCreature {
  	tcid = 7349,
  	livesRemaining = 1,
  	useUnconscious = true,
    unconsciousTime = 4,
  	clearAutoTeleporting = true,
  }
  
  changeCreature {
  tcid = 7349,
  behaviour = "Enemy_warrior_brave",
  }

end)

quest.setScript( 2505, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 7106 and args.id == 2505 then
  	changeCreature {
  		tcid = 7106,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_LAYGROUND-UP",
  		loopCount = 1,
  	}
  	changeCreature {
  		tcid = 7106,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_IDLE",
  		loopCount = 1,
  		delay = 5.8,
  	}
  	changeCreature {
  		tcid = 7106,
  		behaviour = "questCreatures",
  		delay = 6.5,
  	}
  end
  

end)

quest.setScript( 2505, "OnWon", function(args)
changeCreature {
  	tcid = 7349,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_IDLE",
  	loopCount = -1,
  }
  changeCreature {
  	tcid = 7349,
  	behaviour = "JOB_RICH_STATIST",
  	faction = "FACTION_FRIEND_HERO_ALL",
  	delay = 1,
  }

end)

quest.setScript( 2505, "OnTaskFulfilled", function(args)
changeCreature{
    tcid = 7349,
    behaviour = "questCreatures",
    faction = "FACTION_FRIEND_HERO_ALL",
  }

end)

quest.setScript( 2507, "OnWon", function(args)
--7359 Wache #1
  --7360 Wache #2
  --7349 Haendler
  
  local lizards = {
  	{
  		tcid = 7359,
  		pos = toWorldPosition("55;28;0;2717.593750;2954.453125;-1410.768921;4.695465"),
  		angle = 4.695465,
  	},
  	{
  		tcid = 7360,
  		pos = toWorldPosition("55;28;0;2738.250000;3027.351563;-1410.769043;86.655334"),
  		angle = 86.655334,
  	},
  	{
  		tcid = 7349,
  		pos = toWorldPosition("55;28;0;2705.656250;2867.250000;-1410.769043;181.174179"),
  		angle = 181.174179,
  	}
  }
  
  for id, object in lizards do
  	changeCreature {
  		tcid = object.tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = object.pos,
  		followUpBhv = "dumbBehaviour",
  		followUpAngle = object.angle,
  	}
  changeCreature {
  		tcid = object.tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = {sx=0,sx=0,sz=-1,px=0,py=0,pz=0},
  		followUpBhv = "dumbBehaviour",
  		delay = 19,
  	}
  	teleport {
  		tcid = object.tcid,
  		position = object.pos,
  		orientation = object.angle,
  		delay = 20,
  	}
  	changeCreature {
  		tcid = object.tcid,
  		effect = "FXTYPE_GEN_TELEPORT",
  		delay = 20.1,
  	}
  	changeCreature {
  		tcid = object.tcid,
  		effect = "FXTYPE_INVALID",
  		delay = 22,
  	}
  end
  

end)

quest.setScript( 2577, "OnTalk", function(args)
if args.tcid==6862 and args.state=="TASK_AWAITING" and args.id == 2577 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2579, "OnTalk", function(args)
if args.tcid==6910 and args.state=="TASK_AWAITING" and args.id == 2579 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 3090, "OnWon", function(args)
local tcids = {8635}
  
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_GEN_TELEPORT",
  	}	
  
  end

end)

quest.setScript( 1721, "OnTaskAwaiting", function(args)
changeCreature {
   tcid = 4549,
   behaviour = "JOB_QUESTSTAGING",
   emotion = "ANIM_TYPE_DEFENSE",
   effect="FXTYPE_GEN_TPRISON",
   loopCount = -1,
  }

end)

quest.setScript( 1721, "OnTaskFulfilled", function(args)
changeCreature {
   tcid = 4549,
   behaviour = "JOB_QUESTSTAGING",
   emotion = "ANIM_TYPE_INVALID",
   effect="FXTYPE_INVALID",
  }

end)

quest.setScript( 731, "OnWon", function(args)
local tcids = {8067,8068,8069,8070}
  for index,tcid in tcids do
  	killCreature {
  		tcid = tcid,
  	}
  end
  

end)

quest.setScript( 731, "OnTaskAwaiting", function(args)
local grp = {2203,8067,8068,8069,8070}
  
  for index,tcid in grp do
  	changeCreature {
  		tcid = tcid,
  		addToGroup = 2203,
  	}
  end
  

end)

quest.setScript( 2694, "OnTaskFulfilled", function(args)
local tcids = { 7769, 7772 }
  for i, tcid in tcids do
  	creatureTeleportsAway ( tcid, 1 )
  end
  
  local cobolds = { 7773, 7774, 7775, 7776, 7777, 7778, 7779, 7780 }
  for i, tcid in cobolds do
  	changeCreature {
  		tcid = tcid,
  		faction = "FACTION_ENEMY_HERO"
  	}
  end
  

end)

quest.setScript( 2583, "OnTalk", function(args)
if args.tcid==7154 and args.state=="TASK_AWAITING" and args.id == 2583 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2734, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 7885,
  	mortality = "IMMORTAL",
  	clearAutoTeleporting = true,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=29,sy=55,sz=0 , px=3050,py=600,pz=0},
  	speed = 2,
  	followUpBhv = "JOB_MERCENARY"
  }
  
  local tcids = { 7881, 7882, 7883, 7884 }
  for i, tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = {sx=29,sy=55,sz=0 , px=3050,py=600,pz=0},
  		speed = 2,
  		followUpBhv = "Enemy_mage"
  	}
  end
  

end)

quest.setScript( 1676, "OnTaskAwaiting", function(args)
local grp = {4413,8492,8491,8493,8490}
  
  for index,tcid in grp do
  	changeCreature {
  		tcid = tcid,
  		addToGroup = 8490,
  	}
  end
  
  changeCreature {
  	tcid = 4413,
  	mortality = "IMMORTAL",
  }
  

end)

quest.setScript( 1676, "OnTaskFulfilled", function(args)
-- Die 3 Bosse, welche nicht im Task stehen on TF loeschen,
  -- damit sie nach dem Laden nicht wieder auftauchen.
  local boss = {8491,8492,8493}
  for index,tcid in boss do
  	destroyCreature {
  		tcid = tcid,
  		splatter = false,
  	}
  end
  
  
  changeCreature {
  	tcid = 8490,
  	faction = "FACTION_FRIEND_HERO_ALL",
  }
  --Big Machine lights -> Green/Yellow
  setWoobEffect { effect = "FXTYPE_SIMPLELIGHT1", woid = 1023050165 }
  setWoobEffect { effect = "FXTYPE_SIMPLELIGHT1", woid = 1023050183 }
  setWoobEffect { effect = "FXTYPE_SIMPLELIGHT1", woid = 1023050188 }
  setWoobEffect { effect = "FXTYPE_SIMPLELIGHT1", woid = 1023050229 }

end)

quest.setScript( 622, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 2048,
  	mortality = "IMMORTAL"
  }

end)

quest.setScript( 2870, "OnSetup", function(args)
changeCreature {
  	tcid = 8122,	
  	useUnconscious = true,
  	clearAutoTeleporting = true,
  	livesRemaining = 1,
  	unconsciousTime = 1,
  	role = "ROLE_VICTIM",
  }

end)

quest.setScript( 2870, "OnLost", function(args)
changeCreature{
  	tcid = 8122,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  	faction = "FACTION_FRIEND_HERO_ALL",
  	clearAutoTeleporting = true,
  	dont_turn = true,
  	clearUnconscious = true,
  	livesRemaining = 0,
  	delay = 1,
  	mortality = "IMMORTAL",
  	role = "ROLE_INVALID",
  }

end)

quest.setScript( 2552, "OnTalk", function(args)
--if args.tcid==6863 and args.state=="TASK_AWAITING" and args.id == 2552 then
  --	return bueroQuestReach()
  --end

end)

quest.setScript( 2552, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6863,0,{47;30;-1;2558.250000;1042.148438;-0.018810;303.690063})

end)

quest.setScript( 2554, "OnTalk", function(args)
if args.tcid==6879 and args.state=="TASK_AWAITING" and args.id == 2554 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2554, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6879,0,{47;30;-1;1735.671875;2554.804688;-0.018810;75.393890})

end)

quest.setScript( 2268, "OnTalk", function(args)
if args.tcid==6871 and args.state=="TASK_AWAITING" and args.id == 2268 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2268, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6871,0,{47;30;-1;2604.343750;2011.328125;-0.018810;215.865189})

end)

quest.setScript( 2270, "OnTalk", function(args)
if args.tcid==6887 and args.state=="TASK_AWAITING" and args.id == 2270 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2270, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6887,0,{47;30;-1;1827.250000;1428.953125;0.692247;36.747467})

end)

quest.setScript( 1722, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid=4549,
  	mortality = "IMMORTAL"
  }

end)

quest.setScript( 2271, "OnTalk", function(args)
if args.tcid==6876 and args.state=="TASK_AWAITING" and args.id == 2271 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2271, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6876,0,{47;30;-1;1704.750000;1424.250000;-0.019512;52.244354})

end)

quest.setScript( 1394, "OnSetup", function(args)
changeCreature {
  	tcid=307,
  	creature="wild_wolf_black",
  	effect="FXTYPE_GEN_TRANSFORM",
  	faction = "FACTION_ENEMY_HERO",
  	mortality = "MORTAL",
  }
  
  changeCreature {
  	tcid=309,
  	creature="wild_wolf_black",
  	effect="FXTYPE_GEN_TRANSFORM",
  	faction = "FACTION_ENEMY_HERO",
  	mortality = "MORTAL",
  }
  
  changeCreature {
  	tcid=310,
  	creature="wild_wolf_black",
  	faction = "FACTION_ENEMY_HERO",
  	effect="FXTYPE_GEN_TRANSFORM",
  	mortality = "MORTAL",
  }
  

end)

quest.setScript( 1394, "OnWon", function(args)
changeCreature {
  	tcid=304,
  	effect="FXTYPE_GEN_TRANSFORM",
  }
  
  changeCreature {
  	tcid=304,
  	creature="Atmo_toad_brown",
  	delay = 2,
  }

end)

quest.setScript( 2556, "OnTalk", function(args)
if args.tcid==6889 and args.state=="TASK_AWAITING" and args.id == 2556 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2556, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6889,0,{47;30;-1;1723.500000;1051.203125;-0.017757;59.247986})

end)

quest.setScript( 2558, "OnTalk", function(args)
if args.tcid==6885 and args.state=="TASK_AWAITING" and args.id == 2558 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2558, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6885,0,{47;30;-1;2670.453125;1611.500000;-0.018810;258.005737})

end)

quest.setScript( 2560, "OnTalk", function(args)
if args.tcid==6872 and args.state=="TASK_AWAITING" and args.id == 2560 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2560, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6872,0,{47;30;-1;2671.578125;2170.460938;-0.018810;293.918121})

end)

quest.setScript( 2562, "OnTalk", function(args)
if args.tcid==6860 and args.state=="TASK_AWAITING" and args.id == 2562 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2562, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6860,0,{47;30;-1;2427.656250;1027.000000;-0.018810;348.643250})

end)

quest.setScript( 2564, "OnTalk", function(args)
if args.tcid==6849 and args.state=="TASK_AWAITING" and args.id == 2564 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2564, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6849,0,{47;30;-1;1711.000000;1975.703125;-0.017757;152.152405})

end)

quest.setScript( 2566, "OnTalk", function(args)
if args.tcid==6843 and args.state=="TASK_AWAITING" and args.id == 2566 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2566, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6843,0,{47;30;-1;2534.046875;1584.453125;-0.018810;162.264816})

end)

quest.setScript( 2568, "OnTalk", function(args)
if args.tcid==6844 and args.state=="TASK_AWAITING" and args.id == 2568 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2568, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6844,0,{47;30;-1;2674.546875;1860.203125;-0.018810;279.849030})

end)

quest.setScript( 2574, "OnTalk", function(args)
if args.tcid==6888 and args.state=="TASK_AWAITING" and args.id == 2574 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2574, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6888,0,{47;30;-1;1846.296875;2495.789063;1.122268;100.549286})

end)

quest.setScript( 1794, "OnLost", function(args)
questFailed(args)

end)

quest.setScript( 1794, "OnTimer", function(args)
showTimer {
  	id = 1794,
  	cur = args.count,
  	max = 60*5
  }
  
  if args.state == "TASK_FULFILLED" 
  	and args.count >= 1 then 
  	solveQuest (args.id)
  end
  

end)

quest.setScript( 1794, "OnTaskAwaiting", function(args)
setTimer {
  	id = 1794,
  	interval = 1,
  	count = 60*5,
  }
  showTimer {
  	id = 1794,
  	cur = 60*5,
  	max = 60*5,
  }
  

end)

quest.setScript( 2576, "OnTalk", function(args)
if args.tcid==6862 and args.state=="TASK_AWAITING" and args.id == 2576 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2576, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6862,0,{47;30;-1;1710.250000;1196.851563;-0.017757;136.896988})

end)

quest.setScript( 1401, "OnTaskAwaiting", function(args)

  changeCreature {
  	tcid = 761,
  	role = "ROLE_ATTACKER",
  	faction = "FACTION_ENEMY_HERO",
  	mortality = "MORTAL",
  	delay = 1
  }
  
  

end)

quest.setScript( 1401, "OnSetup", function(args)
changeCreature {
  	tcid = 761,
  	role = "ROLE_ATTACKER",
  	faction = "FACTION_ENEMY_HERO",
  	mortality = "MORTAL",
  	delay = 1
  }

end)

quest.setScript( 2578, "OnTalk", function(args)
if args.tcid==6910 and args.state=="TASK_AWAITING" and args.id == 2578 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2578, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6910,0,{47;30;-2;2666.593750;1862.101563;-0.002632;307.434998})

end)

quest.setScript( 2220, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 6416,
    useUnconscious = true,
    livesRemaining = 1,
    unconsciousTime = 1,
  }

end)

quest.setScript( 2220, "OnDeath", function(args)
if args.tcid == 6416 then
    changeCreature {
      tcid = 6416,
      behaviour = "questCreatures",
      clearAutoTeleporting = true,
      delay = 1,
    }
  end
  

end)

quest.setScript( 2582, "OnTalk", function(args)
if args.tcid==7154 and args.state=="TASK_AWAITING" and args.id == 2582 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2582, "OnTaskFulfilled", function(args)
creatureTeleportPosition(7154,0,{49;30;-1;1181.500000;829.796875;0.797134;98.754974})

end)

quest.setScript( 2584, "OnTalk", function(args)
if args.tcid==7227 and args.state=="TASK_AWAITING" and args.id == 2584 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2584, "OnTaskFulfilled", function(args)
creatureTeleportPosition(7227,0,{47;30;-2;1795.750000;1170.351563;-0.002632;129.072510})

end)

quest.setScript( 224, "OnSetup", function(args)
addGold(-500)
  
  questMessage {
     line = 1,
     lokaid = "QUEST_224_PAYGOLD_MSG",
     duration = 5.0,
     fadeIn = 0.5,
     fadeOut = 1.0,
     delay = 0,
     color = "#00ff00",
    }

end)

quest.setScript( 224, "OnLost", function(args)
changeCreature {
  	tcid = 761,
  	role = "ROLE_ATTACKER",
  	faction = "FACTION_ENEMY_HERO",
  	mortality = "MORTAL",
  	delay = 1
  }

end)

quest.setScript( 2586, "OnTalk", function(args)
if args.tcid==7228 and args.state=="TASK_AWAITING" and args.id == 2586 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2586, "OnTaskFulfilled", function(args)
creatureTeleportPosition(7228,0,{47;30;-2;1745.343750;1786.296875;-0.002632;26.221863})

end)

quest.setScript( 963, "OnWon", function(args)
changeCreature {
  	tcid = 2752,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM16",
  	loopCount = 2,
  }
  changeCreature {
  	tcid = 2752,
  	behaviour = "questCreatures",
  	delay = 6
  }

end)

quest.setScript( 838, "OnTaskAwaiting", function(args)
creatureTeleportsAway ( 2492, 2 )
  

end)

quest.setScript( 337, "OnTalk", function(args)
if args.id == 337 and args.state == "PRECONDS_FULFILLED" and args.tcid == 1205 then
  
  	changeCreature {
  		tcid = 1205,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND-UP",
  		loopCount = 1,
  	}
  	changeCreature {
  		tcid = 1205,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_TALK",
  		loopCount = -1,
  		delay = 2.96,
  	}
  	changeCreature {
  		tcid = 7671,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND_IDLEB",
  		loopCount = 1,
  	}
  	changeCreature {
  		tcid = 7671,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND_IDLE",
  		loopCount = -1,
  		delay = 7.1,
  	}
  
  end
  
  if args.state == "TASK_FULFILLED" and args.id == 337 and args.tcid == 1199 then
  	changeCreature {
  		tcid = 1199,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_TALK",
  		loopCount = -1,
  	}
  end
  

end)

quest.setScript( 337, "OnStateChange", function(args)
local tcids = {7671,7672,1205}
  
  if args.state == "PRECONDS_FULFILLED" then
  	for index,tcid in tcids do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_SITGROUND-IDLE",
  			loopCount = -1,
  			dont_turn = true,
  		}
  	end
  end 

end)

quest.setScript( 337, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-DOWN",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 2.72,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLEA",
  	loopCount = 1,
  	delay = 25,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 31.4,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLEB",
  	loopCount = 1,
  	delay = 60,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 66.2,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLEB",
  	loopCount = 1,
  	delay = 240,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 246.2,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLEA",
  	loopCount = 1,
  	delay = 600,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 606.4,
  }
  changeCreature {
  	tcid = 7672,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-TALK",
  	loopCount = 1,
  	delay = 35,
  }
  changeCreature {
  	tcid = 7672,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 41,
  }
  changeCreature {
  	tcid = 7671,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLEA",
  	loopCount = 1,
  	delay = 50,
  }
  changeCreature {
  	tcid = 7671,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 56.2,
  }

end)

quest.setScript( 2877, "OnTalk", function(args)
changeCreature {
  	tcid = 8185,
  	behaviour = "JOB_QUESTSTAGING",
  	--role = "ROLE_INVALID",
  	emotion = "ANIM_TYPE_EM13",
  	loopCount = 1,
  	--delay = 0.01
  }

end)

quest.setScript( 1622, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 1201,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_DEATH",
  	loopCount = 1,
  	dont_turn = true,
  	clearAutoTeleporting = true,
  	role = "ROLE_INVALID",
  	faction = "FACTION_FRIEND_HERO_ALL",
  --	delay = 1,
  }
  changeCreature {
  	tcid = 1201,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM23",
  	clearUnconscious = true,
  	livesRemaining = 0,
  	loopCount = -1,
  	dont_turn = true,
  	clearAutoTeleporting = true,
  	role = "ROLE_DIALOG",
  	delay = 2,
  }

end)

quest.setScript( 1622, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 1201,
  	useUnconscious = true,
  	livesRemaining = 1,
  	unconsciousTime = 0,
  }

end)

quest.setScript( 1622, "OnWon", function(args)
setWoobEffect {
  	woid = 1026776850,
  	effect = "FXTYPE_PORTAL2",
  }
  
  changeCreature {
  	tcid = 1201,
  	effect = "FXTYPE_SC_BURNINGDEAD",
  }
  changeCreature {
  	tcid = 1201,
  	mortality = "MORTAL",
  	role = "ROLE_INVALID",
  	delay = 4,
  }
  killCreature {
  	tcid = 1201,
  	deinitragdioll = false,
  	delay = 5,
  }
  

end)

quest.setScript( 702, "OnTaskAwaiting", function(args)
local slaves = {5398,5394,2157,5393,5395,5396,5397,5339,5391,5392}
  
  for index,tcid in slaves do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = toWorldPosition("35;58;-1;2550.000000;400.000000;0.000000;0.000000"),
  		speed = 2,
  	}
  	creatureTeleportsAway(tcid,30)
  	destroyCreature {
  		tcid = tcid,
  		splatter = false,
  		delay = 35,
  	}
  end

end)

quest.setScript( 3105, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 7985,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 2695, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 7750,
  	setAutoTeleporting = true,
  }

end)

quest.setScript( 980, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.id == 980 and args.tcid == 878 then
  	changeCreature {
  		tcid = 878,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  		dont_turn = 1,
  	}
  end

end)

quest.setScript( 980, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	changeCreature {
  		tcid = 878,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  		dont_turn = 1,
  	}
  end

end)

quest.setScript( 980, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 878,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  	dont_turn = 1,
  }

end)

quest.setScript( 2372, "OnPrecondsFulfilled", function(args)
teleport {
  tcid = 2492,
  position = {px=0,py=0,pz=0,sx=0,sy=0,sz=0},
  orientation = 0,
  }

end)

quest.setScript( 2765, "OnTaskAwaiting", function(args)
creatureTeleportPosition( 7935, 0, {13,7,0, 2648.25, 418.650, 1900, 130} )
  

end)

quest.setScript( 2765, "OnTalk", function(args)
if args.tcid == 7935 and args.state == "TASK_AWAITING" then
  	changeCreature {
  		tcid = 7935,
  		behaviour = "Enemy_warrior_brave",
  		mortality = "MORTAL"
  	}
  end
  

end)

quest.setScript( 2217, "OnTaskFulfilled", function(args)
destroyCreature {
  	tcid = 6774,
  	splatter = false,
  }

end)

quest.setScript( 2217, "OnWon", function(args)
changeCreature {
  	tcid = 6781,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM13",
  	loopCount = 2,
  }
  changeCreature {
  	tcid = 6781,
  	behaviour = "JOB_KID",
  	delay = 1800,
  }

end)

quest.setScript( 546, "OnWon", function(args)
changeCreature {
   tcid = 1828, 
   behaviour = "JOB_QUESTSTAGING",
   emotion = "ANIM_TYPE_EM13",
   loopCount = 1,
  }
  
  changeCreature {
  	tcid = 2844, 
  	behaviour = "JOB_POOR_STATIST",
  	delay = 4,
  }
  

end)

quest.setScript( 3272, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9232,
  	role = "ROLE_VICTIM",
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 973, "OnWon", function(args)
creatureGotoPos(9519, {22;43;-1;950.000000;250.000000;0.000000;0.000000}, false, 2)
  creatureTeleportsAway(9519,10)

end)

quest.setScript( 2301, "OnCounter", function(args)
return "QUEST_2301_COUNTER"
  

end)

quest.setScript( 2228, "OnTaskAwaiting", function(args)
--changeCreature{
  --  	tcid = 6366,
  --clearAutoTeleporting = true,
  --  }
  creatureTeleportPosition(6366,1,{37;59;0;6.852000;680.796997;176.481003;90.000000})

end)

quest.setScript( 2228, "OnWon", function(args)
--		changeCreature {
  --			tcid = 6366,
  --			behaviour = "JOB_QUESTSTAGING",
  --			emotion = "ANIM_TYPE_MAGICB",
  --			effect = "FXTYPE_GEN_SPAWN1_I",
  --			effectParam = { 
  --				paramtype="position", 
  --				position={sx=43;sy=56;sz=0;px=500;py=2000;pz=0},
  --				duration=1.2,
  --				fxImpact="FXTYPE_GEN_SPAWN1",
  --			},
  --			loopCount = 1,
  --		}
  
  
  --killCreature {
  --	tcid = 6416,
  --	splatter = true,
  --	delay = 1,
  --}
  
  changeCreature {
  tcid = 6366,
  behaviour = "JOB_QUESTSTAGING",
  emotion = "ANIM_TYPE_MAGICB",
  followUpBhv = "questCreatures",
  --effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
  --emotion = "ANIM_TYPE_SM22",
  }
  
  
  changeCreature {
  tcid = 6416,
  behaviour = "JOB_QUESTSTAGING",
  --emotion = "ANIM_TYPE_MAGICB",
  effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
  emotion = "ANIM_TYPE_SM22",
  delay = 1,
  }
  killCreature {
   tcid = 6416,
   splatter = true,
   delay = 3,
  }

end)

quest.setScript( 972, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9519,
  	clearAutoTeleporting = true
  }

end)

quest.setScript( 1316, "OnWon", function(args)
changeCreature {
  	--Questgeber geht zum Geburtstag seiner Tochter!
  	--An der Stelle evtl. noch eine 'Party' inszenieren?!?
  	tcid = 3575,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = { px = 2837.203125, py = 2002.250000, 
  									 pz = 100.069916, sx = 27, sy = 23, sz = 0},
  	followUpBhv = "JOB_RICH_STATIST",
  }
  changeCreature {
  	tcid = 3595,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_KNEE-IDLE",
  	loopCount = 2,
  	delay = 2,
  }
  changeCreature {
  	tcid = 3595,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_IDLE",
  	loopCount = 1,
  	delay = 4,
  }
  
  changeCreature {
  	tcid = 3595,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = { px = 2187.648438, py = 1828.101563, pz = -481.899689, sx = 28, sy = 22, sz = 0},
  	followUpBhv = "JOB_QUESTSTAGING",
  	delay = 5,
  }
  changeCreature {
  	tcid = 3595,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-DOWN",
  	loopCount = 1,
  	delay = 13,
  }
  changeCreature {
  	tcid = 3595,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = 1,
  	delay = 15,
  }

end)

quest.setScript( 1316, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	changeCreature {
  		tcid = 3595,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_TALK",
  		loopCount = -1,
  	}
  	changeCreature {
  		tcid = 3575,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_TALK",
  		loopCount = -1,
  	}
  end

end)

quest.setScript( 1700, "OnSetup", function(args)
	changeCreature {
  		tcid = 4488,
  		mortality = "IMMORTAL",
  		clearAutoTeleporting = true,
  	}

end)

quest.setScript( 1700, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  
  	local victims = {4469,4472,4476,4477,4480,4481,4488,4474,4478}
  	local attackers = {4467,4463}
  
  	for index,tcid in victims do
  		setRole(tcid,"ROLE_VICTIM")
  	end
  	for index,tcid in attackers do
  		setRole(tcid,"ROLE_ATTACKER")
  	end
  
  end 

end)

quest.setScript( 1700, "OnWon", function(args)
changeCreature {
  	tcid = 4488,
  	clearAutoTeleporting = false,
  	behaviour = "questCreatures",
  }
  
  

end)

quest.setScript( 1700, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 4488,
  	behaviour = "questCreatures",
  	faction = "FACTION_FRIEND_HERO_ALL",
  }

end)

quest.setScript( 1700, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 4488,
  	clearAutoTeleporting = false,
  	behaviour = "Enemy_warrior_brave",
  }

end)

quest.setScript( 1822, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 5007,
  	useUnconscious = true,
  	livesRemaining = 255,
  	unconsciousTime = 3,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 2386, "OnTaskAwaiting", function(args)
creatureTeleportsAway(3002, 1)

end)

quest.setScript( 2386, "OnPrecondsFulfilled", function(args)
changeCreature {
  	tcid = 3002,
  	effect = "FXTYPE_HOLOGRAM",
  }

end)

quest.setScript( 2787, "OnWon", function(args)
changeCreature {
  	tcid = 7995,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_MAGICA",
  	loopCount = 2,
  }

end)

quest.setScript( 2373, "OnTaskAwaiting", function(args)
creatureTeleportsAway (2492,1)

end)

quest.setScript( 2803, "OnTaskFulfilled", function(args)
changeCreature {
  		tcid=7997,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM15",
  		loopCount = 1,
  		effect = "FXTYPE_GEN_TRANSFORM",
  		creature = "tenerg_desert_warrior_mutate",
  		delay=1,
  }
  

end)

quest.setScript( 2369, "OnCounter", function(args)
return "TASKCREATURE_7118"

end)

quest.setScript( 2548, "OnWon", function(args)
changeCreature{
  tcid = 7495,
  faction = "FACTION_ENEMY_ALL",
  behaviour = "Enemy_warrior_kicknrush",
  }

end)

quest.setScript( 2548, "OnTaskAwaiting", function(args)
tcids = {7479,7480,7481,7482,7483,7484,7485,7486}
  for index,tcid in tcids do 
  	changeCreature {
  		tcid = tcid, 
  		behaviour = "Enemy_warrior_kicknrush",
  		effect = "FXTYPE_SMOKEBIGBLACK",	
  		delay = 2.1,
  }
  end
  creatureTeleportPosition (7479,0, {57;27;0;1500.000000;2950.000000;0.000000;40})
  creatureTeleportPosition (7480,0, {57;27;0;1600.000000;2950.000000;0.000000;80})
  creatureTeleportPosition (7481,0, {57;27;0;1750.000000;2900.000000;0.000000;120})
  creatureTeleportPosition (7482,0, {57;27;0;1550.000000;2900.000000;0.000000;160})
  creatureTeleportPosition (7483,0, {57;27;0;1450.000000;2850.000000;0.000000;200})
  creatureTeleportPosition (7484,0, {57;27;0;1550.000000;2850.000000;0.000000;240})
  creatureTeleportPosition (7485,0, {57;27;0;1553.500000;2654.500000;-1733.034180;348.228149})
  creatureTeleportPosition (7486,0, {57;27;0;1600.000000;2800.000000;0.000000;320})

end)

quest.setScript( 929, "OnUnconscious", function(args)

  if args.tcid == 2654 then
  	changeCreature {
  		tcid = 2654,
  		faction = "FACTION_HERO_GOOD",
  		behaviour = "questCreatures",
  		role = "ROLE_DIALOG"
  	}
  elseif args.tcid == 2655 then
  	changeCreature {
  		tcid = 2655,
  		faction = "FACTION_HERO_GOOD",
  		behaviour = "questCreatures",
  		role = "ROLE_DIALOG"
  	}
  end
  

end)

quest.setScript( 929, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 2654,
  	useUnconscious = true,
  	unconsciousTime = 3,
  	livesRemaining = -1,
  }
  changeCreature {
  	tcid = 2655,
  	useUnconscious = true,
  	unconsciousTime = 3,
  	livesRemaining = -1,
  }
  
  

end)

quest.setScript( 2377, "OnCounter", function(args)
return "QUEST_2377_COUNTER"

end)

quest.setScript( 2381, "OnTaskAwaiting", function(args)

  creatureTeleportsAway( 3002, 1 )

end)

quest.setScript( 2381, "OnPrecondsFulfilled", function(args)
changeCreature {
  	tcid = 3002,
  	effect = "FXTYPE_HOLOGRAM",
  }

end)

quest.setScript( 943, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 2621,
  	behaviour = "JOB_QUESTSTAGING",
  	role = "ROLE_INVALID",
  	emotion = "ANIM_TYPE_LAYGROUND-UP",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 2621,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_IDLE",
  	loopCount = 1,
  	delay = 2,
  }
  changeCreature {
  	tcid = 2621,
  	behaviour = "questCreatures",
  	role = "ROLE_DIALOG",
  	delay = 3,
  }

end)

quest.setScript( 943, "OnTaskAwaiting", function(args)
local delay = 2
  
  changeCreature {
  	tcid = 2621,
  	behaviour = "JOB_QUESTSTAGING",
  	role = "ROLE_INVALID",
  	emotion = "ANIM_TYPE_LAYGROUND-DOWN",
  	loopCount = 1,
  --	delay = delay
  }
  
  changeCreature {
  	tcid = 2621,
  	behaviour = "JOB_QUESTSTAGING",
  	role = "ROLE_INVALID",
  	emotion = "ANIM_TYPE_LAYGROUND-IDLE",
  	loopCount = -1,
  	delay = 2,
  --	delay = delay + 2
  }
  
  local getier = {2679,2683,2684,2686,2687}
  local spinnen = {2680,2681,2682,2685,2688}
  for i, tcid in getier do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = {sx=38,sy=8,sz=0,px=2622.716797,py=1814.887573,pz=239},
  		followUpBhv = "Enemy_warrior_brave",
  		speed = 2,
  		delay = delay + 2
  	}
  	changeCreature {
  		tcid = spinnen[i],
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = {sx=38,sy=8,sz=0,px=1800.203125,py=1850.449219,pz=265},
  		followUpBhv = "Enemy_warrior_brave",
  		speed = 2,
  		delay = delay + 2
  	}
  end
  

end)

quest.setScript( 1047, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 2948,
  	role = "ROLE_VICTIM",
  	mortality = "IMMORTAL",
  }
  changeCreature {
  	tcid = 2958,
  	role = "ROLE_VICTIM",
  	mortality = "IMMORTAL",
  }
  

end)

quest.setScript( 1047, "OnWon", function(args)
changeCreature {
  	tcid = 2948,
  	role = "ROLE_INVALID",
  	mortality = "MORTAL",
  }
  changeCreature {
  	tcid = 2958,
  	role = "ROLE_INVALID",
  	mortality = "MORTAL",
  }

end)

quest.setScript( 1075, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 2994 then
  	changeCreature {
  		tcid = 2994,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  end
  

end)

quest.setScript( 1075, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 2994,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM22",
  	loopCount = -1,
  	mortality = "MORTAL",
  	role = "ROLE_INVALID",
  }
  killCreature {
  	tcid = 2994,
  	delay = 2,
  }

end)

quest.setScript( 1075, "OnSetup", function(args)
cutscene_DR_bad(args)
  

end)

quest.setScript( 1079, "OnSetup", function(args)
cutscene_TG_good(args)
  

end)

quest.setScript( 3368, "OnTaskAwaiting", function(args)
setRole(8015,"ROLE_VICTIM")

end)

quest.setScript( 3370, "OnPrecondsFulfilled", function(args)
changeCreature {
  	tcid = 8013,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  }

end)

quest.setScript( 3370, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 8013 then
  	changeCreature {
  		tcid = 8013,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  end
  

end)

quest.setScript( 3370, "OnWon", function(args)
removeFromGroup {
  	tcid = 8015,
  }
  
  
  creatureTeleportsAway (8015, 0)
  creatureTeleportsAway (8013, 0.1)
  creatureTeleportsAway (8040, 0.2)
  creatureTeleportsAway (8038, 0.3)
  creatureTeleportsAway (8675, 0.4)

end)

quest.setScript( 3371, "OnPrecondsFulfilled", function(args)
changeCreature {
  	tcid = 8013,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  }

end)

quest.setScript( 3371, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 8013 then
  	changeCreature {
  		tcid = 8013,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  end
  

end)

quest.setScript( 3371, "OnWon", function(args)
local tcids = {8015,8040,8038}
  local delay = 0
  for index,tcid in tcids do
  	removeFromGroup {
  		tcid = tcid,
  	}
  	creatureTeleportsAway(tcid,delay)
  	delay = delay +0.1
  end
  
  creatureTeleportsAway (8013, 0.3)
  creatureTeleportsAway (8675, 0.4)

end)

quest.setScript( 3369, "OnTaskAwaiting", function(args)
setRole(8015,"ROLE_VICTIM")

end)

quest.setScript( 2825, "OnWon", function(args)
solveQuest(3369)
  
  local tcids = {8015,8040,8038}
  local delay = 0
  for index,tcid in tcids do
  	removeFromGroup {
  		tcid = tcid,
  	}
  	creatureTeleportsAway(tcid,delay)
  	delay = delay +0.1
  end
  
  creatureTeleportsAway (8013, 0.3)
  creatureTeleportsAway (8675, 0.4)

end)

quest.setScript( 2391, "OnTalk", function(args)
if args.tcid==6861 and args.state=="TASK_AWAITING" and args.id == 2391 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2391, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6861,0,{47;30;-1;1762.437500;814.500000;-0.017757;169.015060})

end)

quest.setScript( 2395, "OnTalk", function(args)
if args.tcid==6850 and args.state=="TASK_AWAITING" and args.id == 2395 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2395, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6850,0,{47;30;-1;1721.593750;2188.250000;-0.017757;64.421539})

end)

quest.setScript( 2397, "OnTalk", function(args)
if args.tcid==6855 and args.state=="TASK_AWAITING" and args.id == 2397 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2397, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6855,0,{47;30;-1;2658.656250;1037.101563;-0.018810;301.138977})

end)

quest.setScript( 2399, "OnTalk", function(args)
if args.tcid==6890 and args.state=="TASK_AWAITING" and args.id == 2399 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2399, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6890,0,{47;30;-1;1867.296875;872.953125;-0.017757;306.430878})

end)

quest.setScript( 2801, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 8013 then
  	changeCreature {
  		tcid = 8013,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  end
  

end)

quest.setScript( 2801, "OnPrecondsFulfilled", function(args)
changeCreature {
  	tcid = 8013,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  }

end)

quest.setScript( 2801, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 8013,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  }

end)

quest.setScript( 1732, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  
  	changeCreature {
  		tcid = 4636,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  		faction = "FACTION_FRIEND_HERO_ALL",
  		role = "ROLE_DIALOG",
  		clearAutoTeleporting = true,
  		mortal = "IMMORTAL",
  		delay = 3,
  	}
  end 

end)

quest.setScript( 1732, "OnWon", function(args)
changeCreature {
  	tcid = 4636,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM22",
  	loopCount = 1,
  	mortality = "MORTAL",
  	role = "ROLE_INVALID",
  }
  killCreature {
  	tcid = 4636,
  	delay = 2,
  }

end)

quest.setScript( 1732, "OnTalk", function(args)
if args.tcid == 4636 and args.state == "TASK_FULFILLED" and args.id == 1732 then
  	changeCreature {
  		tcid = 4636,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  end 

end)

quest.setScript( 1732, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 4627,
  	mortality = "MORTAL",
  }
  killCreature {
  	tcid = 4627,
  	delay = 7,
  }

end)

quest.setScript( 2393, "OnTalk", function(args)
if args.tcid==6874 and args.state=="TASK_AWAITING" and args.id == 2393 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2393, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6874,0,{47;30;-1;1902.703125;1984.804688;-0.017757;318.249115})

end)

quest.setScript( 2070, "OnTaskFulfilled", function(args)
onRespawn = nil
  return toWorldPosition("32;52;0;1750;1550;0;0")
  

end)

quest.setScript( 2070, "OnCounter", function(args)
if getQuestState(2070) == "TASK_AWAITING" then
  	return "TASKCREATURE_6119"
  end
  if getQuestState(2070) == "TASK_FULFILLED" then
    return "TASKCREATURE_6114"
  end 

end)

quest.setScript( 2070, "OnPrecondsFulfilled", function(args)
return toWorldPosition("32;52;0;1750;1550;0;0")
  

end)

quest.setScript( 2070, "OnWon", function(args)
--teleportTeam(2070,"30;59;0;2000.000000;2600.000000;600.000000;0.000000")
  creatureTeleportPosition(6114,0,{30,59,0,1950,2500,593})
  

end)

quest.setScript( 2070, "OnTaskNotFulfilled", function(args)
teleportTeam(2070,"30;59;0;2000.000000;2600.000000;600.000000;0.000000")
  creatureTeleportPosition(6114,0,{30,59,0,1950,2500,593})
  onRespawn = nil
  return {}

end)

quest.setScript( 2070, "OnTaskAwaiting", function(args)
-- This enables the teleport button in the logbook.
  return toWorldPosition("32;52;0;1750.000000;1550.000000;0.000000;0.000000")

end)

quest.setScript( 2070, "OnSetup", function(args)
onRespawn = function ( args )
    local t = getQuestTeamId { questId = 2070 }
    if getQuestState { id = 2070 } == "TASK_AWAITING" then
      if getTeamIdByHeroRef{ ref = args.heroRef } == t then
        looseQuest { id = 2070 }
      end
    end
  end
  return toWorldPosition("32;52;0;1750.000000;1550.000000;0.000000;0.000000")

end)

quest.setScript( 2392, "OnTalk", function(args)
if args.tcid==6861 and args.state=="TASK_AWAITING" and args.id == 2392 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2401, "OnTalk", function(args)
if args.tcid==6852 and args.state=="TASK_AWAITING" and args.id == 2401 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2401, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6852,0,{47;30;-2;2668.484375;787.039063;-0.002632;214.947739})

end)

quest.setScript( 2239, "OnTalk", function(args)
if args.tcid == 6811 and args.state == "TASK_FULFILLED" then
  	changeCreature {
  		tcid = 6811,
  		behaviour = "questCreatures",
  	}
  end
  

end)

quest.setScript( 2394, "OnTalk", function(args)
if args.tcid==6874 and args.state=="TASK_AWAITING" and args.id == 2394 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 60, "OnWon", function(args)
changeCreature {
    tcid = 165, 
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM10",
    loopCount = 1,
  }
  changeCreature {
  	tcid = 165,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 3,
  }
  

end)

quest.setScript( 2396, "OnTalk", function(args)
if args.tcid==6850 and args.state=="TASK_AWAITING" and args.id == 2396 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2398, "OnTalk", function(args)
if args.tcid==6855 and args.state=="TASK_AWAITING" and args.id == 2398 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2400, "OnTalk", function(args)
if args.tcid==6890 and args.state=="TASK_AWAITING" and args.id == 2400 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2402, "OnTalk", function(args)
if args.tcid==6852 and args.state=="TASK_AWAITING" and args.id == 2402 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 1637, "OnWon", function(args)
changeCreature {
    tcid = 1147,
    mortality = "IMMORTAL",
  }

end)

quest.setScript( 1773, "OnStateChange", function(args)
--tcids = {	5335,5336,5337,5338,5339,5340,5341,5342,5343,5344,5345,5346 }
  					--5350,5351,5352,5353,5354,5355,5356,5357,5358,5359,5360 }
  
  --if args.state == "PRECONDS_FULFILLED" then
  --	for index,tcid in tcids do
  --		setRole(tcid,"ROLE_ATTACKER")
  --	end
  --end

end)

quest.setScript( 3047, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 8508,
  	mortality="IMMORTAL"
  }
  changeCreature{
  	tcid = 8507,
  	mortality="MORTAL",
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 1078, "OnSetup", function(args)
cutscene_TG_bad(args)
  

end)

quest.setScript( 639, "OnTalk", function(args)
if args.tcid == 2102 and args.id == 639 and args.state == "TASK_FULFILLED" then
  	changeCreature {
  		tcid = 2102,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_MAGICA",
  		effect = "FXTYPE_GEN_NOVA3",
  		loopCount = 1,
  		delay = 3,
  	}
  end
  

end)

quest.setScript( 2069, "OnTaskFulfilled", function(args)
onRespawn = nil
  return toWorldPosition("32;52;0;1750;1550;0;0")
  

end)

quest.setScript( 2069, "OnCounter", function(args)
if getQuestState(2069) == "TASK_AWAITING" then
  	return "TASKCREATURE_6116"
  end
  if getQuestState(2069) == "TASK_FULFILLED" then
    return "TASKCREATURE_6114"
  end 

end)

quest.setScript( 2069, "OnPrecondsFulfilled", function(args)
return toWorldPosition("32;52;0;1750;1550;0;0")
  

end)

quest.setScript( 2069, "OnSetup", function(args)
onRespawn = function ( args )
    local t = getQuestTeamId { questId = 2069 }
    if getQuestState { id = 2069 } == "TASK_AWAITING" then
      if getTeamIdByHeroRef{ ref = args.heroRef } == t then
        looseQuest { id = 2069 }			
      end
    end
  end
  --return toWorldPosition("32;52;0;1750.000000;1550.000000;0.000000;0.000000")

end)

quest.setScript( 2069, "OnTaskAwaiting", function(args)
-- This enables the teleport button in the logbook.
  return toWorldPosition("32;52;0;1750;1550;0;0")
  
  

end)

quest.setScript( 2069, "OnTaskNotFulfilled", function(args)
teleportTeam(2069,"30;59;0;2000.000000;2600.000000;600.000000;0.000000")
  creatureTeleportPosition(6114,0,{30,59,0,1950,2500,593})
  
  onRespawn = nil
  return {}

end)

quest.setScript( 2069, "OnWon", function(args)
return toWorldPosition("32;52;0;1750;1550;0;0")
  

end)

quest.setScript( 1643, "OnTaskAwaiting", function(args)
-- Free MP:
  if args.freeplay and not args.singleplayer and not args.campaign then
  	--Alle Mainquest Tueren im MP oeffnen.
  	--Grosser Wall HE/HU
  	setWoobState { state = "WOOB_DOOR_OPEN", woid = 1013397761 }
  	setWoobState { state = "WOOB_DOOR_OPEN", woid = 1013397746 }
  	setWoobState { state = "WOOB_DOOR_OPEN", woid = 1013397754 }
  	setWoobState { state = "WOOB_DOOR_OPEN", woid = 1013397738 }
  	--Geheimgang HE/HU
  	setWoobState { state = "WOOB_DOOR_OPEN", woid = 1013891954 }
  	--Kerker HU
  	setWoobState { state = "WOOB_DOOR_OPEN", woid = 1018326189 }
  	--Staufelsen
  	setWoobState { state = "WOOB_DOOR_OPEN", woid = 1018380619 }
  	--Ork Region / Damm Dungeon
  	setWoobState { state = "WOOB_DOOR_OPEN", woid = 1019420597 }
  	--unsichtbar funktioniert nicht.
  	--setWoobState { state = "WOOB_INVISIBLE", woid = 1019420597 }
  	--Seragate Big Machine Dungeon
  	setWoobState { state = "WOOB_DOOR_OPEN", woid = 1023046854 }
  	setWoobState { state = "WOOB_DOOR_OPEN", woid = 1023046905 }
  	setWoobState { state = "WOOB_DOOR_OPEN", woid = 1023046923 }
  	setWoobState { state = "WOOB_DOOR_OPEN", woid = 1023046947 }
  	setWoobState { state = "WOOB_DOOR_OPEN", woid = 1023047062 }
  	setWoobState { state = "WOOB_DOOR_OPEN", woid = 1023047090 }
  	setWoobState { state = "WOOB_DOOR_OPEN", woid = 1023047109 }
  	setWoobState { state = "WOOB_DOOR_OPEN", woid = 1023047127 }
  
  	--Andere Weltobjekte
  	--Staudamm
  	setWoobState { state = "WOOB_ANIM_ON", woid = 1017176304 }
  	setWoobState { state = "WOOB_ANIM_ON", woid = 1018920584 }
  	--T-Energie Rohr Sumpf
  	setWoobState { state = "WOOB_INVALID", woid = 1021408807 }
  	setWoobEffect { effect = "FXTYPE_SMOKEBIGWHITE", woid = 1021408807 }
  	--FX der Seragates Big Machine entfernen
  	setWoobEffect { effect = "FXTYPE_INVALID", woid = 1023046854 }
  	setWoobEffect { effect = "FXTYPE_INVALID", woid = 1023046905 }
  	setWoobEffect { effect = "FXTYPE_INVALID", woid = 1023046923 }
  	setWoobEffect { effect = "FXTYPE_INVALID", woid = 1023046947 }
  	setWoobEffect { effect = "FXTYPE_INVALID", woid = 1023047062 }
  	setWoobEffect { effect = "FXTYPE_INVALID", woid = 1023047090 }
  	setWoobEffect { effect = "FXTYPE_INVALID", woid = 1023047109 }
  	setWoobEffect { effect = "FXTYPE_INVALID", woid = 1023047127 }
  
  
  	--Wasserfall fuer die Orkregion -> muss immer angezeigt werden (MQ!)
  	showWaterfall()
  
  	--MQ: Captain Teleport erstellen - muessen immer vorhanden sein
  	local captains = {8861,8864,8866}
  	for index,tcid in captains do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_CAPTAIN",
  			merchantType = "MERCHANT_CAPTAIN",
  		}
  	end
  
  	--Unlock Ship Portals: DR, SE, WL
  	--DR
  	unlockShipPortal(3322,3,"SOUTH",args.heroRef)
  	--SE
  	unlockShipPortal(3322,2,"NORTH",args.heroRef)
  	--WL
  	unlockShipPortal(3322,1,"SOUTH",args.heroRef)
  
  	-- AddOn Kapitaene freischalten
  	-- Crystal Planes
  	unlockShipPortal(3322,8,"NORTH",args.heroRef)
  	-- Cursed Forest
  	unlockShipPortal(3322,7,"SOUTH",args.heroRef)
  end 
  
  -- MP Campaign
  if args.campaign and not args.freeplay and not args.singleplayer then
  	--3 MQ Orks - duerfen sich niemals umdrehen!
  	tcids = {2112,2111,2110}
  	for index,tcid in tcids do
  		changeCreature {
  			tcid = tcid,
  			dont_turn = true,
  		}
  	end
  
  	--Wasserfall fuer die Orkregion -> muss immer angezeigt werden (MQ!)
  	showWaterfall()
  
  	--MQ: Captain Teleport erstellen - muessen immer vorhanden sein
  	local captains = {8861,8864,8866}
  	for index,tcid in captains do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_CAPTAIN",
  			merchantType = "MERCHANT_CAPTAIN",
  		}
  	end
  
  	--MQ: Dorfaeltester Schlehenfurt -> kniet nieder!
  	changeCreature {
  		tcid = 1118,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_KNEE-DOWN",
  		loopCount = 1,
  	}
  	changeCreature {
  		tcid = 1118,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_KNEE-IDLE",
  		loopCount = -1,
  		delay = 1,
  	}
  
  	--Die 4Tueren am grossen Wall (HE zu HU) - werden am Anfang verschlossen!
  	--Ausserdem der Stein in der Ork Region 1018380619
  	--Ebenfalls die Tuer in der OR Region (Dungeon) - Wasserfall - 1019420597
  	local mainq_doors = {1013397754,1013397761,1013397738,1013397746,1018380619,1019420597}
  	for index,woid in mainq_doors do
  		setWoobState {
  			woid = woid,
  			state = "WOOB_DOOR_LOCKED",
  		}
  	end 
  
  	-- AddOn Kapitaene freischalten
  	-- Crystal Planes
  	unlockShipPortal(1559,8,"NORTH",args.heroRef)
  	-- Cursed Forest
  	unlockShipPortal(1559,7,"SOUTH",args.heroRef)
  end 
  
  --SP Start
  if args.singleplayer and args.campaign and not args.freeplay then
  	--3 Ork Leichen in der Ork Region, duerfen sich niemals drehen... (MQ!)
  	for index,tcid in {2112,2111,2110} do
  		changeCreature {
  			tcid = tcid,
  			dont_turn = true,
  		}
  	end
  
  	--Schiffskapitaene fuer die MQ, welche von Anfang an da sein muessen,
  	--damit man sie auch vorher schon finden kann
  	for index,tcid in {8861,8864,8866} do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_CAPTAIN",
  			merchantType = "MERCHANT_CAPTAIN",
  		}
  	end
  
  	--MQ: Dorfaeltester Schlehenfurt -> kniet nieder!
  	changeCreature {
  		tcid = 1118,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_KNEE-IDLE",
  		loopCount = -1,
  	}
  
  	--Wasserfall in der Ork Region - MQ Good Path
  	showWaterfall()
  
  	--Die 4 Tueren am grossen Wall (HE zu HU) - werden am Anfang verschlossen!
  	--Ausserdem der Stein in der Ork Region 1018380619
  	--Ebenfalls die Tuer im Dungeon in der OR Region - Wasserfall - 1019420597
  	local mainq_doors = {1013397754,1013397761,1013397738,1013397746,1018380619,1019420597}
  	for index,woid in mainq_doors do
  		setWoobState {
  			woid = woid,
  			state = "WOOB_DOOR_LOCKED",
  		}
  	end
  
  	-- AddOn Kapitaene freischalten
  	-- Crystal Planes
  	unlockShipPortal(1287,8,"NORTH",args.heroRef)
  	-- Cursed Forest
  	unlockShipPortal(1287,7,"SOUTH",args.heroRef)
  end 

end)

quest.setScript( 1643, "OnSetup", function(args)

  local position = {}
  local orientation = 0
  
  if 	getQuestState {id = 3714} == "WON" or 
  	getQuestState {id = 3714} == "PRECONDS_AWAITING" then
  	position = {sx=60;sy=11;sz=0;px=2495.015625;py=1729.246094;pz=734.589294}
  	orientation = 282.008179
  else
  	return
  end
  
  teleportHero {
  	heroRef = heroRef,
  	position = position,
  	orientation = orientation,
  }
  

end)

quest.setScript( 2238, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 6811,
  	clearAutoTeleporting = true,
  }
  

end)

quest.setScript( 2231, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 6811,
  	clearAutoTeleporting = true,
  }
  

end)

quest.setScript( 2233, "OnTalk", function(args)
if args.tcid == 6811 and args.state == "TASK_FULFILLED" then
  	changeCreature {
  		tcid = 6811,
  		behaviour = "questCreatures",
  	}
  end
  

end)

quest.setScript( 2501, "OnWon", function(args)

  changeCreature{
  	tcid =  7286,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=0,sy=0,sz=0,px=0,py=0,pz=0}
  }
  creatureTeleportsAway( 7286, 4 )

end)

quest.setScript( 2501, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 7286,
  	clearAutoTeleporting = true 
  }

end)

quest.setScript( 1359, "OnTaskAwaiting", function(args)
changeCreature { 
  	tcid = 3639,
  	useUnconscious = 1,
  	livesRemaining = 1,
  	unconsciousTime = 5,
  }

end)

quest.setScript( 1359, "OnUnconscious", function(args)
if args.tcid == 3639 then
  	changeCreature {
  		tcid = 3639,
  		faction = "FACTION_FRIEND_HERO_GOOD",
  		livesRemaining = 0,
  		
  	}
  	creatureTeleportPosition( 3639, 0,{0, 0, 0, 0, 0, 0 } )
  	solveQuest(1359)
  end
  

end)

quest.setScript( 2483, "OnTaskAwaiting", function(args)
local tcids = {8369,8370,8371,8372,8373,8374,8375,8376,8377,8378,8379,
  		8380,8381,8382,8383,8384,8385,8386,8387,8388,8389,8390,8391,8392,8393,
  		8394,8395,8396,8397,8398,8399,8400,8401,8402,8403,8404,8405,8406,8407,8408}
  
  for i, tcid in tcids do 
  	changeCreature {
  		tcid = tcid,
  		faction = "FACTION_ENEMY_HERO",
  		role = "ROLE_ATTACKER"
  	}
  end
  

end)

quest.setScript( 2483, "OnCounter", function(args)
return "TASKCREATURE_8400"

end)

quest.setScript( 1477, "OnWon", function(args)
changeCreature {
  	tcid = 4456,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM24",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 4456,
  	behaviour = "questCreatures",
  	delay = 2
  }

end)

quest.setScript( 988, "OnTaskFulfilled", function(args)
creatureTeleportPosition(2852, 0, {0,0,0, 0,0,0,0})

end)

quest.setScript( 988, "OnWon", function(args)
teleport {
  	tcid = 2697,
  	position = {px=0,py=0,pz=0,sx=0,sy=0,sz=0},
  	orientation = 0,
  }

end)

quest.setScript( 989, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 9520,
  	useUnconscious = true,
  	unconsciousTime = 0,
  	livesRemaining = 1,
  }
  
  changeCreature{
    tcid = 9521,
  	useUnconscious = true,
  	unconsciousTime = 2,
  	livesRemaining = 1,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 989, "OnUnconscious", function(args)
if args.tcid == 9520 and args.id == 989 then
  	changeCreature{
  		tcid = 9520,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  		clearUnconscious = true,
  		livesRemaining = 0,
  		faction = "FACTION_ATMO",
  		role = "ROLE_INVALID"
  	}
  end
  
  if args.tcid == 9521 and args.id == 989 then
  	changeCreature{
  		tcid = 9521,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  		clearUnconscious = true,
  		livesRemaining = 0,
  		faction = "FACTION_ATMO",
  		role = "ROLE_INVALID"
  	}
  end
  

end)

quest.setScript( 1984, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then 
  	setWoobEffect {
  			effect = "FXTYPE_QFX_VERGIFTETER_BRUNNEN",
  			woid = 1014511916
  	}
  end

end)

quest.setScript( 1670, "OnStation", function(args)
local gates1 = { 1023046854, 1023046905, 1023046923, 1023046947 }
  local gates2 = { 1023047062, 1023047090, 1023047109, 1023047127 }
  
  if args.currentStation == 0 then
    for index,id in gates1 do
      setWoobState {
        woid = id,
        state = "WOOB_DOOR_CLOSE",
      }
    end
  	setWoobState {
  		woid = 1023047034,
  		state = "WOOB_THINGY_OFF",
  	}
  end
  
  
  
  if args.currentStation == 1 then
    for index,id in gates2 do
      setWoobState {
        woid = id,
        state = "WOOB_DOOR_CLOSE",
      }
    end
  end 

end)

quest.setScript( 1978, "OnTaskFulfilled", function(args)
--if args.currentStation == 1 and args.woid == 1014511916 then
  	setWoobEffect {
  		effect = "FXTYPE_QFX_VERGIFTETER_BRUNNEN",
  		woid = 1014511916 }
  --end

end)

quest.setScript( 2129, "OnWon", function(args)
changeCreature {
  	tcid = 6404, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM27",
  	loopCount = 1,
  }
  

end)

quest.setScript( 2513, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 7387,
  	--clearAutoTeleporting = true,
  	mortality = "IMMORTAL"
  }
  

end)

quest.setScript( 2513, "OnWon", function(args)
solveQuest(2514)

end)

quest.setScript( 2513, "OnStation", function(args)
if args.state == "TASK_AWAITING" then
  
  local pos = {
  		{sx=54,sy=29,sz=0,px=650,py=1300,pz=0},
  		{sx=53,sy=29,sz=0,px=3050,py=1150,pz=0},
  		{sx=53,sy=29,sz=0,px=2200,py=700,pz=0} 
  }
  changeCreature{
  	tcid = 7387,
  	gotoPosition = pos[args.currentStation+1],
  	followUpBhv = "JOB_QUESTSTAGING",
  }
  changeCreature{
  	tcid = 7387,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM20",
  	delay = 3,
  }
  changeCreature{
  	tcid = 7387,
  	behaviour = "Hireling_coward",
  	delay = 5,
  }	
  end
  

end)

quest.setScript( 2515, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 7387,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=55,sy=29,sz=0,px=750,py=1500,pz=0},
  	followUpBhv = "questCreatures",
  }
  

end)

quest.setScript( 1642, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 4360,
  	useUnconscious = true,
  	unconsciousTime = 4,
  	livesRemaining = 255,
  }

end)

quest.setScript( 1493, "OnCounter", function(args)
return "TASKCREATURE_4070"

end)

quest.setScript( 3495, "OnTaskFulfilled", function(args)
--9731
  
  changeCreature {
  	tcid = 9731,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("21;38;0;804.250000;837.453003;2968.520020;325.000000"),
  	speed = 2,
  	followUpBhv = "Enemy_warrior_simple",
  	faction = "FACTION_ENEMY_HERO",
  }
  
  creatureTeleportsAway(9731,7)
  

end)

quest.setScript( 3438, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
    return "QUEST_801_DECLINE_DLG" , "QUEST_801_ACCEPT_DLG"
  end

end)

quest.setScript( 3412, "OnTaskFulfilled", function(args)
teleportTeam(3412,"30;59;0;2000.000000;2600.000000;600.000000;0.000000")

end)

quest.setScript( 3412, "OnSetup", function(args)
changeCreature {
  	tcid = 8001,
  	visible = false,
  	delay = 0.1,
  }
  

end)

quest.setScript( 3412, "OnTaskAwaiting", function(args)
setTimer {
  	id = 3412,
  	count = 10,
  	interval = 1,
  }
  showTimer {
  	id = 3412,
  	cur = 10,
  	max = 10,
  }
  questMessage {
  	lokaid = "QUEST_2067_TCOUNT_MSG",
  	color = "#F0F8FF",
  	line = 1,
  	duration = 9.8,
  	fadeIn = 0.1,
  	fadeOut = 0.1,
  }
  
  

end)

quest.setScript( 3412, "OnTimer", function(args)

  showTimer {
  	id = 3412,
  	cur = args.count,
  	max = 10,
  }
  
  if args.count == 10 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_01",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 9 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_02",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 8 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_03",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 7 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_04",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 6 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_05",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 5 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_06",
  		color = "#FF0000",
  		line = 5,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 4 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_07",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 3 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_08",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 2 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_09",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 1 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_10",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  	solveQuest(args.id)
  end
  

end)

quest.setScript( 1708, "OnCounter", function(args)
return "TASKCREATURE_4497"

end)

quest.setScript( 1799, "OnWon", function(args)
changeCreature {
    tcid = 4912,
    role = "ROLE_ATTACKER",
    clearAutoTeleporting = true,
  }

end)

quest.setScript( 1414, "OnWon", function(args)
	
  	changeCreature {
  		tcid = 3844,
  		role = "ROLE_INVALID",
  		mortality = "MORTAL",
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND-DOWN",
  		loopCount = 1,
  		delay = 2
  	}
  
  	killCreature {
  		tcid = 3844,
  		--deinitragdoll = true,
  		delay = 3
  	}
  
  	--changeCreature {
  	--	tcid = 3844,
  	--	emotion = "ANIM_TYPE_SM21",
  	--	loopCount = 1,
  	--	delay = 2
  	--}
  
  	
  

end)

quest.setScript( 1673, "OnTalk", function(args)
if args.tcid == 6171 and args.state == "TASK_FULFILLED" then 
  	changeCreature {
  		tcid = 6171,
  		behaviour = "QUESTJOB_KILL_POOR",
  	}
  end
  

end)

quest.setScript( 1673, "OnWon", function(args)
destroyCreature {
  	tcid = 6171,
  	splatter = true,
  	delay = 1
  }
  	
  	

end)

quest.setScript( 1673, "OnTaskAwaiting", function(args)
for index,id in {6167,6169,6170} do
  	changeCreature {
  		tcid = id,
  		clearUnconscious = true,
  		livesRemaining = 0,
  		mortality = "MORTAL",
  		behaviour = "Enemy_warrior_brave",
  		faction = "FACTION_ENEMY_HERO",
  	}
  end
  
  changeCreature {
  	tcid = 6171,
  	mortality = "MORTAL",
  	behaviour = "Enemy_mage_phalanx",
  	faction = "FACTION_ENEMY_HERO",
  }
  

end)

quest.setScript( 1673, "OnUnconscious", function(args)
if args.tcid == 6171 then 
  	changeCreature {
  		tcid = 6171,
  		behaviour = "questCreatures",
  		faction = "FACTION_INVALID",
  		role = "ROLE_DIALOG",
  	}
  end
  

end)

quest.setScript( 2244, "OnTaskAwaiting", function(args)
return toWorldPosition("50;33;-2;1317;232;-1733;338")

end)

quest.setScript( 2244, "OnTaskFulfilled", function(args)
return toWorldPosition("50;33;-2;1317;232;-1733;338")

end)

quest.setScript( 2244, "OnWon", function(args)
-- SC wird zurueck zum Questgeber teleportiert, 
  -- am besten zurueck auf das Bett (Area Schlafstaette)
  --teleportGroup({50,33,0,900,700,-1380})
  teleportTeam(2244,"50;33;0;900;700;-1380;0")
  return {}

end)

quest.setScript( 1836, "OnTalk", function(args)
if nil then
  	changeCreature {
  		tcid = 5053,
  		role = "ROLE_ATTACKER",
  		clearAutoTeleporting = true; 
  	}
  end
  

end)

quest.setScript( 1836, "OnSetup", function(args)
changeCreature {
    	tcid = 5053,
    	useUnconscious = true,
    	livesRemaining = 1,
    	unconsciousTime = 1,
    	role = "ROLE_ATTACKER",
    	clearAutoTeleporting = true; 
    }

end)

quest.setScript( 1836, "OnWon", function(args)
changeCreature {
    	tcid= 5053,
    	behaviour = "JOB_QUESTSTAGING",
    	emotion = "ANIM_TYPE_SM22",
    	mortality = "MORTAL",
    	role = "ROLE_INVALID",
    	loopCount = -1,
    }
    killCreature {
    	tcid = 5053,
    	deinitragdoll = false,
    	delay = 2,
    }

end)

quest.setScript( 1836, "OnUnconscious", function(args)
changeCreature{
      		tcid= 5053,
      		livesRemaining = 0,
      		clearUnconscious= true,
      		behaviour="questCreatures",
      		faction="FACTION_INVALID",
      		delay = 1,
      	}

end)

quest.setScript( 1836, "OnTaskFulfilled", function(args)
changeCreature {
    	tcid= 5053,
    	clearUnconscious = true,
    	livesRemaining = 0,
    	behaviour = "JOB_QUESTSTAGING",
    	emotion = "ANIM_TYPE_SM20",
    	loopCount = -1,
    }

end)

quest.setScript( 1836, "OnTaskAwaiting", function(args)
changeCreature {
    	tcid = 5053,
    	useUnconscious = true,
    	livesRemaining = 1,
    	unconsciousTime = 1,
    	role = "ROLE_ATTACKER",
    	clearAutoTeleporting = true; 
    }

end)

quest.setScript( 1527, "OnTalk", function(args)
if args.tcid == 4161 then
  	changeCreature {
  		tcid = 4161,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM13",
  		loopCount = -1,
  	}
  
  end

end)

quest.setScript( 2808, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid=8030,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 2963, "OnWon", function(args)
changeCreature {
  	tcid = 8243,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM16",
  	loopCount = 1,
  	emotion = "ANIM_TYPE_EM10",
  	loopCount = 1,
  	delay = 5,
  }
  changeCreature {
  	tcid = 8310,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM16",
  	loopCount = 1,
  	emotion = "ANIM_TYPE_EM10",
  	loopCount = 1,
  	delay = 5,
  }
  changeCreature {
  	tcid = 8311,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM16",
  	loopCount = 1,
  	emotion = "ANIM_TYPE_EM10",
  	loopCount = 1,
  	delay = 5,
  }

end)

quest.setScript( 640, "OnWon", function(args)
questCompleted(args)
  
  --Die 4 Frauen aus dem Kerker laufen aus dem Dungeon raus!
  --4204, 4205, 4206, 2083
  --Vorher stehen sie aber noch auf!
  --
  changeCreature {
  	tcid = 4204,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-UP",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 4204,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {px=1279.351563,py=601.851563,pz=-47.707954,sx=33,sy=38,sz=-1},
  	followUpBhv = "JOB_QUESTSTAGING",
  	delay = 2,
  }
  creatureTeleportPosition(4204,15,{sx=34,sy=38,sz=0,px=1248.046875,py=680.250000,pz=231.566406})
  changeCreature {
  	tcid = 4204,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {px=1668.093750,py=2528.812500,pz=143.698517,sx=34,sy=37,sz=0},
  	followUpBhv = "JOB_POOR_STATIST",
  	delay = 18,
  }
  --
  changeCreature {
  	tcid = 4205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-UP",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 4205,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {px=1279.351563,py=601.851563,pz=-47.707954,sx=33,sy=38,sz=-1},
  	followUpBhv = "JOB_QUESTSTAGING",
  	delay = 2,
  }
  creatureTeleportPosition(4205,15,{sx=34,sy=38,sz=0,px=1248.046875,py=680.250000,pz=231.566406})
  changeCreature {
  	tcid = 4205,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {px=1911.000000,py=2870.304688,pz=166.927673,sx=34,sy=37,sz=0},
  	followUpBhv = "JOB_POOR_STATIST",
  	delay = 18,
  }
  --
  changeCreature {
  	tcid = 4206,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-UP",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 4206,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {px=1279.351563,py=601.851563,pz=-47.707954,sx=33,sy=38,sz=-1},
  	followUpBhv = "JOB_QUESTSTAGING",
  	delay = 2,
  }
  creatureTeleportPosition(4206,15,{sx=34,sy=38,sz=0,px=1248.046875,py=680.250000,pz=231.566406})
  changeCreature {
  	tcid = 4205,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {px=402.203125,py=2188.046875,pz=133.292114,sx=34,sy=37,sz=0},
  	followUpBhv = "JOB_POOR_STATIST",
  	delay = 18,
  }
  --
  changeCreature {
  	tcid = 2083,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-UP",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 2083,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {px=1279.351563,py=601.851563,pz=-47.707954,sx=33,sy=38,sz=-1},
  	followUpBhv = "JOB_QUESTSTAGING",
  	delay = 2,
  }
  creatureTeleportPosition(2083,15,{sx=34,sy=38,sz=0,px=1248.046875,py=680.250000,pz=231.566406})
  changeCreature {
  	tcid = 2083,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {px=2594.500000,py=72.851563,pz=467.028534,sx=33,sy=38,sz=0},
  	followUpBhv = "QUESTJOB_KILL_RICH",
  	delay = 18,
  }
  --

end)

quest.setScript( 2852, "OnWon", function(args)
changeCreature {
  	tcid = 8135,
  	behaviour = "JOB_QUESTSTAGING",
  	role = "ROLE_INVALID",
  	emotion = "ANIM_TYPE_KE08",
  	loopCount = 1,	
  	delay = 0.01
  }

end)

quest.setScript( 2280, "OnWon", function(args)

  creatureTeleportsAway( 3639, 1 )

end)

quest.setScript( 2280, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 6928,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  }
  
  changeCreature {
  	tcid = 6929,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 2280, "OnTalk", function(args)

  if args.tcid == 6928 and args.state == "TASK_AWAITING" then
  	changeCreature{
  		tcid = 6928,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  end
  

end)

quest.setScript( 2280, "OnStation", function(args)
if args.currentStation == 0 then
  	-- QUEST_READY nach QUEST_LOST verschieben, onStation(0) einfuegen!
  	--addBookEntry(2280,"QUEST_LOST")
  	changeCreature{
  		tcid = 6928,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM22",
  		loopCount = 1,
  		mortality = "MORTAL",
  		role = "ROLE_INVALID"
  	}
  
  	killCreature{
  		tcid = 6928,
  		delay = 2,
  	}
  
  end
  

end)

quest.setScript( 2280, "OnTaskFulfilled", function(args)
creatureTeleportPosition( 3639, 0, {10,42,0,1437.630005,2882.389893,3649.189941} )
  

end)

quest.setScript( 1733, "OnLost", function(args)
--addBookEntry(1733, "QUEST_LOST" )

end)

quest.setScript( 1729, "OnWon", function(args)
solveQuest(1733)

end)

quest.setScript( 750, "OnWon", function(args)
--local creatures = {
  --	{
  --		TCID = 2190,	--Stammesfuehrer
  --		pos = {sx=45;sy=22;sz=0;px=2955.843750,py=409.351563;pz=557.035095},
  --		angle = 309.045898,
  --	},
  --	{
  --		TCID = 6719,
  --		pos = {sx=46;sy=22;sz=0;px=154.796875;py=274.75;pz=549.415039},
  --		angle = 308.251984,
  --	},
  --	{
  --		TCID = 6720,
  --		pos = {sx=46;sy=22;sz=0;px=27.750000;py=248.398438;pz=549.414856},
  --		angle = 64.983093,
  --	},
  --	{
  --		TCID = 6721,
  --		pos = {sx=46;sy=22;sz=0;px=123.859375;py=137.265625;pz=549.414978},
  --		angle = 185.800018,
  --	}
  --}
  
  --for id,object in creatures do
  --	changeCreature {
  --		tcid = object.TCID,
  --		behaviour = "JOB_QUESTSTAGING",
  --		gotoPosition = object.pos,
  --		followUpBhv = "questCreatures",
  --		followUpAngle = object.angle,
  --	}
  --end
  
  --changeCreature {
  --	tcid = 2190,
  --	behaviour = "JOB_QUESTSTAGING",
  --	emotion = "ANIM_TYPE_LAYGROUND-DOWN",	--bh
  --	loopCount = 1,
  --	delay = 55,
  --}
  --changeCreature {
  --	tcid = 2190,
  --	behaviour = "JOB_QUESTSTAGING",
  --	emotion = "ANIM_TYPE_LAYGROUND-IDLE",	--bh
  --	loopCount = -1,
  --	delay = 57,
  --}

end)

quest.setScript( 750, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 2220,
  	gotoPosition = {sx=0,sy=0,sz=-1,px=0,py=0,pz=0},
  	clearUnconscious = true,
  	livesRemaining = 0,
  }
  teleport {
  	tcid = 9534,
  	position = toWorldPosition("45;22;0;1100.000000;950.000000;565.000000;1.000000"),
  	orientation = 1,
  	delay = 0,
  }
  destroyCreature {
  	tcid = 2220,
  	splatter = false,
  }
  changeCreature {
  	tcid = 9534,
  	behaviour = "Enemy_warrior_brave",
  	faction = "FACTION_ENEMY_HERO",
  	delay = 0.1,
  }

end)

quest.setScript( 750, "OnTalk", function(args)
if args.tcid == 7018 and args.id == 750 then
  	changeCreature {
  		tcid = 2220,
  		gotoPosition = toWorldPosition("45;22;0;1100.000000;950.000000;565.000000;1.000000"),
  		speed = 2,
  		followUpBhv = "questCreatures",
  		followUpAngle = 1,
  	}
  	removeFromGroup {
  		tcid = 2220,
  	}
  end
  

end)

quest.setScript( 1061, "OnSetup", function(args)
cutscene_SE_good(args)
  

end)

quest.setScript( 1653, "OnTalk", function(args)
-- TC 4389 has clearAutoTeleport = true, 
  -- teleport by hand when talking to first rescue victim
  
  --deaktiviert!
  if false and args.tcid == 6140 and not bTeleported then
  		bTeleported = true,
  		teleport {
  			tcid=4389,
  			position={sx=34,sy=43,sz=0,px=2650,py=1050,pz=0.000000}
  		}
  		changeCreature {
  			tcid = 4389,
  			 setAutoTeleporting = true,
  		}
  end

end)

quest.setScript( 1653, "OnWon", function(args)
local minions = {4390,6140,6141,6142,4423,4422}
  for index,tcid in minions do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "dumbBehaviour",
  		faction = "FACTION_FRIEND_HERO_ALL",
  		clearUnconscious = true,
  		livesRemaining = 0,
  	}
  end
  

end)

quest.setScript( 1653, "OnSetup", function(args)
-- true if TC 4389 was teleported
  --bTeleported = false
  
  changeCreature {
  	tcid = 4389,
  	 setAutoTeleporting = true,
  }

end)

quest.setScript( 1653, "OnLost", function(args)
local minions = {4390,6140,6141,6142,4423,4422}
  for index,tcid in minions do
  	removeFromGroup {
  		tcid = tcid,
  	}
  	changeCreature {
  		tcid = tcid,
  		behaviour = "dumbBehaviour",
  		faction = "FACTION_FRIEND_HERO_ALL",
  		clearUnconscious = true,
  		livesRemaining = 0,
  	}
  end
  

end)

quest.setScript( 1653, "OnUnconscious", function(args)
if args.tcid == 4390 then
  	destroyCreature {
  		tcid = 4390,
  		splatter = true,
  	}
  end
  
  if args.tcid == 4423 then
  	destroyCreature {
  		tcid = 4423,
  		splatter = true,
  	}
  end
  
  if args.tcid == 4422 then
  	destroyCreature {
  		tcid = 4422,
  		splatter = true,
  	}
  end 

end)

quest.setScript( 1653, "OnTaskFulfilled", function(args)
local cows = {4390,4423,4422}
  
  teleport {
  	tcid=4389,
  	position={sx=34,sy=43,sz=0,px=2650,py=1050,pz=0.000000}
  }
  
  for index,tcid in cows do
  	changeCreature {
  		tcid = tcid,
  		useUnconscious = true,
  		unconsciousTime = 1,
  		livesRemaining = 1,
  	}
  end
  

end)

quest.setScript( 3220, "OnWon", function(args)
changeCreature {
  	tcid = 8075,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM01", --agree
  	loopCount = 2,
  }
  changeCreature {
  	tcid = 8075,
  	behaviour = "questCreatures",
  	delay = 3,
  }
  
  
  

end)

quest.setScript( 735, "OnTaskAwaiting", function(args)
local tcids = {7313,7314,7315,7316,7317,7318,7319,7320,7321}
  for i,tcid in tcids do
  	setRole(tcid,"ROLE_ATTACKER")
  end

end)

quest.setScript( 3376, "OnWon", function(args)
local grp = {9367,9366,9365,9364,9363}
  
  for index,tcid in grp do
  	changeCreature {
  		tcid = tcid,
  		addToGroup = 9367,
  	}
  end
  

end)

quest.setScript( 357, "OnTaskFulfilled", function(args)
tcids = { 1338, 1345, 1346, 1344, 1343, 1342 }
  
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "Enemy_warrior_brave",
  		faction = "FACTION_ENEMY_HERO",
  		role = "ROLE_ATTACKER",
  	}
  end
  

end)

quest.setScript( 3373, "OnWon", function(args)
local grp = {9356,9359,9357,9360,9358}
  
  for index,tcid in grp do
  	changeCreature {
  		tcid = tcid,
  		addToGroup = 9356,
  	}
  end 

end)

quest.setScript( 1541, "OnTaskFulfilled", function(args)
changeCreature{
  	tcid=3948,
  	clearAutoTeleporting = true,
  	behaviour = "questCreatures",
  }

end)

quest.setScript( 3216, "OnTaskAwaiting", function(args)
for i,id in {9093, 9095, 9096} do
  	changeCreature{
  		tcid = id,
  		mortality = "MORTAL",
  	}
  end
  
  changeCreature{
  		tcid = 9092, 
  		mortality = "IMMORTAL",
  		clearAutoTeleporting = true,
  }

end)

quest.setScript( 3216, "OnStation", function(args)
local pos = {
  	{16;10;0;529.199219;1974.101563;48.062920;56.209106},
  	{15;11;0;1076.351563;983.050781;7.456699;191.114014},
  	{15;12;0;1.699219;1143.250000;20.369135;73.560760},
  	{15;13;0;562.551025;1508.400024;-4.396520;97.00000},
  }
  if args.state == "TASK_AWAITING" then
  	creatureGotoPos(9092, pos[args.currentStation+1],false,2,"questCreatures")
  	doEmote(9092, "ANIM_TYPE_EM20", 1, 3)
  	--wenn alle stations abgelaufen wurden, wird er nicht hireling (er hat dialog)
  	if args.currentStation ~= 3 then
  		changeCreature{
  			tcid = 9092,
  			behaviour = "Hireling_coward",
  			delay = 5,
  		}
  	end
  end
  

end)

quest.setScript( 3219, "OnTaskFulfilled", function(args)
if 	tc_9092_dead == false then
  	removeFromGroup {
  		tcid = 9092,
  		delay = 0,
  	}
  	setBehaviour(9092,"questCreatures")
  end
  if 	tc_9093_dead == false then
  	removeFromGroup {
  		tcid = 9093,
  		delay = 0,
  	}
  	setBehaviour(9093,"questCreatures")
  end
  if 	tc_9095_dead == false then
  	removeFromGroup {
  		tcid = 9095,
  		delay = 0,
  	}
  	setBehaviour(9095,"questCreatures")
  end
  if 	tc_9096_dead == false then
  	removeFromGroup {
  		tcid = 9096,
  		delay = 0,
  	}
  	setBehaviour(9096,"questCreatures")
  end
  
  
  tc_9092_dead = nil
  tc_9093_dead = nil
  tc_9095_dead = nil
  tc_9096_dead = nil 

end)

quest.setScript( 795, "OnWon", function(args)
changeCreature {
  	tcid = 878,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM23",
  	loopCount = -1,
  	dont_turn = 1,
  	role = "ROLE_INVALID",
  }

end)

quest.setScript( 982, "OnWon", function(args)
changeCreature {
  	tcid = 878,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM23",
  	loopCount = -1,
  	dont_turn = 1,
  	role = "ROLE_INVALID",
  }

end)

quest.setScript( 1306, "OnStateChange", function(args)
if args.state == "TASK_AWAITING" then
  	changeCreature {
  		tcid = 1719,
  		livesRemaining = 1,
  		useUnconscious = true,
  		unconscioursTime = 4,
  	}
  end
  
  if args.state == "WON" then
  	changeCreature {
  		tcid = 1719,
  		faction = "FACTION_FRIEND_HERO_ALL",
  		behaviour = "questCreatures",
  		livesRemaining = 0,
  		clearUnconscious = true,
  	}
  end

end)

quest.setScript( 47, "OnCounter", function(args)
return "QUEST_47_COUNTER"

end)

quest.setScript( 2252, "OnTaskFulfilled", function(args)
solveQuest(2252)

end)

quest.setScript( 3456, "OnWon", function(args)
creatureTeleportPosition(9642,0,{57,54,0,450,1150,0,0})

end)

quest.setScript( 3466, "OnWon", function(args)
setWoobState {
  	woid = 1036205678,
  	state = "WOOB_THINGY_ON",
  }

end)

quest.setScript( 3469, "OnWon", function(args)
setWoobState {
  	woid = 1036205489,
  	state = "WOOB_THINGY_ON",
  }

end)

quest.setScript( 1803, "OnTaskAwaiting", function(args)
setTimer {
  	id = 1803,
  	interval = 1,
  	count = 60*5,
  }
  showTimer {
  id = 1803,
  cur = 60*5,
  max = 60*5,
  }
  

end)

quest.setScript( 1803, "OnTimer", function(args)
showTimer {
  id = 1803,
  cur = args.count,
  max = 60*5
  }
  
  if args.state == "TASK_FULFILLED" and 
  	args.count >= 1 then 
  	solveQuest(args.id)
  end
  

end)

quest.setScript( 1803, "OnLost", function(args)
questFailed(args)

end)

quest.setScript( 976, "OnWon", function(args)
changeCreature {
  	tcid = 2847, 
  	behaviour = "JOB_KID",
  	delay = 4,
  }
  
  changeCreature {
  	tcid = 2848, 
  	behaviour = "JOB_KID",
  	delay = 4,
  }
  
  changeCreature {
  	tcid = 2849, 
  	behaviour = "JOB_KID",
  	delay = 4,
  }
  

end)

quest.setScript( 976, "OnStation", function(args)
if args.currentStation == 0 then
  	changeCreature {
  		tcid = 2847, 
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM11",
  		loopCount = 1,
  	}
  end
  
  if args.currentStation == 1 then
  	changeCreature {
  		tcid = 2848, 
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM12",
  		loopCount = 1,
  	}
  end
  
  if args.currentStation == 2 then
  	changeCreature {
  		tcid = 2849, 
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM01",
  		loopCount = 1,
  	}
  end
  

end)

quest.setScript( 3041, "OnWon", function(args)
creatureGotoPos(8502,{28;13;0;2850.000000;2100.000000;0.000000;0.000000},false,2,false,0)
  creatureTeleportsAway(8502,30)

end)

quest.setScript( 3185, "OnWon", function(args)
changeCreature {
  	tcid = 8003,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion =  "ANIM_TYPE_MAGICA",
  	loopCount = 2,
  	delay = 0.01,
  }

end)

quest.setScript( 2219, "OnTaskAwaiting", function(args)
creatureTeleportPosition(6366,1,{37;59;0;6.852000;680.796997;176.481003;90.000000})

end)

quest.setScript( 722, "OnWon", function(args)
changeCreature {
  	tcid = 2180,
  	clearUnconscious = true,
  	livesRemaining = 0,
  }

end)

quest.setScript( 1336, "OnWon", function(args)

  --die 3 muessen noch anfangen wohin weg zu laufen.
  local tcids = { 7160, 3630, 3625 }
  for i, tcid in tcids do
  	changeCreature{
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = { 22,30,0 , 350,2600,0 },
  		delay = 3
  	}
  end
  creatureTeleportsAway ( 7160, 20 )
  creatureTeleportPosition ( 3630, 20, { 21,27,0 , 550,2850,0 } )
  creatureTeleportPosition ( 3625, 20, { 21,27,0 , 550,2850,0 } )
  
  changeCreature{
  	tcid = 3625,
  	behaviour = "JOB_KID",
  	delay = 30
  }
  changeCreature{
  	tcid = 3630,
  	behaviour = "JOB_KID",
  	delay = 30
  }

end)

quest.setScript( 1336, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 3630,
  	mortality = "IMMORTAL",
  }
  
  changeCreature {
  	tcid = 3625,
  	mortality = "IMMORTAL",
  }
  
  

end)

quest.setScript( 2248, "OnDeath", function(args)
changeCreature {
  	tcid = 6416,
  	behaviour = "JOB_QUESTSTAGING",
  	livesRemaining = 1,
  }

end)

quest.setScript( 2248, "OnTaskAwaiting", function(args)
creatureTeleportPosition(6366,1,{37;59;0;252.804688;903.703125;148.078827;289.835938})

end)

quest.setScript( 3151, "OnWon", function(args)
cutscene_SW(args)
  

end)

quest.setScript( 1981, "OnTaskFulfilled", function(args)
--17;49;-1;2138.050781;2664.203125;10.083225;197.274338
  --17;49;-1;2135.949219;2657.843750;10.083225;175.263000
  changeCreature{
  	tcid = 5677,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=17,sy=49,sz=-1, px=2133,py=2675,pz=10},
  	followUpAngle = 180,
  	followUpBhv = "questCreatures",
  }

end)

quest.setScript( 1655, "OnUnconscious", function(args)
if args.tcid == 6150 then
  	changeCreature {
  		tcid = 6150,
  		clearUnconscious = true,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  		faction = "FACTION_INVALID",
  		role = "ROLE_INVALID",
  		delay = 4
  	}
  end
  

end)

quest.setScript( 1655, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6155,0,{0,0,0,0,0,0})

end)

quest.setScript( 1655, "OnSetup", function(args)
changeCreature {
  	tcid=6150,
  	useUnconscious = true,
  	unconsciousTime = 4,
  	livesRemaining = 1,
  	clearAutoTeleporting = true,
  }
  

end)

quest.setScript( 1655, "OnTalk", function(args)
if args.tcid == 6150 and args.state == "TASK_FULFILLED" then
  	changeCreature {
  		tcid = 6150,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  end

end)

quest.setScript( 1655, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid=6155,
  	useUnconscious = true,
  	unconsciousTime = 2,
  	livesRemaining = 255,
  }

end)

quest.setScript( 1655, "OnWon", function(args)
changeCreature {
  		tcid = 6150,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM22",
  		mortality = "MORTAL",
  		role = "ROLE_INVALID",
  }
  
  killCreature {
  	tcid = 6150,
  	deinitragdoll = false,	
  	delay = 2
  }

end)

quest.setScript( 2736, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 7891,
  	behaviour = "JOB_QUESTSTAGING",
  	mortality = "IMMORTAL",
  	clearAutoTeleporting = true,
  	gotoPosition = {sx=31,sy=59,sz=0, px=2700,py=800,sz=0},
  	speed = 2,
  	followUpBhv = "JOB_MERCENARY",
  }
  

end)

quest.setScript( 2736, "OnTalk", function(args)
if args.tcid == 7891 and args.state == "TASK_FULFILLED" then
  	changeCreature {
  		tcid = 7891,
  		behaviour = "questCreatures",
  		faction = "FACTION_SERAPHIM"
  	}
  end
  

end)

quest.setScript( 2257, "OnTalk", function(args)
if args.tcid==6848 and args.state=="TASK_AWAITING" and args.id == 2257 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2259, "OnTalk", function(args)
if args.tcid==6893 and args.state=="TASK_AWAITING" and args.id == 2259 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2256, "OnTalk", function(args)
if args.tcid==6848 and args.state=="TASK_AWAITING" and args.id == 2256 then
  	return bueroQuestReach()
  end
  

end)

quest.setScript( 2256, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6848,0,{47;30;-2;1879.796875;1709.648438;1.313227;314.692993})

end)

quest.setScript( 2261, "OnTalk", function(args)
if args.tcid==6891 and args.state=="TASK_AWAITING" and args.id == 2261 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2263, "OnTalk", function(args)
if args.tcid==6854 and args.state=="TASK_AWAITING" and args.id == 2263 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2260, "OnTalk", function(args)
if args.tcid==6891 and args.state=="TASK_AWAITING" and args.id == 2260 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2260, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6891,0,{47;30;-1;2527.406250;2555.046875;-0.018810;317.231171})

end)

quest.setScript( 1632, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 4328,
  	livesRemaining = 1,
  	useUnconscious = true,
  	unconsciousTime = 2,
  }
  changeCreature {
  	tcid = 4329,
  	livesRemaining = 1,
  	useUnconscious = true,
  	unconsciousTime = 2,
  }

end)

quest.setScript( 1632, "OnUnconscious", function(args)
for i,tcid in {4328,4329 } do
    if tcid==args.tcid then
  		changeCreature {
  			tcid = tcid,
  			clearUnconscious = true,
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_SM20",
  			loopCount = -1,
  			faction = "FACTION_FRIEND_HERO_ALL",
  			role = "ROLE_INVALID",
        delay = 1,
  		}
  	end
  end
  

end)

quest.setScript( 2262, "OnTalk", function(args)
if args.tcid==6854 and args.state=="TASK_AWAITING" and args.id == 2262 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2262, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6854,0,{47;30;-1;2542.656250;2428.101563;1.577443;267.349030})

end)

quest.setScript( 2258, "OnTalk", function(args)
if args.tcid==6893 and args.state=="TASK_AWAITING" and args.id == 2258 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2258, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6893,0,{47;30;-2;2593.453125;821.000000;-0.002632;184.316010})

end)

quest.setScript( 2737, "OnStation", function(args)
changeCreature {
  	tcid = 8072,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=32,sy=58,sz=0 , px=2227.156,py=2121.125,pz=1410},
  	speed = 2
  }
  creatureTeleportsAway ( 8072, 10 )

end)

quest.setScript( 2737, "OnWon", function(args)
changeCreature {
  	tcid = 7892,
  	mortality = "MORTAL",
  	role = "ROLE_INVALID"
  }
  
  killCreature {
  	tcid = 7892,
  	deinitragdoll = true,
  	delay = 2
  }

end)

quest.setScript( 3049, "OnWon", function(args)
changeCreature {
  	tcid = 8507,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08", --bow
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 8507,
  	behaviour = "questCreatures",
  	delay = 4,
  }
  
  
  

end)

quest.setScript( 1693, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid=4454,
  	--Setze role manuell, da QVictim == QEnemy
  	role="ROLE_VICTIM",
  	mortality = "MORTAL",
  }

end)

quest.setScript( 1693, "OnLost", function(args)
--addBookEntry(1693, "QUEST_LOST")

end)

quest.setScript( 1682, "OnStateChange", function(args)
if args.state == "WON" then
  	changeCreature {
  		tcid= 4437,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = {sx=40,sy=47,sz=0,px=553,py=629,pz=209},
  	}	
  	changeCreature {
  		tcid= 4437,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_MAGICA",
  		loopCount = -1,
  		delay = 21,
  	}
  end

end)

quest.setScript( 1645, "OnTaskAwaiting", function(args)
local rats = {
  4343,4344,4346,4347,4348,
  4349,4350,4351,4352,4353,
  4354,4355,4356,4357,4358,
  4361,4362,4364,4365,4366
  }
  
  local guards = {4371,4372,4373,4374,4375}
  
  for index, rat in rats do
  	changeCreature {
  		tcid = rat,
  		livesRemaining = 255,
  		useUnconscious = true,
  		unconsciousTime = 10,
  		role = "ROLE_ATTACKER",
  		faction = "FACTION_QUEST_ENEMY"
  	}
  end
  for index, guard in guards do
  	changeCreature {
  		tcid = guard,
  		livesRemaining = 255,
  		useUnconscious = true,
  		unconsciousTime = 5,
  		role = "ROLE_VICTIM",
  		faction = "FACTION_QUEST_VICTIM"
  	}
  end

end)

quest.setScript( 59, "OnStateChange", function(args)
if args.state == "TASK_AWAITING" then
  	changeCreature {
  		tcid = 4032,
  		mortality = "MORTAL",
  	}
  	changeCreature {
  		tcid = 4033,
  		mortality = "MORTAL",
  	}
  	changeCreature {
  		tcid = 4034,
  		mortality = "MORTAL",
  	}
  end
  

end)

quest.setScript( 1048, "OnSetup", function(args)
-- Figur "zusammenschlagen":
  --
  -- 1. livesRemaining auf 1 damit die Figur einmal wieder aufsteht
  -- 2. useUnconscious = true: der kill entfernt die figur nicht!
  -- 3. unconsciousTime: weiterspielen wird solange verzoegert
  
  changeCreature {
  	tcid=2961,
  	livesRemaining=1,
  	useUnconscious=true,
  	unconsciousTime=4,
  }
  
  -- wenn die figur dann spaeter DOCH mal sterben soll:
  -- geht nicht, da useUnconscious noch gesetzt ist!
  -- dann: clearUnconscious = true verwenden!

end)

quest.setScript( 244, "OnWon", function(args)
changeCreature {
  	tcid = 826, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08",
  	loopCount = 1,
  }
  

end)

quest.setScript( 2068, "OnTaskNotFulfilled", function(args)
-- you have to talk to the questgiver, first
  
  teleportTeam(2068,"30;59;0;2000.000000;2600.000000;600.000000;0.000000")
  creatureTeleportPosition(6114,0,{30,59,0,1950,2500,593})
  
  onRespawn = nil
  return {}
  

end)

quest.setScript( 2068, "OnWon", function(args)
return toWorldPosition("32;52;0;1750;1550;0;0")

end)

quest.setScript( 2068, "OnCounter", function(args)
if getQuestState(2068) == "TASK_AWAITING" then
  	return "TASKCREATURE_6113"
  end
  if getQuestState(2068) == "TASK_FULFILLED" then
    return "TASKCREATURE_6114"
  end 

end)

quest.setScript( 2068, "OnTaskAwaiting", function(args)

  teleportTeam(2068,"32;52;0;1750;1550;0;0")
  
  	creatureTeleportPosition(6114,0,{32,52,0,1450,1450,0})
  
  -- This enables the teleport button in the logbook.
  return toWorldPosition("32;52;0;1750;1550;0;0")
  

end)

quest.setScript( 2068, "OnTaskFulfilled", function(args)
onRespawn = nil
  return toWorldPosition("32;52;0;1750;1550;0;0")
  

end)

quest.setScript( 2068, "OnSetup", function(args)
onRespawn = function ( args )
    local t = getQuestTeamId { questId = 2068 }
    if getQuestState { id = 2068 } == "TASK_AWAITING" then
      if getTeamIdByHeroRef{ ref = args.heroRef } == t then
        looseQuest { id = 2068 }
      end
    end
  end
  

end)

quest.setScript( 1831, "OnWon", function(args)
changeCreature {
   tcid = 5053,
   role = "ROLE_ATTACKER",
  clearAutoTeleporting = true,
  }

end)

quest.setScript( 2701, "OnTalk", function(args)
if args.state == "TASK_AWAITING" and args.tcid == 7720 then
  	creatureTeleportPosition ( 7772, 0, {28,24,0 , 1150,2100,0} )
  end
  

end)

quest.setScript( 160, "OnWon", function(args)
changeCreature {
  	tcid = 440,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM02", --angry
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 440,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 4,
  }

end)

quest.setScript( 3609, "OnTaskAwaiting", function(args)
-- Blood & Ice Mainstory - Diaanjas Tower - Lights
  -- North / East / South / West
  setWoobEffect { effect = "FTYPE_MAGICLIGHT", woid = 1050703067 }
  setWoobEffect { effect = "FTYPE_MAGICLIGHT", woid = 1050703089 }
  setWoobEffect { effect = "FTYPE_MAGICLIGHT", woid = 1050703098 }
  setWoobEffect { effect = "FTYPE_MAGICLIGHT", woid = 1050703107 }

end)

quest.setScript( 2264, "OnTalk", function(args)
if args.tcid==6892 and args.state=="TASK_AWAITING" and args.id == 2264 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2264, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6892,0,{47;30;-1;2666.406250;2288.601563;-0.018810;247.870056})

end)

quest.setScript( 2265, "OnTalk", function(args)
if args.tcid==6892 and args.state=="TASK_AWAITING" and args.id == 2265 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2267, "OnTalk", function(args)
if args.tcid==6858 and args.state=="TASK_AWAITING" and args.id == 2267 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2269, "OnTalk", function(args)
if args.tcid==6871 and args.state=="TASK_AWAITING" and args.id == 2269 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 1662, "OnSetup", function(args)
--for index,id in {6167,6169,6170,6171} do
  for index,id in {6171} do
  	changeCreature {
  		tcid = id,
  		useUnconscious = true,
  		livesRemaining = 255,
  		unconsciousTime = 2,
  		clearAutoTeleporting = true
  	}
  end

end)

quest.setScript( 283, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 1046,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 3498, "OnTaskFulfilled", function(args)
creatureTeleportPosition (9750, 1, {57,54,0,74.25,933.953,1503.44,2640} )

end)

quest.setScript( 3221, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 9111,	
  	mortality = "IMMORTAL",
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 3221, "OnWon", function(args)
creatureGotoPos(9111, {13;5;0;1892.871094;1259.041016;42.565796;177.027298},false,1)
  doEmote(9111, "ANIM_TYPE_EM10" , -1 , 3)

end)

quest.setScript( 1678, "OnWon", function(args)
-- not yet implemented:
  --changeFactionRelation ( "FACTION_HERO_BAD", "FACTION_HUMAN_MASC", "FRIEND")
  
  -- not yet implemented:
  --changeFactionRelation ( "FACTION_HERO_BAD", "FACTION_HUMAN_CRUSADE", "ENEMY")

end)

quest.setScript( 3054, "OnWon", function(args)
doEmote(8525,"ANIM_TYPE_EM15",1,0)

end)

quest.setScript( 3054, "OnTaskFulfilled", function(args)
addGold(-100)
  questMessage {
  	 line = 1,
  	 lokaid = "QUEST_3054_GOLDMESSAGE",
  	 duration = 5.0,
  	 fadeIn = 0.5,
  	 fadeOut = 1.0,
  	 delay = 0,
  	 color = "#00ff00",
  }

end)

quest.setScript( 3057, "OnWon", function(args)
changeCreature {
  	tcid = 8520,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32" --victory
  }
  changeCreature {
  	tcid = 8520,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 5,
  }
  
  
  

end)

quest.setScript( 632, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	return "QUEST_632_DIALOG_NO","QUEST_632_DIALOG_YES"
  end
  

end)

quest.setScript( 652, "OnSetup", function(args)
changeCreature {
  	tcid = 2089,
  	effect = "FXTYPE_INVALID",
  	behaviour = "Enemy_warrior_brave",
  	faction = "FACTION_ENEMY_HERO",
  }
  changeCreature {
  	tcid = 2090,
  	effect = "FXTYPE_INVALID",
  	behaviour = "Enemy_warrior_brave",
  	faction = "FACTION_ENEMY_HERO",
  }
  changeCreature {
  	tcid = 2092,
  	effect = "FXTYPE_INVALID",
  	behaviour = "Enemy_warrior_brave",
  	faction = "FACTION_ENEMY_HERO",
  }
  changeCreature {
  	tcid = 2093,
  	effect = "FXTYPE_INVALID",
  	behaviour = "Enemy_warrior_brave",
  	faction = "FACTION_ENEMY_HERO",
  }
  changeCreature {
  	tcid = 2094,
  	effect = "FXTYPE_INVALID",
  	behaviour = "Enemy_warrior_brave",
  	faction = "FACTION_ENEMY_HERO",
  }

end)

quest.setScript( 652, "OnWon", function(args)
questCompleted(args)
  

end)

quest.setScript( 2889, "OnTaskAwaiting", function(args)
teleportTeam(2889,"41;17;0;900;600;0;0")
  changeCreature {
    	tcid = 8233,
    	effect = "FXTYPE_GEN_TELEPORT",
    	delay = 0,
    }
  changeCreature {
    	tcid = 8234,
    	effect = "FXTYPE_GEN_TELEPORT",
    	delay = 0,
    }
  
  changeCreature {
    	tcid = 8233,
    	effect = "FXTYPE_INVALID",
    	delay = 2,
    }
  
  changeCreature {
    	tcid = 8234,
    	effect = "FXTYPE_INVALID",
    	delay = 2,
    }

end)

quest.setScript( 2889, "OnWon", function(args)
changeCreature {
  	tcid = 8235,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM17", --laugh
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 8235,
  	behaviour = "questCreatures",
  	delay = 4,
  }

end)

quest.setScript( 650, "OnSetup", function(args)
questCompleted(args)
  

end)

quest.setScript( 321, "OnWon", function(args)
if nil then
  	changeCreature {
  		tcid = 873,
  		effect = "FXTYPE_GEN_TELEPORT",
  		delay = 1,
  	}
  	teleport {
  		tcid = 873,
  		position = {px=2037.400024,py=1070.650024,pz=145.100006,sx=26,sy=25,sz=0},
  		orientation = 208,
  		delay = 3,
  	}
  	changeCreature {
  		tcid = 873,
  		effect = "FXTYPE_INVALID", --effekt wieder entfernen
  		delay = 6,
  	}
  end
  --+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
  changeCreature {
  	tcid=1186,
  	effect="FXTYPE_GEN_TELEPORT",
  	delay=4,
  }
  teleport {
  	tcid=1186,
  	position={px=2277.300049,py=2243.5,pz=451.100006,sx=29,sy=26,sz=0},
  	orientation = 314,
  	delay=6,
  }
  changeCreature {
  	tcid = 1186,
  	effect = "FXTYPE_INVALID", --effekt wieder entfernen
  	delay = 10,
  }

end)

quest.setScript( 3055, "OnTaskAwaiting", function(args)
local tcids = {8527,8528,8529,8530,8531,8532,8533,8534}
  
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_SPPL_RISE",
  	}	
  
  end
  

end)

quest.setScript( 2135, "OnWon", function(args)
changeCreature {
  	tcid = 6454, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08",
  	loopCount = 1,
  }
  

end)

quest.setScript( 55, "OnWon", function(args)
changeCreature {
  	tcid = 154, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM10",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 145, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM10",
  	loopCount = 1,
  }
  

end)

quest.setScript( 55, "OnPrecondsFulfilled", function(args)
	for index,tcid in {9107,9108,9109,9110} do
  		changeCreature {
  			tcid = tcid,
  			role = "ROLE_ATTACKER",
  			mortality = "MORTAL",
  		}
  	end
  

end)

quest.setScript( 958, "OnCounter", function(args)
return "TASKCREATURE_2728"

end)

quest.setScript( 958, "OnTaskFulfilled", function(args)
transformCreature( 2697, "Helf_Inqgarde_Soldier_female_01", 0 )
  
  

end)

quest.setScript( 801, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 1645,
  	clearUnconscious = true,
  	livesRemaining = 0,
  	behaviour = "Enemy_warrior_coward",
  	faction = "FACTION_ENEMY_HERO",
  }
  changeCreature {
  	tcid = 1649,
  	clearUnconscious = true,
  	livesRemaining = 0,
  	behaviour = "Enemy_warrior_brave",
  	faction = "FACTION_ENEMY_HERO",
  }

end)

quest.setScript( 1374, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 1649,
  	useUnconscious = true,
  	livesRemaining = 255,
  	unconsciousTime = 5,
  }

end)

quest.setScript( 1044, "OnWon", function(args)
changeCreature {
  	tcid = 2844, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM10",
  	loopCount = 1,
  }
  
  changeCreature {
  	tcid = 2845, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM10",
  	loopCount = 1,
  	delay = 0.7,
  }
  
  changeCreature {
  	tcid = 2844, 
  	behaviour = "JOB_KID",
  	delay = 4,
  }
  
  changeCreature {
  	tcid = 2845, 
  	behaviour = "JOB_KID",
  	delay = 4.75,
  }

end)

quest.setScript( 3612, "OnWon", function(args)
-- Kill Gerund
  
  changeCreature {
  	tcid = 9929,
  	mortality = "MORTAL",
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM22",
  	loopCount = 1,
  }
  killCreature {
  	tcid = 9929,
  	delay = 2,
  }	

end)

quest.setScript( 2132, "OnSetup", function(args)
changeCreature {
  	tcid = 6366,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 219, "OnWon", function(args)
changeCreature {
    tcid = 690, 
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM32",	--victory
    loopCount = 1,
  }
  changeCreature {
    tcid = 690, 
    behaviour = "JOB_RICH_STATIST",
    delay = 3,
  }

end)

quest.setScript( 2230, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 6366,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 2226, "OnTaskAwaiting", function(args)
local tcids = { 6799,6804,6800,6801,6802, 6803, 6798 }
    	for i, tcid in tcids do
    		changeCreature {
    			tcid = tcid,
    			role = "ROLE_ATTACKER",
    		}
  	end

end)

quest.setScript( 2713, "OnWon", function(args)

  changeCreature {
  	tcid = 7817,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM08", --bow
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7817,
  	behaviour = "questCreatures",
  	delay = 4,
  }

end)

quest.setScript( 2274, "OnTalk", function(args)
if args.tcid==6886 and args.state=="TASK_AWAITING" and args.id == 2274 then
  	return bueroQuestReach()
  end 

end)

quest.setScript( 2274, "OnStation", function(args)
if args.currentStation == 0 then
  	bueroQuestReach()
  end 

end)

quest.setScript( 2274, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6886,0,{47;30;-1;2538.093750;1167.796875;-0.018810;222.768814})

end)

quest.setScript( 2712, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	changeCreature{
  		tcid = 7815,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM13",
  		loopCount = -1,
  	}
  end
  
  if args.state == "WON" then
  	changeCreature{
  		tcid = 7815,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM10",
  		loopCount = 5,
  	}
  end

end)

quest.setScript( 2712, "OnWon", function(args)
changeCreature {
  	tcid = 7815,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM07", --bounce
  	loopCount = 2,
  }
  changeCreature {
  	tcid = 7815,
  	behaviour = "JOB_POOR_STATIST",
  	delay = 5,
  }
  
  
  

end)

quest.setScript( 746, "OnSetup", function(args)
changeCreature {
  	tcid = 2220,
  	useUnconscious = true,
  	livesRemaining = 255,
  	unconsciousTime = 2,
  }

end)

quest.setScript( 746, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 2220,
  	behaviour = "questCreatures",
  	faction = "FACTION_FRIEND_HERO_ALL",
  }

end)

quest.setScript( 746, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 2220,
  	useUnconscious = true,
  	livesRemaining = 255,
  	unconsciousTime = 3,
  	clearAutoTeleporting = false,
  }
  changeCreature {
  	tcid = 2182,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 1814, "OnWon", function(args)
changeCreature {
  	tcid = 4966, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM10",
  	loopCount = 1,
  }
  

end)

quest.setScript( 2273, "OnTalk", function(args)
if args.tcid==6887 and args.state=="TASK_AWAITING" and args.id == 2273 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2272, "OnTalk", function(args)
if args.tcid==6876 and args.state=="TASK_AWAITING" and args.id == 2272 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2275, "OnTalk", function(args)
if args.tcid==6886 and args.state=="TASK_AWAITING" and args.id == 2275 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 782, "OnWon", function(args)
--teleportTeam(782,"7;19;0;1450.000000;1900.000000;0.000000;0.000000")
  
  unlockShipPortal(782,5,"SOUTH",args.heroRef)
  unlockShipPortal(782,1,"SOUTH",args.heroRef)

end)

quest.setScript( 2902, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	local bgtcs = { 8261, 8262, 8263 }
  	for i, tcid in bgtcs do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			bubble = 1,
  			emotion = "ANIM_TYPE_IDLE",
  			loopCount = 2,
  			delay = 0.1,
  			followUpBhv = "questCreatures"
  		}
  	end
  end
  

end)

quest.setScript( 2902, "OnTaskAwaiting", function(args)
creatureTeleportPosition ( 8188, 0, { 38, 26, 0, 1800, 1150, 11 } )
  teleportTeam( 2902, { sx=38, sy=26, sz=0, px=1733, py=1180, pz=11, orient=212 } )
  

end)

quest.setScript( 2907, "OnTaskAwaiting", function(args)
creatureTeleportPosition ( 8188, 0, { 38, 26, 0, 1800, 1150, 11 } )

end)

quest.setScript( 589, "OnWon", function(args)
changeCreature {
    tcid =1888,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM27", --salute
    loopCount = 1,
  }
  changeCreature {
    tcid =1888,
    behaviour = "JOB_RICH_STATIST",
  	delay = 3,
  }

end)

quest.setScript( 2909, "OnSetup", function(args)
BlindGuardianStation = { 0, 0, 0 }

end)

quest.setScript( 2909, "OnStation", function(args)

  if BlindGuardianStation[1] == 0 then
  	--Andre 8261
  	BlindGuardianStation[1] = 1
  	
  elseif BlindGuardianStation[2] == 0 then
  	--Marcus 8262
  	BlindGuardianStation[2] = 1
  	
  elseif BlindGuardianStation[3] == 0 then
  	--Frederik 8263
  	BlindGuardianStation[3] = 1
  	
  else
  	BlindGuardianStation = nil
  end
  

end)

quest.setScript( 2909, "OnWon", function(args)
--teleportTeam(2909,"38;26;0;100.000000;2350.000000;0.000000;0.000000")
  --feedback = function(args)
  --	if args.event == "QEVT_CUTSCENE" and args.param == 1000 then
  --		feedback = nil
  --		teleportTeam(2909,"38;26;0;1750;1100;0;0")
  --	end
  --end
  playMovie {
  	movie = MOVIE_CONCERT,
  	delay = 1
  }
  
  

end)

quest.setScript( 2711, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 8893,
  	faction = "FACTION_HIGHELVE_PRIEST",
  	mortality = "MORTAL",
  	delay = 4,
  }
  local pos = {35;37;0;2527.000000;1146.250000;255.329254;343.721313}
  creatureGotoPos(7816, pos, false, 2, "JOB_MERCENARY", 2)
  changeCreature{
  	tcid = 7816,
  	faction = "FACTION_HIGHELVE",
  	delay = 4
  }

end)

quest.setScript( 364, "OnTaskAwaiting", function(args)
tcids = {1432, 1161, 1429, 1433,1430,1175, 1171, 1164, 1172, 1431}
  for index,tcid in tcids do 
  	changeCreature {
  		tcid = tcid, 
  		behaviour = "deer",
  	}
  	creatureTeleportsAway (tcid, 30)
  end
  

end)

quest.setScript( 3322, "OnWon", function(args)
--Alle Mainquest Tueren im MP oeffnen.
  --Grosser Wall HE/HU
  setWoobState { state = "WOOB_DOOR_OPEN", woid = 1013397761 }
  setWoobState { state = "WOOB_DOOR_OPEN", woid = 1013397746 }
  setWoobState { state = "WOOB_DOOR_OPEN", woid = 1013397754 }
  setWoobState { state = "WOOB_DOOR_OPEN", woid = 1013397738 }
  --Geheimgang HE/HU
  setWoobState { state = "WOOB_DOOR_OPEN", woid = 1013891954 }
  --Kerker HU
  setWoobState { state = "WOOB_DOOR_OPEN", woid = 1018326189 }
  --Staufelsen
  setWoobState { state = "WOOB_DOOR_OPEN", woid = 1018380619 }
  --Ork Region / Damm Dungeon
  setWoobState { state = "WOOB_DOOR_OPEN", woid = 1019420597 }
  --unsichtbar funktioniert nicht.
  --setWoobState { state = "WOOB_INVISIBLE", woid = 1019420597 }
  --Seragate Big Machine Dungeon
  setWoobState { state = "WOOB_DOOR_OPEN", woid = 1023046854 }
  setWoobState { state = "WOOB_DOOR_OPEN", woid = 1023046905 }
  setWoobState { state = "WOOB_DOOR_OPEN", woid = 1023046923 }
  setWoobState { state = "WOOB_DOOR_OPEN", woid = 1023046947 }
  setWoobState { state = "WOOB_DOOR_OPEN", woid = 1023047062 }
  setWoobState { state = "WOOB_DOOR_OPEN", woid = 1023047090 }
  setWoobState { state = "WOOB_DOOR_OPEN", woid = 1023047109 }
  setWoobState { state = "WOOB_DOOR_OPEN", woid = 1023047127 }
  
  --Andere Weltobjekte
  --Staudamm
  setWoobState { state = "WOOB_ANIM_ON", woid = 1017176304 }
  setWoobState { state = "WOOB_ANIM_ON", woid = 1018920584 }
  --T-Energie Rohr Sumpf
  setWoobState { state = "WOOB_INVALID", woid = 1021408807 }
  setWoobEffect { effect = "FXTYPE_SMOKEBIGWHITE", woid = 1021408807 }
  --FX der Seragates Big Machine entfernen
  setWoobEffect { effect = "FXTYPE_INVALID", woid = 1023046854 }
  setWoobEffect { effect = "FXTYPE_INVALID", woid = 1023046905 }
  setWoobEffect { effect = "FXTYPE_INVALID", woid = 1023046923 }
  setWoobEffect { effect = "FXTYPE_INVALID", woid = 1023046947 }
  setWoobEffect { effect = "FXTYPE_INVALID", woid = 1023047062 }
  setWoobEffect { effect = "FXTYPE_INVALID", woid = 1023047090 }
  setWoobEffect { effect = "FXTYPE_INVALID", woid = 1023047109 }
  setWoobEffect { effect = "FXTYPE_INVALID", woid = 1023047127 }
  
  
  --Wasserfall fuer die Orkregion -> muss immer angezeigt werden (MQ!)
  showWaterfall()
  
  --MQ: Captain Teleport erstellen - muessen immer vorhanden sein
  local captains = {8861,8864,8866}
  for index,tcid in captains do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_CAPTAIN",
  		merchantType = "MERCHANT_CAPTAIN",
  	}
  end 
  
  --Unlock Ship Portals: DR, SE, WL
  --DR
  unlockShipPortal(3322,3,"SOUTH",args.heroRef)
  --SE
  unlockShipPortal(3322,2,"NORTH",args.heroRef)
  --WL
  unlockShipPortal(3322,1,"SOUTH",args.heroRef)
  
  -- AddOn Kapitaene freischalten
  -- Crystal Planes
  unlockShipPortal(3322,8,"NORTH",args.heroRef)
  -- Cursed Forest
  unlockShipPortal(3322,7,"SOUTH",args.heroRef)
  
  changeCreature {
  	tcid = 10447,
  	merchantType = "MERCHANT_COMBOMASTER",
  	delay = 1,
  }

end)

quest.setScript( 3449, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9642,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = 
  		toWorldPosition("55;55;0;3110.203125;2152.203125;752.353210;71.075348"),
  }
  changeCreature {
  	tcid = 9642,
  	gotoPosition = 
  		toWorldPosition("56;55;0;2468.890625;383.515625;1161.289551;16.050293"),
  	delay = 20
  }
  
  changeCreature {
  	tcid = 9642,
  	gotoPosition = 
  		toWorldPosition("56;54;0;2600.000000;2900.000000;0.000000;0.000000"),
  	delay = 40
  }

end)

quest.setScript( 3458, "OnCollect", function(args)
if nil then
  	if args.taskitem == 1463 then
  		setWoobState {
  			woid = 1034649866,
  			state = "WOOB_DOOR_CLOSED",
  		}
  	end
  end 

end)

quest.setScript( 3145, "OnWon", function(args)

  changeCreature {
  	tcid = 8840,
  	effect = "FXTYPE_GEN_TELEPORT",
  	delay = 2
  }
  destroyCreature {
  	tcid = 8840,
  	splatter = false,
  	delay = 4
  }

end)

quest.setScript( 3145, "OnUnconscious", function(args)
changeCreature {
  	tcid = 8840,
  	clearUnconscious = true,
  	livesRemaining = 0,
  	behaviour = "JOB_QUESTSTAGING",
  	faction = "FACTION_DRYAD",
  	role = "ROLE_DIALOG",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  }

end)

quest.setScript( 3145, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 8840,
  	useUnconscious = true,
  	unconsciousTime = 1,
  	livesRemaining = 1,
  	clearAutoTeleporting = true
  }

end)

quest.setScript( 3150, "OnWon", function(args)
creatureTeleportsAway (8839,30)
  creatureTeleportsAway (8846,30)
  creatureTeleportsAway (8847,2)

end)

quest.setScript( 2715, "OnWon", function(args)

  changeCreature {
  	tcid = 7820,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM01", --agree
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7820,
  	behaviour = "questCreatures",
  	delay = 2,
  }

end)

quest.setScript( 3152, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 6416,
    useUnconscious = true,
    livesRemaining = 1,
    unconsciousTime = 1,
  }
  

end)

quest.setScript( 3152, "OnDeath", function(args)
if args.tcid == 6416 then
    changeCreature {
      tcid = 6416,
      behaviour = "questCreatures",
      clearAutoTeleporting = true,
      delay = 1,
    }
  end
  

end)

quest.setScript( 2279, "OnTaskAwaiting", function(args)
local tcids = { 6898,6808,6809 }
     for i, tcid in tcids do
      changeCreature {
       tcid = tcid,
       role = "ROLE_ATTACKER",
      }
   end

end)

quest.setScript( 2867, "OnTaskAwaiting", function(args)
local hirelings = {1776,1777,1778}
  local guards = {1774,1775}
  
  for i,id in hirelings do 
  	addToGroup(id,0)
  	changeCreature{
  		tcid=id,
  		behaviour = "Hireling_coward",
  		faction = "FACTION_DESERTHU_GUARDS",
  		clearAutoTeleporting = true,
  		mortality = "MORTAL",
  	}
  end
  
  for i,id in guards do 
  	addToGroup(id,0)
  	changeCreature{
  		tcid=id,
  		behaviour = "Hireling_brave",
  		faction = "FACTION_DESERTHU_GUARDS",
  		useUnconscious = true,
  		livesRemaining = 255,
  		unconsciousTime = 2,
  		clearAutoTeleporting = true,
  
  	}
  end
  

end)

quest.setScript( 2867, "OnLost", function(args)
addBookEntry(2860,"QUEST_LOST")
  
  local ids = {1776,1777,1778,1774,1775}
  
  for i,id in ids do 
  	removeFromGroup(id , 0)
  	changeCreature{
  		tcid=id,
  		behaviour = "questCreatures",
  		faction = "FACTION_INVALID"
  	}
  	creatureTeleportsAway(id, 30)
  end
  

end)

quest.setScript( 2378, "OnStateChange", function(args)
local undeads = {
  	{	--Undead General
  		tcid = 7136,
  		behaviour = "Enemy_boss_undead_general",
  	},
  	{	--Magier
  		tcid = 9514,
  		behaviour = "Enemy_mage_phalanx",
  	},
  	{	--Krieger
  		tcid = 9515,
  		behaviour = "Enemy_warrior_brave_triangle",
  	},
  	{	--Officer 1
  		tcid = 7224,
  		behaviour = "Enemy_warrior_brave_triangle_ex",
  	},
  	{	--Officer 2
  		tcid = 7225,
  		behaviour = "Enemy_warrior_brave_triangle_ex",
  	}
  }
  
  if args.state == "PREFIGHT" then
  	for id,object in undeads do
  		changeCreature {
  			tcid = object.tcid,
  			addToGroup = 7136,
  			behaviour = object.behaviour,
  			faction = "FACTION_ENEMY_HERO",
  			role = "ROLE_ATTACKER",
  		}
  	end
  end
  

end)

quest.setScript( 2378, "OnTaskFulfilled", function(args)
questMessage {
  	line = 0,
  	lokaid = "QUEST_2378_END",
  	--questid = args.id,
  	color = "#ffff11",
  	duration = 9.0,
  	fadeIn = 0.5,
  	fadeOut = 1.0,
  	delay = 1.0,
  }
  

end)

quest.setScript( 354, "OnPrecondsFulfilled", function(args)

  local tcids = {6511,6510,6513}
  for i, tcid in tcids do 
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM23",
  		loopCount = -1,
  		dont_turn = true,
  	}
  end
  

end)

quest.setScript( 2826, "OnWon", function(args)
changeCreature {
  	tcid = 8073,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08", --bow
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 8073,
  	behaviour = "JOB_POOR_STATIST",
  	delay = 4,
  }
  
  
  

end)

quest.setScript( 389, "OnWon", function(args)
changeCreature {
  	tcid = 1435,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08", --bow
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 1435,
  	behaviour = "questCreatures",
  	delay = 4,
  }
  
  
  

end)

quest.setScript( 440, "OnCounter", function(args)
return "TASKCREATURE_2032"

end)

quest.setScript( 3499, "OnTalk", function(args)
if args.tcid == 9727 then
  	changeCreature {
  		tcid = 9727,
  		behaviour = "JOB_QUESTSTAGING",
  		orientation = 214,
  		followUpBhv = "questCreatures"
  	}
  end
  

end)

quest.setScript( 3499, "OnWon", function(args)
changeCreature {
  	tcid = 9741,
  	role = "ROLE_INVALID",
  	gotoPosition = {sx=57,sy=54,sz=0,px=109.546,py=808.703,pz=1503.438,279}
  }
  destroyCreature {
  	tcid = 9741,
  	delay = 12
  }

end)

quest.setScript( 217, "OnWon", function(args)
changeCreature {
  	tcid = 143,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM10",	--cheer
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 143,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 3,
  }

end)

quest.setScript( 2121, "OnTaskAwaiting", function(args)
creatureTeleportPosition(6361, 2, {16,51,-2 , 2600,500,0})

end)

quest.setScript( 2719, "OnTaskAwaiting", function(args)

  changeCreature {
  	tcid = 2492,
  	mortality = "MORTAL"
  }
  

end)

quest.setScript( 2720, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 7831,
  	role = "ROLE_INVALID",
  	clearAutoTeleporting = true
  }
  teleport {
  	tcid = 2492,
  	position = { sx=39, sy=40, sz=0, px=1102.351563, py=21.648438, pz=1262 },
  	orientation = 198
  }
  
  

end)

quest.setScript( 843, "OnTaskAwaiting", function(args)

  changeCreature {
  	tcid = 2497,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = { sx=29,sy=32,sz=0 , px=2950,py=350,pz=0},
  	speed = 2,
  	followUpBhv = "questCreatures",
  }

end)

quest.setScript( 1866, "OnStation", function(args)
local tcids = {5182,5183,5184,5185,5186}
  for index,tcid in tcids do
  	if args.state == "TASK_AWAITING" and args.tcid == tcid and args.id == 1866 then
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_LAYGROUND-UP",
  			loopCount = 1,
  		}
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_POOR_STATIST",
  			delay = 4,
  		}
  	end
  end 

end)

quest.setScript( 1866, "OnWon", function(args)
if getQuestState(2164) ~= "WON" then
  	solveQuest(2164)
  end
  
  if getQuestState(2165) ~= "WON" then
  	solveQuest(2165)
  end
  
  if getQuestState(2166) ~= "WON" then
  	solveQuest(2166)
  end
  
  local creatures = {
  	{
  		TCID = 6611,
  		pos = toWorldPosition("37;26;0;2369.046875;951.851563;24.842409;351.002838"),
  	},
  	{
  		TCID = 6612,
  		pos = toWorldPosition("37;26;0;2389.390625;917.007813;28.408424;11.738541"),
  	},
  	{
  		TCID = 6613,
  		pos = toWorldPosition("37;26;0;2352.101563;1077.000000;33.924084;4.927093"),
  	}
  }
  
  for id,object in creatures do
  	changeCreature {
  		tcid = object.TCID,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = object.pos,
  		followUpBhv = "questCreatures",
  	}
  	creatureTeleportsAway(object.TCID,45)
  end

end)

quest.setScript( 3620, "OnPrecondsFulfilled", function(args)
changeCreature {
  	tcid = 9903,
  	visible = true,
  }

end)

quest.setScript( 1914, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 5382,
  	role = "ROLE_VICTIM"
  }

end)

quest.setScript( 1914, "OnLost", function(args)
--addBookEntry(1914, "QUEST_LOST")

end)

quest.setScript( 341, "OnWon", function(args)
changeCreature {
  	tcid = 1211,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08" --bow
  }
  
  changeCreature {
  	tcid = 1211,
  	behaviour = "questCreatures",
  	delay = 4,
  }

end)

quest.setScript( 341, "OnLost", function(args)
changeCreature {
  	tcid = 1211,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM28" --bow
  }
  
  changeCreature {
  	tcid = 1211,
  	behaviour = "questCreatures",
  	delay = 4,
  }

end)

quest.setScript( 2869, "OnTaskAwaiting", function(args)
setTimer {
  	id = 2869,
  	count = 5,
  	interval = 1,
  }
  
  local pos = {
  	{37;19;0;1793.703125;2762.851563;1563.079590;21.128540},
  	{37;19;0;2271.453125;2341.449219;1555.889526;308.367462},
  	{37;19;0;1930.390625;2727.214844;1555.979492;26.397491},
  	{37;19;0;2140.898438;2429.898438;1563.332886;252.897247},
  	{37;19;0;1876.000000;2826.949219;1555.417603;357.409698},
  }
  
  local ids = {1774,1775,1776,1777,1778} -- merc1, merc2 cow1, cow2, guide
  
  for i,id in ids do
  	setFaction(id,"FACTION_INVALID")
  --creatureGotoPos(tcid, pos   , angle,speed,followBhv       ,delay)
  	creatureGotoPos(  id, pos[i],   nil,    2,"questCreatures",0    )
  end
  

end)

quest.setScript( 2869, "OnTimer", function(args)
if args.count == 1 then
  	solveQuest(2869)
  end
  

end)

quest.setScript( 2869, "OnWon", function(args)
local hirelings = {1776,1777,1778}
  local guards = {1774,1775}
  
  for i,id in hirelings do 
  	changeCreature{
  		tcid=id,
  		behaviour = "Hireling_coward",
  		faction = "FACTION_DESERTHU_GUARDS"
  	}
  end
  
  for i,id in guards do 
  	changeCreature{
  		tcid=id,
  		behaviour = "Hireling_brave",
  		faction = "FACTION_DESERTHU_GUARDS",
  	}
  end
  

end)

quest.setScript( 2869, "OnLost", function(args)
addBookEntry(2860,"QUEST_LOST")
  
  local ids = {1776,1777,1778,1774,1775}
  
  for i,id in ids do 
  	removeFromGroup(id , 0)
  	changeCreature{
  		tcid=id,
  		behaviour = "questCreatures",
  		faction = "FACTION_INVALID"
  	}
  	creatureTeleportsAway(id, 30)
  end
  

end)

quest.setScript( 2866, "OnWon", function(args)
local ids = {1776,1777,1778,1774,1775}
  for i,id in ids do
  	creatureTeleportsAway(id, 0)
  end
  

end)

quest.setScript( 2899, "OnWon", function(args)
local ids = {1776,1777,1778,1774,1775}
  for i,id in ids do 
  	removeFromGroup(id , 0)
  	changeCreature{
  		tcid=id,
  		behaviour = "questCreatures",
  		faction = "FACTION_INVALID"
  	}
  end
  
  solveQuest(2860)

end)

quest.setScript( 187, "OnStateChange", function(args)
if args.state == "WON" then
  	teleport {
  		position = {0,0,0,0,0,0},
  		tcid = 566,
  	}
  	teleport {
  		position = {0,0,0,0,0,0},
  		tcid = 3700,
  	}
  	teleport {
  		position = {0,0,0,0,0,0},
  		tcid = 3701,
  	}
  	teleport {
  		position = {0,0,0,0,0,0},
  		tcid = 3702,
  	}
  	teleport {
  		position = {0,0,0,0,0,0},
  		tcid = 3703,
  	}
  	changeCreature {
  		creature = "energy_helf_male_ghost",
  		tcid = 546,
  		effect = "FXTYPE_GEN_TRANSFORM",
  		faction = "FACTION_ENEMY_HERO",
  		behaviour = "Enemy_warrior_brave"
  	}
  end

end)

quest.setScript( 187, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 546,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 3273, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 9247,
  	role = "ROLE_VICTIM",
  }

end)

quest.setScript( 3273, "OnTaskNotFulfilled", function(args)
--addBookEntry(3273, "QUEST_LOST")

end)

quest.setScript( 1479, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 3998,
    role = "ROLE_INVALID",
  }

end)

quest.setScript( 1479, "OnTaskFulfilled", function(args)
changeCreature {
    tcid = 3998,
    role = "ROLE_DIALOG",
  }

end)

quest.setScript( 3277, "OnWon", function(args)
solveQuest(3273)

end)

quest.setScript( 985, "OnWon", function(args)
teleport {
  	tcid = 2697,
  	position = {px=0,py=0,pz=0,sx=0,sy=0,sz=0},
  	orientation = 0,
  }

end)

quest.setScript( 979, "OnWon", function(args)
local pos = {44;54;0;325.078125;943.593750;207.797623;108.758652}
  creatureGotoPos(2697,pos)
  creatureTeleportsAway(2697, 6)

end)

quest.setScript( 165, "OnDeath", function(args)

  if args.attackers[1] == nil then
  	changeCreature {
  		tcid = 427,
  		behaviour = "questCreatures",
  		faction = "FACTION_HIGHELVE"
  	}
  end
  
  

end)

quest.setScript( 1439, "OnTaskAwaiting", function(args)
 setWoobState {
              woid = 1011067793,
              state = "WOOB_INVALID",
            }

end)

quest.setScript( 912, "OnWon", function(args)
questMessage {
  	lokaid = "QUEST_912_REWARD", --LokaID anlegen
  	color = "#FFFF00", --Farbe anpassen
  	line = 2,
  	delay = 0,
  	duration = 3,
  	fadeIn = 0.2,
  	fadeOut = 0.2,
  }
  addGold(1000)

end)

quest.setScript( 3623, "OnWon", function(args)
changeCreature {
  	tcid = 9946,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_RAISE-HANDS",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 9949,
  	visible = true,
  	effect = "FXTYPE_SUMMON",
  }
  changeCreature {
  	tcid = 9946,
  	behaviour = "questCreatures",
  	delay = 3,
  }

end)

quest.setScript( 3625, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9949,
  	behaviour = "Enemy_warrior_brave_ex",
  	faction = "FACTION_ENEMY_HERO",
  }

end)

quest.setScript( 949, "OnWon", function(args)
local pos = {22;26;0;797.648010;1788.449951;43.262600;20.000000}
  creatureGotoPos(2697,pos,false,2)
  creatureTeleportsAway(2697, 10)

end)

quest.setScript( 1550, "OnTaskAwaiting", function(args)

  changeCreature {
  	tcid = 4207,
  	behaviour = "Enemy_warrior_simple",
  	faction = "FACTION_ENEMY_HERO",
  	mortality = true,
  	role = "ROLE_ATTACKER",
  }

end)

quest.setScript( 1486, "OnUnconscious", function(args)
if (args.tcid == 4036 or args.tcid == 4037 or args.tcid == 4038) then
  	changeCreature {
  			tcid = args.tcid,
  			behaviour = "QUESTJOB_KILL_POOR",
  			faction = "FACTION_HUMAN",
  			role = "ROLE_DIALOG",
  	}
  end 

end)

quest.setScript( 1486, "OnSetup", function(args)
tcids = {4036,4037,4038,4049,4050,4051,4052}
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		livesRemaining = 255,
  		useUnconscious = true,
  		unconsciousTime = 2
  	}
  end 

end)

quest.setScript( 3148, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 8840,
  	mortality = "IMMORTAL"
  }

end)

quest.setScript( 3148, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 8839,
  	mortality = "IMMORTAL"
  }

end)

quest.setScript( 3280, "OnWon", function(args)
changeCreature {
  	tcid = 9276,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM04",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 9276,
  	behaviour = "questCreatures",
  	delay = 2
  }

end)

quest.setScript( 3282, "OnWon", function(args)
changeCreature {
  	tcid = 9270,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 9270,
  	behaviour = "questCreatures",
  	delay = 4
  }

end)

quest.setScript( 1496, "OnTaskAwaiting", function(args)
local tcids = {4051,4052}
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		clearUnconscious = true,
  		livesRemaining = 0,
  		mortality = "MORTAL",
  		behaviour = "Enemy_warrior_brave_ex",
  		faction = "FACTION_ENEMY_HERO",
  	}
  end
  

end)

quest.setScript( 2494, "OnTaskAwaiting", function(args)
for index,id in {7274,7275,7277} do
    changeCreature{
      tcid = id,
      mortality= "MORTAL",
  		clearAutoTeleporting = true,
    }
  end

end)

quest.setScript( 2494, "OnWon", function(args)
creatureGotoPos(7274,{60;30;0;550.000000;200.000000;0.000000},298,2)
  creatureGotoPos(7275,{60;29;0;357.062500;3195.453125;-1066.962646},131,2)
  creatureGotoPos(7277,{60;29;0;568.406250;3189.601563;-1061.852539},209,2)

end)

quest.setScript( 1430, "OnDeath", function(args)
if args.tcid == 3870 then
  	changeCreature {
  		tcid = 3869,
  		behaviour = "questCreatures",
  		faction = "FACTION_FRIEND_HERO_ALL",
  	}
  end
  

end)

quest.setScript( 231, "OnCounter", function(args)
--if args.taskcreature == 776 then
  --	return "TASKCREATURE_776"
  --end
  return "QUEST_231_COUNTER"
  

end)

quest.setScript( 1390, "OnStateChange", function(args)
tcids = {1812,1813,1815}
  
  if args.state == "PRECONDS_FULFILLED" then
  	for index,tcid in tcids do
  		changeCreature {
  			tcid = tcid,
  			mortality = "IMMORTAL",
  		}
  	end
  end

end)

quest.setScript( 1390, "OnDeath", function(args)
if tcids1390 == nil then 
  	tcids1390 = {
  		{
  			tcid = 2937,
  			alive = true,
  		},
  		{
  			tcid = 2939,
  			alive = true,
  		},
  		{
  			tcid = 2940,
  			alive = true,
  		},
  		{
  			tcid = 2941,
  			alive = true,
  		}
  	}
  end
  local victims = {1812,1813,1815}
  
  for i,tcids in tcids1390 do
  	if args.tcid == tcids.tcid then
  		tcids1390[i].alive = false
  	end
  	if 			tcids1390[1].alive == false and tcids1390[2].alive == false 
  			and tcids1390[3].alive == false and tcids1390[4].alive == false then
  		for index,id in victims do
  			changeCreature {
  				tcid = id,
  				behaviour = "questCreatures",
  			}
  		end
  	end
  end

end)

quest.setScript( 1846, "OnTalk", function(args)
if args.tcid == 5097 then
  	setGold(1)
  end
  

end)

quest.setScript( 3058, "OnUnconscious", function(args)
changeCreature {
  	tcid = 8535,
  	clearUnconscious = true,
  	livesRemaining	=	0,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 3058, "OnTaskAwaiting", function(args)
local tcids = {8535}
  
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_SPPL_RISE",
  	}	
  
  end

end)

quest.setScript( 3058, "OnSetup", function(args)
changeCreature {
  	tcid = 8535,
  	useUnconscious = true,
  	livesRemaining = 1,
  	unconsciousTime = 3,
  }

end)

quest.setScript( 3265, "OnUnconscious", function(args)
if args.tcid == 9179 then
  	changeCreature {
  		tcid = 9179,
  		clearUnconscious = true,
  		livesRemaining	=	0,
      faction = "FACTION_FRIEND_HERO_ALL",
      behaviour = "questCreatures",
      role = "ROLE_DIALOG",
  	}
  end
  

end)

quest.setScript( 3265, "OnWon", function(args)
for index,tcid in {9224,9225} do
  	changeCreature {
  		tcid = tcid,
  		mortality = "MORTAL",
  		role = "ROLE_INVALID",
  	}
    killCreature {
      tcid = tcid,
    }
  end 

end)

quest.setScript( 3265, "OnStateChange", function(args)
if args.state == "PREFIGHT" then
  	for index,tcid in {9179,9224,9225} do
  		changeCreature {
        tcid = tcid,
        mortality = "MORTAL",
        behaviour = "Enemy_warrior_brave_ex",
        faction = "FACTION_ENEMY_HERO",
        role = "ROLE_ATTACKER",
      }
    end
  end
  

end)

quest.setScript( 2887, "OnTaskAwaiting", function(args)
teleportTeam(2887,"15;3;0;2484.500000;1472.349609;1857.726196;157.856232")

end)

quest.setScript( 934, "OnTaskAwaiting", function(args)
setTimer{
  	id = 934,
  	interval = 1,
  	count = 720,
  }
  showTimer{
  	id = 934,
  	cur = 720,
  	max = 720
  }

end)

quest.setScript( 934, "OnTimer", function(args)
showTimer{
  	id = 934,
  	cur = args.count,
  	max = 720
  }
  if args.state == "TASK_FULFILLED" and args.count >= 1 then
    	solveQuest(args.id)
  end
  

end)

quest.setScript( 3262, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 9175,
    clearAutoTeleporting = true,
    role = "ROLE_DIALOG",
  }

end)

quest.setScript( 3062, "OnTaskAwaiting", function(args)
local tcids = {8539,8540,8541,8542,9345,9346,9347,9348}
  
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_SPPL_RISE",
  	}	
  end

end)

quest.setScript( 990, "OnPrecondsFulfilled", function(args)
creatureTeleportsAway(2697,0)
  creatureTeleportsAway(2852,0)

end)

quest.setScript( 990, "OnWon", function(args)
changeCreature {
  	tcid = 9512,
  	mortality = "MORTAL",
  }
  

end)

quest.setScript( 1053, "OnWon", function(args)
changeCreature {
  	tcid = 2971, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08",
  	loopCount = 1,
  }
  

end)

quest.setScript( 2844, "OnTalk", function(args)
if args.id == 2844 and args.tcid == 8129 then
  	changeCreature{
  		tcid = 8133,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = toWorldPosition("38;23;0;850.000000;800.000000;74.000000"),
  		speed = 2,
  		delay = 0.1,
  		followUpBhv = "questCreatures",
  	}
  end 

end)

quest.setScript( 661, "OnSetup", function(args)
questCompleted(args)
  

end)

quest.setScript( 2901, "OnTaskFulfilled", function(args)
--local factions = {"FACTION_HERO_GOOD","FACTION_HERO_BAD"}
  --for i, fac in factions do
  --	changeFactionRelation {
  --		fromFaction = "FACTION_UNDEADLEGION",
  --		toFaction = fac,
  --		relation = "NEUTRAL"
  --	}
  --end

end)

quest.setScript( 2668, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid=7684,
  	mortality = "IMMORTAL"
  }
  changeCreature{
  	tcid=7695,
  	mortality = "IMMORTAL"
  }
  changeCreature{
  	tcid=7696,
  	mortality = "IMMORTAL"
  }

end)

quest.setScript( 2723, "OnWon", function(args)
changeCreature {
  	tcid = 1046,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM10", --cheer
  	loopCount = 2,
  }
  
  changeCreature {
  	tcid = 1046,
  	behaviour = "questCreatures",
  	delay = 5,
  }

end)

quest.setScript( 3253, "OnSetup", function(args)
changeCreature {
  	tcid = 9179,
  	useUnconscious = true,
  	livesRemaining = 255,
  	unconsciousTime = 3,
  }

end)

quest.setScript( 3253, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9179,
  clearAutoTeleporting = true,
  }

end)

quest.setScript( 1328, "OnTaskAwaiting", function(args)
local tcids = {3619,3620,3621,3622,3623}
  for i, tcid in tcids do
  	changeCreature{
  		tcid = tcid,
  		behaviour = "QUESTJOB_KILL_RICH"
  	}
  end
  

end)

quest.setScript( 3278, "OnWon", function(args)
solveQuest(3273)

end)

quest.setScript( 2538, "OnTaskAwaiting", function(args)
creatureTeleportsAway( 9465, 1 )

end)

quest.setScript( 2538, "OnPrecondsFulfilled", function(args)
changeCreature {
  delay = 1,
    tcid = 9465,
    visible = true,
    effect = "FXTYPE_HOLOGRAM",
  }

end)

quest.setScript( 1342, "OnStateChange", function(args)

  if args.state == "TASK_AWAITING" then
  	creatureTeleportsAway ( 3639, 1 )
  	
  	local soldiers = { 3642, 3643, 3644 }
  	for i, tcid in soldiers do
  		changeCreature{ 
  			tcid = tcid, 
  			creature = "Dead_zombie_citizen",
  			faction = "FACTION_ENEMY_HERO_GOOD",
  			delay = 1
  		}
  	end
  
  end
  
  

end)

quest.setScript( 1435, "OnTaskAwaiting", function(args)
 changeCreature{
    	tcid = 3880,
    	clearAutoTeleporting = true,
    }

end)

quest.setScript( 2529, "OnTaskAwaiting", function(args)
setWoobState { state = "WOOB_DOOR_LOCKED", woid = 1023652932 }
  return toWorldPosition("13;2;-1;935.898438;981.649902;-0.023003;64.986206")

end)

quest.setScript( 2529, "OnCounter", function(args)
return "TASKCREATURE_7425"

end)

quest.setScript( 2529, "OnTaskFulfilled", function(args)
setWoobState { state = "WOOB_DOOR_UNLOCKED", woid = 1023652932 }
  
  changeCreature {
  delay = 1,
    tcid = 3002,
    visible = true,
    effect = "FXTYPE_HOLOGRAM",
  }
  return {}
  

end)

quest.setScript( 2529, "OnWon", function(args)
creatureTeleportsAway( 3002, 1 )
  setWoobState { state = "WOOB_DOOR_UNLOCKED", woid = 1023652932 }
  

end)

quest.setScript( 944, "OnWon", function(args)
--creatureTeleportPosition( 2619, 0, {31,7,0,1658.250000,2030.900391,46.695499,347.060028} )	
  
  
  

end)

quest.setScript( 2820, "OnTaskAwaiting", function(args)
changeCreature {
     tcid = 8041,
     role = "ROLE_ATTACKER",
  }

end)

quest.setScript( 2820, "OnTaskFulfilled", function(args)
changeCreature {
     tcid = 8041,
  	delay = 1,
     role = "ROLE_DIALOG",
     behaviour = "questCreatures",
  }

end)

quest.setScript( 2535, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 7413,
  	clearAutoTeleporting = true,
  --	useUnconscious = true,
  --	livesRemaining = 255,
  --	unconsciousTime = 2,
  }

end)

quest.setScript( 2536, "OnTaskAwaiting", function(args)
changeCreature{
   tcid = 7413,
  	behaviour = "Hireling_brave",
  	faction = "FACTION_QUEST_VICTIM"
  }

end)

quest.setScript( 2536, "OnTaskFulfilled", function(args)
changeCreature{
   tcid = 7413,
  	behaviour = "questCreatures",
  	faction = "FACTION_INVALID"
  }
  if getQuestState(3157) == "TASK_AWAITING" then
  	solveQuest(3157)
  end
  

end)

quest.setScript( 2781, "OnWon", function(args)
changeCreature {
  	tcid = 8423,
  	--behaviour = "JOB_BLACKSMITH",
  	merchantType = "MERCHANT_BLACKSMITH",
  }

end)

quest.setScript( 2781, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 7989,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 2781, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 7689,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("21;27;0;3188.851563;442.648438;119.973778;12.258759"),
  	speed = 2,
  	followUpAngle = 0,
  	followUpBhv = "questCreatures",
  }

end)

quest.setScript( 3157, "OnTaskAwaiting", function(args)
changeCreature{
   tcid = 7413,
  	role = "ROLE_VICTIM",
  }

end)

quest.setScript( 2537, "OnWon", function(args)
changeCreature{
  	tcid = 7413,
  	mortality = "MORTAL"
  }

end)

quest.setScript( 2532, "OnTaskAwaiting", function(args)
changeCreature{
   tcid = 7413,
  	behaviour = "Hireling_brave",
  	faction = "FACTION_QUEST_VICTIM"
  }

end)

quest.setScript( 2532, "OnTaskFulfilled", function(args)
changeCreature{
   tcid = 7413,
  	behaviour = "questCreatures",
  	faction = "FACTION_INVALID"
  }
  if getQuestState(2616) == "TASK_AWAITING" then
  	solveQuest(2616)
  end
  

end)

quest.setScript( 2616, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 7413,
  	role = "ROLE_VICTIM",
  }

end)

quest.setScript( 2212, "OnTaskAwaiting", function(args)
--changeCreature {
  --	tcid = 6332,
  --	role = "ROLE_ATTACKER"
  --}

end)

quest.setScript( 3224, "OnCounter", function(args)
--return "QUEST_3224_COUNTER"

end)

quest.setScript( 3077, "OnWon", function(args)
--local factions = {"FACTION_HERO_GOOD","FACTION_HERO_BAD"}
  --for i, fac in factions do
  --	changeFactionRelation {
  --		fromFaction = "FACTION_UNDEADLEGION",
  --		toFaction = fac,
  --		relation = "ENEMY"
  --	}
  --end
  

end)

quest.setScript( 2827, "OnWon", function(args)
creatureTeleportsAway(8047,2)

end)

quest.setScript( 2824, "OnWon", function(args)
changeCreature {
  	tcid = 8024,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08" --bow
  }
  changeCreature {
  	tcid = 8024,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 4,
  }
  

end)

quest.setScript( 2793, "OnUnconscious", function(args)
changeCreature {
  	tcid = 8004,
  	behaviour = "JOB_QUESTSTAGING",
  	bubble = 1,
  	action = "ACTION_KNEE",
    emotion = "ANIM_TYPE_KNEE-IDLE",
  	role = "ROLE_DIALOG",
  	livesRemaining = 0,
  	faction = "FACTION_FRIEND_HERO_ALL",
  	clearUnconscious = true,
  	delay = 0.01,
  	behaviour = "questCreatures",
  }
  
  
  --	behaviour = "QUESTJOB_KILL_RICH",
  --	emotion = "ANIM_TYPE_EM20",
  --	loopCount = -1,
  --	delay = 1,
  

end)

quest.setScript( 2793, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 8004,
  --	behaviour = "Enemy_warrior_brave",
  --	role = "ROLE_ATTACKER",
  --	faction = "ENEMY_HERO",
  	livesRemaining = 1,
  	useUnconscious = true,
    unconsciousTime = 4,
  }
  

end)

quest.setScript( 2795, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 8002,
  	role = "ROLE_DIALOG",
  	behaviour = "questCreatures",
  
  	livesRemaining = 0,
  	clearUnconscious = true,
  }
  

end)

quest.setScript( 2795, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 8002,
  --	behaviour = "Enemy_warrior_brave",
  --	role = "ROLE_ATTACKER",
  --	faction = "ENEMY_HERO",
  	livesRemaining = 1,
  	useUnconscious = true,
    unconsciousTime = 2,
  }
  

end)

quest.setScript( 2089, "OnTaskAwaiting", function(args)
--41;37;0;400.000000;600.000000;736.000000;0.000000
  local pos = toWorldPosition("41;37;0;369.609375;609.328125;650.593872;110.142853")
  creatureTeleportPosition (2993,0,pos)
  
  changeCreature {
  	tcid=3008,
  	role= "ROLE_ATTACKER",
  	mortality= mortal,
  }
  changeCreature {
  	tcid=3009,
  	role= "ROLE_ATTACKER",
  	mortality= mortal,
  }
  
  	

end)

quest.setScript( 2089, "OnWon", function(args)
creatureTeleportPosition(2993,1,{41,37,0,400,700,0})

end)

quest.setScript( 2094, "OnWon", function(args)
--39;37;0;2150.000000;100.000000;0.000000;0.000000
  
  creatureTeleportPosition (6270,0,{39;37;0;2150.000000;100.000000;0.000000})
  
  changeCreature{
  	tcid = 6270,
  	clearAutoTeleporting = true,
  }
  	

end)

quest.setScript( 431, "OnTaskAwaiting", function(args)
for index,tcid in {1564,1556,1557,1558,1560,1561,1562,1563,1555,3773} do
  	setRole(tcid, "ROLE_ATTACKER")
  end
  

end)

quest.setScript( 65, "OnSetup", function(args)
changeCreature {
  	tcid = 174,
  	useUnconscious = true,
  	unconsciousTime = 3,
  	livesRemaining = 1,
  	clearAutoTeleporting = true
  }

end)

quest.setScript( 65, "OnTaskAwaiting", function(args)

  --changeCreature {
  --	tcid = 174,
  --	useUnconscious = true,
  --	unconsciousTime = 3,
  --	livesRemaining = 1,
  --	clearAutoTeleporting = true
  --}

end)

quest.setScript( 65, "OnUnconscious", function(args)
--if args.tcid == 174 then
  --  changeCreature {
  --    tcid = 174,
  --		clearUnconscious = true,
  --    clearAutoTeleporting = true,
  --		role = "ROLE_DIALOG",
  --		behaviour = "JOB_QUESTSTAGING",
  --    emotion = "ANIM_TYPE_KNEE-IDLE",
  --    loopCount = -1,
  --		faction = "FACTION_FRIEND_HERO_ALL",
  --    }
  --end
  if args.tcid == 174 then
  	changeCreature {
  		tcid = 174,
  		useUnconscious = false,
  		livesRemaining = 0,
  		mortality = "IMMORTAL",
  		faction = "FACTION_HIGHELVE",
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_KNEE-IDLE",
  		loopCount = -1
  	}
  end
  

end)

quest.setScript( 946, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 2689,
  	mortality = "MORTAL"
  }

end)

quest.setScript( 928, "OnTaskAwaiting", function(args)
local tcids  = {2656,2657,5050,4920,4921}
  
  for i, tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		mortality = "IMMORTAL"
  	}
  end
  

end)

quest.setScript( 234, "OnWon", function(args)
changeCreature {
   tcid = 782, 
   behaviour = "JOB_QUESTSTAGING",
   emotion = "ANIM_TYPE_EM27",
   loopCount = 1,
  }
  
  changeCreature {
  	tcid = 782, 
  	behaviour = "JOB_MERCENARY",
  	delay = 4,
  }
  

end)

quest.setScript( 1346, "OnTaskFulfilled", function(args)
creatureTeleportsAway(3002, 1)

end)

quest.setScript( 1346, "OnPrecondsFulfilled", function(args)
changeCreature {
    tcid = 3002,
    visible = true,
    effect = "FXTYPE_HOLOGRAM",
  }

end)

quest.setScript( 2464, "OnTalk", function(args)
if args.tcid == 7253 then
  	changeCreature{
  		tcid = 7253,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1
  	}
  	changeCreature{
  		tcid = 7253,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  		delay = 3
  	}
  end
  

end)

quest.setScript( 2464, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	changeCreature{
  		tcid = 7253,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  		creature = "Human_stat_citizen_m01",
  		dont_turn = true
  	}
  end
  

end)

quest.setScript( 806, "OnWon", function(args)
--ochse = 2289, helf = 1553
  
  creatures = {
  	{
  		tcid = 2289,
  		pos = {sx=26;sy=23;sz=0;px=2958.953125;py=2629.851563;pz=82.047821},
  		angle = 268.145752,
  		behaviour = "dumbBehaviour",
  --		merchant = "MERCHANT_INVALID",
  	},
  	{
  		tcid = 1553,
  		pos = {sx=26;sy=23;sz=0;px=2893.203125;py=2698.546875;pz=82.047821},
  		angle = 325.113953,
  		behaviour = "JOB_TRADER",
  --		merchant = "MERCHANT_TRADER"
  	}
  }
  
  for id,object in creatures do
  	changeCreature {
  		tcid = object.tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = object.pos,
  		followUpAngle = object.angle,
  		followUpBhv = object.behaviour,
  	}
  	creatureTeleportsAway(object.tcid,30)
  end

end)

quest.setScript( 2465, "OnWon", function(args)
changeCreature{
  	tcid=7253,
  	creature="Monst_werewolf_elite",
  	delay = 2,
  	mortality = "MORTAL",
  	behaviour = "Enemy_werewolf",
  	faction = "FACTION_ENEMY_HERO"
  }

end)

quest.setScript( 2009, "OnWon", function(args)
solveQuest(2060)

end)

quest.setScript( 2009, "OnDeath", function(args)
if args.tcid == 5852 or args.tcid == 5854 then
  	if not var2009a then
  		var2009a = 0
  	end
  	var2009a = var2009a + 1
  	if var2009a == 2 then
  		solveQuest(2039)
  		var2009a = nil
  	end
  end
  
  if args.tcid == 5853 or args.tcid == 5855 or args.tcid == 5856 then
  	if not var2009b then
  		var2009b = 0
  	end
  	var2009b = var2009b + 1
  	if var2009b == 3 then
  		solveQuest(2056)
  		var2009b = nil
  	end
  end
  
  local tcids = { 5861, 5862, 5863, 5860, 5857, 5858 }
  for id, tcid in tcids do
  	if args.tcid == id then
  		if not var2009c then
  			var2009c = 0
  		end
  		var2009c = var2009c + 1
  		if var2009c == 6 then
  			solveQuest(2057)
  			var2009c = nil
  		end
  	end
  end
  

end)

quest.setScript( 2009, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid=5766,
  	useUnconscious = true,
  	unconsciousTime = 2,
  	livesRemaining = 255,
  	behaviour = "Hireling_brave",
  	clearAutoTeleporting = true,
  	mortality = "MORTAL"
  }
  
  --addBookEntry(2009, "QUEST_START")

end)

quest.setScript( 2022, "OnCounter", function(args)
return "CREATURE_1013"

end)

quest.setScript( 2992, "OnWon", function(args)
addGold (100)

end)

quest.setScript( 3384, "OnTalk", function(args)
if args.tcid==9547 and args.state=="TASK_AWAITING" and args.id == 3384 then
  	return bueroQuestTalk()
  end 

end)

quest.setScript( 3385, "OnTalk", function(args)
if args.id==3385 and args.state=="TASK_AWAITING" and args.tcid == 9547 then
  	return bueroQuestReach()
  end 

end)

quest.setScript( 3385, "OnTaskFulfilled", function(args)
creatureTeleportPosition(9547,0,{47;30;-2;1931.984375;857.484375;-0.002632;230.355820})

end)

quest.setScript( 1326, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 5218, 
  	behaviour = "JOB_QUESTSTAGING",
  	mortality = "IMMORTAL",
  	speed = 2,
  	gotoPosition = {sx = 22, sy = 27, sz = 0, px = 1889, py = 1956, pz = 0},
  }
  creatureTeleportsAway (5218, 5)

end)

quest.setScript( 853, "OnTaskAwaiting", function(args)
-- Hyderia die Wachen
  local ids = {2509,2510,2511,2512}
  local pos = {25;25;0;1841.796875;27.148438;325.000092;123.446777}
  for i,id in ids do
   creatureGotoPos(id, pos, false, 2, "Enemy_warrior_brave")
  end
  

end)

quest.setScript( 852, "OnTaskFulfilled", function(args)
--TyBosso und seine Leibwaechter einblenden
  local ids = {2489,2490,2492}
  for i,id in ids do
  	changeCreature{
  		tcid = id,
  		visible = true,
  	}
  end
  

end)

quest.setScript( 324, "OnStation", function(args)
if args.currentStation == 0 then
  	setTimer {
  		id = 324,
  		interval = 1,
  		count = 9,
  	}
  end
  

end)

quest.setScript( 324, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 7943,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=34;sy=34;sz=0;px=1130.810059;py=1800.130005;pz=1930.630005},
  	followUpAngle = 343.000000,
  	followUpBhv = "dumbBehaviour",
  	delay = 2,
  }
  teleport {
  	tcid = 7943,
  	gotoPosition = {sx=34;sy=34;sz=0;px=1130.810059;py=1800.130005;pz=1930.630005},
  	orientation = 343.000000,
  	delay = 5,
  }

end)

quest.setScript( 324, "OnTimer", function(args)
if args.count == 9 then
  	changeCreature {
  		tcid = 7943,
  		gotoPosition = {sx=34;sy=34;sz=0;px=1053.718750;py=1833.921875;pz=1930.767334},
  		followUpAngle = 146.830032,
  		behaviour = "JOB_QUESTSTAGING",
  	}
  end
  if args.count == 6 then
  	teleport {
  		tcid = 7943,
  		position = {sx=34;sy=34;sz=0;px=1053.718750;py=1833.921875;pz=1930.767334},
  		orientation = 146.830032,
  	}
  end
  if args.count == 5 then
  	changeCreature {
  		tcid = 7943,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_TALK",
  		loopCount = 1,
  	}
  end 
  if args.count == 2 then
  	changeCreature {
  		tcid = 7943,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_IDLEA",
  		loopCount = 1,
  		delay = 3,
  	}
  end
  if args.count == 1 then
  	solveQuest(args.id)
  end 

end)

quest.setScript( 2691, "OnStation", function(args)
if args.currentStation == 0 and args.id == 2691 then
  	local gladiatoren = {7875,7876,7877,7878,7879}
  	local waechter = {7869,7870,7872,7873,7874}
  
  	for index,id in gladiatoren do	
  		changeCreature {
  			tcid = id,
  			behaviour = "Hireling_coward",
  			mortality = "MORTAL",
  		}
  		addToGroup(id,0)
  	end
  
  	for index,id in waechter do
  		creatureGotoPosition (id,{29;22;0;1900.000000;3050.000000;0.000000})
  		creatureTeleportsAway (id,45)
  	end
  
  end
  
  
  
  --^36;20;0;2050.000000;200.000000;0.000000;0.000000
  --29;22;0;2766.610107;969.763977;-379.553986;347.000000

end)

quest.setScript( 2691, "OnTaskFulfilled", function(args)
local ids = {7875,7876,7877,7878,7879}
  	for index,id in ids do	
  		removeFromGroup {
    		tcid = id,
  		}
  	end
  
  changeCreature {
    		tcid = 7875, 
    		behaviour = "JOB_QUESTSTAGING",
    		gotoPosition = {sx=26,sy=25,sz=-1,px=1850,py=2250,pz=57},
    		followUpBhv = "questCreatures",
    		followUpAngle = 320,
  }
  
  changeCreature {
    		tcid = 7878, 
    		behaviour = "JOB_QUESTSTAGING",
    		gotoPosition = {sx=26,sy=25,sz=-1,px=1900,py=2250,pz=59},
    		followUpBhv = "questCreatures",
    		followUpAngle = 320,
  }
  
  changeCreature {
    		tcid = 7876, 
    		behaviour = "JOB_QUESTSTAGING",
    		gotoPosition = {sx=26,sy=25,sz=-1,px=2100,py=2150,pz=63},
    		followUpBhv = "questCreatures",
    		followUpAngle = 320,
  }
  
  changeCreature {
    		tcid = 7877, 
    		behaviour = "JOB_QUESTSTAGING",
    		gotoPosition = {sx=26,sy=25,sz=-1,px=2050,py=2250,pz=59},
    		followUpBhv = "questCreatures",
    		followUpAngle = 320,
  }
  
  changeCreature {
    		tcid = 7879, 
    		behaviour = "JOB_QUESTSTAGING",
    		gotoPosition = {sx=26,sy=25,sz=-1,px=2200,py=2000,pz=59},
    		followUpBhv = "questCreatures",
    		followUpAngle = 320,
  }
  

end)

quest.setScript( 322, "OnTaskFulfilled", function(args)
if nil then
  	changeCreature {
  		tcid = 873,
  		effect = "FXTYPE_GEN_TELEPORT",
  		delay = 1,
  	}
  	teleport {
  		tcid = 873,
  		position = {px=1295.800049,py=1909.349976,pz=116.918999,sx=26,sy=25,sz=-1},
  		orientation = 310,
  		delay = 3,
  	}
  	changeCreature {
  		tcid = 873,
  		effect = "FXTYPE_INVALID",
  		delay = 6,
  	}
  end
  

end)

quest.setScript( 1051, "OnCounter", function(args)
if Quest_1051_TA then
  	return "QUEST_1051_COUNTER"
  end
  

end)

quest.setScript( 1051, "OnTaskFulfilled", function(args)
Quest_1051_TA = false

end)

quest.setScript( 1051, "OnSetup", function(args)
-- true if quest 1051 is TA
  Quest_1051_TA = true

end)

quest.setScript( 1051, "OnWon", function(args)
Quest_1051_TA = nil

end)

quest.setScript( 1313, "OnWon", function(args)
local creatures = {
  	{
  		tcid = 1812,
  		pos = {sx=30;sy=30;sz=0;px=2000.000000;py=1150.000000;pz=0},
  	},
  	{
  		tcid = 1813,
  		pos = {sx=30;sy=30;sz=0;px=2150.000000;py=1050.000000;pz=182},
  	},
  	{
  		tcid = 1815,
  		pos = {sx=30;sy=30;sz=0;px=1850.000000;py=1000.000000;pz=0},
  	}
  }
  
  for id,object in creatures do
  	changeCreature {
  		tcid = object.tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = object.pos,
  		followUpBhv = "questCreatures",
  	}
  	creatureTeleportsAway(object.tcid,30)
  end

end)

quest.setScript( 1149, "OnCounter", function(args)
return "TASKCREATURE_474"

end)

quest.setScript( 952, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid=2697,
  	mortality = "IMMORTAL"
  }

end)

quest.setScript( 1433, "OnSetup", function(args)
--changeCreature {
  --	tcid = 3874,
  --	clearAutoTeleporting = true,
  --}

end)

quest.setScript( 2179, "OnTaskAwaiting", function(args)
local tcids={6691,6692,6693}
  	for i, tcid  in tcids do 
  		changeCreature{
  			tcid = tcid,
  			mortality = "IMMORTAL",
  			clearAutoTeleporting = true,
  		}
  	end
  

end)

quest.setScript( 2179, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 6691,
  	behaviour = "questCreatures",
  	role = "ROLE_DIALOG",
  }

end)

quest.setScript( 886, "OnWon", function(args)
changeCreature {
  	tcid = 1542,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=16,sy=33,sz=0,px=1476.400024,py=1830.599976,pz=1056.489990},
  	followUpBhv = "JOB_PRIEST",
  	followUpAngle = 0,
  }

end)

quest.setScript( 631, "OnTaskAwaiting", function(args)
-- Figur "zusammenschlagen":
  --
  -- 1. livesRemaining auf 1 damit die Figur einmal wieder aufsteht
  -- 2. useUnconscious = true: der kill entfernt die figur nicht!
  -- 3. unconsciousTime: weiterspielen wird solange verzoegert
  changeCreature {
  	tcid=2067,
  	livesRemaining=1,
  	useUnconscious=true,
  	unconsciousTime=1,
  }
  -- wenn die figur dann spaeter DOCH mal sterben soll:
  -- geht nicht, da useUnconscious noch gesetzt ist!
  -- dann: clearUnconscious = true verwenden!
  
  

end)

quest.setScript( 631, "OnStateChange", function(args)
if args.state == "PREFIGHT" then
  	setRole(5483, "ROLE_ATTACKER")
  	setRole(5484, "ROLE_ATTACKER")
  end
  

end)

quest.setScript( 631, "OnWon", function(args)
-- creature ist QG, existiert also bereits -> OK
  changeCreature {
  	tcid=2067,
  	livesRemaining=0,
  	clearUnconscious=true,
  }

end)

quest.setScript( 631, "OnUnconscious", function(args)
if args.tcid == 2067 then
  --	for index,tcid in {5483, 5484} do
  --		changeCreature {
  --			tcid = tcid,
  --			role = "ROLE_INVALID",
  --			behaviour = "JOB_POOR_STATIST",
  --			faction = "FACTION_HUMAN",
  --		}
  --	end
  	changeCreature {
  		tcid = 2067,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_KNEE-IDLE",
  		loopCount = -1,
  	}
  end 

end)

quest.setScript( 1050, "OnCounter", function(args)
return QUEST_1050_COUNTER

end)

quest.setScript( 613, "OnWon", function(args)
changeCreature {
    tcid = 1925, 
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM27",	--salute
    loopCount = 1,
  }
  changeCreature {
    tcid = 1925, 
    behaviour = "JOB_RICH_STATIST",
    delay = 3,
  }

end)

quest.setScript( 613, "OnCounter", function(args)
return "TASKCREATURE_1926"

end)

quest.setScript( 514, "OnWon", function(args)
changeCreature {
   tcid = 1810, 
   behaviour = "JOB_QUESTSTAGING",
   emotion = "ANIM_TYPE_EM10",	--cheer
   loopCount = 1,
  }
  
  changeCreature {
  	tcid = 1810, 
  	behaviour = "JOB_KID",
  	delay = 3,
  }
  
  changeCreature {
  	tcid = 1811, 
  	behaviour = "JOB_TRADER",
  	delay = 4,
  }

end)

quest.setScript( 951, "OnTaskAwaiting", function(args)
teleport {
  	tcid = 2697,
  	position = toWorldPosition("24;31;0;400.000000;3050.000000;0.000000;78.193665"),
  	orientation = 78.193665,
  }

end)

quest.setScript( 851, "OnTaskFulfilled", function(args)
--TyBosso und seine Leibwaechter ausblenden
  local ids = {2489,2490,2492}
  for i,id in ids do
  	changeCreature{
  		tcid = id,
  		visible = false,
  	}
  end
  

end)

quest.setScript( 1357, "OnTaskFulfilled", function(args)
teleport {
  	tcid = 3639,
  	position = {sx=37,sy=27,sz=0,px=1000,py=1650,pz=0}
  }
  

end)

quest.setScript( 1357, "OnWon", function(args)

  creatureTeleportPosition( 3639, 0, { 37,27,-1,716.601990,1501.900024,-103.547997, 161 } )

end)

quest.setScript( 1669, "OnTalk", function(args)
if args.id==1669 and args.state=="TASK_FULFILLED" and args.tcid==9506 then
    changeCreature {
      tcid = 9506,
      behaviour = "JOB_QUESTSTAGING",
      emotion = "ANIM_TYPE_SM21",
      loopCount = -1,
    }
  end
  

end)

quest.setScript( 1669, "OnWon", function(args)
changeCreature {
    tcid = 9506,
    mortality = "MORTAL",
    role = "ROLE_INVALID",
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_SM22",
  }
  killCreature {
    tcid = 9506,
    delay = 2,
  }
  

end)

quest.setScript( 1669, "OnTaskFulfilled", function(args)
changeCreature {
    tcid = 9506,
    clearUnconscious = true,
    livesRemaining = 0,
    behaviour = "JOB_QUESTSTAGING",
    dont_turn = true,
    emotion = "ANIM_TYPE_SM20",
    faction = "FACTION_FRIEND_HERO_ALL",
    mortality = "IMMORTAL",
    role = "ROLE_DIALOG",
    loopCount = -1,
  }
  
  changeCreature {
  	tcid = 8490,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 1669, "OnTaskAwaiting", function(args)
destroyCreature {
    tcid = 1186
  }
  changeCreature {
  	tcid = 9506,
  	useUnconscious = true,
  	livesRemaining = 1,
  	unconsciousTime = 1,
  	clearAutoTeleporting = true,
  	behaviour = "Enemy_warrior_brave_ex",
    faction = "FACTION_ENEMY_HERO",
    mortality = "MORTAL",
    role = "ROLE_ATTACKER",
  }
  

end)

quest.setScript( 1560, "OnSetup", function(args)
changeCreature {
  	tcid = 3948,
  --	mortality = "IMMORTAL",
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 1560, "OnLost", function(args)
--addBookEntry(1560, "QUEST_LOST")

end)

quest.setScript( 1399, "OnWon", function(args)
changeCreature {
  	tcid = 3715,
  	mortality = "MORTAL",
  	role = "ROLE_ATTACKER",
  }

end)

quest.setScript( 3172, "OnWon", function(args)
creatureTeleportsAway (8075,1)

end)

quest.setScript( 3172, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9005,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 1049, "OnSetup", function(args)
-- revert changes from quest 1048
  
  changeCreature {
  	tcid=2961,
  	livesRemaining=0,
  	clearUnconscious=true,
  }
  

end)

quest.setScript( 1049, "OnWon", function(args)
changeCreature {
  	tcid = 2973,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM13",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 2973,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 4,
  }
  changeCreature {
  	tcid = 2961,
  	behaviour = "JOB_RICH_STATIST",
  	faction = "FACTION_HIGHELVE",
  	delay = 4,
  }

end)

quest.setScript( 1049, "OnLost", function(args)
changeCreature {
  	tcid = 2973,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM15",
  	loopCount = 1,
  	bubble = 9,
  }
  changeCreature {
  	tcid = 2973,
  	mortality = "MORTAL",
  	behaviour = "questCreatures",
  	role = "ROLE_INVALID",
  	faction = "FACTION_HIGHELVE",
  	delay = 4,
  }
  killCreature {
  	tcid = 2973,
  	delay = 5,
  }
  destroyCreature {
  	tcid = 2973,
  	splatter = false,
  	delay = 20,
  }

end)

quest.setScript( 3441, "OnDeath", function(args)
if args.tcid == 9055 then
  	tc_9055_dead = true
  	removeFromGroup {
  		tcid = 9055,
  		delay = 0,
  	}
  	destroyCreature {
  		tcid = 9055,
  		delay = 5,
  	}
  end
  if args.tcid == 9054 then
  	tc_9054_dead = true
  	removeFromGroup {
  		tcid = 9054,
  		delay = 0,
  	}
  	destroyCreature {
  		tcid = 9054,
  		delay = 5,
  	}
  end 

end)

quest.setScript( 3441, "OnTaskAwaiting", function(args)
tc_9054_dead = false
  tc_9055_dead = false 

end)

quest.setScript( 218, "OnWon", function(args)
changeCreature {
   tcid = 599, 
   behaviour = "JOB_QUESTSTAGING",
   emotion = "ANIM_TYPE_EM32",
   loopCount = 1,
  }
  
  changeCreature {
  	tcid = 2844, 
  	behaviour = "JOB_TRADER",
  	delay = 4,
  }
  

end)

quest.setScript( 3453, "OnTimer", function(args)
solveQuest{
   id = 3453 
  }

end)

quest.setScript( 3453, "OnTaskAwaiting", function(args)
setTimer {
  	id = 3453,
  	interval = 13,
  	count = 1,
  }
  
  changeCreature {
  	tcid = 9622,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = 
  		toWorldPosition("55;55;0;1763.093750;1469.593750;875.321594;182.436630"),
  --	bubble = 1,
  }
  changeCreature {
  	tcid = 9622,
  --	bubble = 1,
  --	action = "ACTION_ATTACK",
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_ATTACKA",
  	loopCount = 2,
  	delay = 5,
  }
  --changeCreature {
  --	tcid = 9622,
  --	behaviour = "Enemy_warrior_brave",
  --	delay = 5
  --}
  changeCreature {
  	tcid = 9622,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = 
  		toWorldPosition("55;55;0;1795.343750;1406.296875;886.321899;4.537781"),
  	delay = 11,
  }
  changeCreature {
  	tcid = 9622,
  	behaviour = "questCreatures",
  	role = "ROLE_DIALOG",
  	delay = 13,
  }
  	

end)

quest.setScript( 222, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 719,
  	mortality = "MORTAL"
  }

end)

quest.setScript( 3455, "OnWon", function(args)
changeCreature {
  	tcid = 9642,
  	behaviour = "JOB_QUESTSTAGING",
  	role = "ROLE_INVALID",
  	gotoPosition = 
  		toWorldPosition("56;54;0;2114.656250;2603.796875;1258.830200;311.742767"),
  }
  creatureTeleportPosition(9642,12,{0,0,0,0,0,0})
  
  changeCreature {
  	tcid = 9642,
  	creature = "NPC_christmas_ogre",
  	delay = 15
  }
  creatureTeleportPosition(9642,18,{56,54,0,2097.390,2570.593,1256.925,112})
  
  changeCreature {
  	tcid = 9642,
  	behaviour = "JOB_QUESTSTAGING",
  	role = "ROLE_INVALID",
  	gotoPosition = 
  		("57;54;0;450;1150;0;0"),
  	delay = 20,
  	followUpBhv = "questCreatures"
  }

end)

quest.setScript( 2249, "OnWon", function(args)
changeCreature {
  tcid = 6366,
  behaviour = "JOB_QUESTSTAGING",
  emotion = "ANIM_TYPE_MAGICB",
  followUpBhv = "questCreatures",
  --effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
  --emotion = "ANIM_TYPE_SM22",
  }
  
  
  changeCreature {
  tcid = 6416,
  behaviour = "JOB_QUESTSTAGING",
  --emotion = "ANIM_TYPE_MAGICB",
  effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
  emotion = "ANIM_TYPE_SM22",
  delay = 1,
  }
  killCreature {
   tcid = 6416,
   splatter = true,
   delay = 3,
  }
  --	behaviour = "JOB_QUESTSTAGING",
  --	emotion = "ANIM_TYPE_MAGICB",
  --	effect = "FXTYPE_GEN_SPAWN1_I",
  --	effectParam = { 
  --		paramtype="position", 
  --		position={sx=43;sy=56;sz=0;px=500;py=2000;pz=0},
  --		duration=1.2,
  --		fxImpact="FXTYPE_GEN_SPAWN1",
  --	},
  --	loopCount = 1,
  --}

end)

quest.setScript( 2773, "OnTalk", function(args)
changeCreature {
  	tcid = 7972,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM19",
  	loopCount = 1,
  }
  	

end)

quest.setScript( 2773, "OnStation", function(args)
if args.currentStation == 0 and args.id == 2773 then 
  	changeCreature {
  			tcid = 7971,
  			behaviour = "Hireling_coward",
  			mortality = "MORTAL",
  		}
  		addToGroup(7971,0)
  	changeCreature {
  			tcid = 7970,
  			behaviour = "Hireling_coward",
  			mortality = "MORTAL",
  		}
  		addToGroup(7970,0)
  	changeCreature {
  			tcid = 7969,
  			behaviour = "Hireling_coward",
  			mortality = "IMMORTAL",
  		}
  		addToGroup(7969,0)
  end
  
  

end)

quest.setScript( 1395, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 2048,
  	clearUnconscious = true,
  	livesRemaining = 0,
  }

end)

quest.setScript( 1395, "OnWon", function(args)
changeCreature {
  	tcid = 2048,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=28,sy=26,sz=0,px=555,py=649,pz=311},
  	speed = 2,
  	followUpBhv = "questCreatures"
  }
  creatureTeleportPosition(2048,13,{27;25;0;2630;3011;91})
  changeCreature {
  	tcid = 1179,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=27;sy=26;sz=0;px=100;py=1800;pz=0},
  	followUpBhv = "questCreatures",
  	delay = 19,
  	speed = 2,
  }
  creatureTeleportsAway(1179,49)
  changeCreature {
  	tcid = 2048,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=27;sy=26;sz=0;px=50;py=1750;pz=0},
  	followUpBhv = "questCreatures",
  	delay = 19,
  	speed = 2,
  }
  creatureTeleportsAway(2048,49)

end)

quest.setScript( 1395, "OnTalk", function(args)
if args.tcid == 2048 and args.id == 1395 and args.state == "TASK_FULFILLED" then
  	changeCreature {
  		tcid = 2048,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM27", --pray
  		loopCount = 1,
  	}
  end
  

end)

quest.setScript( 189, "OnWon", function(args)
changeCreature {
  	tcid = 622, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM26",
  	loopCount = 1,
  }
  

end)

quest.setScript( 188, "OnWon", function(args)
changeCreature {
  	tcid = 622, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM01",
  	loopCount = 1,
  }
  
  changeCreature {
  	tcid = 629, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM04",
  	loopCount = 1,
  }
  

end)

quest.setScript( 950, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 2699 then
  	setBehaviour(2699, "questCreatures")
  end
  

end)

quest.setScript( 46, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 102,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=19;sy=28;sz=0;px=3069.128906;py=2879.882813;pz=114.287964},
  	speed = 2,
  	followUpBhv = "questCreatures",
  	followUpAngle = 331,
  }
  
  changeCreature {
  	tcid = 103,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=19;sy=28;sz=0;px=3099.898438;py=3000.296875;pz=112.294357},
  	speed = 2,
  	followUpBhv = "questCreatures",
  	followUpAngle = 175,
  }
  
  
  creatureTeleportPosition(102,30,{21;29;0;0.000000;900.000000;109.000000})
  creatureTeleportPosition(103,30,{21;29;0;19.101563;856.351563;59.994839})

end)

quest.setScript( 56, "OnWon", function(args)
changeCreature {
  	tcid = 155, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08",
  	loopCount = 1,
  }
  

end)

quest.setScript( 673, "OnWon", function(args)
setWoobState {
  	woid = 1018380619,
  	state = "WOOB_DOOR_OPEN",
  }
  setWoobState {
  	woid = 1018380619,
  	state = "WOOB_INVALID",
  	delay = 0.1,
  }
  --invalid raus, invisible rein, sobald in der version (sa/mo)
  --setWoobState {
  --	woid = 1018380619,
  --	state = "WOOB_INVISIBLE",
  --	delay = 0.1,
  --}

end)

quest.setScript( 606, "OnWon", function(args)
changeCreature {
    tcid = 1910, 
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM24",	--salute
    loopCount = 1,
  }
  changeCreature {
    tcid = 1910, 
    behaviour = "JOB_POOR_STATIST",
    delay = 3,
  }

end)

quest.setScript( 1176, "OnCounter", function(args)
return "QUEST_1176_COUNTER"

end)

quest.setScript( 3442, "OnTaskAwaiting", function(args)
tc_9092_dead = false
  tc_9093_dead = false
  tc_9095_dead = false
  tc_9096_dead = false
  

end)

quest.setScript( 3442, "OnDeath", function(args)
if args.tcid == 9092 then
  	tc_9092_dead = true
  	removeFromGroup {
  		tcid = 9092,
  		delay = 0,
  	}
  	destroyCreature {
  		tcid = 9092,
  		delay = 5,
  	}
  end
  if args.tcid == 9093 then
  	tc_9093_dead = true
  	removeFromGroup {
  		tcid = 9093,
  		delay = 0,
  	}
  	destroyCreature {
  		tcid = 9093,
  		delay = 5,
  	}
  end
  if args.tcid == 9095 then
  	tc_9095_dead = true
  	removeFromGroup {
  		tcid = 9095,
  		delay = 0,
  	}
  	destroyCreature {
  		tcid = 9095,
  		delay = 5,
  	}
  end
  if args.tcid == 9096 then
  	tc_9096_dead = true
  	removeFromGroup {
  		tcid = 9096,
  		delay = 0,
  	}
  	destroyCreature {
  		tcid = 9096,
  		delay = 5,
  	}
  end 

end)

quest.setScript( 2910, "OnSetup", function(args)
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1023593698}

end)

quest.setScript( 3500, "OnSetup", function(args)
if args.tcid == 9750 then
  	changeCreature {
  		tcid = 9750,
  		behaviour = "JOB_QUESTSTAGING",
  		orientation = 262,
  		emotion = "ANIM_TYPE_MAGICB"
  	}
  end
  

end)

quest.setScript( 3500, "OnTaskAwaiting", function(args)
changeCreature {
  		tcid = 9750,
  		orientation = 87,
  		followUpBhv = "questCreatures"
  }

end)

quest.setScript( 1418, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	teleport {
  		tcid = 1336,
  		position = {sx=27,sy=23,sz=0,px=1650.000000,py=2050.000000,pz=0.000000},
  		orientation = 297,
  	}
  end

end)

quest.setScript( 1418, "OnWon", function(args)
changeCreature {
  	tcid = 1337,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=27,sy=22,sz=0,px=2500,py=1950,pz=0},
  	followUpBhv = "questCreatures",
  	speed = 2,
  }
  creatureTeleportsAway(1337,30)
  
  changeCreature {
  	tcid = 1336,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=27,sy=22,sz=0,px=2500,py=1900,pz=0},
  	followUpBhv = "questCreatures",
  	speed = 2,
  }
  creatureTeleportsAway(1336,30)

end)

quest.setScript( 2906, "OnSetup", function(args)
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1023596520}

end)

quest.setScript( 2911, "OnSetup", function(args)
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1023594214}

end)

quest.setScript( 2039, "OnWon", function(args)
changeCreature{
  	tcid = 5766,
  	behaviour = "Hireling_brave",
  }

end)

quest.setScript( 2039, "OnTalk", function(args)
if args.tcid == 5766 and args.state == "TASK_FULFILLED" then
  	changeCreature{
  		tcid = 5766,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  end
  

end)

quest.setScript( 2039, "OnTaskFulfilled", function(args)
--addBookEntry(2039,"QUEST_READY")
  
  changeCreature{
  	tcid = 5766,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  }

end)

quest.setScript( 2056, "OnWon", function(args)
changeCreature{
  	tcid = 5766,
  	behaviour = "Hireling_brave",
  }

end)

quest.setScript( 2056, "OnTaskFulfilled", function(args)
--addBookEntry(2056,"QUEST_READY")
  
  changeCreature{
  	tcid = 5766,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  }

end)

quest.setScript( 2056, "OnTalk", function(args)
if args.tcid == 5766 and args.state == "TASK_FULFILLED" then
  	changeCreature{
  		tcid = 5766,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  end
  

end)

quest.setScript( 794, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	addGold(-100)
  end

end)

quest.setScript( 2598, "OnCounter", function(args)
return "TASKCREATURE_7518"

end)

quest.setScript( 2812, "OnTaskFulfilled", function(args)
solveQuest(3368)

end)

quest.setScript( 2710, "OnWon", function(args)
local ids = {7807,7806,7802,7798,7799,7800}
  for i,id in ids do
  	changeCreature{
  		tcid = id,
  		faction = "FACTION_INVALID",
  	}
  	creatureGotoPosition(id,{46;17;0;2603.843750;1947.898438;2284.980469})
  end
  
  changeCreature {
  	tcid = 7804,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32" --bow
  }
  
  changeCreature {
  	tcid = 7804,
  	behaviour = "questCreatures",
  	delay = 5,
  }

end)

quest.setScript( 2710, "OnLost", function(args)
changeCreature {
  	tcid = 7804,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM31" --threaten
  }
  
  changeCreature {
  	tcid = 7804,
  	behaviour = "questCreatures",
  	delay = 6,
  }

end)

quest.setScript( 195, "OnSetup", function(args)

  
  	changeCreature {
  		tcid=427,
  		effect="FXTYPE_GEN_TRANSFORM"
  	}
  
  	changeCreature {
  		tcid=427,
  		creature="Monst_werewolf",
  		behaviour = "Enemy_warrior_brave",
  		delay = 2
  	}
  

end)

quest.setScript( 3443, "OnTaskAwaiting", function(args)
tc_7783_dead = false
  tc_7784_dead = false
  

end)

quest.setScript( 3443, "OnDeath", function(args)
if args.tcid == 7783 then
  	tc_7783_dead = true
  	removeFromGroup {
  		tcid = 7783,
  		delay = 0,
  	}
  	destroyCreature {
  		tcid = 7783,
  		delay = 5,
  	}
  end
  if args.tcid == 7784 then
  	tc_7784_dead = true,
  	removeFromGroup {
  		tcid = 7784,
  		delay = 0,
  	}
  	destroyCreature {
  		tcid = 7784,
  		delay = 5,
  	}
  end 

end)

quest.setScript( 2705, "OnTaskAwaiting", function(args)
changeCreature{
  tcid = 7750,
  clearAutoTeleporting = true,
  }
  if tc_7783_dead == false then
  	changeCreature{
  	tcid = 7783,
  	clearAutoTeleporting = true,
  	}
  end
  if tc_7784_dead == false then
  	changeCreature{
  	tcid = 7784,
  	clearAutoTeleporting = true,
  	}
  end
  
  
  
  

end)

quest.setScript( 2705, "OnTaskFulfilled", function(args)
changeCreature{
  	tcid = 7750,
  	behaviour = "questCreatures",
  	faction= "FACTION_INVALID",
  }

end)

quest.setScript( 2705, "OnWon", function(args)
if tc_7783_dead == false then
  	changeCreature{
  		tcid = 7784,
  		behaviour = "Enemy_warrior_brave_row_ex",
  		faction= "FACTION_DESERTHU_GUARDS",
  	}
  	removeFromGroup ( 7783, 0 )
  end
  if tc_7784_dead == false then
  	changeCreature{
  		tcid = 7784,
  		behaviour = "Enemy_warrior_brave_row_ex",
  		faction= "FACTION_DESERTHU_GUARDS",
  	}
  	removeFromGroup ( 7784, 0 )
  end
  
  changeCreature{
  	tcid = 7750,
  	behaviour = "Enemy_warrior_brave_row_ex",
  	faction= "FACTION_DESERTHU_GUARDS",
  }
  removeFromGroup ( 7750, 0 )
  

end)

quest.setScript( 2733, "OnWon", function(args)
if tc_7783_dead == false then
  	creatureTeleportsAway(7783,0)
  end
  if tc_7784_dead == false then
  	creatureTeleportsAway(7784,0)
  end
  creatureTeleportsAway(7750,0)
  
  changeCreature{
  	tcid = 7794,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM10",
  	loopCount = 10,
  	delay = 0.3,
  }
  
  changeCreature{
  	tcid = 7795,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32",
  	loopCount = 6,
  }
  
  changeCreature{
  	tcid = 7793,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM04",
  	loopCount = 5,
  	delay = 0.1,
  }
  
  tc_7783_dead = nil
  tc_7784_dead = nil 

end)

quest.setScript( 307, "OnWon", function(args)
changeCreature {
    tcid = 1153, 
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM34",	--hail
    loopCount = 1,
  }
  changeCreature {
    tcid = 1153, 
    behaviour = "JOB_RICH_STATIST",
    delay = 15,
  }

end)

quest.setScript( 536, "OnStateChange", function(args)
tcids = {1820, 1821, 1822, 1823}
  if args.state == "PRECONDS_FULFILLED" then
  	for i,tcid in tcids do
  		setRole(tcid, "ROLE_ATTACKER")
  	end
  end
  

end)

quest.setScript( 536, "OnTaskFulfilled", function(args)
addBookEntry(536, "QUEST_READY")

end)

quest.setScript( 536, "OnTaskAwaiting", function(args)
addBookEntry(536, "QUEST_START")

end)

quest.setScript( 2047, "OnWon", function(args)
changeCreature {
  	tcid = 5967, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM10",	--cheer
  	loopCount = 1,
  }
  teleport {
  	tcid = 5967,
  	position = toWorldPosition("21;25;0;1542.900024;2699.199951;167.824005;217.000000"),
  	orientation = 217,
  	delay = 3,
  }

end)

quest.setScript( 2599, "OnTalk", function(args)
if args.tcid == 7526 and args.state == "TASK_FULFILLED" then
  	setBehaviour(7526,"questCreatures")
  end
  

end)

quest.setScript( 2599, "OnWon", function(args)
local tcids = {7526, 9104, 9105}
  for i, tcid in tcids do
  	changeCreature{
  		tcid = tcid,
  		role = "ROLE_INVALID",
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = {sx=20 ,sy=27 ,sz=0 ,px=2783 ,py=1401 ,pz=24 },
  		speed = 2
  	}
  	creatureTeleportsAway( tcid, 10 )
  end
  

end)

quest.setScript( 1990, "OnSetup", function(args)

  --if args.state == "PRECONDS_FULFILLED" and woid == 1014511916 then
  	setWoobEffect {
  			effect = "FXTYPE_QFX_VERGIFTETER_BRUNNEN",
  			woid = 1014511916}
  --end
  

end)

quest.setScript( 1555, "OnWon", function(args)
creatureGotoPosition(4185,{42;37;0;151.031250;182.781250;958.263000;72.815460})
  

end)

quest.setScript( 1330, "OnWon", function(args)
local childs = { 3619, 3620, 3621, 3622, 3623 }
  
  for i, child in childs do
  	changeCreature {
  		tcid = child,
  		behaviour = "JOB_KID",
  		delay = 5
  	}
  end
  

end)

quest.setScript( 1330, "OnTaskAwaiting", function(args)
local tcids = { 3619, 3620, 3621, 3622, 3623 }
  
  for i, tcid in tcids do
  	changeCreature{
  		tcid = tcid, 
  		role = "ROLE_VICTIM",
  		mortality = "IMMORTAL",
  	}
  end
  

end)

quest.setScript( 1330, "OnTaskFulfilled", function(args)
local tcids = { 3619, 3620, 3621, 3622, 3623 }
  
  for i, tcid in tcids do
  	changeCreature{
  		tcid = tcid, 
  		role = "ROLE_VICTIM"
  	}
  end
  

end)

quest.setScript( 2071, "OnStation", function(args)
if args.currentStation == 0 then
  questMessage {
    	 line = 1,
    	 lokaid = "QUEST_2071_COLLECT_MSG_1",
    	 duration = 5.0,
    	 fadeIn = 0.5,
    	 fadeOut = 1.0,
    	 delay = 0,
    	 color = "#00ff00",
    }
  end
  if args.currentStation == 1 then
  questMessage {
    	 line = 1,
    	 lokaid = "QUEST_2071_COLLECT_MSG_2",
    	 duration = 5.0,
    	 fadeIn = 0.5,
    	 fadeOut = 1.0,
    	 delay = 0,
    	 color = "#00ff00",
    }
  end
  if args.currentStation == 2 then
  questMessage {
    	 line = 1,
    	 lokaid = "QUEST_2071_COLLECT_MSG_3",
    	 duration = 5.0,
    	 fadeIn = 0.5,
    	 fadeOut = 1.0,
    	 delay = 0,
    	 color = "#00ff00",
    }
  end
  

end)

quest.setScript( 2533, "OnWon", function(args)
changeCreature{
  	tcid = 7413,
  	mortality = "MORTAL"
  }

end)

quest.setScript( 714, "OnWon", function(args)
changeCreature {
  	tcid = 2172,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=54,sy=36,sz=0,px=3100,py=2450,pz=0},
  	speed = 2,
  	followUpBhv = "questCreatures",
  	followUpAngle = 338,
  }
  creatureTeleportPosition(2172,30,{55;36;0;2600.449951;1339.050049;-1680.089966})
  
  changeCreature {
  	tcid = 2174,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=54,sy=36,sz=0,px=3100,py=2400,pz=0},
  	speed = 2,
  	followUpBhv = "questCreatures",
  	followUpAngle = 83,
  }
  creatureTeleportPosition(2174,30,{55;36;0;2486.159912;1281.400024;-1680.089966})

end)

quest.setScript( 674, "OnWon", function(args)
questCompleted(args)
  
  local elves = {2119,5265,5266,5267}
  
  for index,tcid in elves do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = toWorldPosition("9;48;0;1350.000000;1350.000000;0.000000;0.000000"),
  	}
  	creatureTeleportsAway(tcid,25)
  end
  

end)

quest.setScript( 674, "OnSetup", function(args)
--questMessage("QUEST_COMPLETED")

end)

quest.setScript( 1524, "OnTalk", function(args)
if args.tcid == 4156 then
  	tcids = {4156,4157,4158,4159,4160}
  	for index, tcid in tcids do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "Enemy_warrior_brave",
  		}
  	end
  end
  

end)

quest.setScript( 1524, "OnTaskAwaiting", function(args)
tcids = {4156,4157,4158,4159,4160}
  --pos1 = {pos[1]=sx=40,sy=37,sz=0,px=1040.453125,py=475.046875,pz=341.001556}
  --pos2 = {sx=40,sy=37,sz=0,px=1008.953125,py=511.601563,pz=340.650177}
  
  --nochmal alles checken und anpassen
  
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = {sx=40,sy=37,sz=0,px=1020,py=482,pz=341}
  	}
  end
  
  --1020;482;341;40;37;0;0
  --game.teleport(40,37,0 , 1000,500,0)
  
  --
  --
  --40;37;0;1014.351563;446.046875;341.004120;81.253815
  --40;37;0;999.546875;501.601563;340.969574;88.958374
  --40;37;0;1003.953125;441.750000;341.015625;90.440735

end)

quest.setScript( 671, "OnWon", function(args)
local elves = {2119,5265,5266,5267}
  
  for index,tcid in elves do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = toWorldPosition("9;48;0;1350.000000;1350.000000;0.000000;0.000000"),
  	}
  	creatureTeleportsAway(tcid,25)
  end
  

end)

quest.setScript( 1905, "OnWon", function(args)
unlockShipPortal(1905,1,"NORTH",args.heroRef)
  unlockShipPortal(1905,2,"NORTH",args.heroRef)

end)

quest.setScript( 669, "OnTaskFulfilled", function(args)
setWoobState {
  	woid = 1018380619,
  	state = "WOOB_INVISIBLE",
    delay = 0.1,
  }

end)

quest.setScript( 718, "OnWon", function(args)
changeCreature {
  	tcid = 2180,
  	setAutoTeleporting = true,
  }

end)

quest.setScript( 718, "OnTaskAwaiting", function(args)
local tcids = {
  	{
  		TCID = 6396,
  		pos = {sx=50;sy=32;sz=0;px=1800;py=700;pz=0},
  		Behaviour = "Enemy_mage_phalanx",
  	},
  	{
  		TCID = 6398,
  		pos = {sx=49;sy=32;sz=0;px=2750;py=250;pz=0},
  		Behaviour = "Enemy_warrior_simple",
  	}
  }
  
  for id,object in tcids do
  	changeCreature {
  		tcid = object.TCID,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = object.pos,
  		speed = 2,
  		followUpBhv = object.Behaviour,
  		clearUnconscious = true,
  		livesRemaining = 0,
  	}
  end
  
  changeCreature {
  	tcid = 2180,
  	clearAutoTeleporting = true,
  	useUnconscious = true,
  	unconsciousTime = 3,
  	livesRemaining = -1,
  }

end)

quest.setScript( 718, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 2180,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 191, "OnCounter", function(args)
if args.state == "TASK_AWAITING" then
  	return "TASKCREATURE_590"
  end
  
  if args.state == "TASK_FULFILLED" then
  	return "TASKCREATURE_574"
  end 

end)

quest.setScript( 1900, "OnWon", function(args)
creatureGotoPosition(4717,{23;36;0;196.500000;79.546875;1099.907349;301.378601})
  
  delay =2;
  creatureGotoPositionD(4723,{23;36;0;133.546875;182.953125;1099.907349;115.319611},3)
  creatureTeleportsAway(4717,40)
  creatureTeleportsAway(4723,40)

end)

quest.setScript( 1762, "OnDeath", function(args)
changeCreature {
    		tcid = 4723,
    		behaviour = "questCreatures",
    		faction = "FACTION_HUMAN",
    		livesRemaining = 0,
    		clearUnconscious = 1
    	}

end)

quest.setScript( 1762, "OnTaskAwaiting", function(args)
changeCreature{
    tcid=4723,
    useUnconscious = true,
    unconsciousTime = 3,
    livesRemaining = 1,
    }

end)

quest.setScript( 1545, "OnTalk", function(args)
if 	getQuestState(3635) == "TASK_FULFILLED" or 
  		getQuestState(3634) == "TASK_FULFILLED" then
  
  	teleportHero {
  		heroRef = heroRef,
  		position = toWorldPosition("22;24;0;985.203125;2766.796875;16.952435;184.927094"),
  		orientation = 184.927094,
  		noEffect = true,
  	}
  else
  	return
  end
  

end)

quest.setScript( 1545, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 1118,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = { 	px = 2055.046875, py = 2230.898438, pz = 272.572845, 
  										sx = 21, 					sy = 26, 					sz = 0 },
  	followUpBhv = "JOB_RICH_STATIST",
  	delay = 4,
  }
  

end)

quest.setScript( 1860, "OnTaskAwaiting", function(args)
setTimer {
  	id = 1860,
  	interval = 1,
  	count = 7,
  }

end)

quest.setScript( 1860, "OnWon", function(args)
tcids = {5161,5162,5163,5164,5165}
  
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "Enemy_warrior_brave",
  		faction = "FACTION_ENEMY_HERO",
  	}
  end
  

end)

quest.setScript( 1860, "OnTaskFulfilled", function(args)
tcids = {5161,5162,5163,5164,5165}
  
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_CHEST1R",
  		delay = 0.1,
  	}
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_INVALID",
  		delay = 2,
  	}
  end
  

end)

quest.setScript( 1860, "OnTimer", function(args)
tcids = {5152,5158,5159}
  
  if args.count == 4 then
  	solveQuest(args.id)
  end
  
  if args.count == 6 then
  	--teleport grossonkel in die mitte
  	creatureTeleportPosition(5160,0.8,{30;25;0;2050;900;133})
  end
  
  if args.count == 7 then
  	--start animation + effekt
  	for index,tcid in tcids do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_MAGICB",
  			effect = "FXTYPE_GEN_SPAWN1_I",
  			effectParam = { 
  				paramtype="position", 
  				position={sx=30;sy=25;sz=0;px=2050;py=900;pz=133},
  				duration=1.2,
  				fxImpact="FXTYPE_GEN_SPAWN1",
  			},
  			loopCount = 1,
  		}
  	end
  end
  

end)

quest.setScript( 1864, "OnWon", function(args)
changeCreature {
  	tcid = 5160,
  	behaviour = "JOB_QUESTSTAGING",
  	effect = "FXTYPE_SMOKEMEDIUMGREY",
  }
  
  destroyCreature {
  	tcid = 5160,
  	splatter = false,
  	delay = 2,
  }
  
  changeCreature {
  	tcid = 5152,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 1882, "OnStation", function(args)
if args.currentStation == 0 and args.id == 1882 then
    	local tcids0 = {2131, 2134, 2133}
    	local xcoords0 = {2313.953125, 2234.648438, 2313.812500}
    	local ycoords0 = {2860.593750, 3028.093750, 3101.375000}
    	local zcoords0 = {0.098846, 0.098850, 0.098835}
    	local position0 = {
    		px = 0,
    		py = 0,
    		pz = 0,
    		sx = 33,
    		sy = 60,
    		sz = -1
  		}
    	for index,tcid in tcids0 do
    			position0.px = xcoords0[index]
    			position0.py = ycoords0[index]
    			position0.pz = zcoords0[index]
    		changeCreature {
    			tcid = tcid,
    			behaviour = "JOB_QUESTSTAGING",
    			gotoPosition = position0,
    			followUpBhv = "questCreatures",
  				effect = "FXTYPE_CHEST4W",
    		}
  --			changeCreature {
  --				tcid = tcid,
  --				effect = "FXTYPE_INVALID",
  --				delay = 2,
  --			}
    	end
    end
    
    if args.currentStation == 1 and args.id == 1882 then
    	local tcids1 = {2135, 2136}
    	local xcoords1 = {2814.109375, 2454.906250}
    	local ycoords1 = {3144.593750, 2499.046875}
    	local zcoords1 = {0.096973, 0.097019}
    	local position1 = {
    		px = 0,
    		py = 0,
    		pz = 0,
    		sx = 33,
    		sy = 60,
    		sz = -1
  		}
    	for index,tcid in tcids1 do
    			position1.px = xcoords1[index]
    			position1.py = ycoords1[index]
    			position1.pz = zcoords1[index]
    		changeCreature {
    			tcid = tcid,
    			behaviour = "JOB_QUESTSTAGING",
    			gotoPosition = position1,
    			followUpBhv = "questCreatures",
  				effect = "FXTYPE_CHEST4W",
    		}
  --			changeCreature {
  --				tcid = tcid,
  --				effect = "FXTYPE_INVALID",
  --				delay = 2,
  --			}
  		end
    end
    
    if args.currentStation == 2 and args.id == 1882 then
    	local tcids2 = {2137, 2138}
    	local xcoords2 = {2532.921875, 2617.000000}
    	local ycoords2 = {2989.000000, 3046.250000}
    	local zcoords2 = {0.096962, 0.089081}
    	local position2 = {
    		px = 0,
    		py = 0,
    		pz = 0,
    		sx = 33,
    		sy = 60,
    		sz = -1
    }
    	for index,tcid in tcids2 do
    			position2.px = xcoords2[index]
    			position2.py = ycoords2[index]
    			position2.pz = zcoords2[index]
    		changeCreature {
    			tcid = tcid,
    			behaviour = "JOB_QUESTSTAGING",
    			gotoPosition = position2,
    			followUpBhv = "questCreatures",
  				effect = "FXTYPE_CHEST4W",
    		}
  --			changeCreature {
  --				tcid = tcid,
  --				effect = "FXTYPE_INVALID",
  --				delay = 2,
  --			}
    	end
    end
    
    if args.currentStation == 3 and args.id == 1882 then
    	local tcids3 = {2132, 2126, 2140}
    	local xcoords3 = {2530.671875, 2529.250000, 2597.601563}
    	local ycoords3 = {2749.265625, 2842.000000, 2927.343750}
    	local zcoords3 = {0.097019, 0.097019, 0.094891}
    	local position3 = {
    		px = 0,
    		py = 0,
    		pz = 0,
    		sx = 33,
    		sy = 60,
    		sz = -1
    }
    	for index,tcid in tcids3 do
    			position3.px = xcoords3[index]
    			position3.py = ycoords3[index]
    			position3.pz = zcoords3[index]
    		changeCreature {
    			tcid = tcid,
    			behaviour = "JOB_QUESTSTAGING",
    			gotoPosition = position3,
    			followUpBhv = "questCreatures",
  				effect = "FXTYPE_CHEST4W",
    		}
  --			changeCreature {
  --				tcid = tcid,
  --				effect = "FXTYPE_INVALID",
  --				delay = 2,
  --			}
    	end
    end
    
    if args.currentStation == 4 and args.id == 1882 then
    	local tcids4 = {2139, 2130}
    	local xcoords4 = {2418.039063, 2450.601563}
    	local ycoords4 = {162.046875, 22.500000}
    	local zcoords4 = {0.090408, 0.090424}
    	local position4 = {
    		px = 0,
    		py = 0,
    		pz = 0,
    		sx = 33,
    		sy = 61,
    		sz = -1
    }
    	for index,tcid in tcids4 do
    			position4.px = xcoords4[index]
    			position4.py = ycoords4[index]
    			position4.pz = zcoords4[index]
    		changeCreature {
    			tcid = tcid,
    			behaviour = "JOB_QUESTSTAGING",
    			gotoPosition = position4,
    			followUpBhv = "questCreatures",
  				effect = "FXTYPE_CHEST4W",
    		}
  --			changeCreature {
  --				tcid = tcid,
  --				effect = "FXTYPE_INVALID",
  --				delay = 2,
  --			}
    	end
    end
    
    if args.currentStation == 5 and args.id == 1882 then
    	local tcids5 = {2128, 2144, 2127}
    	local xcoords5 = {2224.796875, 2066.148438, 2644.796875}
    	local ycoords5 = {73.046875, 14.796875, 75.500000}
    	local zcoords5 = {0.094704, 0.094700, 0.090424}
    	local position5 = {
    		px = 0,
    		py = 0,
    		pz = 0,
    		sx = 33,
    		sy = 61,
    		sz = -1
    }
    	for index,tcid in tcids5 do
    			position5.px = xcoords5[index]
    			position5.py = ycoords5[index]
    			position5.pz = zcoords5[index]
    		changeCreature {
    			tcid = tcid,
    			behaviour = "JOB_QUESTSTAGING",
    			gotoPosition = position5,
    			followUpBhv = "questCreatures",
  				effect = "FXTYPE_CHEST4W",
    		}
  --			changeCreature {
  --				tcid = tcid,
  --				effect = "FXTYPE_INVALID",
  --				delay = 2,
  --			}
    	end
    end
    
    if args.currentStation == 6 and args.id == 1882 then
    	local tcids6 = {2141, 2142, 2125}
    	local xcoords6 = {2222.796875, 2112.500000, 2725.453125}
    	local ycoords6 = {3085.656250, 3070.796875, 3177.203125}
    	local zcoords6 = {0.098850, -0.528564, 0.097019}
    	local position6 = {
    		px = 0,
    		py = 0,
    		pz = 0,
    		sx = 33,
    		sy = 60,
    		sz = -1
    }
    	for index,tcid in tcids6 do
    			position6.px = xcoords6[index]
    			position6.py = ycoords6[index]
    			position6.pz = zcoords6[index]
    		changeCreature {
    			tcid = tcid,
    			behaviour = "JOB_QUESTSTAGING",
    			gotoPosition = position6,
    			followUpBhv = "questCreatures",
  				effect = "FXTYPE_CHEST4W",
    		}
  --			changeCreature {
  --				tcid = tcid,
  --				effect = "FXTYPE_INVALID",
  --				delay = 2,
  --			}
    	end
    end
    
    if args.currentStation == 7 and args.id == 1882 then
    	local tcids7 = {2143, 2129}
    	local xcoords7 = {2258.703125, 2197.546875}
    	local ycoords7 = {2806.250000, 2901.843750}
    	local zcoords7 = {0.098850, 0.098854}
    	local position7 = {
    		px = 0,
    		py = 0,
    		pz = 0,
    		sx = 33,
    		sy = 60,
    		sz = -1
    }
    	for index,tcid in tcids7 do
    			position7.px = xcoords7[index]
    			position7.py = ycoords7[index]
    			position7.pz = zcoords7[index]
    		changeCreature {
    			tcid = tcid,
    			behaviour = "JOB_QUESTSTAGING",
    			gotoPosition = position7,
    			followUpBhv = "questCreatures",
  				effect = "FXTYPE_CHEST4W",
    		}
  --			changeCreature {
  --				tcid = tcid,
  --				effect = "FXTYPE_INVALID",
  --				delay = 2,
  --			}
    	end
    end

end)

quest.setScript( 1377, "OnSetup", function(args)
changeCreature {
  
  	tcid = 1316,
  	mortality = "MORTAL",
  
  }

end)

quest.setScript( 3457, "OnTaskFulfilled", function(args)
local presents = {1036374230,1036374288,1036374324,1036374367,
  									1036374444,1036374479,1036374508,1036374553, 1036300785 }
  
  for i,woid in presents do
  	setWoobState {
  		woid = woid,
  		state = "WOOB_INVALID",
  	}
  end
  

end)

quest.setScript( 3457, "OnStateChange", function(args)
if args.state == "PREFIGHT" then
  	changeCreature {
  		tcid = 9663,
  		behaviour = "Enemy_warrior_brave_ex",
  	}
  end
  

end)

quest.setScript( 3457, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9663,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = 
  		toWorldPosition("57;54;0;472.343750;1781.859375;1436.554443;27.672058"),
  	followUpBhv = "questCreatures"
  }

end)

quest.setScript( 3503, "OnWon", function(args)
destroyCreature {
  	tcid = 9751,
  	delay = 2
  }

end)

quest.setScript( 3503, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 9751,
  	effect = "FXTYPE_HOLOGRAM"
  }

end)

quest.setScript( 3497, "OnWon", function(args)

  changeCreature {
  	tcid = 9727,
  	behaviour = "JOB_QUESTSTAGING",
  	role = "ROLE_INVALID",
  	gotoPosition = {sx=57,sy=54,sz=0,px=180.656,py=879.156,pz=1503.44}
  }
  changeCreature {
  	tcid = 9727,
  	orientation = 214,
  	delay = 22
  }
  changeCreature {
  	tcid = 9727,
  	behaviour = "questCreatures",
  	delay = 25
  }
  	

end)

quest.setScript( 3497, "OnTaskFulfilled", function(args)
--Kampfmeister
  creatureTeleportPosition( 9727,0,{57,54,0 , 650,1550,1542} )
  --Magier
  creatureTeleportPosition ( 9750, 0, {57,54,0,750,750,11545,200})
  
  
  --Rekruten
  local creatures = {9742,9743,9744,9745,9746,9747,9748,9749}
  local positions = {
  	{sx=57,sy=54,sz=0 , px=650,py=1450,pz=1545},
  	{sx=57,sy=54,sz=0 , px=400,py=1350,pz=1543},
  	{sx=57,sy=54,sz=0 , px=550,py=1300,pz=1545},
  	{sx=57,sy=54,sz=0 , px=450,py=1250,pz=1543},
  	{sx=57,sy=54,sz=0 , px=700,py=1050,pz=1545},
  	{sx=57,sy=54,sz=0 , px=450,py=800,pz=1545},
  	{sx=57,sy=54,sz=0 , px=550,py=700,pz=1545},
  	{sx=57,sy=54,sz=0 , px=700,py=750,pz=1545}
  }
  for inc, i in creatures do
  	creatureTeleportPosition ( creatures[inc], 0, {57,54,0 , 550,1700,1508} )
  	changeCreature {
  		tcid = creatures[inc],
  		gotoPosition = positions[inc],
  		followUpBhv = "JOB_MERCENARY",
  		delay = 4
  	}
  end
  
  

end)

quest.setScript( 203, "OnLost", function(args)
changeCreature {
  	tcid = 616, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM13",	--cry
  	loopCount = 10,
  }
  changeCreature {
  	tcid = 616,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 20,
  }

end)

quest.setScript( 203, "OnWon", function(args)
changeCreature {
  	tcid = 616, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM10",	--cheer
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 616,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 3,
  }
  changeCreature {
  	tcid = 621, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM10",	--cheer
  	loopCount = 1,
  	delay = 0.75,
  }
  changeCreature {
  	tcid = 616,
  	behaviour = "JOB_KID",
  	delay = 3.75,
  }
  

end)

quest.setScript( 334, "OnWon", function(args)
changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-DOWN",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 2.72,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLEA",
  	loopCount = 1,
  	delay = 25,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 31.4,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLEB",
  	loopCount = 1,
  	delay = 60,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 66.2,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLEB",
  	loopCount = 1,
  	delay = 240,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 246.2,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLEA",
  	loopCount = 1,
  	delay = 600,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 606.4,
  }
  changeCreature {
  	tcid = 7829,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-TALK",
  	loopCount = 1,
  	delay = 35,
  }
  changeCreature {
  	tcid = 7829,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 41,
  }
  changeCreature {
  	tcid = 7830,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLEA",
  	loopCount = 1,
  	delay = 50,
  }
  changeCreature {
  	tcid = 7830,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 56.2,
  }

end)

quest.setScript( 334, "OnTalk", function(args)
if args.id == 334 and args.state == "TASK_FULFILLED" and args.tcid == 1205 then
  	changeCreature {
  		tcid = 1205,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND-UP",
  		loopCount = 1,
  	}
  	changeCreature {
  		tcid = 1205,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_TALK",
  		loopCount = -1,
  		delay = 2.96,
  	}
  	changeCreature {
  		tcid = 7829,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND_IDLEA",
  		loopCount = 1,
  		delay = 2,
  	}
  	changeCreature {
  		tcid = 7829,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND_IDLE",
  		loopCount = -1,
  		delay = 9.1,
  	}
  end
  
  if args.id == 334 and args.state == "WON" and args.tcid == 1205 then
  	changeCreature {
  		tcid = 1205,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND-TALK",
  		loopCount = 2,
  	}
  	changeCreature {
  		tcid = 1205,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND-IDLE",
  		loopCount = -1,
  		delay = 12.6,
  	}
  end 

end)

quest.setScript( 334, "OnTaskFulfilled", function(args)
local tcids = {7829,7830,1205}
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND-IDLE",
  		loopCount = -1,
  		dont_turn = true,
  		delay = 1,
  	}
  end 

end)

quest.setScript( 1805, "OnWon", function(args)
questCompleted(args)

end)

quest.setScript( 1071, "OnSetup", function(args)
questCompleted(args)
  

end)

quest.setScript( 1071, "OnTalk", function(args)
if args.tcid == 2987 and args.id == 1071 and args.state == "PRECONDS_FULFILLED" then
  	changeCreature {
  		tcid = 2987,
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  		behaviour = "JOB_QUESTSTAGING",
  		dont_turn = true,
  	}
  end

end)

quest.setScript( 1071, "OnStateChange", function(args)
if args.state == "TASK_AWAITING" then
  
  	changeCreature {
  		tcid = 2987,
  		emotion = "ANIM_TYPE_SM22",
  		loopCount = 1,
  		behaviour = "JOB_QUESTSTAGING",
  		mortality = "MORTAL",
  	}
  	killCreature {
  		tcid = 2987,
  		deinitragdoll = false,
  		delay = 2,
  	}
  
  end
  

end)

quest.setScript( 849, "OnTaskAwaiting", function(args)
local tcids = {2504, 2505}
  for i, tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		mortality = "IMMORTAL"
  	}
  end
  

end)

quest.setScript( 849, "OnWon", function(args)
local tcids = {2504, 2505}
  for i, tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		mortality = "MORTAL"
  	}
  end
  

end)

quest.setScript( 1540, "OnTaskAwaiting", function(args)
--Schamane faengt mit seinem Zauber an.
  --Er muss eine Emotion inkl. Effekt abspielen.
  --Effekt / Zauber ansich muss man noch schauen, welcher genommen werden kann.
  
  -- timer soll im sekundeninterval aufgerufen werden (1)
  
  
  setTimer {
   id = 1540,
   interval = 1,
   count = 5,
  }

end)

quest.setScript( 1540, "OnTaskFulfilled", function(args)
showWaterfall()

end)

quest.setScript( 1540, "OnWon", function(args)
questCompleted(args)
  
  creatureTeleportPosition(2115,3,{9,48,0,2413.649902,1816.020020,4069.870117})

end)

quest.setScript( 1540, "OnTimer", function(args)
--
  --  args.counter
  --  args.questid
  --
  
  --
  
  if args.count == 4 then
  	changeCreature {
  		tcid = 2115,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_ENCHANT",
  		effect = "FXTYPE_GEN_NOVA1",
  		loopCount = 1,
  	}
  end
  
  if args.count == 2 then
  	solveQuest(args.id)
  end
  

end)

quest.setScript( 1832, "OnTaskFulfilled", function(args)
-- plain weather
  WeatherDefinitions.quest_1787_16_53 = {sx=16,sy=53,sz=0,density=0,flags=0}
  WeatherDefinitions.quest_1787_17_53 = {sx=17,sy=53,sz=0,density=0,flags=0}
  WeatherDefinitions.quest_1787_16_52 = {sx=16,sy=52,sz=0,density=0,flags=0}
  WeatherDefinitions.quest_1787_17_52 = {sx=17,sy=52,sz=0,density=0,flags=0}
  
  updateWeather()
  
  -- delete weather
  WeatherDefinitions.quest_1787_16_53 = nil
  WeatherDefinitions.quest_1787_17_53 = nil
  WeatherDefinitions.quest_1787_16_52 = nil
  WeatherDefinitions.quest_1787_17_52 = nil
  

end)

quest.setScript( 338, "OnStateChange", function(args)
local tcids = {7801,7803,1205}
  if args.state == "PRECONDS_FULFILLED" then
  	for index,tcid in tcids do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_SITGROUND-IDLE",
  			loopCount = -1,
  			dont_turn = true,
  		}
  	end
  end 

end)

quest.setScript( 338, "OnTaskAwaiting", function(args)
setTimer {
  	id = 338,
  	interval = 1,
  	count = 18,
  }

end)

quest.setScript( 338, "OnTimer", function(args)
local tcids = {1199, 1205}
  
  if args.count == 18 then
  	changeCreature {
  		tcid = 1205, --Prinz
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = {sx=31,sy=17,sz=0,px=393.398438,py=376.699219,pz=651.217346},
  		followUpBhv = "questCreatures",
  		followUpAngle = 326.884460,
  		--delay = 2.96
  	}
  end
  if args.count == 16 then 
  	teleport {
  		tcid = 1205, --Prinz
  		position = {sx=31,sy=17,sz=0,px=393.398438,py=376.699219,pz=651.217346},
  		orientation = 326.884460,
  	}
  end
  if args.count == 15 then
  	changeCreature {
  		tcid = 1205,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_TALK",
  		loopCount = 1,
  	}
  	changeCreature {
  		tcid = 1199,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_TALK",
  		loopCount = 1,
  		delay = 0.9,
  	}
  end
  if args.count == 10 then
  	for index,tcid in tcids do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_EM01",
  			loopCount = 1,
  		}
  	end
  end
  if args.count == 9 then
  	for index,tcid in tcids do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "questCreatures",
  			--anschliessend muessten sie nurnoch den helden fokussieren...
  		}
  	end
  	solveQuest(args.id)
  end 

end)

quest.setScript( 338, "OnTalk", function(args)
if 	args.state 	== "PRECONDS_FULFILLED" 	and 
  		args.tcid 	== 1205 									and 
  		args.id 		== 338 										then
  
  	changeCreature {
  		tcid = 1205,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND-UP",
  		loopCount = 1,
  	}
  	changeCreature {
  		tcid = 1205,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_TALK",
  		loopCount = -1,
  		delay = 2.96,
  	}
  	removeFromGroup {
  		tcid = 1199,
  	}
  	changeCreature {
  		tcid = 1199, --assim
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = {sx=31,sy=17,sz=0,px=370.5,py=317.539063,pz=650.299683},
  		followUpBhv = "questCreatures",
  		followUpAngle = 155.083527,
  	}
  	teleport {
  		tcid = 1199,--assim
  		position = {sx=31,sy=17,sz=0,px=370.5,py=317.539063,pz=650.299683},
  		orientation = 155.083527,
  		delay = 4,
  	}
  end
  
  
  

end)

quest.setScript( 2079, "OnWon", function(args)
changeCreature {
    tcid = 1339, 
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM13",	--salute
    loopCount = 1,
  }
  changeCreature {
    tcid = 1339, 
    behaviour = "JOB_RICH_STATIST",
    delay = 5,
  }

end)

quest.setScript( 1806, "OnWon", function(args)
questCompleted(args)

end)

quest.setScript( 712, "OnTaskAwaiting", function(args)
setWoobEffect {
  	woid = 1021408183,
  	effect = "FXTYPE_PORTAL2",
  }
  setWoobEffect {
  	woid = 1023338300,
  	effect = "FXTYPE_PORTAL2",
  }

end)

quest.setScript( 2266, "OnTalk", function(args)
if args.tcid==6858 and args.state=="TASK_AWAITING" and args.id == 2266 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2266, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6858,0,{47;30;-1;2664.000000;784.851563;-0.016434;259.315094})

end)

quest.setScript( 1807, "OnWon", function(args)
questCompleted(args)

end)

quest.setScript( 2728, "OnWon", function(args)
changeCreature {
  	tcid = 7847,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7847,
  	behaviour = "questCreatures",
  	delay = 4
  }

end)

quest.setScript( 2216, "OnCounter", function(args)
return "TASKCREATURE_6776"

end)

quest.setScript( 3067, "OnDeath", function(args)
if args.tcid == 8065 then
    looseQuest(3067)
  end
  

end)

quest.setScript( 3067, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 8065,
    mortality = "IMMORTAL",
  }

end)

quest.setScript( 3070, "OnWon", function(args)
changeCreature {
    tcid = 8554,
    mortality = "MORTAL",
    role = "ROLE_INVALID",
  }
  killCreature {
    tcid = 8554,
    delay = 0.5,
  }

end)

quest.setScript( 3070, "OnDeath", function(args)
if args.tcid == 8554 then
    changeCreature {
      tcid = 8554,
      behaviour = "JOB_QUESTSTAGING",
      emotion = "ANIM_TYPE_SM20",
      loopCount = -1,
      dont_turn = true,
      clearAutoTeleporting = true,
      delay = 1,
    }
  end

end)

quest.setScript( 3070, "OnTaskAwaiting", function(args)
local robber = {
    {
      tcid = 8554,
      fub = "Enemy_warrior_brave_ex",
      pos = toWorldPosition("39;23;0;2715.750000;2300.648438;39.713699;225.629593"),
    },
    {
      tcid = 8555,
      fub = "Enemy_warrior_brave_ex",
      pos = toWorldPosition("39;23;0;2727.320313;2643.593750;50.103172;302.228760"),
    },
    {
      tcid = 8556,
      fub = "Enemy_hunter",
      pos = toWorldPosition("39;23;0;2471.640625;2695.320313;39.881748;23.666138"),
    },
    {
      tcid = 8557,
      fub = "Enemy_warrior_brave_ex",
      pos = toWorldPosition("39;23;0;2297.453125;2419.250000;39.881630;101.179199"),
    }
  }
  changeCreature {
    tcid = 8554,
    useUnconscious = true,
    livesRemaining = 1,
    unconsciousTime = 1,
  }
  for id,object in robber do
    changeCreature {
      tcid = object.tcid,
      behaviour = "JOB_QUESTSTAGING",
      gotoPosition = object.pos,
      speed = 2,
      followUpBhv = object.fub,
      faction = "FACTION_ENEMY_HERO",
      role = "ROLE_ATTACKER",
    }
  end 
  
  changeCreature {
    tcid = 8065,
    mortality = "MORTAL",
  }

end)

quest.setScript( 2119, "OnTaskAwaiting", function(args)
--Die ersten 3 Gegner werden rangespawnt - Siehe OnDeath fuer weitere Gruppen
  SW_Quest2119Temp = 9
  local TCspawn1 = {6349, 6350, 6351}
  local position = {
  {20,43,0 , 0,450,0},
  {20,43,0 , 100,500,0},
  {20,43,0 , 150,400,0}
  }
  
  for index, tcid in TCspawn1 do
  	teleport {
  		tcid = tcid,
  		effect = "FXTYPE_GEN_TELEPORT",
  		position = { sx=position[index][1], sy=position[index][2], sz=position[index][3],
  							px=position[index][4], py=position[index][5], pz=position[index][6] },
  		delay = 1
  	}
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_INVALID",
  		delay = 2
  	}
  	changeCreature{
  		tcid = tcid,
  		behaviour = "Enemy_warrior_brave",
  		role = "ROLE_ATTACKER",
  		delay = 2.1,
  		livesRemaining = 0
  	}
  end
  changeCreature{
  	tcid = 6334,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_RAIS-HANDS",
  	loopCount = 1,
  	delay = 1
  }
  changeCreature{
  	tcid = 6334,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = { sx=20, sy=43, sz=0, px=200, py=600, pz=2504 },
  	Speed = 2,
  	followUpAngle = 0,
  	delay = 4,
  	followUpBhv = "questCreatures"
  }
  
  

end)

quest.setScript( 2119, "OnDeath", function(args)
SW_Quest2119Temp = SW_Quest2119Temp - 1
  if SW_Quest2119Temp == 6 then
  	local TCspawn2 = {6352, 6353, 6354}
  	local position = {
  		{20,43,0 , 150,650,0},
  		{20,43,0 , 250,600,0},
  		{20,43,0 , 250,700,0}
  	}
  
  	for index, tcid in TCspawn2 do
  		teleport {
  			tcid = tcid,
  			effect = "FXTYPE_GEN_TELEPORT",
  			position = { sx=position[index][1], sy=position[index][2], sz=position[index][3],
  								px=position[index][4], py=position[index][5], pz=position[index][6] },
  			delay = 1
  		}
  		changeCreature {
  			tcid = tcid,
  			effect = "FXTYPE_INVALID",
  			delay = 2
  		}
  		changeCreature{
  			tcid = tcid,
  			behaviour = "Enemy_warrior_brave",
  			role = "ROLE_ATTACKER",
  			delay = 2.1,
  			livesRemaining = 0
  		}
  	end
  	changeCreature{
  		tcid = 6334,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_RAIS-HANDS",
  		loopCount = 1,
  		delay = 1
  	}
  	changeCreature{
  		tcid = 6334,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = { sx=20, sy=43, sz=0, px=239, py=825, pz=2504 },
  		Speed = 2,
  		followUpAngle = 0,
  		followUpBhv = "questCreatures",
  		delay = 4
  	}
  elseif SW_Quest2119Temp == 3 then
  	local TCspawn3 = {6355, 6356, 6357}
  	local position = {
  		{20,43,0 , 150,900,0},
  		{20,43,0 , 250,850,0},
  		{20,43,0 , 200,950,0}
  	}
  
  	for index, tcid in TCspawn3 do
  		teleport {
  			tcid = tcid,
  			effect = "FXTYPE_GEN_TELEPORT",
  			position = { sx=position[index][1], sy=position[index][2], sz=position[index][3],
  								px=position[index][4], py=position[index][5], pz=position[index][6] },
  			delay = 1
  		}
  		changeCreature {
  			tcid = tcid,
  			effect = "FXTYPE_INVALID",
  			delay = 2
  		}
  		changeCreature{
  			tcid = tcid,
  			behaviour = "Enemy_warrior_brave",
  			role = "ROLE_ATTACKER",
  			delay = 2.1,
  			livesRemaining = 0
  		}
  	end
  	changeCreature{
  		tcid = 6334,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_RAIS-HANDS",
  		loopCount = 1,
  		delay = 1
  	}
  	changeCreature{
  		tcid = 6334,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = { sx=20, sy=43, sz=0, px=287, py=1096, pz=2500 },
  		Speed = 2,
  		followUpAngle = 0,
  		delay = 4,
  		followUpBhv = "questCreatures",
  	}
  end
  

end)

quest.setScript( 1570, "OnWon", function(args)
--pos gerwein
  --47;45;-2;1523.160034;2579.949951;3339.800049;274.000000
  
  --pos hero
  --47;45;0;1353.000000;2558.046875;3325.389404;122.799515
  
  changeCreature {
  	tcid = 4228,
  	effect = "FXTYPE_GEN_TELEPORT",
  }
  changeCreature {
  	tcid = 4228,
  	effect = "FXTYPE_GEN_SUMMON",
  	delay = 2,
  }
  creatureTeleportsAway(4228,2)
  
  teleportTeam(1570,"47;45;0;1450.953125;2582.671875;3331.689941;95.236206")
  
  changeCreature {
  	tcid = 9119,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 10,
  }

end)

quest.setScript( 2799, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 8002,
  --	behaviour = "Enemy_warrior_brave",
  --	role = "ROLE_ATTACKER",
  --	faction = "ENEMY_HERO",
  	livesRemaining = 1,
  	useUnconscious = true,
    unconsciousTime = 2,
  }
  

end)

quest.setScript( 2799, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 8002,
  	role = "ROLE_DIALOG",
  	behaviour = "questCreatures",
  	livesRemaining = 0,
  	clearUnconscious = true,
  }

end)

quest.setScript( 2800, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 8002,
  	mortality = "MORTAL",
  }

end)

quest.setScript( 2618, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 7560,
  	mortality = "IMMORTAL"
  }

end)

quest.setScript( 1647, "OnSetup", function(args)
for index,id in {4381,4419} do
  	changeCreature{
  		tcid = id,
  		useUnconscious = true,
  		livesRemaining = 255,
  		unconsciousTime = 2,
  		clearAutoTeleporting = true,
  	}
  end
  

end)

quest.setScript( 703, "OnWon", function(args)
--2124
  
  changeCreature {
  	tcid = 2124,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=33,sy=55,sz=-1,px=162.953125,py=3012.843750,pz=-151.596436},
  	followUpBhv = "questCreatures",
  	delay = 5,
  }

end)

quest.setScript( 1996, "OnSetup", function(args)
changeCreature {
  	tcid = 5757,
  	behaviour = "JOB_QUESSTSTAGING",
  	emotion = "ANIM_TYPE_SM22",
  	loopCount = -1,
  	mortality = "MORTAL",
  }
  killCreature {
  	tcid=5757,
  	deinitragdoll = false,
  	delay = 2,
  }

end)

quest.setScript( 1996, "OnTalk", function(args)
if args.id == 1996 and args.tcid == 5757 and args.state == "PRECONDS_FULFILLED" then
  	changeCreature {
  		tcid = 5757,
  		behaviour = "JOB_QUESSTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  end
  		

end)

quest.setScript( 1996, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then 
  	changeCreature {
  		tcid = 5757,
  		behaviour = "JOB_QUESSTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  	}
  end
  		

end)

quest.setScript( 1650, "OnSetup", function(args)
--changeCreature {
  --	tcid = 4389,
  --	clearAutoTeleporting = true,
  --}

end)

quest.setScript( 1650, "OnWon", function(args)
-- not yet implemented:
  --changeFactionRelation ( "FACTION_HERO_BAD", "FACTION_HUMAN_MASC", "ENEMY")
  
  -- not yet implemented:
  --changeFactionRelation ( "FACTION_HERO_BAD", "FACTION_HUMAN_CRUSADE", "FRIEND")

end)

quest.setScript( 194, "OnCounter", function(args)
if args.state == "TASK_AWAITING" then
  	return "TASKCREATURE_5282"
  end
  if args.state == "TASK_FULFILLED" then
  	return "TASKCREATURE_574"
  end
  

end)

quest.setScript( 2917, "OnTalk", function(args)
if args.tcid==7858 and args.state=="TASK_AWAITING" and args.id == 2917 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2916, "OnTalk", function(args)
if args.tcid==7857 and args.state=="TASK_AWAITING" and args.id == 2916 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2915, "OnTalk", function(args)
if args.tcid==7856 and args.state=="TASK_AWAITING" and args.id == 2915 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2914, "OnTalk", function(args)
if args.tcid==7855 and args.state=="TASK_AWAITING" and args.id == 2914 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 727, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 2201,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=39,sy=58,sz=-2,px=2715.125000,py=900.421875,pz=96.421860},
  	followUpBhv = "questCreatures",
  	delay = 1,
  }
  creatureTeleportsAway(2201,4)

end)

quest.setScript( 727, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.id == 727 and args.tcid == 2002 then
  	changeCreature {
  		tcid = 2202,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_CREATE-JEWELERY",
  		loopCount = 1,
  		bubble = 11,
  		action = "ACTION_CREATE_JEWELLERY",
  		delay = 30,
  	}
  end
  

end)

quest.setScript( 2920, "OnTalk", function(args)
if args.tcid==7861 and args.state=="TASK_AWAITING" and args.id == 2920 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2919, "OnTalk", function(args)
if args.tcid==7860 and args.state=="TASK_AWAITING" and args.id == 2919 then
  	return bueroQuestTalk()
  end
  

end)

quest.setScript( 2918, "OnTalk", function(args)
if args.tcid==7859 and args.state=="TASK_AWAITING" and args.id == 2918 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2925, "OnTalk", function(args)
if args.tcid==7855 and args.state=="TASK_AWAITING" and args.id == 2925 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2925, "OnTaskFulfilled", function(args)
creatureTeleportPosition(7855,0,{47;30;-2;2131.796875;98.273438;-0.006371;7.525757})

end)

quest.setScript( 2926, "OnTalk", function(args)
if args.tcid==7856 and args.state=="TASK_AWAITING" and args.id == 2926 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2926, "OnTaskFulfilled", function(args)
creatureTeleportPosition(7856,0,{49;30;-1;1968.343750;2109.101563;-0.012749;211.246918})

end)

quest.setScript( 1595, "OnTalk", function(args)

  -- random idle texts:
  -- tcid=targetperson
  -- state: idle text will be offered after the quest has been won
  
  if args.tcid==4257 and args.state=="WON" then
  	local lokaids = {	"QUEST_1595_IDLE_01","QUEST_1595_IDLE_02",
  										"QUEST_1595_IDLE_03","QUEST_1595_IDLE_04"}
  	local index = 1 + tonumber( math.floor( math.random() * 4 ) )
  	return lokaids[index]
  end
  

end)

quest.setScript( 1694, "OnPrecondsFulfilled", function(args)
-- get rid of silent rescue quest
  solveQuest { id=1693 }

end)

quest.setScript( 1793, "OnWon", function(args)
questCompleted(args)

end)

quest.setScript( 1788, "OnWon", function(args)
questCompleted(args)

end)

quest.setScript( 2891, "OnWon", function(args)
changeCreature {
  	tcid = 8242,
  	behaviour = "JOB_CASTER",
  	merchantType = "MERCHANT_COMBOMASTER",
  }
  changeCreature {
  	tcid = 8253,
  	mortality = "MORTAL",
  	behaviour = "JOB_KID",
  }

end)

quest.setScript( 2891, "OnDeath", function(args)
if args.tcid == 8252 then
    changeCreature {
  		tcid = 8253,
  		visible = true,
  		faction = "FACTION_HIGHELVE",
  		delay = 0.1,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = toWorldPosition("23;28;0;402.437500;363.304688;14.554901;267.552063"),
  		speed = 1,
  		followUpAngle = 0,
  		followUpBhv = "questCreatures",
    }
  end
  

end)

quest.setScript( 2891, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 8253,
  	mortality = "IMMORTAL",
  	faction = "QUEST_VICTIM",
  	visible = false,
  	delay = 0.1,
  }
  changeCreature {
  	tcid = 8252,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_KE01",
  	loopCount = -1,
  	delay = 0.1,
  }

end)

quest.setScript( 2082, "OnWon", function(args)
changeCreature {
  	tcid = 6183,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_MAGICB",
  	effect = "FXTYPE_GEN_SPAWN1_I",
  	effectParam = { 
  		paramtype="position", 
  		position={sx=43;sy=56;sz=0;px=500;py=2000;pz=0},
  		duration=1.2,
  		fxImpact="FXTYPE_GEN_SPAWN1",
  	},
  	loopCount = 1,
  }
  
  creatureTeleportsAway (6183, 4)
  --43;56;-1;750.000000;2900.000000;0.000000;0.000000

end)

quest.setScript( 2928, "OnTalk", function(args)
if args.tcid==7858 and args.state=="TASK_AWAITING" and args.id == 2928 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2928, "OnTaskFulfilled", function(args)
creatureTeleportPosition(7858,0,{49;30;-1;1155.687500;2308.671875;-0.008171;84.881165})

end)

quest.setScript( 1754, "OnTalk", function(args)
if args.tcid == 4664 and args.state == "TASK_FULFILLED" then
  	addGold(100)
  end
  

end)

quest.setScript( 1754, "OnWon", function(args)
changeCreature {
  	tcid = 4664,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM27",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 4664,
  	behaviour = "questCreatures",
  	delay = 2
  }

end)

quest.setScript( 2929, "OnTalk", function(args)
if args.tcid==7859 and args.state=="TASK_AWAITING" and args.id == 2929 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2929, "OnTaskFulfilled", function(args)
creatureTeleportPosition(7859,0,{49;30;-1;1175.406250;2493.648438;-0.008171;73.764587})

end)

quest.setScript( 2739, "OnWon", function(args)
local ids = {7908,7909,7910,7911,7912}
  for i,id in ids do
  	doEmote(id, "ANIM_TYPE_ATTACKA",-1,math.random()*5)
  end
  

end)

quest.setScript( 1067, "OnWon", function(args)
questCompleted(args)

end)

quest.setScript( 1067, "OnSetup", function(args)
cutscene_HE_good(args)
  

end)

quest.setScript( 1067, "OnTaskFulfilled", function(args)
local tcids = {7503,7504,7505,7506}
  changeCreature {
  	tcid = 2986,
  	role = "ROLE_INVALID",
  	faction="FACTION_FRIEND_HERO_ALL",
  	behaviour="QUESTJOB_KILL_RICH",
  	mortality = "IMMORTAL",
  }
  local delayedApplause = 0.0
  for index,tcid in tcids do
  	local bubble = nil
  	if tcid == 7506 then
  		bubble = 1
  	end
  	if tcid == 7503 then
  		bubble = 1
  	end
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM04",
  		loopCount = 2,
      delay = delayedApplause,
  		bubble = bubble,
  	}
    delayedApplause = delayedApplause + 0.1
  end 
  changeCreature {
  	tcid = 7506,
  	behaviour = "JOB_CASTER",
  	delay = 6,
  }
  
  feedback = nil

end)

quest.setScript( 3496, "OnTaskAwaiting", function(args)
unlockShipPortal(3496,4,"NORTH",args.heroRef)
  unlockShipPortal(3496,7,"NORTH",args.heroRef)

end)

quest.setScript( 2211, "OnStation", function(args)
if args.woid == 1021680894 then
  creatureTeleportPosition(7510, 0, {36,12,0,2601.046,1920.75,1255.537,327} )
  changeCreature {
  		tcid = 7510,
  		visible = true,
  		role="ROLE_DIALOG",
  	}
  setWoobEffect {
      woid = 1021680894,
      effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
     }
  
  end
  

end)

quest.setScript( 2211, "OnTaskAwaiting", function(args)
changeCreature {
  	role = "ROLE_INVALID",
  	tcid = 7510,
  	visible = false
  }
  

end)

quest.setScript( 2211, "OnTaskFulfilled", function(args)
destroyCreature {
   	tcid = 7510,
   	splatter = true,
   	delay = 2
  }
  

end)

quest.setScript( 2211, "OnPrecondsFulfilled", function(args)
destroyCreature {
   	tcid = 6332,			-- james orkut, use clone from now on
  }
  

end)

quest.setScript( 759, "OnWon", function(args)
--DUMMY TELEPORT - Wird ersetzt, sobald der Captain richtig funzt
  --teleportTeam(759,"18;3;0;3050.000000;1450.000000;0.000000;0.000000")
  
  unlockShipPortal(759,4,"SOUTH",args.heroRef)
  unlockShipPortal(759,3,"SOUTH",args.heroRef)

end)

quest.setScript( 759, "OnTaskFulfilled", function(args)
creatureTeleportsAway(9522,1)

end)

quest.setScript( 759, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9522,
  	visible = false,
  }
  teleport {
  	tcid = 1186,
  	position = {sx=0;sy=0;sz=0;px=0;py=0;pz=0},
  	orientation = 0,
  }

end)

quest.setScript( 759, "OnStation", function(args)
if args.currentStation == 0 then
  	teleport {
  		tcid = 1186,
  		position = {sx=0;sy=0;sz=0;px=0;py=0;pz=0},
  		orientation = 0,
  	}
  	changeCreature {
  		tcid = 9522,
  		visible = true,
  	}
  	changeCreature {
  		tcid = 9522,
  		effect = "FXTYPE_HOLOGRAM",
  		delay = 0.1,
  	}
  end 

end)

quest.setScript( 448, "OnPrecondsFulfilled", function(args)
changeCreature {
    tcid = 1610,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_SM20",
    loopCount = -1,
  	dont_turn = true,
  }

end)

quest.setScript( 448, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 1610 and args.id == 448 then
  changeCreature {
    tcid = 1610,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_SM21",
    loopCount = -1,
  }
  end
  
  if args.state == "TASK_FULFILLED" and args.tcid == 1610 and args.id == 448 then
  	changeCreature {
  		tcid = 1610,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  end
  

end)

quest.setScript( 448, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 1610,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  }

end)

quest.setScript( 448, "OnWon", function(args)
changeCreature {
  	tcid = 1610,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  }
  
  changeCreature {
  	tcid = 1615,
  	behaviour = "JOB_QUESTSTAGING",
    gotoPosition = toWorldPosition(""),
  }
  changeCreature {
    tcid = 1615,
    behaviour = "JOB_QUESTSTAGING",
    gotoPosition = {sx=0,sy=0,sz=-1,px=0,py=0,pz=0},
  	delay = 3,
  }
  teleport {
    tcid = 1615,
    position = toWorldPosition("34;8;0;831.187500;15.177734;-149.631226;263.502197"),
    orientation = 263.502197,
  	delay = 3.1,
  }
  changeCreature {
    tcid = 1615,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_KNEE-IDLE",
    loopCount = -1,
    delay = 3.4,
  }
  changeCreature {
    tcid = 1615,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_KNEE-UP",
    loopCount = 1,
  	delay = 6.4,
  }
  changeCreature {
    tcid = 1615,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_IDLE",
    loopCount = 1,
    delay = 8,
  }
  changeCreature {
  	tcid = 1610,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_LAYDOWN-UP",
    delay = 8,
  }
  changeCreature {
    tcid = 1610,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_IDLE",
    delay = 10,
  }
  changeCreature {
    tcid = 1610,
    behaviour = "JOB_QUESTSTAGING",
    gotoPosition = toWorldPosition("33;7;0;159.046875;1438.650391;173.538040;259.882172"),
    delay = 11,
  	followUpBhv = "questCreatures",
  }
  changeCreature {
    tcid = 1615,
    behaviour = "JOB_QUESTSTAGING",
    gotoPosition = toWorldPosition("33;7;0;158.250000;1372.300781;174.749908;268.793488"),
    delay = 11,
  	followUpBhv = "questCreatures",
  }
  local pos1 = toWorldPosition("31;7;0;1677.429688;2035.744141;46.073093;319.398712")
  local pos2 = toWorldPosition("31;7;0;1629.351563;1959.400391;46.548973;142.717834")
  creatureTeleportPosition(1610,40,pos1)
  creatureTeleportPosition(1615,40,pos2)
  changeCreature {
  	tcid = 1610,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_SITGROUND-IDLE",
    loopCount = -1,
    delay = 45,
  }
  changeCreature {
  	tcid = 1615,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_SITGROUND-IDLE",
    loopCount = -1,
  	delay = 45,
  }

end)

quest.setScript( 1604, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	tcids = {4074,4075,4076,4077,4078,4079,4080,4082} 
  	for index,tcid in tcids do
  		changeCreature{
  			tcid = tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_SM23",
  			loopCount = -1,
  			dont_turn = true,
  		}
  	end
  end
  

end)

quest.setScript( 1604, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 4074,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM22",
  	loopCount = -1,
  	mortality = "MORTAL",
  	role = "ROLE_INVALID",
  }
  killCreature {
  	tcid = 4074,
  	delay = 2,
  }

end)

quest.setScript( 1604, "OnTalk", function(args)
if args.tcid == 4074 then 
  changeCreature{
  	tcid = 4074,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM21",
  	loopCount = -1
  }
  end
  

end)

quest.setScript( 2276, "OnStation", function(args)
changeCreature
  	{
    	tcid = 6916,
    	mortality = "MORTAL",
  		behaviour = "Enemy_warrior_kicknrush",
    }
  changeCreature
  	{
    	tcid = 6918,
    	mortality = "MORTAL",
  		behaviour = "Enemy_warrior_kicknrush",
    }
  changeCreature
  	{
    	tcid = 6919,
    	mortality = "MORTAL",
  		behaviour = "Enemy_warrior_kicknrush",
    }
  changeCreature
  	{
    	tcid = 6920,
    	mortality = "MORTAL",
  		behaviour = "Enemy_warrior_kicknrush",
    }
  changeCreature
  	{
    	tcid = 6921,
    	mortality = "MORTAL",
  		behaviour = "Enemy_warrior_kicknrush",
    }
  

end)

quest.setScript( 2290, "OnStation", function(args)
changeCreature
  	{
    	tcid = 6938,
    	mortality = "MORTAL",
  		behaviour = "Enemy_warrior_kicknrush",
    }

end)

quest.setScript( 981, "OnTaskFulfilled", function(args)
--local pos = {41;10;0;1554.000000;2789.000000;387.573853;331.049011}
  --creatureTeleportPosition(2852, 0, {41,10,0, 1550,2800,4333,331})
  

end)

quest.setScript( 3501, "OnCounter", function(args)
return "CREATURE_1934"

end)

quest.setScript( 3501, "OnPrecondsFulfilled", function(args)
changeCreature {
  	tcid = 9751,
  	effect = "FXTYPE_HOLOGRAM",
  	delay = 1
  }

end)

quest.setScript( 3501, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 9751,
  	effect = "FXTYPE_HOLOGRAM"
  }

end)

quest.setScript( 2904, "OnSetup", function(args)
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1023597580}

end)

quest.setScript( 2122, "OnStateChange", function(args)
--local fight_lizards = {6420, 6412}
  local statist_lizards = {7372,7373,7374,7375,7376,7377,7378}
  local food = {7379,7380,7381,7382,7383,7384,7385,7386}
  if args.state == "PRECONDS_FULFILLED" then
  --	for index,tcid in fight_lizards do
  --		changeCreature {
  --			tcid = tcid,
  --			behaviour = "JOB_QUESTSTAGING",
  --			mortality = "IMMORTAL",
  --			dont_turn = true,
  --			emotion = "ANIM_TYPE_SM20",
  --			role = "ROLE_INVALID",
  --			loopCount = -1,
  --		}
  --	end
  	for index,tcid in statist_lizards do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			mortality = "IMMORTAL",
  			dont_turn = true,
  			emotion = "ANIM_TYPE_SM20",
  			role = "ROLE_INVALID",
  			loopCount = -1,
  		}
  	end
  	for index,tcid in food do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			mortality = "IMMORTAL",
  			dont_turn = true,
  			emotion = "ANIM_TYPE_SM01",
  			role = "ROLE_INVALID",
  			loopCount = -1,
  		}
  	end
  end 

end)

quest.setScript( 2122, "OnDeath", function(args)
--6420, 6412 --> SLEEP
  local lizards = {}
  lizards[1] = {
  	tcid = 6411, --hunter
  	alive = true,
  	behaviour = "Enemy_warrior_simple_artillery",
  }
  lizards[2] = {
  	tcid = 6413, --officer
  	alive = true,
  	behaviour = "Enemy_warrior_kicknrush",
  }
  lizards[3] = {
  	tcid = 6414, --priest
  	alive = true,
  	behaviour = "Enemy_mage_phalanx",
  }
  lizards[4] = {
  	tcid = 6415, --priest
  	alive = true,
  	behaviour = "Enemy_mage_phalanx",
  }
  lizards[5] = {
  	tcid = 6417, --warrior
  	alive = true,
  	behaviour = "Enemy_warrior_simple",
  }
  lizards[6] = {
  	tcid = 6418, --warrior
  	alive = true,
  	behaviour = "Enemy_warrior_simple",
  }
  lizards[7] = {
  	tcid = 6419, --warrior
  	alive = true,
  	behaviour = "Enemy_warrior_simple",
  }
  
  if args.tcid == 6411 then
  	lizards[1].alive = false,
  	changeCreature {
  		tcid = lizards[1].tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		mortality = "IMMORTAL",
  		loopCount = -1,
  	}
  end
  if args.tcid == 6413 then
  	lizards[2].alive = false,
  	changeCreature {
  		tcid = lizards[2].tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		mortality = "IMMORTAL",
  		loopCount = -1,
  	}
  end
  if args.tcid == 6414 then
  	lizards[3].alive = false,
  	changeCreature {
  		tcid = lizards[3].tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		mortality = "IMMORTAL",
  		loopCount = -1,
  	}
  end
  if args.tcid == 6415 then
  	lizards[4].alive = false,
  	changeCreature {
  		tcid = lizards[4].tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		mortality = "IMMORTAL",
  		loopCount = -1,
  	}
  end
  if args.tcid == 6417 then
  	lizards[5].alive = false,
  	changeCreature {
  		tcid = lizards[5].tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		mortality = "IMMORTAL",
  		loopCount = -1,
  	}
  end
  if args.tcid == 6418 then
  	lizards[6].alive = false,
  	changeCreature {
  		tcid = lizards[5].tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		mortality = "IMMORTAL",
  		loopCount = -1,
  	}
  end
  if args.tcid == 6419 then
  	lizards[7].alive = false,
  	changeCreature {
  		tcid = lizards[5].tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		mortality = "IMMORTAL",
  		loopCount = -1,
  	}
  end
  
  if args.tcid == 6360 then --wenn das Nebelmonster tot ist, werden die schlafenden creatures wieder aufstehen
  	for i,object in lizards do
  		if lizards[i].alive == false then
  			changeCreature {
  				tcid = lizards[i].tcid,
  				behaviour = "JOB_QUESTSTAGING",
  				emotion = "ANIM_TYPE_IDLE",
  				loopCount = 1,
  			}
  			changeCreature {
  				tcid = lizards[i].tcid,
  				behaviour = lizards[i].behaviour,
  				delay = 3,
  			}
  		end
  	end
  end

end)

quest.setScript( 2122, "OnTaskAwaiting", function(args)
local tcids = {6413,6417}
  
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		useUnconscious = true,
  		livesRemaining = 255,
  		unconsciousTime =3,
  	}
  end
  
  changeCreature {
  	tcid = 6360,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 2122, "OnTaskFulfilled", function(args)
--local fight_lizards = {
  --	{
  --		tcid = 6420,
  --		behaviour = "Enemy_mage_phalanx",
  --	},
  --	{
  --		tcid = 6412,
  --		behaviour = "Enemy_warrior_simple_artillery",
  --	}
  --}
  local statist_lizards = {
  	{
  		tcid = 7372,
  		behaviour = "JOB_RICH_STATIST",
  	},
  	{
  		tcid = 7373,
  		behaviour = "JOB_RICH_STATIST",
  	},
  	{
  		tcid = 7374,
  		behaviour = "JOB_RICH_STATIST",
  	},
  	{
  		tcid = 7375,
  		behaviour = "JOB_RICH_STATIST",
  	},
  	{
  		tcid = 7376,
  		behaviour = "JOB_RICH_STATIST",
  	},
  	{
  		tcid = 7377,
  		behaviour = "JOB_RICH_STATIST",
  	},
  	{
  		tcid = 7378,
  		behaviour = "JOB_RICH_STATIST",
  	}
  }
  local food = {
  	{
  		tcid = 7379,
  		behaviour = "DOG",
  	},
  	{
  		tcid = 7380,
  		behaviour = "DOG",
  	},
  	{
  		tcid = 7381,
  		behaviour = "DOG",
  	},
  	{
  		tcid = 7382,
  		behaviour = "cat",
  	},
  	{
  		tcid = 7383,
  		behaviour = "cat",
  	},
  	{
  		tcid = 7384,
  		behaviour = "sheep",
  	},
  	{
  		tcid = 7385,
  		behaviour = "sheep",
  	},
  	{
  		tcid = 7386,
  		behaviour = "sheep",
  	}
  }
  --DOG cat sheep
  --for id,object in fight_lizards do
  --	changeCreature {
  --		tcid = object.tcid,
  --		behaviour = object.tcid,
  --		mortality = "IMMORTAL",
  --		dont_turn = true,
  --		emotion = "ANIM_TYPE_IDLEA",
  --		role = "ROLE_INVALID",
  --		loopCount = 1,
  --	}
  --end
  for id,object in statist_lizards do
  	changeCreature {
  		tcid = object.tcid,
  		behaviour = object.tcid,
  		mortality = "IMMORTAL",
  		dont_turn = true,
  		emotion = "ANIM_TYPE_IDLEA",
  		role = "ROLE_INVALID",
  		loopCount = 1,
  	}
  end
  for id,object in food do
  	changeCreature {
  		tcid = object.tcid,
  		behaviour = object.behaviour,
  		mortality = "IMMORTAL",
  		dont_turn = true,
  		emotion = "ANIM_TYPE_IDLEA",
  		role = "ROLE_INVALID",
  		loopCount = 1,
  	}
  end

end)

quest.setScript( 2738, "OnWon", function(args)
changeCreature {
  	tcid = 7894,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM04",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7894,
  	behaviour = "questCreatures",
  	delay = 2
  }

end)

quest.setScript( 651, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 2089,
  	behaviour = "questCreatures",
  	faction = "FACTION_FRIEND_HERO_ALL",
  	effect = "FXTYPE_GEN_TPRISON",
  }
  changeCreature {
  	tcid = 2090,
  	behaviour = "questCreatures",
  	faction = "FACTION_FRIEND_HERO_ALL",
  	effect = "FXTYPE_GEN_TPRISON",
  }
  changeCreature {
  	tcid = 2092,
  	behaviour = "questCreatures",
  	faction = "FACTION_FRIEND_HERO_ALL",
  	effect = "FXTYPE_GEN_TPRISON",
  }
  changeCreature {
  	tcid = 2093,
  	behaviour = "questCreatures",
  	faction = "FACTION_FRIEND_HERO_ALL",
  	effect = "FXTYPE_GEN_TPRISON",
  }
  changeCreature {
  	tcid = 2094,
  	behaviour = "questCreatures",
  	faction = "FACTION_FRIEND_HERO_ALL",
  	effect = "FXTYPE_GEN_TPRISON",
  }

end)

quest.setScript( 651, "OnWon", function(args)
questCompleted(args)
  

end)

quest.setScript( 2805, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 8015,
  	behaviour = "JOB_QUESTSTAGING",
  	--emotion = "ANIM_TYPE_KE01",
  	gotoPosition = toWorldPosition("22;26;0;2.000000;2408.351563;43.632912;85.049713"),
  	bubble = 4,
  	followUpBhv = "Hireling_brave",
  	delay = 0.1,
  }
  changeCreature {
  	tcid = 8015,
  	behaviour = "Hireling_brave",
  	delay = 0.8,
  }
  

end)

quest.setScript( 2805, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	return "QUEST_2805_BUTTON_CANCEL", "QUEST_2805_BUTTON_OK"
  end 

end)

quest.setScript( 2815, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 8015,
  	behaviour = "JOB_QUESTSTAGING",
  	--emotion = "ANIM_TYPE_KE01", 
  	gotoPosition = toWorldPosition("22;26;0;2.000000;2408.351563;43.632912;85.049713"),
  	bubble = 6,
  	followUpBhv = "Hireling_distance",
  	delay = 0.1,
  }
  changeCreature {
  	tcid = 8015,
  	behaviour = "Hireling_distance",
  	delay = 0.8,
  }
  

end)

quest.setScript( 2836, "OnTaskAwaiting", function(args)
changeCreature {
     tcid = 8041,
     role = "ROLE_ATTACKER",
  }

end)

quest.setScript( 2836, "OnTaskFulfilled", function(args)
changeCreature {
     tcid = 8041,
  	delay = 1,
     role = "ROLE_DIALOG",
     behaviour = "questCreatures",
  }

end)

quest.setScript( 2409, "OnTalk", function(args)
if args.tcid==6866 and args.state=="TASK_AWAITING" and args.id == 2409 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 975, "OnWon", function(args)
creatureGotoPos(2831,{19;46;0;2481.949219;519.093750;804.285889;263.759155},false,2)
  creatureTeleportsAway(2831,10)

end)

quest.setScript( 975, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 2831,
  	useUnconscious = true,
  	unconsciousTime = 3,
  	livesRemaining = 255,
  }

end)

quest.setScript( 2413, "OnTalk", function(args)
if args.tcid==6894 and args.state=="TASK_AWAITING" and args.id == 2413 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2408, "OnTalk", function(args)
if args.tcid==6866 and args.state=="TASK_AWAITING" and args.id == 2408 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2408, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6866,0,{47;30;-1;2673.296875;1439.851563;-0.018810;341.146820})

end)

quest.setScript( 2278, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 6366,
  	behaviour = "JOB_QUESTSTAGING",
  	mortality = "IMMORTAL",
  }
  
  local tcids = { 6899,6900,6901,6902,6903,6904,6905,6906,6907,6908 }
  for i, tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		role = "ROLE_ATTACKER",
  	}
  end
  

end)

quest.setScript( 3010, "OnSetup", function(args)
Quest_3010_TA = true
  
  changeCreature {
  	tcid = 8425,
  	visible = false,
  	delay = 0.1,
  }
  changeCreature {
  	tcid = 8695,
  	visible = false,
  	delay = 0.1,
  }
  changeCreature {
  	tcid = 8696,
  	visible = false,
  	delay = 0.1,
  }
  changeCreature {
  	tcid = 8697,
  	visible = false,
  	delay = 0.1,
  }
  changeCreature {
  	tcid = 8698,
  	visible = false,
  	delay = 0.1,
  }
  changeCreature {
  	tcid = 8699,
  	visible = false,
  	delay = 0.1,
  }
  changeCreature {
  	tcid = 8700,
  	visible = false,
  	delay = 0.1,
  }

end)

quest.setScript( 3010, "OnWon", function(args)
changeCreature {
  	tcid = 8418,
  	merchantType = "MERCHANT_PRIEST",
  }
  Quest_3010_TA = nil

end)

quest.setScript( 3010, "OnTaskFulfilled", function(args)
Quest_3010_TA = false

end)

quest.setScript( 3010, "OnCounter", function(args)
if Quest_3010_TA == true then
  	return "TASKCREATURE_8424"
  end
  

end)

quest.setScript( 2412, "OnTalk", function(args)
if args.tcid==6894 and args.state=="TASK_AWAITING" and args.id == 2412 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2412, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6894,0,{47;30;-2;2578.390625;1389.921875;-0.002632;66.037750})

end)

quest.setScript( 2415, "OnTalk", function(args)
if args.tcid==6881 and args.state=="TASK_AWAITING" and args.id == 2415 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2414, "OnTalk", function(args)
if args.tcid==6881 and args.state=="TASK_AWAITING" and args.id == 2414 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2414, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6881,0,{47;30;-2;2633.843750;1634.000000;-0.002632;217.885834})

end)

quest.setScript( 1983, "OnTaskAwaiting", function(args)

  creatureTeleportPosition( 5680, 0, {30,32,0 , 2000,1400,0} )
  creatureTeleportPosition( 5682, 0, {30,32,0 , 2200,1400,0} )
  
  

end)

quest.setScript( 1983, "OnTaskFulfilled", function(args)
--NPC Schattenkrieger
  creatureTeleportPosition(5680, 0, {30,30,-1 , 650,2250,0})
  creatureTeleportPosition(5682, 0, {30,30,-1 , 800,2150,0})
  
  --Kommandant
  creatureTeleportPosition(2495, 0, {30,30,-1 , 350,1850,0})
  
  --Held
  teleportTeam(1983,"30;30;-1;600;2150;0;0")
  --teleportHero { 
  --	heroRef = args.heroRef,
  --	position = {sx=30,sy=30,sz=1 , px=600,py=2150,pz=0}
  --}
  

end)

quest.setScript( 2924, "OnTalk", function(args)
if args.tcid==7854 and args.state=="TASK_AWAITING" and args.id == 2924 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2924, "OnTaskFulfilled", function(args)
creatureTeleportPosition(7854,0,{49;30;-1;1924.500000;1342.398438;-0.012749;6.137239})

end)

quest.setScript( 730, "OnTaskAwaiting", function(args)
setWoobEffect {
  	woid = 1021408183,
  	effect = "FXTYPE_PORTAL2",
  }
  setWoobEffect {
  	woid = 1023338300,
  	effect = "FXTYPE_PORTAL2",
  }

end)

quest.setScript( 2727, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 7845,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = { sx=12,sy=45,sz=0,px=1172.921,py=1326.203,pz=3044 },
  	followUpBhv = "questCreatures"
  }
  
  
  
  

end)

quest.setScript( 1716, "OnSetup", function(args)
changeCreature {
  	tcid=4520,
  	livesRemaining=1,
  	useUnconscious=true, 
  	unconsciousTime=5,
  }
  changeCreature {
  	tcid=4521,
  	livesRemaining=1,
  	useUnconscious=true, 
  	unconsciousTime=5,
  }
  changeCreature {
  	tcid=4522,
  	livesRemaining=1,
  	useUnconscious=true, 
  	unconsciousTime=5,
  }
  changeCreature {
  	tcid=4523,
  	livesRemaining=1,
  	useUnconscious=true, 
  	unconsciousTime=5,
  }

end)

quest.setScript( 1716, "OnWon", function(args)
changeCreature {
  	tcid = 4520,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM29",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 4520,
  	behaviour = "JOB_POOR_STATIST",
  	delay = 3
  }

end)

quest.setScript( 1716, "OnUnconscious", function(args)
if args.tcid == 4520 then
  	changeCreature {
  		tcid=4520,
  		behaviour = "QUESTJOB_KILL_POOR",
  		faction = "FACTION_HUMAN",
  		mortality = "IMMORTAL",
  		clearUnconscious = true,
  		role = "ROLE_INVALID",
  	}
  end
  if args.tcid == 4521 then
  	changeCreature {
  		tcid=4521,
  		behaviour = "QUESTJOB_KILL_POOR",
  		faction = "FACTION_HUMAN",
  		mortality = "IMMORTAL",
  		clearUnconscious = true,
  		role = "ROLE_INVALID",
  	}
  end
  if args.tcid == 4522 then
  	changeCreature {
  		tcid=4522,
  		behaviour = "QUESTJOB_KILL_POOR",
  		faction = "FACTION_HUMAN",
  		mortality = "IMMORTAL",
  		clearUnconscious = true,
  		role = "ROLE_INVALID",
  	}
  end
  if args.tcid == 4523 then
  	changeCreature {
  		tcid=4523,
  		behaviour = "QUESTJOB_KILL_POOR",
  		faction = "FACTION_HUMAN",
  		mortality = "IMMORTAL",
  		clearUnconscious = true,
  		role = "ROLE_INVALID",
  	}
  end
  

end)

quest.setScript( 1716, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid=4520,
  	behaviour = "QUESTJOB_KILL_POOR",
  	faction = "FACTION_HUMAN",
  	mortality = "IMMORTAL",
  	clearUnconscious = true,
  	role = "ROLE_DIALOG",
  }
  
  for index,tcid in {4521,4522,4523} do
  	changeCreature {
  		tcid=tcid,
  		behaviour = "QUESTJOB_KILL_POOR",
  		faction = "FACTION_HUMAN",
  		mortality = "IMMORTAL",
  		clearUnconscious = true,
  		role = "ROLE_INVALID",
  	}
  end 

end)

quest.setScript( 1465, "OnTaskAwaiting", function(args)

  --for i,sheep in {3950,3951,3952,3953,3954,3955,3956,3957} do
  --	changeCreature {
  --		tcid=sheep,
  --		livesRemaining=1,
  --		useUnconscious=true, 
  --		unconsciousTime=20,
  --	}
  --end
  

end)

quest.setScript( 1465, "OnUnconscious", function(args)

  --for i,sheep in {3950,3951,3952,3953,3954,3955,3956,3957} do
  -- if sheep==args.tcid then
  --		changeCreature {
  --			tcid=sheep,
  --			livesRemaining=0,
  --     role="ROLE_INVALID",
  --			clearUnconscious=true,
  --     behaviour="sheep",
  --			mortality = "IMMORTAL",
  --			faction = "FACTION_FRIEND_HERO_ALL",
  --		}
  -- end
  --end
  
  

end)

quest.setScript( 3492, "OnUnconscious", function(args)
if nil then
  if args.tcid == 9724 then
  	changeCreature {
  		tcid = 9724,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM01",
  		loopCount = 1,
  		faction = "FACTION_FRIEND_HERO_ALL",
  		role = "ROLE_INVALID",
  	}
  end
  end 

end)

quest.setScript( 3492, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9755,
  	visible = false,
  	delay = 1,
  }
  
  if nil then
  changeCreature {
  	tcid = 9724,
  	useUnconscious = true,
  	unconsciousTime = 1,
  	livesRemaining = 1,
  }
  end 

end)

quest.setScript( 3492, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 9755,
  	visible = true,
  }

end)

quest.setScript( 2417, "OnTalk", function(args)
if args.tcid==6867 and args.state=="TASK_AWAITING" and args.id == 2417 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2840, "OnWon", function(args)

  changeCreature {
  	tcid = 8100,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM32", --victory
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7817,
  	behaviour = "questCreatures",
  	delay = 5,
  }

end)

quest.setScript( 739, "OnTaskAwaiting", function(args)
local rauch = {	1022983133,1022983142,1022983146,1022983150,
  								1022983157,1022983160,1022983165,1022983170}
  local feuer =	{	1022983361,1022983438,1022983451,1022983464,
  								1022983476,1022983503,1022983513,1022983537}
  local orcs	=	{	2228,2229,8169}
  
  for index,woid in rauch do
    setWoobEffect {
      woid = woid,
      effect = "FXTYPE_SMOKEBIGBLACK",
    }
  end
  
  for index,woid in feuer do
    setWoobEffect {
      woid = woid,
      effect = "FXTYPE_FIRE1",
    }
  end 
  
  for index,tcid in orcs do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_MINEWORKER",
  		faction = "FACTION_FRIEND_HERO_ALL",
  	}
  end
  

end)

quest.setScript( 739, "OnTaskFulfilled", function(args)
local rauch = {	1022983133,1022983142,1022983146,1022983150,
  								1022983157,1022983160,1022983165,1022983170}
  local feuer =	{	1022983361,1022983438,1022983451,1022983464,
  								1022983476,1022983503,1022983513,1022983537}
  local orcs = {
  	{
  		tcid = 2228,
  		pos = toWorldPosition("17;3;0;1442.319946;1318.060059;202.345001;113.000000"),
  		angle = 7,
  		--tpos = toWorldPosition("18;6;0;582.601990;1856.000000;136.744995;7.000000"),
  	},
  	{
  		tcid = 2229,
  		pos = toWorldPosition("17;3;0;1512.500000;1485.349976;179.617996;102.000000"),
  		angle = 55,
  		--tpos = toWorldPosition("18;6;0;466.726990;1798.089966;141.563995;55.000000"),
  	},
  	{
  		tcid = 8169,
  		pos = toWorldPosition("17;3;0;1512.500000;1485.349976;179.617996;102.000000"),
  		angle = 0,
  	}
  }
  for index,woid in rauch do
    setWoobEffect {
      woid = woid,
      effect = "FXTYPE_INVALID",
    }
  end
  
  for index,woid in feuer do
    setWoobEffect {
      woid = woid,
      effect = "FXTYPE_INVALID",
    }
  end
  
  for id,object in orcs do
  	changeCreature {
  		tcid = object.tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = object.pos,
  		followUpBhv = "questCreatures",
  		speed = 2,
  		followUpAngle = object.angle,
  	}
  	creatureTeleportsAway(object.tcid,30)
  end
  

end)

quest.setScript( 2704, "OnTaskAwaiting", function(args)
local ids = {7783,7784}
  for index,id in ids do
   changeCreature{
    tcid = id,
    behaviour = "Hireling_brave",
    clearUnconscious = true,
    livesRemaining = 0,
  	faction= "FACTION_DESERTHU_GUARDS",
  	clearAutoTeleporting = true,
   }
  addToGroup(id,0)
  end
  
  changeCreature{
    tcid = 7750,
    behaviour = "Hireling_brave",
  	faction= "FACTION_DESERTHU_GUARDS"
   }
  addToGroup(7750,0)
  

end)

quest.setScript( 2293, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 6948,
  	mortality = mortal,
  }

end)

quest.setScript( 3493, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9725,
  	behaviour = "rabbit",
  }

end)

quest.setScript( 3493, "OnLost", function(args)
changeCreature {
  	tcid = 9725,
  	behaviour = "rabbit",
  }

end)

quest.setScript( 2617, "OnTaskAwaiting", function(args)
local tcids = {7554, 7558, 7559}
  for i, tcid in tcids do
  	changeCreature{
  		tcid = tcid,
  		useUnconscious = true,
  		unconsciousTime = 2,
  		livesRemaining = 1,
  	}
  end
  changeCreature{
  	tcid = 7560,
  	useUnconscious = false,
  	behaviour = "JOB_QUESTSTAGING",
  	role = "ROLE_INVALID",
  	faction = "FACTION_ATMO",
  	gotoPosition = { sx=20,sy=27,sz=0,px=2150,py=950,pz=0 },
  	speed = 2
  }
  
  

end)

quest.setScript( 2617, "OnUnconscious", function(args)
if args.tcid == 7554 then
  	local pos = {20;27;0;1050.000000;2600.000000;0.000000;0.000000}
  	changeCreature{
  		tcid = 7554,
  		useUnconscious = false,
  		role = "ROLE_INVALID",
  		faction = "FACTION_ATMO",
  	}
  	creatureGotoPos(7554,pos, false, 2)
  	creatureTeleportsAway( 7554, 10 )
  
  elseif args.tcid == 7558 then
  	local pos = {20;27;0;1650.000000;1400.000000;0.000000;0.000000}
  	changeCreature{
  		tcid = 7558,
  		useUnconscious = false,
  		role = "ROLE_INVALID",
  		faction = "FACTION_ATMO",
  	}
  	creatureGotoPos(7558,pos, false, 2)
  	creatureTeleportsAway( 7558, 10 )
  
  elseif args.tcid == 7559 then
  	local pos = {20;27;0;3000.000000;2850.000000;0.000000;0.000000}
  	changeCreature{
  		tcid = 7559,
  		useUnconscious = false,
  		role = "ROLE_INVALID",
  		faction = "FACTION_ATMO",
  	}
  	creatureGotoPos(7559,pos, false, 2)
  	creatureTeleportsAway( 7559, 10 )
  end
  
  

end)

quest.setScript( 3528, "OnPrecondsFulfilled", function(args)

  changeCreature {
  	tcid = 9792,
  	effect = "FXTYPE_GEN_SPAWN1_I"
  }

end)

quest.setScript( 3528, "OnWon", function(args)
creatureTeleportsAway( 9792 , 3 )

end)

quest.setScript( 131, "OnWon", function(args)
changeCreature {
  	tcid = 356, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM09",
  	loopCount = 1,
  }
  

end)

quest.setScript( 1791, "OnTimer", function(args)
showTimer {
  id = 1791,
  cur = args.count,
  max = 60*5
  }
  
  if args.state == "TASK_FULFILLED" 
  	and args.count >= 1 then 
  	solveQuest (args.id)
  end
  

end)

quest.setScript( 1791, "OnTaskAwaiting", function(args)
setTimer {
  id = 1791,
  interval = 1,
  count = 60*5,
  }
  showTimer {
  id = 1791,
  cur = 60*5,
  max = 60*5,
  }
  

end)

quest.setScript( 1791, "OnLost", function(args)
questFailed(args)

end)

quest.setScript( 2242, "OnTaskFulfilled", function(args)
-- SC soll per Script in den Traumdungeon springen, Koordinaten anpassen!!!
  --teleportGroup({50,33,-2,900,700,-1350})
  teleportTeam(2242,"50;33;-2;900;700;-1350;0")

end)

quest.setScript( 3327, "OnWon", function(args)
local teleporter = {1026765039,1026764495}
  for id,woid in teleporter do
  	setWoobEffect {
  		woid = woid,
  		effect = "FXTYPE_PORTAL2",
  	}
  end
  

end)

quest.setScript( 339, "OnWon", function(args)
setWoobEffect {
  	woid = 1026776850,
  	effect = "FXTYPE_PORTAL2",
  }

end)

quest.setScript( 2614, "OnWon", function(args)
changeCreature {
  	tcid = 7541,
  	effect = "FXTYPE_SPPL_RISE",
  	delay = 0.1,
  	role = "ROLE_ATTACKER",
  }

end)

quest.setScript( 2596, "OnWon", function(args)
local tcids = {7512,7513,7514}
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_SPPL_RISE",
  		delay = 0.1,
  		role = "ROLE_ATTACKER",
  	}
  end

end)

quest.setScript( 878, "OnWon", function(args)
changeCreature {
  	tcid = 331, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM10",
  	loopCount = 1,
  }
  
  changeCreature {
  	tcid = 331, 
  	behaviour = "JOB_TRADER",
  	delay = 4,
  }
  

end)

quest.setScript( 3470, "OnTaskFulfilled", function(args)
solveQuest(2470)

end)

quest.setScript( 3474, "OnTaskFulfilled", function(args)
solveQuest(3474)

end)

quest.setScript( 3475, "OnTaskFulfilled", function(args)
solveQuest(3475)

end)

quest.setScript( 753, "OnTaskFulfilled", function(args)
local tcids = {8067,8068,8069,8070}
  for index,tcid in tcids do
  	killCreature {
  		tcid = tcid,
  	}
  end
  

end)

quest.setScript( 753, "OnTaskAwaiting", function(args)
--8067,8068,8069,8070
  --2203
  
  local grp = {2203,8067,8068,8069,8070}
  
  for index,tcid in grp do
  	changeCreature {
  		tcid = tcid,
  		addToGroup = 2203,
  	}
  end
  

end)

quest.setScript( 2011, "OnTaskAwaiting", function(args)
creatureTeleportPosition( 5680, 0, {30;30;-1;550.000000;2050.000000;0.000000} )
  creatureTeleportPosition( 5682, 0, {30;30;-1;700.000000;1900.000000;0.000000} )
  

end)

quest.setScript( 2011, "OnWon", function(args)
changeCreature {
  	tcid = 2495,
  	mortality = "MORTAL",
  	role = "ROLE_INVALID"
  }
  
  killCreature {
  	tcid = 2495,
  	deinitragdoll	= true,
  	delay = 5
  }

end)

quest.setScript( 3046, "OnWon", function(args)
changeCreature {
  	tcid = 8500,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08" --bow
  }
  
  changeCreature {
  	tcid = 8500,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 4,
  }

end)

quest.setScript( 2012, "OnTaskAwaiting", function(args)
creatureTeleportPosition( 5680, 0, {30;30;-1;550.000000;2050.000000;0.000000} )
  creatureTeleportPosition( 5682, 0, {30;30;-1;700.000000;1900.000000;0.000000} )
  

end)

quest.setScript( 1505, "OnStateChange", function(args)
if args.state == "WON" then
  	changeCreature{
  		tcid = 4110,
  		emotion = "ANIM_TYPE_SM20", --dying
  		loopCount = -1,
  		behaviour = "JOB_QUESTSTAGING"
  	}
  end
  

end)

quest.setScript( 2300, "OnDeath", function(args)
changeCreature {
  	tcid = 6948,
  	useUnconscious = true,
  	livesRemaining = 1,
  }
  
  changeCreature {
  	tcid = 6948,
  	clearUnconscious = true,
  	behaviour = "JOB_QUESTSTAGING",
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 1500, "OnSetup", function(args)
local tcids   = { 4041,4042,4043,4044,4045,4047,4048 }
  
  for index, tcid in tcids do
  	teleport {
  		tcid=tcid,
  		position={px=0,py=0,pz=0,sx=0,sy=0,sz=0},
  		delay=1
  	}
  end
  

end)

quest.setScript( 1500, "OnTaskAwaiting", function(args)
-- On Continue Game the QG is not set to new position, fix by teleport
  teleport {
  	tcid = 4046,
  	position = {sx=41,sy=47,sz=0,px=448,py=870,pz=134}, --,o=273.000000},
  }
  changeCreature {
  	tcid = 4046,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM13",
  	loopCount = -1,
  }
  

end)

quest.setScript( 761, "OnWon", function(args)
--teleportTeam(761,"7;19;0;1450.000000;1900.000000;0.000000;0.000000")
  
  unlockShipPortal(761,5,"SOUTH",args.heroRef)
  unlockShipPortal(761,1,"SOUTH",args.heroRef)

end)

quest.setScript( 2426, "OnTalk", function(args)
if args.tcid==6851 and args.state=="TASK_AWAITING" and args.id == 2426 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2426, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6851,0,{47;30;-1;2301.843750;1172.296875;-0.020454;160.506927})

end)

quest.setScript( 1308, "OnTaskAwaiting", function(args)

  createEffect {
  	effect = "FXTYPE_CHEST1W",
  	position = { sx=23,sy=34,sz=-10 , px=1800,py=2200,pz=122},
  	delay = 1,
  	duration = 5
  }
  

end)

quest.setScript( 2428, "OnTalk", function(args)
if args.tcid==6853 and args.state=="TASK_AWAITING" and args.id == 2428 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2428, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6853,0,{47;30;-1;1859.703125;1744.007813;-0.017757;332.462433})

end)

quest.setScript( 1835, "OnCounter", function(args)
return "TASKCREATURE_5063"

end)

quest.setScript( 1847, "OnWon", function(args)
changeCreature {
  	tcid = 5110, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM09",
  	loopCount = 1,
  }
  

end)

quest.setScript( 2427, "OnTalk", function(args)
if args.tcid==6851 and args.state=="TASK_AWAITING" and args.id == 2427 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2430, "OnTalk", function(args)
if args.tcid==6909 and args.state=="TASK_AWAITING" and args.id == 2430 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2430, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6909,0,{47;30;-2;2349.000000;1739.585938;-0.004692;256.184998})

end)

quest.setScript( 2429, "OnTalk", function(args)
if args.tcid==6853 and args.state=="TASK_AWAITING" and args.id == 2429 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2432, "OnTalk", function(args)
if args.tcid==6963 and args.state=="TASK_AWAITING" and args.id == 2432 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2432, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6963,0,{47;30;-2;1737.609375;1556.445313;-0.002632;144.271225})

end)

quest.setScript( 2431, "OnTalk", function(args)
if args.tcid==6909 and args.state=="TASK_AWAITING" and args.id == 2431 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2302, "OnWon", function(args)
changeCreature {
  	tcid = 102,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=19,sy=28,sz=0,px=122,py=1889,pz=4},
  	followUpBhv = "questCreatures",
  }
  changeCreature {
  	tcid = 103,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=19,sy=28,sz=0,px=150,py=1800,pz=0},
  	followUpBhv = "questCreatures",
  }

end)

quest.setScript( 2303, "OnWon", function(args)
changeCreature {
  	tcid = 103,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=19,sy=28,sz=0,px=150,py=1800,pz=0},
  	followUpBhv = "questCreatures",
  }
  changeCreature {
  	tcid = 102,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=19,sy=28,sz=0,px=122,py=1889,pz=4},
  	followUpBhv = "questCreatures",
  }

end)

quest.setScript( 1056, "OnWon", function(args)
questCompleted(args)
  changeCreature {
  	tcid = 2973,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM13",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 2973,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 4,
  }
  

end)

quest.setScript( 1056, "OnSetup", function(args)
-- revert changes from quest 1048
  
  changeCreature {
  	tcid=2961,
  	livesRemaining=0,
  	clearUnconscious=true,
  }
  

end)

quest.setScript( 1056, "OnLost", function(args)
questFailed(args)
  changeCreature {
  	tcid = 2973,
    mortality = "MORTAL",
  }

end)

quest.setScript( 1056, "OnTalk", function(args)
if args.id==1056 and args.tcid==2973 and args.state=="TASK_NOT_FULFILLED" then
  	changeCreature {
  		tcid = 2973,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM13",
  		loopCount = 1,
  	}
  end
  

end)

quest.setScript( 150, "OnStation", function(args)
-- wenn station 1 erreicht wurde,
  --wird der Effekt "Vergifteter_Brunnen" ausgefuehrt
  
  if args.currentStation == 0 and args.woid == 1004411849 then
  	setWoobEffect {
  		effect = "FXTYPE_QFX_VERGIFTETER_BRUNNEN",
  		woid = 1004411849 }
  end

end)

quest.setScript( 159, "OnCounter", function(args)
return "QUEST_159_COUNTER"

end)

quest.setScript( 159, "OnWon", function(args)
changeCreature {
  	tcid = 415,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32",	--victory
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 415,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 3,
  }

end)

quest.setScript( 2067, "OnTaskFulfilled", function(args)
onRespawn = nil
  return {}

end)

quest.setScript( 2067, "OnSetup", function(args)
onRespawn = function ( args )
    local t = getQuestTeamId { questId = 2067 }
    if getQuestState { id = 2067 } == "TASK_AWAITING" then
      if getTeamIdByHeroRef{ ref = args.heroRef } == t then
        looseQuest { id = 2067 }			
      end
    end
  end
  

end)

quest.setScript( 2067, "OnTaskNotFulfilled", function(args)
onRespawn = nil
  return {}

end)

quest.setScript( 2067, "OnTaskAwaiting", function(args)
--for i,ref in getTeamRefs() do
  --  teleportHero {
  --		position = { px=220.546875, py=2271.703125, pz=-152.802032, sx=26, sy=59 , sz=-1 },
  --		orientation = 121.476837, 
  --		heroRef = ref,
  --		delay = 3,
  --  }
  --end 
  
  teleportTeam(2067,"26;59;-1;220.546875;2271.703125;-152.802032;121.476837")
  return toWorldPosition("26;59;-1;220.546875;2271.703125;-152.802032;121.476837")

end)

quest.setScript( 1483, "OnTaskAwaiting", function(args)
local tcids_knee = {4012,4014,4018,4020}
  local tcids_lay = {4011,4015,4017,4019,4021}
  
  for index, tcid in tcids_knee do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_KNEE-IDLE",
  		loopCount = -1,
  	}
  end
  
  for index, tcid in tcids_lay do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_LAYIDLE",
  		loopCount = -1,
  	}
  end
  

end)

quest.setScript( 1483, "OnDeath", function(args)
local tcids = {4011,4012,4014,4015,4017,4018,4019,4020,4021}
  
  for index, tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "Enemy_warrior_simple",
  		emotion = "ANIM_TYPE_EM15",
  		loopCount = -1,
  	}
  end
  
  changeCreature {
  	tcid = 4022,
  	behaviour = "Enemy_warrior_simple",
  	emotion = "ANIM_TYPE_EM15",
  	loopCount = -1,
  }
  

end)

quest.setScript( 2438, "OnTalk", function(args)
if args.tcid==6873 and args.state=="TASK_AWAITING" and args.id == 2438 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2438, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6873,0,{47;30;-1;2363.703125;2536.898438;-0.019512;301.914948})

end)

quest.setScript( 1790, "OnWon", function(args)
changeCreature {
   tcid=4807,
   behaviour = "JOB_QUESTSTAGING",
   emotion = "ANIM_TYPE_DEFENSE",
   loopCount = -1,
   effect="FXTYPE_GEN_TRANSFORM",
    delay=4,
  }
  changeCreature {
   tcid=4807,
  behaviour = "JOB_QUESTSTAGING",
  creature="Atmo_chicken_white",
  delay=6,
  }

end)

quest.setScript( 2440, "OnTalk", function(args)
if args.tcid==6865 and args.state=="TASK_AWAITING" and args.id == 2440 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2440, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6865,0,{47;30;-1;2414.093750;800.648438;-0.018810;177.972672})

end)

quest.setScript( 2436, "OnTalk", function(args)
if args.tcid==7168 and args.state=="TASK_AWAITING" and args.id == 2436 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2436, "OnTaskFulfilled", function(args)
creatureTeleportPosition(7168,0,{49;30;-1;2120.906250;2123.703125;-0.008171;300.618591})

end)

quest.setScript( 2433, "OnTalk", function(args)
if args.tcid==6963 and args.state=="TASK_AWAITING" and args.id == 2433 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2437, "OnTalk", function(args)
if args.tcid==7168 and args.state=="TASK_AWAITING" and args.id == 2437 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2439, "OnTalk", function(args)
if args.tcid==6873 and args.state=="TASK_AWAITING" and args.id == 2439 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2441, "OnTalk", function(args)
if args.tcid==6865 and args.state=="TASK_AWAITING" and args.id == 2441 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2443, "OnTalk", function(args)
if args.tcid==6841 and args.state=="TASK_AWAITING" and args.id == 2443 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 3329, "OnDialog", function(args)
if args.tcid == 9417 then
  	return "QUEST_301_DIALOG"
  end
  

end)

quest.setScript( 2724, "OnWon", function(args)

  changeCreature {
  	tcid = 7844,
  	mortality = "MORTAL"
  }
  
  

end)

quest.setScript( 2724, "OnSetup", function(args)
if nil then
  	local tcids = { 7841, 7842, 7843, 7844 }
  	for i, tcid in tcids do
  		changeCreature {
  			tcid = tcid,
  			mortality = "IMMORTAL"
  		}
  	end
  end 

end)

quest.setScript( 2724, "OnTaskAwaiting", function(args)
local tcids = { 7841, 7842, 7843 }
  
  for i, tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		mortality = "MORTAL"
  	}
  end
  
  

end)

quest.setScript( 2724, "OnPrecondsFulfilled", function(args)
local tcids = { 7841, 7842, 7843, 7844 }
  
  for i, tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		mortality = "IMMORTAL"
  	}
  end
  

end)

quest.setScript( 2389, "OnStation", function(args)
if args.currentStation == 1 then
  	setWoobState {
  		woid = 1025644018,
  		state = "WOOB_FLIPPED_OFF"
  	}
  end
  

end)

quest.setScript( 1442, "OnSetup", function(args)

  
  changeCreature {
  	tcid= 3874,
  	effect= "FXTYPE_GEN_TRANSFORM",
  	mortality = "IMMORTAL"
  }
  
  changeCreature {
  	tcid = 3874,
  	creature = "Human_stat_citizen_m02",
  	behaviour = "JOB_QUESTSTAGING",
  	delay = 2
  }

end)

quest.setScript( 2445, "OnTalk", function(args)
if args.tcid==6839 and args.state=="TASK_AWAITING" and args.id == 2445 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 509, "OnWon", function(args)
changeCreature {
   tcid = 2866, 
   behaviour = "JOB_QUESTSTAGING",
   emotion = "ANIM_TYPE_EM27",
   loopCount = 1,
  }
  
  changeCreature {
  	tcid = 2866, 
  	behaviour = "JOB_MERCENARY",
  	delay = 4,
  }
  

end)

quest.setScript( 2447, "OnTalk", function(args)
if args.tcid==6884 and args.state=="TASK_AWAITING" and args.id == 2447 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2449, "OnTalk", function(args)
if args.tcid==6895 and args.state=="TASK_AWAITING" and args.id == 2449 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 1823, "OnWon", function(args)
changeCreature {
  	tcid = 5007,
  	clearUnconscious = true,
  	livesRemaining	=	0,
  }

end)

quest.setScript( 2450, "OnTalk", function(args)
if args.tcid==6845 and args.state=="TASK_AWAITING" and args.id == 2450 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2450, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6845,0,{47;30;-1;2574.593750;797.398438;-0.016434;202.351364})

end)

quest.setScript( 2452, "OnTalk", function(args)
if args.tcid==6846 and args.state=="TASK_AWAITING" and args.id == 2452 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2452, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6846,0,{47;30;-1;1849.703125;2123.453125;-0.017757;321.766174})

end)

quest.setScript( 2454, "OnTalk", function(args)
if args.tcid==6856 and args.state=="TASK_AWAITING" and args.id == 2454 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2454, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6856,0,{47;30;-1;1712.093750;1606.101563;-0.017757;137.069992})

end)

quest.setScript( 2451, "OnTalk", function(args)
if args.tcid==6845 and args.state=="TASK_AWAITING" and args.id == 2451 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2453, "OnTalk", function(args)
if args.tcid==6846 and args.state=="TASK_AWAITING" and args.id == 2453 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2456, "OnTalk", function(args)
if args.tcid==6842 and args.state=="TASK_AWAITING" and args.id == 2456 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2456, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6842,0,{47;30;-2;2570.796875;1911.500000;-0.002632;9.235535})

end)

quest.setScript( 2455, "OnTalk", function(args)
if args.tcid==6856 and args.state=="TASK_AWAITING" and args.id == 2455 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2457, "OnTalk", function(args)
if args.tcid==6842 and args.state=="TASK_AWAITING" and args.id == 2457 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 664, "OnWon", function(args)
questCompleted(args)
  

end)

quest.setScript( 2458, "OnTalk", function(args)
if args.tcid==6857 and args.state=="TASK_AWAITING" and args.id == 2458 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2458, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6857,0,{47;30;-1;2328.250000;1598.351563;-0.020454;205.624146})

end)

quest.setScript( 2459, "OnTalk", function(args)
if args.tcid==6857 and args.state=="TASK_AWAITING" and args.id == 2459 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 1828, "OnUnconscious", function(args)
changeCreature{
    		tcid= 4912,
    		livesRemaining = 0,
    		clearUnconscious= true,
    		behaviour="questCreatures",
    		faction="FACTION_INVALID",
    		delay = 1,
    	}

end)

quest.setScript( 1828, "OnSetup", function(args)
changeCreature {
  	tcid = 4912,
  	useUnconscious = true,
  	livesRemaining = 1,
  	unconsciousTime = 1,
  	role = "ROLE_ATTACKER",
  	clearAutoTeleporting = true; 
  }
  

end)

quest.setScript( 1828, "OnTalk", function(args)
if nil then
    changeCreature {
      tcid = 4912,
      role = "ROLE_ATTACKER",
  	  clearAutoTeleporting = true; 
    }
  end
  

end)

quest.setScript( 1828, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 4912,
  	useUnconscious = true,
  	livesRemaining = 1,
  	unconsciousTime = 1,
  	role = "ROLE_ATTACKER",
  	clearAutoTeleporting = true; 
  }

end)

quest.setScript( 1828, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid= 4912,
  	clearUnconscious = true,
  	livesRemaining = 0,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  }

end)

quest.setScript( 1828, "OnWon", function(args)
changeCreature {
  	tcid= 4912,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM22",
  	mortality = "MORTAL",
  	role = "ROLE_INVALID",
  	loopCount = -1,
  }
  killCreature {
  	tcid = 4912,
  	deinitragdoll = false,
  	delay = 2,
  }

end)

quest.setScript( 1674, "OnTimer", function(args)
local sera = 4414
  local inq = 8499
  
  if args.count == 10 then
    teleport {
      tcid = sera,
      position = toWorldPosition("4;30;0;783.549988;3197.399902;-68.092796;62.000000"),
      orientation = 62.000000,
    }
    changeCreature {
      tcid = sera,
      effect = "FXTYPE_GEN_SUMMON",
  	}
  end
  if args.count == 9 then
      changeCreature {
      tcid = sera,
      effect = "FXTYPE_INVALID",
  		clearAutoTeleporting = true,
    }
  end
  if args.count == 8 then
    castSpell {
      caster = sera,
      target = inq,
      slot = 1,
    }
  end
  if args.count == 6 then
    changeCreature {
      tcid = inq,
      mortality = "MORTAL",
    }
    killCreature {
      tcid = inq,
      delay = 0.1,
  	}
  end
  if args.count == 5 then
    solveQuest(args.id)
  end

end)

quest.setScript( 1674, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 8498,
    visible = false,
  }
  
  setTimer {
    id = 1674,
    count = 10,
    interval = 1,
  }

end)

quest.setScript( 1674, "OnWon", function(args)
local sera = 4414
  
  changeCreature {
    tcid = sera,
    mortality = "MORTAL",
    faction = "FACTION_ENEMY_HERO",
    behaviour = "Enemy_warrior_brave_ex",
    role = "ROLE_ATTACKER",
  }

end)

quest.setScript( 2961, "OnWon", function(args)
unlockShipPortal(2961,5,"NORTH",args.heroRef)

end)

quest.setScript( 2424, "OnStateChange", function(args)
-- deaktiviert
  if args.state == "PRECONDS_FULFILLED" then
  
  	local wolves = {7187,7188,7189}
  	local names = {"m01","m01_c2","m01_c3"}
  
  	for i,wolve in wolves do
  		cname = "Human_stat_citizen_"..names[i]
  		changeCreature {
  			tcid=wolve,
  			creature = cname,
  			behaviour = "questCreatures"
  		}
  	end
  
  end
  

end)

quest.setScript( 2424, "OnTaskAwaiting", function(args)
	local wolves = {7187,7188,7189}
  	local cname = "Monst_werewolf"
  
  	for i,wolve in wolves do
  		changeCreature{
  			tcid = wolve,
  			creature = cname,
  			behaviour = "Hireling_brave"
  		}
  	end

end)

quest.setScript( 3086, "OnPrecondsFulfilled", function(args)
changeCreature {
    tcid = 8621,
    effect = "FXTYPE_CHEST1A",
  }

end)

quest.setScript( 3086, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 8309,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_BEG",
  	loopCount = -1,
  }

end)

quest.setScript( 2421, "OnWon", function(args)
solveQuest(2422)

end)

quest.setScript( 2421, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 7182,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 2422, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 7182,
  	role = "ROLE_VICTIM",
  }

end)

quest.setScript( 2422, "OnLost", function(args)
--addBookEntry(2422, "QUEST_LOST")

end)

quest.setScript( 2416, "OnTalk", function(args)
if args.tcid==6867 and args.state=="TASK_AWAITING" and args.id == 2416 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2416, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6867,0,{47;30;-1;2679.750000;1188.250000;-0.018810;204.775131})

end)

quest.setScript( 2442, "OnTalk", function(args)
if args.tcid==6841 and args.state=="TASK_AWAITING" and args.id == 2442 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2442, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6841,0,{47;30;-2;2674.843750;997.500000;-0.002632;326.048889})

end)

quest.setScript( 1838, "OnWon", function(args)
changeCreature {
  	tcid = 5078,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32",	--victory
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 5078,
  	behaviour = "questCreatures",
  	delay = 4,
  }

end)

quest.setScript( 1838, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 5077,
  	behaviour = "JOB_RICH_STATIST",
  }

end)

quest.setScript( 2444, "OnTalk", function(args)
if args.tcid==6839 and args.state=="TASK_AWAITING" and args.id == 2444 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2444, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6839,0,{47;30;-2;2525.796875;1022.898438;0.798752;349.904938})

end)

quest.setScript( 1448, "OnTaskNotFulfilled", function(args)
--klkl

end)

quest.setScript( 2446, "OnTalk", function(args)
if args.tcid==6884 and args.state=="TASK_AWAITING" and args.id == 2446 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2446, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6884,0,{47;30;-1;1754.796875;2319.398438;-0.017757;104.945618})

end)

quest.setScript( 2448, "OnTalk", function(args)
if args.tcid==6895 and args.state=="TASK_AWAITING" and args.id == 2448 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2448, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6895,0,{47;30;-1;1794.953125;278.750000;-0.012844;47.602539})

end)

quest.setScript( 1536, "OnStateChange", function(args)
local tcids   = { 4080,4081,4082,4083 }
  
  if args.state == "WON" then		
  	for index, tcid in tcids do
  		changeCreature {
  			tcid=tcid,
  			effect="FXTYPE_GEN_TRANSFORM",
  			delay=2,
  		}
  		teleport {
  			tcid=tcid,
  			position={px=0,py=0,pz=0,sx=0,sy=0,sz=0},
  			delay=4
  		}
  	end
  end
  

end)

quest.setScript( 2570, "OnTalk", function(args)
if args.tcid==6896 and args.state=="TASK_AWAITING" and args.id == 2570 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2570, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6896,0,{47;30;-1;2676.203125;2592.351563;-0.018810;345.154541})

end)

quest.setScript( 2571, "OnTalk", function(args)
if args.tcid==6864 and args.state=="TASK_AWAITING" and args.id == 2571 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2571, "OnTaskFulfilled", function(args)
creatureTeleportPosition(6864,0,{47;30;-1;1724.406250;1816.953125;-0.017757;66.203308})

end)

quest.setScript( 2930, "OnTalk", function(args)
if args.tcid==7860 and args.state=="TASK_AWAITING" and args.id == 2930 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2930, "OnTaskFulfilled", function(args)
creatureTeleportPosition(7860,0,{47;30;-2;1732.703125;803.296875;-0.002632;157.148712})

end)

quest.setScript( 2931, "OnTalk", function(args)
if args.tcid==7861 and args.state=="TASK_AWAITING" and args.id == 2931 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2931, "OnTaskFulfilled", function(args)
creatureTeleportPosition(7861,0,{47;30;-2;1776.203125;1022.046875;-0.002632;53.478577})

end)

quest.setScript( 1915, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid=5424, -- Snot
  	useUnconscious = true,
  	unconsciousTime = 4,
  	livesRemaining = 1,
  	clearAutoTeleporting = true
  }

end)

quest.setScript( 1915, "OnUnconscious", function(args)
changeCreature{
  	tcid = 5424,
  	clearUnconscious = true,
  	role = "ROLE_DIALOG",
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1
  }

end)

quest.setScript( 179, "OnWon", function(args)
local mineworker = {1517, 1518, 1519, 1520}
  for index,id in mineworker do
      creatureGotoPosition (id,{34;31;0;935.273438;2781.687500;-96.850258;143.127060})
      creatureTeleportsAway (id,6)
  end

end)

quest.setScript( 3473, "OnTaskFulfilled", function(args)
solveQuest(3473)

end)

quest.setScript( 53, "OnWon", function(args)
changeCreature {
  	tcid = 143,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM27",	--salute
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 143,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 3,
  }

end)

quest.setScript( 2148, "OnTaskFulfilled", function(args)
changeCreature{
  	tcid = 6529,
  	gotoPosition = { sx=31,sy=57,sz=0 , px=1800,py=1350,pz=611 },
  	speed = 2
  }
  creatureTeleportsAway( 6529, 3 ) 

end)

quest.setScript( 2147, "OnSetup", function(args)
changeCreature{
  	tcid = 9530,
  	useUnconscious = true,
  	livesRemaining = 1
  }

end)

quest.setScript( 2147, "OnDeath", function(args)
changeCreature{
  	tcid = 9530,
  	useUnconscious = false,
  	livesRemaining = 0,
  	behaviour = "questCreatures",
  	faction = "FACTION_HUMAN"
  }

end)

quest.setScript( 1046, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 2948,
  	role = "ROLE_VICTIM",
  	mortality = "IMMORTAL",
  }
  

end)

quest.setScript( 883, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 174,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("37;25;0;1376.312500;3109.750000;44.512650;278.534607"),
  	speed = 2,
  	followUpBhv = "questCreatures",
  	role = "ROLE_INVALID",
  }
  creatureTeleportsAway(174,25)

end)

quest.setScript( 792, "OnWon", function(args)
addGold(-100)

end)

quest.setScript( 1503, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	local tcids   = { 4041,4042,4043,4044,4045,4047,4048 }
  	local xcoords = {  950, 900,1000, 900, 950,1000, 950 }
  	local ycoords = { 1000,1000,1000, 950, 950, 950, 900 }
  	local position={
  		px=0,
  		py=0,
  		pz=100,	-- moeglichst hoch setzen, faellt sowieso runter
  		sx=42,
  		sy=48,
  		sz=0
  	}
  
  	for index,tcid in tcids do
  		changeCreature{
  			tcid = tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			--emotion = "ANIM_TYPE_DEFENSE",
  			--delay = math.random(10),
  			loopCount = -1
  		}
  		position.px = xcoords[index]
  		position.py = ycoords[index]
  		teleport {
  			tcid=tcid,
  			position=position,
  		}
  	end
  end
  

end)

quest.setScript( 1506, "OnTaskFulfilled", function(args)
local tcids   = { 4041,4042,4043,4044,4045,4047,4048 }
  local xcoords = {  350, 400, 450, 400, 400, 450, 350 }
  local ycoords = {  500, 500, 500, 450, 550, 450, 550 }
  
  local position={
  	sx=41,
  	sy=47,
  	sz=0,
  	px=0,
  	py=0,
  	pz=50,	-- moeglichst hoch setzen, faellt sowieso runter
  }
  
  for index,tcid in tcids do
  	position.px = xcoords[index] + math.random(30)
  	position.py = ycoords[index] + math.random(30)
  	changeCreature {
  		tcid=tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition=position,
  		delay=1,
  		followUpBhv = "questCreatures"
  	}
  end
  

end)

quest.setScript( 2956, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8279,0,{49;30;-1;1796.750000;1220.546875;-0.012749;90.289368})

end)

quest.setScript( 2956, "OnTalk", function(args)

  if args.id==2956 and args.state=="TASK_AWAITING" and args.tcid == 8279 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2310, "OnTalk", function(args)
if args.tcid == 5424 then
  	changeCreature{
  		tcid = 5424,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1
  	}
  end
  

end)

quest.setScript( 2310, "OnWon", function(args)
changeCreature{
  	tcid = 5424,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM22",
  	mortality = "MORTAL",
  	role = "ROLE_INVALID"
  }
  
  killCreature{
  	tcid = 5424,
  	deinitragdoll = false,
  	delay = 2,
  }

end)

quest.setScript( 2958, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8282,0,{49;30;-1;1168.750000;1786.953125;-0.008171;57.200439})

end)

quest.setScript( 2958, "OnTalk", function(args)
if args.id==2958 and args.state=="TASK_AWAITING" and args.tcid == 8282 then
  	return bueroQuestReach()
  end
  

end)

quest.setScript( 1916, "OnTaskFulfilled", function(args)
solveQuest(1914)

end)

quest.setScript( 2959, "OnTalk", function(args)

  if args.id==2959 and args.state=="TASK_AWAITING" and args.tcid == 8283 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2959, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8283,0,{49;30;-1;1160.406250;1523.453125;-0.008171;143.628784})

end)

quest.setScript( 2962, "OnTalk", function(args)
if args.id==2962 and args.state=="TASK_AWAITING" and args.tcid == 8285 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2962, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8285,0,{49;30;-1;1170.750000;2263.546875;-0.008171;127.098389})

end)

quest.setScript( 2960, "OnTalk", function(args)
if args.id==2960 and args.state=="TASK_AWAITING" and args.tcid == 8284 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2960, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8284,0,{49;30;-1;1341.703125;2255.000000;-0.012749;206.463882})

end)

quest.setScript( 2957, "OnTalk", function(args)
if args.id==2957 and args.state=="TASK_AWAITING" and args.tcid == 8280 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2957, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8280,0,{49;30;-1;1936.265625;1961.578125;-0.012749;14.969547})
  

end)

quest.setScript( 2953, "OnTalk", function(args)
if args.id==2953 and args.state=="TASK_AWAITING" and args.tcid == 8277 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2953, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8277,0,{49;30;-1;2106.796875;2334.851563;-0.008171;189.019318})

end)

quest.setScript( 1680, "OnStateChange", function(args)
--if args.state == "WON" then
  --	changeCreature {
  --		tcid = 4424,
  		--emotion = "ANIM_TYPE_HAPPY",
  		--loopCount = -1,
  --		behaviour = "JOB_QUESTSTAGING",
  --		gotoPosition = {sx=40,sy=46,sz=0,px=2250,py=3150,pz=134}
  		--followUpBhv =
  --}
  --end

end)

quest.setScript( 1680, "OnSetup", function(args)
if getQuestState(3771) == "TASK_FULFILLED" then
    teleportHero {
      heroRef = heroRef,
  	  position = toWorldPosition("53;6;0;2500.000000;1600.000000;859.083252;140.000000"),
  	  orientation = 140,
  	  --noEffect = true,
    }
  end 

end)

quest.setScript( 1680, "OnWon", function(args)
changeCreature {
  	tcid = 4424,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM07",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 4424,
  	behaviour = "questCreatures",
  	delay = 3
  }

end)

quest.setScript( 1457, "OnWon", function(args)
changeCreature {
  	tcid = 3934,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("38;38;0;150.000000;1550.000000;0.000000;0.000000"),
  	speed = 2,
  }
  creatureTeleportsAway(3934,25)

end)

quest.setScript( 2762, "OnTalk", function(args)

  if args.tcid == 7944 and args.state == "PRECONDS_FULFILLED" then 
  creatureTeleportPosition( 7941, 0, {13,7,0, 2648.25, 418.650, 1900, 130} )
  end 
  
  if args.tcid == 7941 and args.state == "TASK_AWAITING" then
  	changeCreature {
  		tcid = 7941,
  		mortality = "MORTAL"
  	}
  end
  

end)

quest.setScript( 1523, "OnWon", function(args)
changeCreature {
  	tcid = 4155,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=41,sy=37,sz=0,px=1134,py=413,pz=797},
  	followUpBhv = "questCreatures"
  }

end)

quest.setScript( 2871, "OnWon", function(args)
killCreature {
  	tcid = 8236,
  	delay = 0,
  	deinitragdoll = false,
  }

end)

quest.setScript( 2871, "OnCounter", function(args)
return "TASKCREATURE_8075"

end)

quest.setScript( 3015, "OnLost", function(args)
--addBookEntry(3014,"QUEST_LOST")
  changeCreature {
    tcid = 8438,
    mortality = "MORTAL",
    role = "ROLE_INVALID",
  }
  killCreature {
    tcid = 8438,
  	delay = 1,
  }

end)

quest.setScript( 3015, "OnTaskFulfilled", function(args)
solveQuest(3014)

end)

quest.setScript( 3015, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 8438,
  	mortality = "IMMORTAL"
  }
  changeCreature{
  	tcid = 8437,
  	mortality = "MORTAL",
  	--clearAutoTeleporting = true,
  }
  

end)

quest.setScript( 3019, "OnLost", function(args)
changeCreature {
    tcid = 8438,
    mortality = "MORTAL",
    role = "ROLE_INVALID",
  }
  killCreature {
    tcid = 8438,
  	delay = 1,
  }

end)

quest.setScript( 3019, "OnTaskFulfilled", function(args)
solveQuest(3286)

end)

quest.setScript( 2028, "OnWon", function(args)
changeCreature {
  	tcid = 5879, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08",
  	loopCount = 1,
  }
  
  changeCreature {
  	tcid = 5879, 
  	behaviour = "JOB_HUNTER",
  	delay = 4,
  }
  

end)

quest.setScript( 2028, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 5879,
  	behaviour = "JOB_HUNTER",
  }

end)

quest.setScript( 2028, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 5879 then
  	changeCreature {
  		tcid = 5879,
  		behaviour = "questCreatures",
  	}
  end 
  if args.state == "TASK_FULFILLED" and args.tcid == 5879 then
  	changeCreature {
  		tcid = 5879,
  		behaviour = "questCreatures",
  	}
  end 

end)

quest.setScript( 1683, "OnWon", function(args)
changeCreature {
  	tcid = 4437,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=40, sy=47, sz=0, px=2405.648438, py=285.750000, pz=51},
  	delay = 0,
  	followUpBhv = "questCreatures",
  }
  changeCreature {
  	tcid = 4436,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_RAISE-HANDS",
  	effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
  	loopCount = 1,
  	delay = 1,
  }
  changeCreature {
  	tcid = 4436,
  	behaviour = "JOB_QUESTSTAGING",
  	effect = "FXTYPE_SMOKESMALLWHITE",
  	delay = 2,
  }
  killCreature {
  	tcid = 4436,
  	deinitragdoll = false,
  	delay = 2
  }
  --stoppe effekt nach 20 sec.
  changeCreature {
  	tcid = 4436,
  	effect = "FXTYPE_INVALID",
  	delay = 20,
  }

end)

quest.setScript( 3022, "OnWon", function(args)
solveQuest(3014)
  
  changeCreature {
  	tcid = 8437,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08", --bow
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 8437,
  	behaviour = "questCreatures",
  	delay = 4,
  }
  
  
  

end)

quest.setScript( 648, "OnWon", function(args)
changeCreature {
  	tcid = 2095,
  	mortality = "IMMORTAL",
  	role = "ROLE_VICTIM",
  }

end)

quest.setScript( 242, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 3538,
  	faction = "FACTION_ENEMY_HERO",
  	role = "ROLE_ATTACKER",
  }
  
  changeCreature {
  	tcid = 3539,
  	faction = "FACTION_ENEMY_HERO",
  	role = "ROLE_ATTACKER",
  }
  
  changeCreature {
  	tcid = 3540,
  	faction = "FACTION_ENEMY_HERO",
  	role = "ROLE_ATTACKER",
  }
  
  changeCreature {
  	tcid = 3542,
  	faction = "FACTION_ENEMY_HERO",
  	role = "ROLE_ATTACKER",
  }
  
  changeCreature {
  	tcid = 3541,
  	faction = "FACTION_ENEMY_HERO",
  	role = "ROLE_ATTACKER",
  }
  
  changeCreature {
  	tcid = 3544,
  	faction = "FACTION_ENEMY_HERO",
  	role = "ROLE_ATTACKER",
  }
  
  changeCreature {
  	tcid = 1416,
  	faction = "FACTION_ENEMY_HERO",
  	role = "ROLE_ATTACKER",
  }
  
  

end)

quest.setScript( 242, "OnWon", function(args)
changeCreature {
  	tcid = 826, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM26",
  	loopCount = 1,
  }
  
  changeCreature {
  	tcid = 826, 
  	behaviour = "JOB_RICH_STATIST",
  	delay = 4,
  }
  

end)

quest.setScript( 3287, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 7684,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 3287, "OnWon", function(args)
changeCreature {
  	tcid = 7684,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM08", --bow
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7684,
  	behaviour = "questCreatures",
  	delay = 4,
  }

end)

quest.setScript( 2156, "OnWon", function(args)
changeCreature{
  	tcid= 6581,
  	behaviour= "JOB_QUESTSTAGING",
  	emotion= "ANIM_TYPE_MAGICA",
  	loopCount= 3,
  }

end)

quest.setScript( 2156, "OnStateChange", function(args)
if args.state == "PREFIGHT" then
  
  	local hunter = {6565,6566,6567,6568,6569,6579}
  	local warrior = {6571,6572,6573,6574,6575,6576,6577,6578}
  	local officer = 6580
  
  	for index,tcid in hunter do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "Enemy_warrior_simple_artillery",
  			faction = "FACTION_ENEMY_HERO",
  		}
  	end
  
  	for index,tcid in warrior do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "Enemy_warrior_simple",
  			faction = "FACTION_ENEMY_HERO",
  		}
  	end
  
  	changeCreature {
  		tcid = officer,
  		behaviour = "Enemy_warrior_kicknrush",
  		faction = "FACTION_ENEMY_HERO",
  	}
  
  end
  

end)

quest.setScript( 2157, "OnWon", function(args)
changeCreature {
  	tcid= 6581,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_MAGICB",
  	loopCount = 1,
  --	effect = "FXTYPE_S
  	effect = "FXTYPE_GEN_SPAWN1_I",
  	effectParam = { 
  		paramtype="position", 
  		position={sx=43;sy=56;sz=0;px=500;py=2000;pz=0},
  		duration=1.2,
  		fxImpact="FXTYPE_GEN_SPAWN1"
  }
  }
  
  destroyCreature {
  	tcid = 6582,
  	mortality = mortal,
  	splatter = true,
  	delay = 4,
  }

end)

quest.setScript( 3288, "OnTalk", function(args)
if args.tcid==2540 and args.id==3288 and args.state=="PRECONDS_FULFILLED" then
  	changeCreature{
  		tcid = 2540,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  	changeCreature{
  		tcid = 2540,
  		clearUnconscious = true,
  		livesRemaining = 0,
  	}
  end
  

end)

quest.setScript( 3288, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 2540,
  	mortality = "MORTAL",
  	emotion = "ANIM_TYPE_SM22",
  	loopCount = 1,
  }
  
  killCreature {
  	tcid = 2540,
  	delay = 2,
  }

end)

quest.setScript( 2158, "OnCounter", function(args)
--return "TASKCREATURE_6589"

end)

quest.setScript( 716, "OnWon", function(args)
changeCreature {
  	tcid = 2175,
  	behaviour = "JOB_QUESTSTAGING",
  	faction = "FACTION_FRIEND_HERO_ALL",
  	gotoPosition = {sx=56,sy=33,sz=0,px=2550,py=2650,pz=0},
  	speed = 2,
  	followUpBhv = "questCreatures",
  	followUpAngle = 242.094727,
  }
  creatureTeleportPosition(2175,30,{59;33;0;1034.453125;1149.351563;-1694.492188})

end)

quest.setScript( 716, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 2175,
  	behaviour = "questCreatures",
  	faction = "FACTION_FRIEND_HERO_ALL",
  	clearUnconscious = true,
  	livesRemaining = 0,
  	delay = 5,
  }

end)

quest.setScript( 716, "OnCounter", function(args)
if getQuestState(716) == "TASK_AWAITING" then
    return "QUEST_716_COUNTER"
  end
  if getQuestState(716) == "TASK_FULFILLED" then
    return "TASKCREATURE_2175"
  end
  

end)

quest.setScript( 2407, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 3666,
  	mortality = "IMMORTAL",
  }
  
  changeCreature {
  	tcid = 3667,
  	mortality = "IMMORTAL",
  }
  
  changeCreature {
  	tcid = 3668,
  	mortality = "IMMORTAL",
  }
  
  changeCreature {
  	tcid = 3669,
  	mortality = "IMMORTAL",
  }
  

end)

quest.setScript( 2313, "OnTalk", function(args)
if args.tcid == 5437 then
  	changeCreature{
  			tcid = 5437,
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_SM21",
  			loopCount = -1
  	}
  end
  

end)

quest.setScript( 2313, "OnWon", function(args)
changeCreature{
    	tcid = 5437,
    	behaviour = "JOB_QUESTSTAGING",
    	emotion = "ANIM_TYPE_SM22",
    	mortality = "MORTAL",
    	role = "ROLE_INVALID"
    }
    killCreature{
    	tcid = 5437,
    	deinitragdoll = false,
    	delay = 2,
    }

end)

quest.setScript( 844, "OnWon", function(args)
local hyderia = 2497
  local wache = 5178
  
  changeCreature {
  	tcid = hyderia,
  	gotoPosition = { sx=30,sy=32,sz=0,px=2050,py=1363,pz=102 },
  	delay = 0
  }
  changeCreature {
  	tcid = hyderia,
  	gotoPosition = { sx=30,sy=32,sz=0,px=1735,py=1701,pz=142 },
  	delay = 4
  }
  
  changeCreature {
  	tcid = wache,
  	behaviour = "JOB_QUESTSTAGING",
  	role = "ROLE_INVALID",
  	gotoPosition = { sx=30,sy=32,sz=0,px=2043,py=1298,pz=111 },
  	delay = 0
  }
  changeCreature {
  	tcid = wache,
  	gotoPosition = { sx=30,sy=32,sz=0,px=1761,py=1599,pz=141 },
  	delay = 4
  }
  changeCreature {
  	tcid = wache,
  	gotoPosition = { sx=30,sy=32,sz=0,px=1744,py=1672,pz=142 },
  	delay = 12
  }
  changeCreature {
  	tcid = wache,
  	gotoPosition = {sx=30,sy=32,sz=0,px=1769,py=1593,pz=140 },
  	delay = 14
  }
  
  

end)

quest.setScript( 3638, "OnTaskAwaiting", function(args)
solveQuest(3638)

end)

quest.setScript( 3635, "OnTaskAwaiting", function(args)
setWoobEffect {
  	woid = 1051583664,
  	effect = "FXTYPE_PORTAL2",
  }

end)

quest.setScript( 2096, "OnTaskAwaiting", function(args)
local enemies = {6276,6277,6278,6279,6280,6274,6275,6270}
  for index,tcid in enemies do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "Enemy_warrior_brave_ex",
      faction = "FACTION_ENEMY_HERO",
    }
  end
  

end)

quest.setScript( 260, "OnWon", function(args)
changeCreature {
  	tcid = 885,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM22",
  	loopCount = -1,
  	dont_turn = true,
  	role = "ROLE_INVALID",
  	mortality = "MORTAL",
  }
  killCreature {
  	tcid = 885,
  	delay = 2,
  }

end)

quest.setScript( 260, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.id == 885then
  	changeCreature {
  		tcid = 885,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  		dont_turn = true,
  		faction = "FACTION_FRIEND_HERO_ALL",
  	}
  end

end)

quest.setScript( 260, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	changeCreature {
  		tcid = 885,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  		dont_turn = true,
  		faction = "FACTION_FRIEND_HERO_ALL",
  	}
  end

end)

quest.setScript( 957, "OnCounter", function(args)
return "TASKCREATURE_2722"

end)

quest.setScript( 927, "OnPrecondsFulfilled", function(args)
teleport {
  	tcid = 2492,
  	position = {px=0,py=0,pz=0,sx=0,sy=0,sz=0},
  	orientation = 0,
  }

end)

quest.setScript( 2033, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid= 5883,
  	useUnconscious = true,
  	livesRemaining = 1,
  }

end)

quest.setScript( 2033, "OnUnconscious", function(args)
if args.tcid == 5883 and args.state =="TASK_AWAITING" then 
  	-- TC droppt nicht wenn sie unconscious geht, daher solve und drop to floor	
  	solveQuest(2033)
  	changeCreature{
  		tcid= 5883,
  		livesRemaining = 0,
  		clearUnconscious= true,
  		behaviour="questCreatures",
  		faction="FACTION_INVALID",
  		role= "ROLE_DIALOG",
  		delay = 1,
  	}
  end

end)

quest.setScript( 2475, "OnSetup", function(args)
changeCreature {
  	tcid = 7263,
  	useUnconscious = true,
  	unconsciousTime = 2,
  	livesRemaining = 1	
  }

end)

quest.setScript( 2475, "OnUnconscious", function(args)
changeCreature {
  	tcid = 7263,
  	clearUnconscious = true,
  	livesRemaining = 0,
  	behaviour = "questCreatures",
  	faction = "FACTION_FRIEND_HERO_ALL",
  }

end)

quest.setScript( 2315, "OnTimer", function(args)
local tcids = {773, 775, 774, 770, 769, 768, 771, 772}	
  local tcids2 = {773, 775, 774, 770, 769, 768, 771, 772, 776}
  if args.count == 1 then
  	for index,tcid in tcids2 do
  		changeCreature {
  			tcid = tcid,
  			faction = "FACTION_ENEMY_HERO",
  			behaviour = "Enemy_warrior_brave_ex",
  			role = "ROLE_ATTACKER",
  		}
  	end
  	solveQuest(args.id)
  end
  
  --if args.count == 6 then
  	--teleport daemon in die mitte
  --	creatureTeleportPosition(776,0,{27;31;0;2250;1450;1045})
  --end
  
  if args.count == 3 then
  	--start animation + effekt
  	for index,tcid in tcids do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_MAGICB",
  			effect = "FXTYPE_GEN_SPAWN1_I",
  			effectParam = { 
  				paramtype="position", 
  				position={sx=27;sy=31;sz=0;px=2250;py=1450;pz=1045},
  				duration=1.2,
  				fxImpact="FXTYPE_GEN_SPAWN1",
  			},
  			loopCount = 1,
  		}
  	end
  	creatureTeleportPosition(776,0,{27;31;0;2250;1450;1045})
  end

end)

quest.setScript( 2315, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	setTimer {
  		id = 2315,
  		interval = 1,
  		count = 3,
  	}
  end

end)

quest.setScript( 2955, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8278,0,{49;30;-1;2022.046875;1762.796875;-0.008900;59.161621})

end)

quest.setScript( 2955, "OnTalk", function(args)
if args.id==2955 and args.state=="TASK_AWAITING" and args.tcid == 8278 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2635, "OnWon", function(args)
changeCreature {
  	tcid = 7576,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM11",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7576,
  	behaviour = "questCreatures",
  	delay = 2
  }
  creatureTeleportsAway (7576,30)

end)

quest.setScript( 1865, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.id == 1865 and args.tcid == 5151 then
  	changeCreature {
  		tcid = 5151,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM07",
  		loopCount = 1,
  	}
  end
  

end)

quest.setScript( 1865, "OnTaskFulfilled", function(args)
local magier = {
  	{
  		tcid = 5152,
  		pos = {sx=30;sy=25;sz=0;px=1450;py=900;pz=0},
  		angle = 0,
  	},
  	{
  		tcid = 5159,
  		pos = {sx=30;sy=25;sz=0;px=1400;py=850;pz=153},
  		angle = 131,
  	},
  	{
  		tcid = 5158,
  		pos = {sx=30;sy=25;sz=0;px=1500;py=850;pz=0},
  		angle = 230,
  	}
  }
  
  for id, object in magier do
  	changeCreature {
  		tcid = object.tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = object.pos,
  		followUpAngle = object.angle,
  		followUpBhv = "JOB_RICH_STATIST",
  		delay = 2,
  	}
  end
  

end)

quest.setScript( 2032, "OnWon", function(args)
changeCreature {
  	tcid = 5891,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM01",	--agree
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 5891,
  	behaviour = "walkAround",
  	delay = 3,
  }

end)

quest.setScript( 301, "OnTalk", function(args)
--if args.tcid==1148 and args.id==301 and args.state=="TASK_FULFILLED" then
  --	return "QUEST_301_TEACHER_IDLE"
  --end

end)

quest.setScript( 301, "OnDialog", function(args)
if args.state == "TASK_FULFILLED" then
  	return "QUEST_301_DIALOG"
  end
  

end)

quest.setScript( 301, "OnTaskFulfilled", function(args)
questCompleted(args)

end)

quest.setScript( 301, "OnSetup", function(args)
changeCreature {
  	tcid=1147,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {px=189.101563,py=1757.398438,pz=91.088348,sx=26,sy=24,sz=0},
    followUpBhv = "questCreatures",
  	delay=3,
  }

end)

quest.setScript( 2161, "OnWon", function(args)
creatureTeleportPosition(2180,0,{45;22;0;1100;950;0})

end)

quest.setScript( 2477, "OnTaskAwaiting", function(args)
changeCreature	{
  	tcid = 7263,
  	mortality = "MORTAL",
  }
  

end)

quest.setScript( 1795, "OnWon", function(args)
questCompleted(args)

end)

quest.setScript( 2942, "OnTalk", function(args)
if args.id==2942 and args.state=="TASK_AWAITING" and args.tcid == 7862 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2942, "OnTaskFulfilled", function(args)
creatureTeleportPosition(7862,0,{49;30;-1;1205.250000;2555.750000;-0.008900;100.477875})

end)

quest.setScript( 668, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 2115,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 668, "OnSetup", function(args)
questCompleted(args)
  

end)

quest.setScript( 2943, "OnTalk", function(args)

  if args.id==2943 and args.state=="TASK_AWAITING" and args.tcid == 7863 then
  	return bueroQuestReach()
  end
  

end)

quest.setScript( 2943, "OnTaskFulfilled", function(args)
creatureTeleportPosition(7863,0,{49;30;-1;1907.250000;1024.507813;-0.012749;342.571198})

end)

quest.setScript( 654, "OnTalk", function(args)
if args.tcid == 2102 and args.id == 654 and args.state == "PRECONDS_FULFILLED" then
  	changeCreature {
  		tcid = 2102,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_MAGICA",
  		effect = "FXTYPE_GEN_NOVA3",
  		loopCount = 1,
  		delay = 3,
  	}
  end

end)

quest.setScript( 654, "OnWon", function(args)
questCompleted(args)
  

end)

quest.setScript( 2967, "OnTalk", function(args)
if args.tcid==8272 and args.state=="TASK_AWAITING" and args.id == 2967 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2731, "OnWon", function(args)
creatureTeleportsAway ( 7846, 10 )

end)

quest.setScript( 2968, "OnTalk", function(args)
if args.tcid==8271 and args.state=="TASK_AWAITING" and args.id == 2986 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2966, "OnTalk", function(args)
if args.tcid==8270 and args.state=="TASK_AWAITING" and args.id == 2966 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2965, "OnTalk", function(args)
if args.tcid==8269 and args.state=="TASK_AWAITING" and args.id == 2965 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 413, "OnCounter", function(args)
--return "TASKCREATURE_1489"

end)

quest.setScript( 2040, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	changeCreature{
  		behaviour = "JOB_QUESTSTAGING",
  		tcid=5922,
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  	}
  end
  

end)

quest.setScript( 2921, "OnTalk", function(args)
if args.tcid==7862 and args.state=="TASK_AWAITING" and args.id == 2921 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 856, "OnTaskAwaiting", function(args)
tcids = {2530,2531,2513,2523,2529,2526,2528,2525,2524,2527}
  for index, tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		faction = "FACTION_ENEMY_HERO",
  		mortality = "MORTAL",
  	}
  end
  

end)

quest.setScript( 855, "OnTaskAwaiting", function(args)
tcids = {2523, 2524, 2525, 2526, 2527, 2528, 2529, 2530, 2531}
  
  for index, tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "Enemy_warrior_brave",
  	}
  end
  

end)

quest.setScript( 738, "OnWon", function(args)
changeCreature {
  	tcid = 2208,
  	behaviour = "JOB_QUESTSTAGING",
  	mortality = "IMMORTAL",
  	faction = "FACTION_FRIEND_HERO_ALL",
  	gotoPosition = {sx=56,sy=33,sz=0,px=2500,py=2650,pz=0.000000},
  	followUpAngle = 106,
  	speed = 2,
  	followUpBhv = "questCreatures",
  }
  creatureTeleportPosition(2208,30,{60;37;0;1297.520020;1155.859985;-1724.810059})

end)

quest.setScript( 772, "OnTaskAwaiting", function(args)
teleport {
  	tcid = 4414,
  	position = toWorldPosition("4;30;0;783.549988;3197.399902;-68.092796;62.000000"),
  	orientation = 62.000000,
  }

end)

quest.setScript( 740, "OnTaskAwaiting", function(args)
local QuestCreatures = { 
  	{
  		TCID=6245,
  		pos = {sx=49;sy=31;sz=0;px=750;py=2800;pz=-1671},
  		Behaviour= "Enemy_warrior_simple_artillery",
  	},
  	{
  		TCID=6247,
  		pos = {sx=49;sy=31;sz=0;px=1200;py=2550;pz=-1641},
  		Behaviour= "Enemy_warrior_kicknrush",
  	},
  	{
  		TCID=6248,
  		pos = {sx=49;sy=31;sz=0;px=1200;py=2200;pz=-1669},
  		Behaviour= "Enemy_warrior_kicknrush",
  	},
  	{
  		TCID=6250,
  		pos = {sx=49;sy=31;sz=0;px=1500;py=1800;pz=-1645},
  		Behaviour= "Enemy_warrior_simple_artillery",
  	},
  	{
  		TCID=6251,
  		pos = {sx=49;sy=31;sz=0;px=1950;py=1900;pz=-1679},
  		Behaviour= "Enemy_warrior_simple_artillery",
  	},
  	{
  		TCID=6252,
  		pos = {sx=49;sy=31;sz=0;px=2350;py=2300;pz=-1565},
  		Behaviour= "Enemy_mage_phalanx",
  	},
  	{
  		TCID=6254,
  		pos =  {sx=50;sy=31;sz=0;px=300;py=1750;pz=0},
  		Behaviour= "Enemy_mage_phalanx",
  	},
  	{
  		TCID=6255,
  		pos = {sx=50;sy=31;sz=0;px=500;py=2300;pz=0},
  		Behaviour= "Enemy_warrior_simple",
  	},
  	{
  		TCID=6257,
  		pos = {sx=50;sy=31;sz=0;px=300;py=2700;pz=0},
  		Behaviour= "Enemy_warrior_simple",
  	},
  	{
  		TCID=6259,
  		pos = {sx=50;sy=31;sz=0;px=900;py=2950;pz=0},
  		Behaviour= "Enemy_warrior_simple",
  	},
  	{
  		TCID = 2220,	--Lieraz
  		pos = {sx=50;sy=31;sz=0;px=1150;py=2400;pz=0},
  		Behaviour = "Enemy_warrior_simple",
  	}
  }
  
  for id,object in QuestCreatures do
  	changeCreature {
  		tcid = object.TCID,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = object.pos,
  		speed = 2,
  		followUpBhv = object.Behaviour,
  	}
  end
  
  changeCreature {
  	tcid = 2217,
  	clearAutoTeleporting = true,
  }
  changeCreature {
  	tcid = 2220,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 740, "OnCounter", function(args)
return "QUEST_740_COUNTER"

end)

quest.setScript( 2637, "OnWon", function(args)
changeCreature {
  	tcid = 7577,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM04", --applause
  	loopCount = 2,
  }
  changeCreature {
  	tcid = 7577,
  	behaviour = "questCreatures",
  	delay = 3,
  }
  
  
  

end)

quest.setScript( 2973, "OnTalk", function(args)
if args.tcid==8277 and args.state=="TASK_AWAITING" and args.id == 2973 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2972, "OnTalk", function(args)
if args.tcid==8276 and args.state=="TASK_AWAITING" and args.id == 2972 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2971, "OnTalk", function(args)
if args.tcid==8275 and args.state=="TASK_AWAITING" and args.id == 2971 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2970, "OnTalk", function(args)
if args.tcid==8274 and args.state=="TASK_AWAITING" and args.id == 2970 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2969, "OnTalk", function(args)
if args.tcid==8273 and args.state=="TASK_AWAITING" and args.id == 2969 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 1763, "OnWon", function(args)
--changeCreature {
  --	tcid=4727, 
  --	behaviour = "JOB_QUESTSTAGING",
  --	gotoPosition = {}
  --}

end)

quest.setScript( 1763, "OnTaskAwaiting", function(args)
local wachen = {4727,5905,5903,5904}
  
  changeCreature {
  	tcid=4720, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  	mortality = "MORTAL",
  	role = "ROLE_INVALID",
  	mortality = "MORTAL",
  }
  
  killCreature {
  	tcid = 4720,
  	delay = 3,
  }
  
  for index,tcid in wachen do
  	changeCreature {
  		tcid = tcid,
  		mortality = "IMMORTAL",
  	}
  end
  

end)

quest.setScript( 2638, "OnWon", function(args)
changeCreature {
  	tcid = 7602,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM33",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7602,
  	behaviour = "questCreatures",
  	delay = 4
  }

end)

quest.setScript( 2980, "OnTalk", function(args)
if args.tcid==8285 and args.state=="TASK_AWAITING" and args.id == 2980 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2979, "OnTalk", function(args)
if args.tcid==8284 and args.state=="TASK_AWAITING" and args.id == 2979 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2978, "OnTalk", function(args)
if args.tcid==8283 and args.state=="TASK_AWAITING" and args.id == 2978 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2977, "OnTalk", function(args)
if args.tcid==8282 and args.state=="TASK_AWAITING" and args.id == 2977 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 1920, "OnStateChange", function(args)
if args.state == "PREFIGHT" then
  	changeCreature {
  		tcid = 5382,
  		mortality = "MORTAL",
  	}
  end
  

end)

quest.setScript( 885, "OnWon", function(args)
tcids = {3794,3795}
  for index,tcid in tcids do
  	setRole(tcid,"ROLE_ATTACKER")
  end

end)

quest.setScript( 1675, "OnStation", function(args)
local gates1 = { 1023046854, 1023046905, 1023046923, 1023046947 }
  local gates2 = { 1023047062, 1023047090, 1023047109, 1023047127 }
  if args.currentStation == 0 then
    for index,id in gates1 do
      setWoobState {
        woid = id,
        state = "WOOB_DOOR_CLOSE",
      }
    end
  	setWoobState {
  		woid = 1023047034,
  		state = "WOOB_THINGY_OFF",
  	}
  end
  
  if args.currentStation == 1 then
    for index,id in gates2 do
      setWoobState {
        woid = id,
        state = "WOOB_DOOR_CLOSE",
      }
    end
  end
  

end)

quest.setScript( 2922, "OnTalk", function(args)
if args.tcid==7863 and args.state=="TASK_AWAITING" and args.id == 2922 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2927, "OnTalk", function(args)
if args.tcid==7857 and args.state=="TASK_AWAITING" and args.id == 2927 then
  	return bueroQuestReach()
  end

end)

quest.setScript( 2927, "OnTaskFulfilled", function(args)
creatureTeleportPosition(7857,0,{49;30;-1;1927.953125;2379.101563;-0.012749;210.661362})

end)

quest.setScript( 3163, "OnTalk", function(args)
if args.tcid==8912 and args.state=="TASK_AWAITING" and args.id == 3163 then
  	return bueroQuestReach()
  end 

end)

quest.setScript( 3163, "OnTaskFulfilled", function(args)
creatureTeleportPosition(8912,0,{47;30;-2;2078.671875;169.093750;-0.006371;269.000763})

end)

quest.setScript( 2488, "OnTaskNotFulfilled", function(args)
--addBookEntry(2488,"QUEST_LOST")

end)

quest.setScript( 2488, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid=7274,
  	role="ROLE_VICTIM"
  }

end)

quest.setScript( 634, "OnStateChange", function(args)
if args.state == "TASK_FULFILLED" then
  	changeCreature {
  		tcid = 4204,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND-IDLEA",
  		loopCount = -1,
  	}
  	changeCreature {
  		tcid = 4205,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND-IDLE",
  		loopCount = -1,
  	}
  	changeCreature {
  		tcid = 4206,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND-IDLEA",
  		loopCount = -1,
  	}
  	changeCreature {
  		tcid = 2083,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND-IDLE",
  		loopCount = -1,
  	}
  end
  
  --4204, 4205, 4206, 2083

end)

quest.setScript( 634, "OnSetup", function(args)
questCompleted(args)
  

end)

quest.setScript( 634, "OnTalk", function(args)
if args.tcid == 2075 and args.state == "PRECONDS_FULFILLED" and args.id == 634 then
  	changeCreature {
  		tcid = 2075,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_TALK",
  		loopCount = -1,
  	}
  end 

end)

quest.setScript( 634, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 2075,
  	behaviour = "questCreatures",
  }

end)

quest.setScript( 266, "OnStateChange", function(args)
--945
  
  if args.state == "PRECONDS_FULFILLED" then
  	changeCreature {
  		tcid = 945,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  		dont_turn = true,
  		faction = "FACTION_FRIEND_HERO_ALL",
  	}
  end

end)

quest.setScript( 266, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	changeCreature {
  		tcid = 945,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  		dont_turn = true,
  		faction = "FACTION_FRIEND_HERO_ALL",
  	}
  end

end)

quest.setScript( 2717, "OnStation", function(args)
questMessage {
  	lokaid= "QUEST_2717_GIVER_UNRESOLVED",
  	color = "#FF9999",
  	line = 0,
  	delay = 0,
  	duration = 1.2,
  	fadeIn= 0.2,
  	fadeOut= 0.3,
  }
  
  if args.currentStation == 0 then
  	questMessage {
  		lokaid= "QUEST_2717_COUNT_01",
  		color = "#AA9999",
  		line = 1,
  		delay = 0,
  		duration = 1,
  		fadeIn= 0.2,
  		fadeOut= 0.3,
  	}
  end 
  if args.currentStation == 1 then
  	questMessage {
  		lokaid= "QUEST_2717_COUNT_02",
  		color = "#AA9999",
  		line = 1,
  		delay = 0,
  		duration = 1,
  		fadeIn= 0.2,
  		fadeOut= 0.3,
  	}
  end 
  if args.currentStation == 2 then
  	questMessage {
  		lokaid= "QUEST_2717_COUNT_03",
  		color = "#AA9999",
  		line = 1,
  		delay = 0,
  		duration = 1,
  		fadeIn= 0.2,
  		fadeOut= 0.3,
  	}
  end 

end)

quest.setScript( 2717, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	changeCreature{
  		tcid = 7827,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM13",
  		loopCount = -1,
  }
  end
  
  if args.state == "WON" then
  	changeCreature{
  		tcid = 7827,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM09",
  		loopCount = 2,
  }
  end
  

end)

quest.setScript( 2717, "OnWon", function(args)

  changeCreature {
  	tcid = 7827,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM17", --cheer
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7827,
  	behaviour = "questCreatures",
  	delay = 4,
  }

end)

quest.setScript( 1360, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
    for index,tcid in { 5182,5183,5184,5185,5186 } do
    	changeCreature {
  		  tcid = tcid,
  		  behaviour = "JOB_QUESTSTAGING",
  		  emotion = "ANIM_TYPE_SM20",
  		  loopCount = -1,
  	  }
    end
  end
  

end)

quest.setScript( 3461, "OnWon", function(args)
unlockShipPortal(3461,7,"NORTH",args.heroRef)

end)

quest.setScript( 3332, "OnWon", function(args)
setWoobState {
  	woid = 1018380619,
  	state = "WOOB_DOOR_OPEN",
  }
  setWoobState {
  	woid = 1018380619,
  	state = "WOOB_INVALID",
  	delay = 0.1,
  }
  --invalid raus, invisible rein, sobald in der version (sa/mo)
  --setWoobState {
  --	woid = 1018380619,
  --	state = "WOOB_INVISIBLE",
  --	delay = 0.1,
  --}

end)

quest.setScript( 1782, "OnUnconscious", function(args)
if args.tcid == 4982 or 
  args.tcid == 4983 or 
  args.tcid == 4984 or 
  args.tcid == 4985 or 
  args.tcid == 4986 then
  
  	changeCreature{
  		tcid = args.tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM23",
  		loopCount = -1,
  		clearUnconscious = true,
  		livesRemaining = 0,
  		faction = "FACTION_ATMO",
  		role = "ROLE_INVALID"
  	}
  end
  

end)

quest.setScript( 1782, "OnTaskAwaiting", function(args)
local ids = {4982,4983,4984,4985,4986}
  
  for i,id in ids do
  	changeCreature{
  		tcid = id,
  		useUnconscious = true,
  		livesRemaining = 1,
  		unconsciousTime = 0,
  	}
  end
  

end)

quest.setScript( 1782, "OnWon", function(args)
changeCreature {
  	tcid = 4641,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM34",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 4641,
  	behaviour = "questCreatures",
  	delay = 2
  }

end)

quest.setScript( 2490, "OnWon", function(args)
setWoobEffect {
  	woid = 1021159739,
  	effect = "FXTYPE_INVALID",
  }

end)

quest.setScript( 866, "OnWon", function(args)
changeCreature {
  	tcid = 2555,
  	effect = "FXTYPE_QFX_FLIEGENSCHWARM",
  	delay = 1,
  	mortality = "MORTAL",
  }
  
  killCreature {
  	tcid = 2555,
  	delay = 3
  }
  
  destroyCreature {
  	tcid = 2555,
  	delay = 10,
  	splatter = false,
  }
  

end)

quest.setScript( 1925, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 3028, -- tybor
    role = "ROLE_ATTACKER",
  }
  

end)

quest.setScript( 863, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 2541,
  	livesRemaining = 1,
  	useUnconscious = true,
  	unconsciousTime = 3
  }

end)

quest.setScript( 863, "OnUnconscious", function(args)
changeCreature{
  	tcid = 5437,
    clearUnconscious = true,
    behaviour = "questCreatures",
  	faction = "FACTION_FRIEND_HERO_ALL",
  }

end)

quest.setScript( 1463, "OnWon", function(args)
changeCreature {
  	tcid = 3881,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 3881,
  	behaviour = "questCreatures",
  	delay = 4
  }

end)

quest.setScript( 879, "OnDeath", function(args)
local guards = {6990,6991,6992,6993}
  if args.tcid == 213 or args.tcid == 299 or args.tcid == 300 
  or args.tcid == 301 or args.tcid == 302 then
    for index,tcid in guards do
      changeCreature {
        tcid = tcid,
        behaviour = "Enemy_warrior_brave",
        faction = "FACTION_HIGHELVE_GUARD",
      }
    end
  end
  

end)

quest.setScript( 879, "OnTaskAwaiting", function(args)
for index,tcid in {2569,2570,2571,2572,2573} do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_GEN_TPRISON",
  	}
  end
  

end)

quest.setScript( 879, "OnTaskFulfilled", function(args)
local hostages = {2569,2570,2571,2572,2573}
  for index,tcid in hostages do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_INVALID",
  	}
  end 

end)

quest.setScript( 1502, "OnTaskAwaiting", function(args)
local tcids = {4049,4050,4051,4052}
  for i, tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		role = "ROLE_ATTACKER",
  		mortality = "MORTAL"
  	}
  end
  

end)

quest.setScript( 1502, "OnSetup", function(args)
-- FIX ME: The following only works when unequipped, not yet available!
  changeCreature{
  	tcid = 4049,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM25",
  	loopCount = -1
  }
  changeCreature{
  	tcid = 4050,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_IDLE",
  	loopCount = -1
  }
  changeCreature{
  	tcid = 4051,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITTALK",
  	loopCount = -1
  }
  changeCreature{
  	tcid = 4052,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITEAT",
  	loopCount = -1
  }
  

end)

quest.setScript( 1508, "OnTalk", function(args)
changeCreature{
    tcid = 4110,
    emotion = "ANIM_TYPE_SM21", -- dying, talking 
    loopCount = -1,
    behaviour = "JOB_QUESTSTAGING"
  }

end)

quest.setScript( 1508, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	changeCreature{
  		tcid = 4110,
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  		behaviour = "JOB_QUESTSTAGING"
  		--dont_turn = 1
  	}
  end
  
  if args.state == "TASK_AWAITING" then
  	changeCreature{
  		tcid = 4110,
  		emotion = "ANIM_TYPE_SM22",
  		loopCount = 0,
  		behaviour = "JOB_QUESTSTAGING",
  		mortality = "MORTAL",
  		role = "ROLE_INVALID"
  	}
  	killCreature {
  		tcid = 4110,
  		deinitragdoll = false,
  		delay = 2,
  	}
  end

end)

quest.setScript( 1921, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 5433,
  	role = "ROLE_VICTIM"
  }

end)

quest.setScript( 1921, "OnLost", function(args)
--addBookEntry(1921, "QUEST_LOST")

end)

quest.setScript( 667, "OnTaskFulfilled", function(args)
setWoobState {
  	woid = 1018380619,
  	state = "WOOB_DOOR_OPEN",
  }
  
  setWoobState {
  	woid = 1018380619,
  	state = "WOOB_INVISIBLE",
    delay = 0.1,
  }

end)

quest.setScript( 667, "OnStation", function(args)
if args.currentStation == 0 then
  	setWoobState {
  		woid = 1018382118,
  		state = "WOOB_THINGY_OFF",
  	}
  	setWoobState {
  		woid = 1018380619,
  		state = "WOOB_DOOR_LOCKED",
  	}
  end
  

end)

quest.setScript( 2976, "OnTalk", function(args)
if args.tcid==8280 and args.state=="TASK_AWAITING" and args.id == 2976 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2975, "OnTalk", function(args)
if args.tcid==8279 and args.state=="TASK_AWAITING" and args.id == 2975 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 2974, "OnTalk", function(args)
if args.tcid==8278 and args.state=="TASK_AWAITING" and args.id == 2974 then
  	return bueroQuestTalk()
  end

end)

quest.setScript( 3162, "OnTalk", function(args)
if args.tcid==8912 and args.state=="TASK_AWAITING" and args.id == 3162 then
  	return bueroQuestTalk()
  end 

end)

quest.setScript( 3168, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 8514,
    useUnconscious = true,
    livesRemaining = 1,
    unconsciousTime = 1,
  }
  

end)

quest.setScript( 3168, "OnUnconscious", function(args)
if args.tcid == 8514 then
    changeCreature {
      tcid = 8514,
  		clearUnconscious = true,
      clearAutoTeleporting = true,
  		mortality = "IMMORTAL",
  		role = "ROLE_DIALOG",
      }
  end
  

end)

quest.setScript( 3168, "OnTaskFulfilled", function(args)
creatureGotoPosition (8514,{38;21;0;1947.099976;971.203003;-106.709000})

end)

quest.setScript( 3051, "OnWon", function(args)
changeCreature {
  	tcid = 8510,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM01", --agree
  	loopCount = 2,
  }
  changeCreature {
  	tcid = 8510,
  	behaviour = "questCreatures",
  	delay = 3,
  }
  
  
  

end)

quest.setScript( 3167, "OnUnconscious", function(args)
if args.tcid == 8513 then
    changeCreature {
      tcid = 8513,
  		clearUnconscious = true,
      clearAutoTeleporting = true,
  		mortality = "IMMORTAL",
  		role = "ROLE_DIALOG",
      }
  end
  

end)

quest.setScript( 3167, "OnTaskFulfilled", function(args)
creatureGotoPosition (8513,{38;21;0;1929.949951;895.546997;-106.709000})

end)

quest.setScript( 3167, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 8513,
    useUnconscious = true,
    livesRemaining = 1,
    unconsciousTime = 1,
  }
  

end)

quest.setScript( 1498, "OnCounter", function(args)
return "TASKCREATURE_4074"

end)

quest.setScript( 1787, "OnStateChange", function(args)
if args.id==1787 and args.state=="PRECONDS_FULFILLED" then
  	WeatherDefinitions.quest_1787_16_53 = {sx=16,sy=53,sz=0,density=100,flags=WEATHERFLAG_RAIN+WEATHERFLAG_WIND}
  	WeatherDefinitions.quest_1787_17_53 = {sx=17,sy=53,sz=0,density=100,flags=WEATHERFLAG_RAIN+WEATHERFLAG_WIND}
  	WeatherDefinitions.quest_1787_16_52 = {sx=16,sy=52,sz=0,density=100,flags=WEATHERFLAG_RAIN+WEATHERFLAG_WIND}
  	WeatherDefinitions.quest_1787_17_52 = {sx=17,sy=52,sz=0,density=100,flags=WEATHERFLAG_RAIN+WEATHERFLAG_WIND}
  end
  

end)

quest.setScript( 2317, "OnTaskAwaiting", function(args)
changeCreature {
     tcid=7026,
     clearAutoTeleporting = true,
    }

end)

quest.setScript( 421, "OnWon", function(args)
changeCreature {
    tcid =1522,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM24", --pray
    loopCount = 1,
  }
  changeCreature {
    tcid =1522,
    behaviour = "JOB_RICH_STATIST",
  	delay = 3,
  }

end)

quest.setScript( 3229, "OnSetup", function(args)
changeCreature{
  	tcid = 9129,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM15",
  	loopCount = 1,
  	effect = "FXTYPE_GEN_TRANSFORM",
  	creature = "Monst_werewolf",
  }
  
  creatureTeleportPosition (9146,0,{17,5,0,600.000000,2000.000000,0.000000,0.000000})
  creatureTeleportPosition (9147,0,{17,5,0,700.000000,2100.000000,0.000000,0.000000})
  creatureTeleportPosition (9148,0,{17,5,0,850.000000,2100.000000,0.000000,0.000000})
  creatureTeleportPosition (9149,0,{17,5,0,950.000000,2050.000000,0.000000,0.000000})
  creatureTeleportPosition (9150,0,{17,5,0,750.000000,2000.000000,0.000000,0.000000})
  creatureTeleportPosition (9151,0,{17,5,0,1000.000000,2150.000000,0.000000,0.000000})

end)

quest.setScript( 3229, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9146,
  	role = "ROLE_ATTACKER",
  	delay = 0.1,
  }
  changeCreature {
  	tcid = 9147,
  	role = "ROLE_ATTACKER",
  	delay = 0.1,
  }
  changeCreature {
  	tcid = 9148,
  	role = "ROLE_ATTACKER",
  	delay = 0.1,
  }
  changeCreature {
  	tcid = 9149,
  	role = "ROLE_ATTACKER",
  	delay = 0.1,
  }
  changeCreature {
  	tcid = 9150,
  	role = "ROLE_ATTACKER",
  	delay = 0.1,
  }
  changeCreature {
  	tcid = 9151,
  	role = "ROLE_ATTACKER",
  	delay = 0.1,
  }

end)

quest.setScript( 1543, "OnTaskFulfilled", function(args)
--changeCreature {
  --	tcid = 4207,
  --	behaviour = "JOB_QUESTSTAGING",
  --	role = "ROLE_INVALID",
  --	gotoPosition = { sx=42,sy=37,sz=0,px=1843,py=584,pz=1069 }
  --}
  

end)

quest.setScript( 3423, "OnTaskFulfilled", function(args)
creatureTeleportsAway (9705,0)

end)

quest.setScript( 3476, "OnTaskFulfilled", function(args)
solveQuest(3476)

end)

quest.setScript( 3477, "OnTaskFulfilled", function(args)
solveQuest(3477)

end)

quest.setScript( 3429, "OnTaskFulfilled", function(args)
creatureTeleportsAway (9695,0)

end)

quest.setScript( 3426, "OnTaskFulfilled", function(args)
creatureTeleportsAway (9713,0)

end)

quest.setScript( 3425, "OnTaskFulfilled", function(args)
creatureTeleportsAway (9696,0)

end)

quest.setScript( 2981, "OnLost", function(args)
--addBookEntry(2981,"QUEST_LOST")

end)

quest.setScript( 2981, "OnTaskAwaiting", function(args)
changeCreature{
    tcid = 8289,
  	role = "ROLE_VICTIM"
  }

end)

quest.setScript( 1473, "OnStateChange", function(args)

  if args.state == "TASK_AWAITING" then
  	tcids = { 3935, 3936, 3937, 3938, 3939, 3940, 3941, 3942, 3943, 3944, 3945 }
  
  	for index, tcid in tcids do
  
  		changeCreature {
  			tcid = tcid,
  			mortality = "MORTAL",
  		}
  
  	end
  end
  

end)

quest.setScript( 202, "OnWon", function(args)
changeCreature {
  	tcid = 599, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM04",
  	loopCount = 1,
  }
  

end)

quest.setScript( 876, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 295,
  	effect = "FXTYPE_GEN_TPRISON",
  }

end)

quest.setScript( 428, "OnWon", function(args)
changeCreature {
  	tcid = 1542, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM24",
  	loopCount = 1,
  }
  

end)

quest.setScript( 428, "OnCounter", function(args)
return "TASKCREATURE_2033"

end)

quest.setScript( 133, "OnWon", function(args)
changeCreature {
  	tcid = 354, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32",
  	loopCount = 1,
  }
  
  

end)

quest.setScript( 930, "OnTaskAwaiting", function(args)
local tcids  = {2656,2657,5050,4920,4921}
  
  for i, tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		mortality = "MORTAL"
  	}
  end
  

end)

quest.setScript( 3170, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 8517,
    useUnconscious = true,
    livesRemaining = 1,
    unconsciousTime = 1,
  }
  

end)

quest.setScript( 3170, "OnTaskFulfilled", function(args)
creatureGotoPosition (8517,{38;21;0;2030.000000;1080.300049;-106.707001})

end)

quest.setScript( 3170, "OnUnconscious", function(args)
if args.tcid == 8517 then
    changeCreature {
      tcid = 8517,
  		clearUnconscious = true,
      clearAutoTeleporting = true,
  		mortality = "IMMORTAL",
  		role = "ROLE_DIALOG",
      }
  end
  

end)

quest.setScript( 3171, "OnTaskFulfilled", function(args)
creatureGotoPosition (8518,{38;21;0;2086.889893;1109.819946;-104.789001})

end)

quest.setScript( 3171, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 8518,
    useUnconscious = true,
    livesRemaining = 1,
    unconsciousTime = 1,
  }
  

end)

quest.setScript( 3171, "OnUnconscious", function(args)
if args.tcid == 8518 then
    changeCreature {
      tcid = 8518,
  		clearUnconscious = true,
      clearAutoTeleporting = true,
  		mortality = "IMMORTAL",
  		role = "ROLE_DIALOG",
      }
  end
  

end)

quest.setScript( 936, "OnPrecondsFulfilled", function(args)
local robber = {2662,2663,2664,2665,2666}
  
  for index,tcid in robber do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_SPPL_RISE",
  		delay = 0.1,
  	}
  end
  

end)

quest.setScript( 2612, "OnWon", function(args)
local tcids = {7538,7539,7540}
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_SPPL_RISE",
  		delay = 0.1,
  		role = "ROLE_ATTACKER",
  	}
  end

end)

quest.setScript( 1363, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.id == 1363 and args.tcid == 5190 then
  	changeCreature {
  		tcid = 5190,
  		behaviour = "JOB_QUESTSTAGING",
  		effect = "FXTYPE_CHEST2B",
  		emotion = "ANIM_TYPE_MAGICB",
  		loopCount = 1,
  	}
  	changeCreature {
  		tcid = 5190,
  		behaviour = "JOB_QUESTSTAGING",
  		effect = "FXTYPE_INVALID",
  		delay = 6,
  	}
  end
  

end)

quest.setScript( 2610, "OnWon", function(args)
local tcids = {7536,7537}
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_SPPL_RISE",
  		delay = 0.1,
  		role = "ROLE_ATTACKER",
  	}
  end 

end)

quest.setScript( 2608, "OnWon", function(args)
local tcids = {7534,7535}
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_SPPL_RISE",
  		delay = 0.1,
  		role = "ROLE_ATTACKER",
  	}
  end

end)

quest.setScript( 2606, "OnWon", function(args)
changeCreature {
  	tcid = 7533,
  	effect = "FXTYPE_SPPL_RISE",
  	delay = 0.1,
  	role = "ROLE_ATTACKER",
  }

end)

quest.setScript( 2604, "OnWon", function(args)
local tcids = {7531,7532}
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_SPPL_RISE",
  		delay = 0.1,
  		role = "ROLE_ATTACKER",
  	}
  end

end)

quest.setScript( 1800, "OnWon", function(args)
changeCreature {
   tcid=4805,
   behaviour = "JOB_QUESTSTAGING",
   emotion = "ANIM_TYPE_DEFENSE",
   loopCount = -1,
   effect="FXTYPE_GEN_TRANSFORM",
    delay=4,
  }
    destroyCreature {
    	tcid = 4805,
    	splatter = true,
    	delay = 6
    }

end)

quest.setScript( 2602, "OnWon", function(args)
local tcids = {7528,7529,7530}
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_SPPL_RISE",
  		delay = 0.1,
  		role = "ROLE_ATTACKER",
  	}
  end

end)

quest.setScript( 2600, "OnWon", function(args)
changeCreature {
  	tcid = 7527,
  	effect = "FXTYPE_SPPL_RISE",
  	delay = 0.1,
  	role = "ROLE_ATTACKER",
  }
  

end)

quest.setScript( 1511, "OnTaskFulfilled", function(args)

  local inq = {4138,4139,4141,4146,4147,4150,4151,4130}
  local he = {4125,4129,4133,4115,4116,4118,8710,8711,8712,8713,8714}
  
  for index,tcid in inq do
  	creatureTeleportsAway(tcid,300)
  end
  for index,tcid in he do
  	creatureTeleportsAway(tcid,300)
  end
  

end)

quest.setScript( 1511, "OnTaskAwaiting", function(args)
local tcids = { 4115, 4116, 4118, 4125, 4129, 4130, 4133, 4138, 4139, 4141, 4146, 4147, 4150, 4151 }
  
  for index, tcid in tcids do
  	changeCreature {
  		tcid=tcid,
  		mortality="MORTAL",
  	}
  end 

end)

quest.setScript( 3165, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 8094,
    useUnconscious = true,
    livesRemaining = 1,
    unconsciousTime = 1,
  }
  

end)

quest.setScript( 3165, "OnTaskFulfilled", function(args)
creatureGotoPosition (8094,{38;21;0;1889.010010;737.656006;-105.801003})

end)

quest.setScript( 3165, "OnUnconscious", function(args)
if args.tcid == 8094 then
    changeCreature {
      tcid = 8094,
  		clearUnconscious = true,
      clearAutoTeleporting = true,
  		mortality = "IMMORTAL",
  		role = "ROLE_DIALOG",
      }
  end
  

end)

quest.setScript( 3234, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" then
  changeCreature{
  	tcid = 9129,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM21",
  	loopCount = -1
  }
  end
  

end)

quest.setScript( 3234, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 9129,
  	useUnconscious = true,
  	livesRemaining = 1,
  	unconsciousTime = 3,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 3234, "OnUnconscious", function(args)
if args.id == 3234 and args.tcid == 9129 then
  	changeCreature{
  		tcid = 9129,
  		clearUnconscious = true,
  		livesRemaining = 0,
  		behaviour = "JOB_QUESTSTAGING",
  		faction = "FACTION_INVALID",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  		delay = 2,
  	}
  end
  

end)

quest.setScript( 3166, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 8512,
    useUnconscious = true,
    livesRemaining = 1,
    unconsciousTime = 1,
  }
  

end)

quest.setScript( 3166, "OnUnconscious", function(args)
if args.tcid == 8512 then
    changeCreature {
      tcid = 8512,
  		clearUnconscious = true,
      clearAutoTeleporting = true,
  		mortality = "IMMORTAL",
  		role = "ROLE_DIALOG",
      }
  end
  

end)

quest.setScript( 3166, "OnTaskFulfilled", function(args)
creatureGotoPosition (8512,{38;21;0;1894.949951;816.351990;-106.716003})

end)

quest.setScript( 3169, "OnUnconscious", function(args)
if args.tcid == 8515 then
    changeCreature {
      tcid = 8515,
  		clearUnconscious = true,
      clearAutoTeleporting = true,
  		mortality = "IMMORTAL",
  		role = "ROLE_DIALOG",
      }
  end
  

end)

quest.setScript( 3169, "OnTaskFulfilled", function(args)
creatureGotoPosition (8515,{38;21;0;1991.349976;1022.200012;-106.709000})

end)

quest.setScript( 3169, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 8515,
    useUnconscious = true,
    livesRemaining = 1,
    unconsciousTime = 1,
  }
  

end)

quest.setScript( 3093, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 8695,
  	behaviour = "Enemy_warrior_brave_tenergy",
  	visible = true,
  	delay = 0.1,
  }

end)

quest.setScript( 1365, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.id == 1365 and args.tcid == 3683 then
  	changeCreature {
  	 tcid = 3683,
  	 behaviour = "JOB_QUESTSTAGING",
  	 emotion = "ANIM_TYPE_EM13",
  	 loopCount = 1,
  	}
  end

end)

quest.setScript( 3094, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 8696,
  	behaviour = "Enemy_warrior_brave_tenergy",
  	visible = true,
  	delay = 0.1,
  }

end)

quest.setScript( 2706, "OnTalk", function(args)
if args.tcid == 7816 and args.state == "TASK_AWAITING" then
  	changeCreature {
  		tcid = 7816,
  		behaviour = "Hireling_distance"
  	}
  end
  

end)

quest.setScript( 2706, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 7816,
  	clearAutoTeleporting = true
  }
  

end)

quest.setScript( 2706, "OnStation", function(args)
if args.currentStation == 0 then
  	changeCreature {
  		tcid = 7816,
  		behaviour = "questCreatures"
  	}
  elseif args.currentStation == 2 then
  	changeCreature {
  		tcid = 7816,
  		behaviour = "questCreatures"
  	}
  	changeCreature {
  		tcid = 9118,
  		role = "ROLE_INVALID",
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = {sx=36,sy=37,sz=0 , px=250,py=2350,pz=0},
  		speed = 2,
  		delay = 2
  	}
  	creatureTeleportsAway(9118,10)
  end
  

end)

quest.setScript( 2149, "OnWon", function(args)

  creatureTeleportsAway( 2495, 3 )

end)

quest.setScript( 3095, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 8697,
  	behaviour = "Enemy_warrior_brave_tenergy",
  	visible = true,
  	delay = 0.1,
  }

end)

quest.setScript( 3096, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 8698,
  	behaviour = "Enemy_warrior_brave_tenergy",
  	visible = true,
  	delay = 0.1,
  }

end)

quest.setScript( 3097, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 8699,
  	behaviour = "Enemy_warrior_brave_tenergy",
  	visible = true,
  	delay = 0.1,
  }

end)

quest.setScript( 3098, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 8700,
  	behaviour = "Enemy_warrior_brave_tenergy",
  	visible = true,
  	delay = 0.1,
  }

end)

quest.setScript( 3237, "OnTaskAwaiting", function(args)

  changeCreature {
  	tcid = 8848,
  	visible = true,
  	effect = "FXTYPE_GEN_FRAG_DUST"
  }
  local tcids = { 8849,8850,8851,8852,8853,8854,8855,8856,8857,8858	}
  local positions = {
  	{17,9,0 , 600,1850,0},
  	{17,9,0 , 650,1700,0},
  	{17,9,0 , 750,1650,0},
  	{17,9,0 , 850,1650,0},
  	{17,9,0 , 1050,1650,0},
  	{17,9,0 , 1150,1750,0},
  	{17,9,0 , 1200,1800,0},
  	{17,9,0 , 1200,1900,0},
  	{17,9,0 , 850,1800,0},
  	{17,9,0 , 1050,1800,0},
  }
  for i, tcid in tcids do
  	creatureTeleportPosition ( tcid, 0, positions[i] )
  end
  

end)

quest.setScript( 2692, "OnTaskFulfilled", function(args)
local ids = {7783,7784,7785,7786,7787,7750}
  local pos = {
  {45,19,0,1638,2052,2290},320,
  {45,19,0,1548,2202,2280},320,
  {45,19,0,1289,2095,2299},90,
  {45,19,0,1488,1610,2295},194,
  {45,19,0,1617,1717,2295},200,
  {45,19,0,1559,1611,2300},210,
  }
  
  for i,id in ids do
  	creatureGotoPositionA(id,pos[(2*i)-1],pos[2*i])
  end
  

end)

quest.setScript( 2692, "OnTaskAwaiting", function(args)
local ids = {7750,7783,7784,7785,7786,7787}
  for index,id in ids do
  	changeCreature{
  		tcid = id,
  		useUnconscious = true,
  		livesRemaining = 255,
  		unconsciousTime = 2,
  		clearAutoTeleporting = true,
  	}
  end
  

end)

quest.setScript( 1580, "OnStateChange", function(args)

  --game.teleport(35,36,0 , 1650,150,1306)
  if args.state == "WON" then
  	teleport {
  		tcid = 4240,
  		position = {sx=35,sy=36,sz=0,px=1650,py=150,pz=1306}
  	}
  end
  

end)

quest.setScript( 3448, "OnTaskFulfilled", function(args)
local snow = {1036879790,1036885849,1036885732,1036885721,1036885836,
  							1036885821,1036885774,1036885764,1036885745,1036885801,
  							1036886123,1036886147,1036891883,1036892146,1036891866,
  							1036891912,1036891925,1036891942,1036891982,1036892104,
  							1036892103,1036898690,1036898757,1036898741,1036898793,
  							1036898815,1036898839,1036898908,1036898946,1036898976,
  							1036899172,1036899171,1036899271,1036899272,1036899485}
  
  for index,woid in snow do
  	setWoobEffect {
  		woid = woid,
  		effect = "FXTYPE_SNOWFALL",
  	}
  end
  

end)

quest.setScript( 3434, "OnTaskFulfilled", function(args)
creatureTeleportsAway (9692, 1)
  

end)

quest.setScript( 3434, "OnTaskAwaiting", function(args)
local group = {9607,9608,9609}
  for index,tcid in group do
  	changeCreature {	
  		tcid = tcid,
  		addToGroup = 9607,
  	}
  end
  

end)

quest.setScript( 3421, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 9698,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx= 43;sy=56;sz=0;px=2650.000000;py=750.000000;pz=0.000000}
  }
  

end)

quest.setScript( 1579, "OnWon", function(args)
--addBookEntry(1579, "QUEST_DONE")

end)

quest.setScript( 822, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 912,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=30,sy=34,sz=0,px=2943,py=605,pz=112},
  	followUpBhv = "questCreatures",
  }

end)

quest.setScript( 2150, "OnWon", function(args)
for index,id in {6549,6551,6552,6553,6554} do
  	creatureTeleportsAway(id, 2)
  end
  

end)

quest.setScript( 2150, "OnTaskAwaiting", function(args)
for index,id in {6549,6551,6552,6553,6554} do
  	changeCreature {
  		tcid = id,
  		effect = "FXTYPE_GEN_TPRISON",
  	}
  end
  

end)

quest.setScript( 2150, "OnTaskFulfilled", function(args)
for index,id in {6549,6551,6552,6553,6554} do
  	changeCreature {
  		tcid = id,
  		effect = "FXTYPE_INVALID",
  	}
  end
  

end)

quest.setScript( 638, "OnTaskFulfilled", function(args)
--2089, 2090, 2092, 2093, 2094
  changeCreature {
  	tcid = 2089,
  	effect = "FXTYPE_GEN_TPRISON",
  }
  changeCreature {
  	tcid = 2090,
  	effect = "FXTYPE_GEN_TPRISON",
  }
  changeCreature {
  	tcid = 2092,
  	effect = "FXTYPE_GEN_TPRISON",
  }
  changeCreature {
  	tcid = 2093,
  	effect = "FXTYPE_GEN_TPRISON",
  }
  changeCreature {
  	tcid = 2094,
  	effect = "FXTYPE_GEN_TPRISON",
  }

end)

quest.setScript( 638, "OnWon", function(args)
--2089, 2090, 2092, 2093, 2094
  changeCreature {
  	tcid = 2089,
  	effect = "FXTYPE_INVALID",
  	behaviour = "Enemy_warrior_brave",
  	faction = "FACTION_ENEMY_HERO",
  }
  changeCreature {
  	tcid = 2090,
  	effect = "FXTYPE_INVALID",
  	behaviour = "Enemy_warrior_brave",
  	faction = "FACTION_ENEMY_HERO",
  }
  changeCreature {
  	tcid = 2092,
  	effect = "FXTYPE_INVALID",
  	behaviour = "Enemy_warrior_brave",
  	faction = "FACTION_ENEMY_HERO",
  }
  changeCreature {
  	tcid = 2093,
  	effect = "FXTYPE_INVALID",
  	behaviour = "Enemy_warrior_brave",
  	faction = "FACTION_ENEMY_HERO",
  }
  changeCreature {
  	tcid = 2094,
  	effect = "FXTYPE_INVALID",
  	behaviour = "Enemy_warrior_brave",
  	faction = "FACTION_ENEMY_HERO",
  }

end)

quest.setScript( 1077, "OnTaskAwaiting", function(args)
if nil then
  	local tcids = {3000,3001}
  	for index,tcid in tcids do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "Enemy_warrior_brave",
  			faction = "FACTION_ENEMY_HERO",
  			role = "ROLE_ATTACKER",
  		}
  	end
  end 
  
  
  

end)

quest.setScript( 1077, "OnSetup", function(args)
cutscene_IN_bad(args)
  

end)

quest.setScript( 1077, "OnTaskFulfilled", function(args)
stopQuestSpeech {
  	tcid = 3001,
  }

end)

quest.setScript( 1074, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 2994,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM22",
  	loopCount = -1,
  	mortality = "MORTAL",
  	role = "ROLE_INVALID",
  }
  killCreature {
  	tcid = 2994,
  	delay = 2,
  }

end)

quest.setScript( 1074, "OnTalk", function(args)
if args.state == "TASK_AWAITING" and args.tcid == 2994 then
  	changeCreature {
  		tcid = 2994,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  end 

end)

quest.setScript( 1074, "OnSetup", function(args)
cutscene_DR_good(args)
  

end)

quest.setScript( 3450, "OnWon", function(args)
changeCreature {
  	tcid = 9656,
  	mortality = "MORTAL",
  	role = "ROLE_ATTACKER"
  }

end)

quest.setScript( 3479, "OnPrecondsFulfilled", function(args)
local snow = {1036879790,1036885849,1036885732,1036885721,1036885836,
  							1036885821,1036885774,1036885764,1036885745,1036885801,
  							1036886123,1036886147,1036891883,1036892146,1036891866,
  							1036891912,1036891925,1036891942,1036891982,1036892104,
  							1036892103,1036898690,1036898757,1036898741,1036898793,
  							1036898815,1036898839,1036898908,1036898946,1036898976,
  							1036899172,1036899171,1036899271,1036899272,1036899485}
  
  for index,woid in snow do
  	setWoobEffect {
  		woid = woid,
  		effect = "FXTYPE_SNOWFALL",
  	}
  end
  

end)

quest.setScript( 3480, "OnPrecondsFulfilled", function(args)
local snow = {1036879790,1036885849,1036885732,1036885721,1036885836,
  							1036885821,1036885774,1036885764,1036885745,1036885801,
  							1036886123,1036886147,1036891883,1036892146,1036891866,
  							1036891912,1036891925,1036891942,1036891982,1036892104,
  							1036892103,1036898690,1036898757,1036898741,1036898793,
  							1036898815,1036898839,1036898908,1036898946,1036898976,
  							1036899172,1036899171,1036899271,1036899272,1036899485}
  
  for index,woid in snow do
  	setWoobEffect {
  		woid = woid,
  		effect = "FXTYPE_SNOWFALL",
  	}
  end
  

end)

quest.setScript( 877, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 295,
  	effect = "FXTYPE_INVALID",
  }

end)

quest.setScript( 877, "OnWon", function(args)
changeCreature {
  	tcid = 295,
  	behaviour = "JOB_QUESTSTAGING",
  	effect = "FXTYPE_GEN_TELEPORT",
  }
  teleport {
  	tcid = 295,
  	position = {px=1235.898438,py=2394.398438,pz=912.735474,sx=16,sy=32,sz=0},
  	orientation = 167.522293,
  	delay = 2,
  }
  changeCreature {
  	tcid = 295,
  	behaviour = "questCreatures",
  	effect = "FXTYPE_INVALID",
  	delay = 5,
  }

end)

quest.setScript( 877, "OnCounter", function(args)
return "TASKCREATURE_268"

end)

quest.setScript( 3433, "OnTimer", function(args)

  setFixedListener{
  	position = nil,
  }
  
  solveQuest {
  	id = 3433
  }
  

end)

quest.setScript( 3433, "OnTaskAwaiting", function(args)

  --local p = getPos{ heroRef = args.heroRef }
  local p = {sx=18,sy=32,sz=0,px=2600,py=2250,pz=0}
  setFixedListener{
  	position = p,
  }
  playQuestSpeech {
  	tcid = 3290,
  	lokaid = "QUEST_1180_KING",
  	questid = 3433
  }
  
  setTimer{
  	id = 3433,
  	interval = 3,
  	count = 1
  }

end)

quest.setScript( 821, "OnTaskFulfilled", function(args)
changeCreature{
    tcid = 912,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_DEFENSE",
  	loopCount = -1,
  	delay = 2,
  }

end)

quest.setScript( 821, "OnWon", function(args)
changeCreature{
    tcid = 912,
  	emotion = "ANIM_TYPE_INVALID"
  }

end)

quest.setScript( 737, "OnWon", function(args)
--DUMMY TELEPORT - Wird ersetzt, sobald der Captain richtig funzt
  --teleportTeam(737,"18;3;0;3050.000000;1450.000000;0.000000;0.000000")
  
  unlockShipPortal(737,4,"SOUTH",args.heroRef)
  unlockShipPortal(737,3,"SOUTH",args.heroRef)

end)

quest.setScript( 737, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9529,
  	visible = false
  }

end)

quest.setScript( 737, "OnTaskFulfilled", function(args)
--creatureTeleportsAway(1147,1)
  creatureTeleportsAway(9529,1)

end)

quest.setScript( 737, "OnStation", function(args)
if args.currentStation == 0 then
  	teleport {
  		tcid = 1147,
  		position = {sx=0;sy=0;sz=0;px=0;py=0;pz=0},
  		orientation = 0,
  	}
  	changeCreature {
  		tcid = 9529,
  		visible = true,
  		delay = 1,
  	}
  --	changeCreature {
  --		tcid = 1147,
  --		effect = "FXTYPE_HOLOGRAM",
  --		delay = 0.1
  --	}
  end 
  
  

end)

quest.setScript( 3239, "OnTaskFulfilled", function(args)
changeCreature {
      tcid = 9155,
      clearAutoTeleporting = true,
    role = "ROLE_DIALOG",
      }

end)

quest.setScript( 1737, "OnTaskAwaiting", function(args)
tcids = {4665,4666,4667,4668,4669,
  4670,4671,4672,4673,4674,4675,4676,
  4677,4678,4679,4680,4681,4682,4683,
  4684,4685,4686,4687,4688}
  
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		mortality = "MORTAL"
  	}
  end

end)

quest.setScript( 1627, "OnTaskAwaiting", function(args)
 setWoobState {
              woid = 1011067793,
              state = "WOOB_THINGY_OFF",
            }

end)

quest.setScript( 1801, "OnTimer", function(args)
showTimer {
  id = 1801,
  cur = args.count,
  max = 60*5
  }
  
  if args.state == "TASK_FULFILLED" 
  	and args.count >= 1 then 
  	solveQuest (args.id)
  end
  

end)

quest.setScript( 1801, "OnTaskAwaiting", function(args)
setTimer {
  	id = 1801,
  	interval = 1,
  	count = 60*5,
  }
  showTimer {
  	id = 1801,
  	cur = 60*5,
  	max = 60*5,
  }
  

end)

quest.setScript( 1801, "OnLost", function(args)
questFailed(args)

end)

quest.setScript( 2021, "OnTaskAwaiting", function(args)
--changeCreature {
  --	tcid=5833,
  --	livesRemaining=1,
  --	useUnconscious=true,
  --	role="ROLE_ATTACKER",
  --	unconsciousTime = 2,
  --}
  
  --changeCreature {
  --	tcid=5834,
  --	livesRemaining=1,
  --	useUnconscious=true,
  --	role="ROLE_ATTACKER",
  --	unconsciousTime = 2,
  --}
  
  --changeCreature {
  --	tcid=5835,
  --	livesRemaining=1,
  --	useUnconscious=true,
  --	role="ROLE_ATTACKER",
  --	unconsciousTime = 2,
  --}

end)

quest.setScript( 2021, "OnUnconscious", function(args)
--if args.tcid == 5833 and args.id == 2021 then
  --	changeCreature {
  --		tcid=5833,
  --		role="ROLE_INVALID",
  --		faction= "ORC_NEUTRAL",
  --		clearUnconscious=true,
  --		livesRemaining = 0,
  --	}
  --end
  
  --if args.tcid == 5834 and args.id == 2021 then
  --	changeCreature {
  --		tcid=5834,
  --		role="ROLE_INVALID",
  --		faction= "ORC_NEUTRAL",
  --		clearUnconscious=true,
  --		livesRemaining = 0,
  --	}
  --end
  
  --if args.tcid == 5835 and args.id == 2021 then
  --	changeCreature {
  --		tcid=5835,
  --		role="ROLE_INVALID",
  --		faction= "ORC_NEUTRAL",
  --		clearUnconscious=true,
  --		livesRemaining = 0,
  --	}
  --end

end)

quest.setScript( 2497, "OnTaskAwaiting", function(args)
-- "41;9;0;1489.984375;2084.261719;67.734360;222.228500"

end)

quest.setScript( 757, "OnWon", function(args)
setWoobState {
  	woid = 1022458416,
  	state = "WOOB_THINGY_OFF",
  }
  setWoobEffect {
  	woid = 1022041893,
  	effect = "FXTYPE_INVALID",
  }
  
  changeCreature {
  	tcid = 2234,
  	visible = false,
  	delay = 1,
  }

end)

quest.setScript( 757, "OnSetup", function(args)
local hologramme = {2230,2231,2232,2233,2234}
  
  for index,tcid in hologramme do
  	changeCreature {
  		tcid = tcid,
  		visible = false,
  		delay = 0.1,
  	}
  end 

end)

quest.setScript( 757, "OnStation", function(args)
--------------------------------------
  if args.currentStation == 0 then
  	changeCreature {
  		tcid = 2230,
  		visible = true,
  		behaviour = "questCreatures",
  		effect = "FXTYPE_HOLOGRAM",
  	}
  	setWoobEffect {
  		woid = 1022042119,
  		effect = "FXTYPE_HOLOGRAM_RAY",
  	}
  end
  --------------------------------------
  if args.currentStation == 1 then
  	setWoobState {
  		woid = 1022042112,
  		state = "WOOB_THINGY_OFF",
  	}
  	setWoobEffect {
  		woid = 1022042119,
  		effect = "FXTYPE_INVALID",
  	}
  	changeCreature {
  		tcid = 2230,
  		visible = false,
  		delay = 1,
  	}
  end
  --------------------------------------
  if args.currentStation == 2 then
  	changeCreature {
  		tcid = 2231,
  		visible = true,
  		behaviour = "questCreatures",
  		effect = "FXTYPE_HOLOGRAM",
  	}
  	setWoobEffect {
  		woid = 1022042112,
  		effect = "FXTYPE_HOLOGRAM_RAY",
  	}
  end
  --------------------------------------
  if args.currentStation == 3 then
  	setWoobState {
  		woid = 1022042102,
  		state = "WOOB_THINGY_OFF",
  	}
  	setWoobEffect {
  		woid = 1022042112,
  		effect = "FXTYPE_INVALID",
  	}
  	changeCreature {
  		tcid = 2231,
  		visible = false,
  		delay = 1,
  	}
  end
  --------------------------------------
  if args.currentStation == 4 then
  	changeCreature {
  		tcid = 2232,
  		visible = true,
  		behaviour = "questCreatures",
  		effect = "FXTYPE_HOLOGRAM",
  	}
  	setWoobEffect {
  		woid = 1022042102,
  		effect = "FXTYPE_HOLOGRAM_RAY",
  	}
  end
  --------------------------------------
  if args.currentStation == 5 then
  	setWoobState {
  		woid = 1022042095,
  		state = "WOOB_THINGY_OFF",
  	}
  	setWoobEffect {
  		woid = 1022042102,
  		effect = "FXTYPE_INVALID",
  	}
  	changeCreature {
  		tcid = 2232,
  		visible = false,
  		delay = 1,
  	}
  end
  --------------------------------------
  if args.currentStation == 6 then
  	changeCreature {
  		tcid = 2233,
  		visible = true,
  		behaviour = "questCreatures",
  		effect = "FXTYPE_HOLOGRAM",
  	}
  	setWoobEffect {
  		woid = 1022042095,
  		effect = "FXTYPE_HOLOGRAM_RAY",
  	}
  end
  --------------------------------------
  if args.currentStation == 7 then
  	setWoobState {
  		woid = 1022041893,
  		state = "WOOB_THINGY_OFF",
  	}
  	setWoobEffect {
  		woid = 1022042095,
  		effect = "FXTYPE_INVALID",
  	}
  	changeCreature {
  		tcid = 2233,
  		visible = false,
  		delay = 1,
  	}
  end
  --------------------------------------
  if args.currentStation == 8 then
  	changeCreature {
  		tcid = 2234,
  		visible = true,
  		behaviour = "questCreatures",
  		effect = "FXTYPE_HOLOGRAM",
  	}
  	setWoobEffect {
  		woid = 1022041893,
  		effect = "FXTYPE_HOLOGRAM_RAY",
  	}
  end
  --------------------------------------

end)

quest.setScript( 757, "OnPrecondsFulfilled", function(args)
setWoobState {
  	woid = 1022042119,
  	state = "WOOB_THINGY_OFF",
  }

end)

quest.setScript( 3349, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" then
  changeCreature{
  	tcid = 9129,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM21",
  	loopCount = -1
  }
  end
  

end)

quest.setScript( 3349, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 9129,
  	useUnconscious = true,
  	livesRemaining = 1,
  	unconsciousTime = 3,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 3349, "OnUnconscious", function(args)
if args.id == 3349 and args.tcid == 9129 then
  	changeCreature{
  		tcid = 9129,
  		clearUnconscious = true,
  		livesRemaining = 0,
  		behaviour = "JOB_QUESTSTAGING",
  		faction = "FACTION_INVALID",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  		delay = 2,
  	}
  end
  

end)

quest.setScript( 2531, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 7413,
  	clearAutoTeleporting = true,
  --	useUnconscious = true,
  --	livesRemaining = 255,
  --	unconsciousTime = 2,
  }

end)

quest.setScript( 2502, "OnSetup", function(args)

  changeCreature{
  	tcid = 7324,
  	useUnconscious = true,
  	livesRemaining = 1,
  	unconsciousTime = 5
  }

end)

quest.setScript( 2502, "OnUnconscious", function(args)
if args.tcid == 7324 then
  	changeCreature{
  		tcid = 7324,
  		useUnconscious = false,
  		livesRemaining = 0,
  		behaviour = "questCreatures",
  		faction = "FACTION_FRIEND_HERO_ALL",
  role = "ROLE_DIALOG",
  	}
  end

end)

quest.setScript( 2541, "OnSetup", function(args)
changeCreature {
  	tcid = 7441,
  	mortality = "IMMORTAL",
  	behaviour = "HIRELING_COWARD",
  }

end)

quest.setScript( 869, "OnUnconscious", function(args)
if args.tcid == 2540 then
  	changeCreature{
  		tcid = 2540,
  		clearUnconscious = true,
  		role = "ROLE_INVALID",
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1
  	}
  end
  

end)

quest.setScript( 869, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 2540,
  	livesRemaining = 1,
  	useUnconscious = true,
  	unconsciousTime = 0,
  }
  

end)

quest.setScript( 1786, "OnTaskAwaiting", function(args)
setTimer {
  id = 1786,
  interval = 1,
  count = 60*5,
  }
  showTimer {
  id = 1786,
  cur = 60*5,
  max = 60*5,
  }
  

end)

quest.setScript( 1786, "OnTimer", function(args)
showTimer {
  id = 1786,
  cur = args.count,
  max = 60*5
  }
  
  if args.state == "TASK_FULFILLED" 
  	and args.count >= 1 then 
  	solveQuest (args.id)
  end
  

end)

quest.setScript( 1786, "OnLost", function(args)
questFailed(args)
  

end)

quest.setScript( 850, "OnPrecondsFulfilled", function(args)
--teleport {
  --	tcid = 2505,
  --	position = toWorldPosition("22;31;0;1819.351563;268.750000;34.771851;275.152100"),
  --	orientation = 275.152100,
  --}
  --teleport {
  --	tcid = 2504,
  --	position = toWorldPosition("22;31;0;1819.953125;321.898438;34.801105;292.219421"),
  --	orientation = 292.219421,
  --}

end)

quest.setScript( 2037, "OnDeath", function(args)
if args.tcid == 5907 or args.tcid == 5908 or args.tcid == 5908 then
  	changeCreature{
  		tcid = args.tcid,
  		effect = "FXTYPE_SMOKESMALLWHITE",
  		delay = 1
  	}
  end
  
  
  

end)

quest.setScript( 659, "OnSetup", function(args)
changeCreature {
  	tcid = 2105,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 2175, "OnWon", function(args)
changeCreature {
    tcid = 6666, 
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_MAGICA",
    loopCount = 1,
  }
  changeCreature {
    tcid = 6666, 
    behaviour = "walkAround",
    delay = 3,
  }

end)

quest.setScript( 1628, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 4245,
  	mortality="IMMORTAL"
  }

end)

quest.setScript( 1628, "OnTaskAwaiting", function(args)
changeCreature {
    	tcid = 4245,
    	mortality = "MORTAL",
  		livesRemaining=1,
    	useUnconscious=true, 
    	unconsciousTime=3,
  		clearAutoTeleporting = true,
  }
  
  changeCreature {
  	tcid = 3948,
  	setAutoTeleporting = true,
  }

end)

quest.setScript( 2066, "OnTaskAwaiting", function(args)
--19;29;0;2250.000000;1750.000000;0.000000;0.000000
  --for i,ref in getTeamRefs() do
  --  teleportHero {
  --    position = { px=2250,py=1750,pz=0,sx=19,sy=29, sz=0},
  --    orientation = 0, 
  --    heroRef = ref,
  --  }
  --end
  
  teleportTeam(2066,"19;29;0;2250.000000;1750.000000;0.000000;0.000000")

end)

quest.setScript( 2066, "OnTaskFulfilled", function(args)
--34;57;0;3100.000000;3050.000000;0.000000;0.000000
  
  --for i,ref in getTeamRefs() do
  --  teleportHero {
  --    position = { px=3100,py=3050,pz=0,sx=34,sy=57, sz=0},
  --    orientation = 0, 
  --    heroRef = ref,
  --  }
  --end
  
  teleportTeam(2066,"34;57;0;3100.000000;3050.000000;0.000000;0.000000")

end)

quest.setScript( 657, "OnTaskAwaiting", function(args)
setRole(6667,"ROLE_ATTACKER")
  setRole(6668,"ROLE_ATTACKER")

end)

quest.setScript( 2506, "OnWon", function(args)
changeCreature {
  	tcid = 7351,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7351,
  	behaviour = "questCreatures",
  	delay = 2
  }

end)

quest.setScript( 797, "OnWon", function(args)
changeCreature {
    tcid = 878,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_LAYGROUND-UP",
    loopCount = 1,
  }
  changeCreature {
  	tcid = 878,
  	behaviour = "walkAround",
  	delay = 3,
  }

end)

quest.setScript( 3244, "OnWon", function(args)
changeCreature {
  	tcid = 9126,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08", --bow
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 9126,
  	behaviour = "questCreatures",
  	delay = 4,
  }
  
  
  

end)

quest.setScript( 2674, "OnTaskFulfilled", function(args)
destroyCreature {
  	tcid = 7678,
  	splatter = false,
  }
  destroyCreature {
  	tcid = 7679,
  	splatter = false,
  }

end)

quest.setScript( 984, "OnWon", function(args)
changeCreature {
    tcid = 878,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_LAYGROUND-UP",
    loopCount = 1,
  }
  changeCreature {
  	tcid = 878,
  	behaviour = "walkAround",
  	delay = 3,
  }

end)

quest.setScript( 1624, "OnWon", function(args)
changeCreature {
  	tcid=4309,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM12",
  	mortality = "MORTAL",
  	role = "ROLE_INVALID"
  }
    killCreature {
     tcid = 4309,
     splatter=false, 
     delay = 1.5,
    }

end)

quest.setScript( 1456, "OnCounter", function(args)
return "TASKCREATURE_3915"

end)

quest.setScript( 2331, "OnSetup", function(args)
-- move black sera back to position
  
  	teleport {
  		tcid = 3639,
  		position = toWorldPosition("37;27;-1;707.703125;1514.101563;-104.660553;158.782028"),
  	}
  

end)

quest.setScript( 1577, "OnTaskNotFulfilled", function(args)
removeFromGroup {
  	tcid = 4245,
  }
  destroyCreature {
  	tcid = 4245,
  	splatter = false,
  	delay = 5,
  }

end)

quest.setScript( 1577, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 4245,
  	mortality = "MORTAL",
  }

end)

quest.setScript( 1577, "OnWon", function(args)
removeFromGroup {
  	tcid = 4245,
  }
  changeCreature {
  	tcid = 4245,
  	mortality = "IMMORTAL",
  	behaviour = "questCreatures",
  	faction = "FACTION_FRIEND_HERO_ALL",
  }

end)

quest.setScript( 257, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.id == 257 and args.tcid == 878 then
  	changeCreature {
  		tcid = 878,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  		dont_turn = 1,
  	}
  end

end)

quest.setScript( 257, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 878,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  	dont_turn = 1,
  }

end)

quest.setScript( 257, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	changeCreature {
  		tcid = 878,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  		dont_turn = 1,
  	}
  end

end)

quest.setScript( 1931, "OnTaskFulfilled", function(args)
creatureTeleportPosition(5457,2,{18,48,0 , 900,1200,0})

end)

quest.setScript( 1931, "OnCounter", function(args)
--return "TASKITEM_897"

end)

quest.setScript( 1481, "OnTalk", function(args)

  if args.tcid == 3999 then
  
  	changeCreature {
  		tcid = 3999,
  		behaviour = "questCreatures"
  	}
  
  end
  

end)

quest.setScript( 1481, "OnWon", function(args)

  creatureTeleportsAway ( 3999, 2 )

end)

quest.setScript( 3428, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9711,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx= 46;sy=47;sz=0;px=2650.000000;py=750.000000;pz=0.000000},
  	speed = 2,
  }
  
  creatureTeleportsAway (9711,15)

end)

quest.setScript( 3427, "OnTaskFulfilled", function(args)
creatureTeleportsAway (9709,0)

end)

quest.setScript( 2652, "OnPrecondsFulfilled", function(args)
setWoobState { state = "WOOB_DOOR_CLOSE", woid = 1024204972 }
  setWoobState { state = "WOOB_DOOR_CLOSE", woid = 1022995142 }
  setWoobState { state = "WOOB_DOOR_CLOSE", woid = 1017520695 }
  setWoobState { state = "WOOB_DOOR_CLOSE", woid = 1017465035 }
  setWoobState { state = "WOOB_DOOR_CLOSE", woid = 1024277602 }
  setWoobState { state = "WOOB_DOOR_CLOSE", woid = 1023948046 }

end)

quest.setScript( 2652, "OnTaskAwaiting", function(args)
--Heiko Teleport ins Buero
  creatureTeleportPosition(7153,0,{49;30;-1;1346.500000;203.500000;-0.012509;-0.000014})

end)

quest.setScript( 2652, "OnStation", function(args)
if args.currentStation == 0 then
  	--Bettina zur Sicherheit noch mal auf Position Porten	
  	creatureTeleportPosition(6895,0,{47;30;-1;1794.953125;278.750000;-0.012844;47.602539})
  end
  

end)

quest.setScript( 1859, "OnTimer", function(args)
if args.count == 1 then
  	solveQuest(args.id)
  end

end)

quest.setScript( 1859, "OnTaskAwaiting", function(args)
setTimer {
  	id = 1859,
  	interval = 3,
  	count = 6,
  }
  
  changeCreature {
  	tcid = 5152,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=30,sy=25,sz=0,px=2300.000000,py=1050.000000,pz=0.000000},
  	followUpAngle = 324,
  	followUpBhv = "questCreatures",
  }
  
  changeCreature {
  	tcid = 5158,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=30,sy=25,sz=0,px=2300.000000,py=650.000000,pz=0.000000},
  	followUpAngle = 225,
  	followUpBhv = "questCreatures",
  }
  
  changeCreature {
  	tcid = 5159,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {sx=30,sy=25,sz=0,px=1800.000000,py=650.000000,pz=0.000000},
  	followUpAngle = 125,
  	followUpBhv = "questCreatures",
  }

end)

quest.setScript( 1692, "OnWon", function(args)
solveQuest(1693)

end)

quest.setScript( 434, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 1575,
    mortality = "MORTAL",
    useUnconscious = true,
    livesRemaining = 255,
    unconsciousTime = 3,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 434, "OnTaskFulfilled", function(args)
changeCreature {
    tcid = 1575,
    mortality = "IMMORTAL",
    clearUnconscious = true,
    livesRemaining = 0,
  }

end)

quest.setScript( 434, "OnCounter", function(args)
return "TASKCREATURE_1570"

end)

quest.setScript( 453, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 1645,
  	useUnconscious = true,
  	livesRemaining = 255,
  	unconsciousTime = 5,
  }

end)

quest.setScript( 1873, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 5219, 
  	behaviour = "JOB_QUESTSTAGING",
  	mortality = "IMMORTAL",
  	speed = 2,
  	gotoPosition = {sx = 22, sy = 27, sz = 0, px =1590, py = 2022, pz = 0},
  }
  
  creatureTeleportsAway (5219, 5)
  --tcid = 5219,
  --	behaviour = "JOB_QUESTSTAGING",
  --	gotoPosition = { px = 2837.203125, py = 2002.250000, 
  --									 pz = 100.069916, sx = 27, sy = 23, sz = 0},
  --	22;27;0;1850.000000;2000.000000;0.000000

end)

quest.setScript( 2989, "OnWon", function(args)
changeCreature {
  	tcid = 8322,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM04",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 8322,
  	behaviour = "questCreatures",
  	delay = 2
  }

end)

quest.setScript( 3061, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 8515,
    useUnconscious = true,
    livesRemaining = 1,
    unconsciousTime = 1,
  }
  

end)

quest.setScript( 3061, "OnTaskFulfilled", function(args)
creatureGotoPosition (8515,{38;21;0;1894.949951;816.351990;-106.716003})

end)

quest.setScript( 3061, "OnUnconscious", function(args)
if args.tcid == 8515 then
    changeCreature {
      tcid = 8515,
  		clearUnconscious = true,
      clearAutoTeleporting = true,
  		mortality = "IMMORTAL",
      delay = 1,
  		role = "ROLE_DIALOG",
      }
  end
  

end)

quest.setScript( 3100, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 8518,
    useUnconscious = true,
    livesRemaining = 1,
    unconsciousTime = 1,
  }
  

end)

quest.setScript( 3100, "OnUnconscious", function(args)
if args.tcid == 8518 then
    changeCreature {
      tcid = 8518,
  		clearUnconscious = true,
      clearAutoTeleporting = true,
  		mortality = "IMMORTAL",
      delay = 1,
  		role = "ROLE_DIALOG",
      }
  end
  

end)

quest.setScript( 3100, "OnTaskFulfilled", function(args)
creatureGotoPosition (8518,{ 38;21;0;2086.889893;1109.819946;-104.789001;43.000000})

end)

quest.setScript( 3056, "OnTaskFulfilled", function(args)
creatureGotoPosition (8512,{38;21;0;1894.949951;816.351990;-106.716003})

end)

quest.setScript( 3056, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 8512,
    useUnconscious = true,
    livesRemaining = 1,
    unconsciousTime = 1,
  }
  

end)

quest.setScript( 3056, "OnUnconscious", function(args)
if args.tcid == 8512 then
    changeCreature {
      tcid = 8512,
  		clearUnconscious = true,
      clearAutoTeleporting = true,
  		mortality = "IMMORTAL",
  		role = "ROLE_DIALOG",
      }
  end
  

end)

quest.setScript( 2774, "OnTaskAwaiting", function(args)
--for i,ref in getTeamRefs() do
  --  teleportHero {
  --		position = { px=1800, py=1350, pz=55, sx=26, sy=25, sz=0 }, 
  --		heroRef = ref,
  --		delay = 2,
  --  }
  --end
  
  teleportTeam(2774,"26;25;0;1800.000000;1350.000000;55.000000;0.000000")
  --26;25;0;1800.000000;1350.000000;55.000000;0.000000
  
  
  teleport {
  	tcid = 7737,
  	position = { sx=26, sy=25, sz=0,
  							px=1900, py=1400, pz=55 },
  	delay = 2,
  }

end)

quest.setScript( 2774, "OnTaskFulfilled", function(args)
--26;24;0;1834.530029;2502.379883;103.060997;142.000000
  --for i,ref in getTeamRefs() do
  --  teleportHero {
  --		position = { px=1800, py=2500, pz=80, sx=26, sy=24, sz=0 }, 
  --		heroRef = ref,
  --		delay = 5,
  --  }
  --end
  
  teleportTeam(2774,"26;24;0;1800;2500;80;0")
  
  teleport {
  	tcid = 7737,
  	position = { sx=26, sy=24, sz=0,
  							px=1834, py=2502, pz=103},
  	delay = 0,
  }

end)

quest.setScript( 1906, "OnWon", function(args)
unlockShipPortal(1906,1,"NORTH",args.heroRef)
  unlockShipPortal(1906,2,"NORTH",args.heroRef)

end)

quest.setScript( 3347, "OnWon", function(args)
setWoobEffect {
  	woid = 1021408183,
  	effect = "FXTYPE_PORTAL2",
  }
  setWoobEffect {
  	woid = 1023338300,
  	effect = "FXTYPE_PORTAL2",
  }

end)

quest.setScript( 1936, "OnLost", function(args)
--addBookEntry(1936, "QUEST_LOST")

end)

quest.setScript( 1936, "OnTaskAwaiting", function(args)
for index,id in {5470,5473,5475,5477} do
  	changeCreature {
  		-- role muss manuell ueberschrieben werden, 
  		tcid = id,
  		role = "ROLE_DIALOG"
  	}
  end
  

end)

quest.setScript( 3242, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid=9162,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 1927, "OnTaskFulfilled", function(args)
solveQuest(1921)

end)

quest.setScript( 1924, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid=5437, -- Fugkops
  	useUnconscious = true,
  	livesRemaining = 1,
  	unconsciousTime = 4,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 1924, "OnUnconscious", function(args)
if args.tcid == 5437 then
  	changeCreature{
    	tcid = 5437,
    	clearUnconscious = true,
    	role = "ROLE_VICTIM",
    	behaviour = "JOB_QUESTSTAGING",
    	emotion = "ANIM_TYPE_SM20",
    	loopCount = -1
    }
  end

end)

quest.setScript( 3117, "OnStation", function(args)
local cats = {8733,8734,8735,8736,8737,8738,8739,8740,8741}
  creatureTeleportsAway(cats[args.currentStation + 1])

end)

quest.setScript( 2353, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.id == 2353 and args.tcid == 7105 then
  	changeCreature {
  		tcid = 7105,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  		dont_turn = true,
  	}
  end
  
  if args.state == "PRECONDS_FULFILLED" and args.id == 2353 and args.tcid == 7106 then
  	changeCreature {
  		tcid = 7106,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  		dont_turn = true,
  	}
  end
  
  if args.state == "PRECONDS_FULFILLED" and args.id == 2353 and args.tcid == 7102 then
  	changeCreature {
  		tcid = 7102,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  		dont_turn = true,
  	}
  end
  

end)

quest.setScript( 2353, "OnWon", function(args)
local lizards = {7105,7106,7102}
  for index,tcid in lizards do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  		dont_turn = true,
  	}
  end 

end)

quest.setScript( 2353, "OnPrecondsFulfilled", function(args)
local lizards = {7105,7106,7102}
  for index,tcid in lizards do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  		dont_turn = true,
  	}
  end 

end)

quest.setScript( 2008, "OnTaskAwaiting", function(args)
--17;45;0;282.445313;593.203125;1249.382690;194.670761
  
  changeCreature {
  	tcid = 5765,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("17;45;0;250.000000;600.000000;1294.000000;200.000000"),
  	followUpBhv = "questCreatures",
  }

end)

quest.setScript( 2008, "OnWon", function(args)
changeCreature {
  	tcid = 5765,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("17;45;0;591.015991;703.187988;1253.810059;354.000000"),
  	followUpBhv = "questCreatures",
  }

end)

quest.setScript( 1419, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	changeCreature {
  		tcid=1649,
  		effect="FXTYPE_GEN_TRANSFORM"
  	}
  
  	changeCreature {
  		tcid=1649,
  		creature="Helf_statist_citizen_m02_c4",
  		delay = 2
  	}
  end

end)

quest.setScript( 1419, "OnWon", function(args)
changeCreature {
  	tcid = 1645,
  	clearUnconscious = true,
  	livesRemaining = 0,
  	behaviour = "JOB_RICH_STATIST",
  	faction = "FACTION_HIGHELVE",
  }
  
  changeCreature {
  	tcid = 1649,
  	clearUnconscious = true,
  	livesRemaining = 0,
  	behaviour = "JOB_RICH_STATIST",
  	faction = "FACTION_HIGHELVE",
  }

end)

quest.setScript( 2356, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 2175,
  	useUnconscious = true,
  	livesRemaining = 255,
  	unconsciousTime = 3,
  	--clearAutoTeleporting = true,
  }

end)

quest.setScript( 213, "OnCounter", function(args)
return "TASKCREATURE_106"

end)

quest.setScript( 842, "OnTaskAwaiting", function(args)

  changeCreature {
  	tcid = 2497,
  	mortality = "MORTAL",
  	behaviour = "JOB_QUESTSTAGING",
  	faction = "FACTION_HIGHELVE",
  	gotoPosition = { sx=29,sy=32,sz=0 , px=3000,py=750,pz=0 },
  	speed = 2,
  }
  killCreature {
  	tcid = 2497,
  	splatter = false,
  	delay = 20
  }
  
  tcids = { 4970,4971,4972 }
  for index, tcid in tcids do
  	creatureTeleportsAway ( tcid, 22 )
  end
  
  

end)

quest.setScript( 741, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
    return "QUEST_DIALOG_NO"--,"QUEST_DIALOG_NO"
  end
  

end)

quest.setScript( 2860, "OnLost", function(args)
--addBookEntry(2860,"QUEST_LOST")

end)

quest.setScript( 2860, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 1776,
  	role = "ROLE_VICTIM"
  }

end)

quest.setScript( 340, "OnTalk", function(args)
if 	args.id == 340 											and 
  		args.state == "PRECONDS_FULFILLED" 	and 
  		args.tcid == 1205 									then
  
  	changeCreature {
  		tcid = 1205,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND-UP",
  		loopCount = 1,
  	}
  	changeCreature {
  		tcid = 1205,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_TALK",
  		loopCount = -1,
  		delay = 2.96,
  	}
  	changeCreature {
  		tcid = 7839,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND_IDLEB",
  		loopCount = 1,
  	}
  	changeCreature {
  		tcid = 7839,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND_IDLE",
  		loopCount = -1,
  		delay = 7.1,
  	}
  
  end 

end)

quest.setScript( 340, "OnPrecondsFulfilled", function(args)
local tcids = {1205,7839,7840}
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND-IDLE",
  		loopCount = -1,
  	}
  end 

end)

quest.setScript( 340, "OnWon", function(args)
--9278
  changeCreature {
    tcid = 1205,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_MAGICB",
  }
  changeCreature {
    tcid = 9278,
    effect = "FXTYPE_DG_FEUERBODEN",
    mortality = "MORTAL",
    delay = 1,
  }
  
  killCreature {
    tcid = 9278,
    delay = 3,
  }
  
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-DOWN",
  	loopCount = 1,
  	delay = 3,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 5.72,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLEA",
  	loopCount = 1,
  	delay = 25,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 31.4,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLEB",
  	loopCount = 1,
  	delay = 60,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 66.2,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLEB",
  	loopCount = 1,
  	delay = 240,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 246.2,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLEA",
  	loopCount = 1,
  	delay = 600,
  }
  changeCreature {
  	tcid = 1205,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 606.4,
  }
  changeCreature {
  	tcid = 7840,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-TALK",
  	loopCount = 1,
  	delay = 35,
  }
  changeCreature {
  	tcid = 7840,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 41,
  }
  changeCreature {
  	tcid = 7839,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLEA",
  	loopCount = 1,
  	delay = 50,
  }
  changeCreature {
  	tcid = 7839,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  	delay = 56.2,
  }

end)

quest.setScript( 781, "OnTaskAwaiting", function(args)
creatureTeleportsAway(2224,2)

end)

quest.setScript( 2655, "OnWon", function(args)
changeCreature {
  	tcid = 7639,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM33", --greet
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7639,
  	behaviour = "questCreatures",
  	delay = 5,
  }
  
  
  

end)

quest.setScript( 1812, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 4977, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08",
  	loopCount = 1,
  }
  

end)

quest.setScript( 1812, "OnWon", function(args)
changeCreature {
  	tcid = 4966, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08",
  	loopCount = 1,
  }
  

end)

quest.setScript( 2508, "OnWon", function(args)
local tcids = {6245,6247,6248,6250,6251,6252,6254,6255,6257,6259,2220}
  
  for index,tcid in tcids do
  	changeCreature {
  		tcid = tcid,
  		faction = "FACTION_LIZARD_BAD",
  	}
  end

end)

quest.setScript( 2342, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 5382,
  	role = "ROLE_VICTIM",
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 2185, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  
  	for index,id in {6701,6702,6703} do
  		changeCreature{
  			tcid = id,
  			dont_turn = true,
  		}
  	end
  
  	changeCreature{
  		tcid = 6701,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM11",
  		loopCount = -1
  	}
  end
  

end)

quest.setScript( 2185, "OnWon", function(args)
changeCreature {
  	tcid = 6696,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM15",
  }

end)

quest.setScript( 2057, "OnTalk", function(args)
if args.tcid == 5766 and args.state == "TASK_FULFILLED" then
  	changeCreature{
  		tcid = 5766,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  end
  

end)

quest.setScript( 2057, "OnTaskFulfilled", function(args)

  changeCreature{
  	tcid = 5766,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  }
  

end)

quest.setScript( 2057, "OnWon", function(args)
--addBookEntry(2057, "QUEST_DONE")
  
  changeCreature{
  	tcid = 5766,
  	behaviour = "Hireling_brave",
  }

end)

quest.setScript( 2934, "OnSetup", function(args)
changeCreature{
  	tcid = 8289,
  	dont_turn = true,
  	delay = 0,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 2935, "OnWon", function(args)
solveQuest(2981)
  removeFromGroup (8289,0)
  setBehaviour(8289,"questCreatures")
  setFaction(8289, "FACTION_INVALID")

end)

quest.setScript( 2935, "OnTaskAwaiting", function(args)
addToGroup (8289,0)
  changeCreature{
  	tcid = 8289,
  	behaviour = "Hireling_coward",
  	faction = "FACTION_DESERTHU_GUARDS",
  	mortal = "MORTAL",
  }

end)

quest.setScript( 2935, "OnTaskNotFulfilled", function(args)
addBookEntry(2981,"QUEST_LOST")

end)

quest.setScript( 2025, "OnTaskAwaiting", function(args)
--changeCreature {
  --	tcid=5871,
  --	livesRemaining=1,
  --	useUnconscious=true,
  --	role="ROLE_ATTACKER",
  --}
  
  --changeCreature {
  --	tcid=5872,
  --	livesRemaining=1,
  --	useUnconscious=true,
  --	role="ROLE_ATTACKER",
  --}
  
  --changeCreature {
  --	tcid=5873,
  --	livesRemaining=1,
  --	useUnconscious=true,
  --	role="ROLE_ATTACKER",
  --}

end)

quest.setScript( 2025, "OnUnconscious", function(args)
--if args.tcid == 5871 and args.id == 2025 then
  --	changeCreature {
  --		tcid=5871,
  --		role="ROLE_INVALID",
  --		faction= "ORC_NEUTRAL",
  --		clearUnconscious=true,
  --	}
  --end
  
  --if args.tcid == 5872 and args.id == 2025 then
  --	changeCreature {
  --		tcid=5872,
  --		role="ROLE_INVALID",
  --		faction= "ORC_NEUTRAL",
  --		clearUnconscious=true,
  --	}
  --end
  
  --if args.tcid == 5873 and args.id == 2025 then
  --	changeCreature {
  --		tcid=5873,
  --		role="ROLE_INVALID",
  --	faction= "ORC_NEUTRAL",
  --		clearUnconscious=true,
  --	}
  --end

end)

quest.setScript( 2874, "OnTalk", function(args)
if args.id == 2874 and args.state == "TASK_FULFILLED" and args.tcid == 8122 then
  	changeCreature {
  		tcid = 8122,
  		role = "ROLE_VICTIM",
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  		clearAutoTeleporting = true,
  		dont_turn = true,
  	}
  end
  

end)

quest.setScript( 2874, "OnWon", function(args)
changeCreature {
  	tcid = 8122,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM22",
  	role = "ROLE_INVALID",
  	mortality = "MORTAL",
  }
  killCreature {
  	tcid = 8122,
  	deinitragdoll = false,
  	delay = 2,
  }

end)

quest.setScript( 54, "OnSetup", function(args)
changeCreature {
  	tcid = 164,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SITGROUND-IDLE",
  	loopCount = -1,
  }

end)

quest.setScript( 54, "OnWon", function(args)
changeCreature {
   tcid = 144, 
   behaviour = "JOB_QUESTSTAGING",
   emotion = "ANIM_TYPE_EM08",
   loopCount = 1,
  }
  
  changeCreature {
  	tcid = 144, 
  	behaviour = "JOB_TRADER",
  	delay = 4,
  }
  

end)

quest.setScript( 2777, "OnStateChange", function(args)
if args.state == "PRECONDS_AWAITING" then
  	setWoobEffect {
  		woid = 1022876453,
  		effect = "FXTYPE_SMOKESMALLWHITE",
  	}
  end
  
  if args.state == "PRECONDS_FULFILLED" then
  
  	setWoobEffect {
  		woid = 1022876453,
  		effect = "FXTYPE_INVALID",
  	}
  
  	changeCreature{
  		tcid = 7984,
  		effect = "FXTYPE_SMOKEBIGWHITE",
  		delay = 0.1,
  	}
  	changeCreature{
  		tcid = 7984,
  		effect = "FXTYPE_INVALID",
  		delay = 4,
  	}
  	
  	for i,id in {8755,7986,7987} do
  		changeCreature{
  			tcid=id,
  			behaviour = "JOB_QUESTSTAGING",
  			gotoPosition = {sx=46,sy=12,sz=0,px=500,py=950,pz=2246},
  			followUpAngle = 0,
  			speed=2,
  			followUpBhv = "JOB_QUESTSTAGING",
  			clearAutoTeleporting = true,
  		}
  		changeCreature{
  			tcid=id,
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_EM22",
  			loopCount = -1,
  			delay = 6+math.random()*2,
  		}
  	end
  end

end)

quest.setScript( 2839, "OnWon", function(args)
changeCreature {
  	tcid = 8115,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08" --bow
  }
  changeCreature {
  	tcid = 8115,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 4,
  }
  
  
  

end)

quest.setScript( 1811, "OnWon", function(args)
changeCreature {
  	tcid = 4974, 
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08",
  	loopCount = 1,
  }

end)

quest.setScript( 2656, "OnWon", function(args)
changeCreature {
  	tcid = 7640,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7640,
  	behaviour = "questCreatures",
  	delay = 4
  }

end)

quest.setScript( 1821, "OnTaskAwaiting", function(args)
teleport {
  	tcid = 2501,
  	position = {px=0,py=0,pz=0,sx=0,sy=0,sz=0},
  	orientation = 0,
  }

end)

quest.setScript( 854, "OnTaskAwaiting", function(args)

  creatureTeleportPosition ( 2500, 0, { sx=27,sy=24,sz=-1,px=1750.796875,py=1646.5,pz=18 })
  
  local robber = {2523,2524,2525,2526,2527,2528,2529,2530,2531}
  for index,tcid in robber do 
  	changeCreature {
  		tcid = tcid,
  		mortality = "IMMORTAL",
  	}
  end
  

end)

quest.setScript( 708, "OnTaskAwaiting", function(args)
local slaves = {	5403,5411,5412,5414,5410,5409,5408,5402,
  									5413,5401,5400,5407,5404,5406,5405,2167	}
  
  for index,tcid in slaves do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		gotoPosition = toWorldPosition("44;61;-1;246.578125;901.578125;-155.627151;272.367371"),
  		speed = 2,
  	}
  	creatureTeleportsAway(tcid,30)
  	destroyCreature {
  		tcid = tcid,
  		splatter = false,
  		delay = 35,
  	}
  end
  

end)

quest.setScript( 719, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 2182,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 660, "OnTaskAwaiting", function(args)
--changeCreature {
  --	tcid = 2107,
  --	behaviour = "JOB_QUESTSTAGING",
  --	gotoPosition = {px=324.648010,py=850.265991,pz=1361.790039,sx=17,sy=45,sz=0},
  --}
  
  --tcids = {4887,4888,4889,4890,4891,4892,4893,4894,4895,4896,4897,4898,4899,4900}
  
  --for index,tcid in tcids do
  --	setRole(tcid, "ROLE_ATTACKER")
  --end

end)

quest.setScript( 660, "OnTaskFulfilled", function(args)
--changeCreature {
  --	tcid = 2107,
  --	behaviour = "JOB_QUESTSTAGING",
  --	gotoPosition = {px=582.250000,py=1265.449951,pz=1412.969971,sx=17,sy=45,sz=0},
  --}

end)

quest.setScript( 660, "OnStateChange", function(args)
--on WON:
  --Animation des Beenders ausfuehren, wie er eine Kette erstellt...

end)

quest.setScript( 660, "OnWon", function(args)
changeCreature {
  	tcid = 2107,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_CREATE-JEWELERY",
  	loopCount = 1,
  }

end)

quest.setScript( 2511, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 7365,
  	effect = "FXTYPE_INVALID",
  }

end)

quest.setScript( 2511, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then 
  	changeCreature {
  		tcid = 7365,
  		effect = "FXTYPE_QFX_FLIEGENSCHWARM",
  	}
  end 

end)

quest.setScript( 2511, "OnWon", function(args)
changeCreature {
  	tcid = 7365,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM33",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7365,
  	behaviour = "questCreatures",
  	delay = 5
  }

end)

quest.setScript( 2511, "OnCounter", function(args)
return "TASKITEM_1143"

end)

quest.setScript( 2880, "OnTalk", function(args)
if args.tcid == 8188666 then
  	changeCreature { 
  		tcid = 8188,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_MAGICA",
  		bubble = 2
  	} 
  end
  

end)

quest.setScript( 2880, "OnStateChange", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	changeCreature {
  		tcid = 8188,
  		behaviour = "JOB_QUESTSTAGING",
  		bubble = 1,
  		emotion = "ANIM_TYPE_IDLE",
  		clearAutoTeleporting = true,
  		loopCount = 2,
  		delay = 1,
  		followUpBhv = "questCreatures"
  	}
  end
  

end)

quest.setScript( 2880, "OnWon", function(args)
changeCreature { 
  	tcid = 8188,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_MAGICA",
  	bubble = 1
  } 
  

end)

quest.setScript( 2336, "OnWon", function(args)
changeCreature {
  	tcid= 7065,
  	creature="lizard_deathcult_warrior",
  	effect="FXTYPE_GEN_TRANSFORM",
  	delay = 1,
  	behaviour = "questCreatures",
  role = "ROLE_DIALOG",
   }

end)

quest.setScript( 2184, "OnWon", function(args)

  changeCreature {
  	tcid = 6332,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = { sx=43, sy=59, sz=1, px=1600, py=2850, pz=0 },
  }
  
  creatureTeleportsAway( 6332, 30 )

end)

quest.setScript( 2088, "OnSetup", function(args)
addGold (-100)

end)

quest.setScript( 1804, "OnTimer", function(args)
showTimer {
  	id = 1804,
  	cur = args.count,  -- in diesem fall zaehlt der counter ja von 3*60 runter auf null, also einfach current auf args.count setzen
  	max = 60*5
  }
  
  -- gewinnbedingung: quest ist gewonnen: timer abbrechen, quest auf gewonnen setzen
  
  if args.state == "TASK_FULFILLED" 
  	and args.count >= 1 then
  	solveQuest (args.id)
  end
  

end)

quest.setScript( 1804, "OnTaskAwaiting", function(args)

  setTimer {
  	id = 1804,     -- eigene quest ID
  	interval = 1,  -- interval in sekunden
  	count = 60*5,  -- anzahl der zeitintervalle (ein count-down)
  }
  
  -- initial einmal anzeigen
  
  showTimer {
  	id = 1804,     -- eigene quest ID
  	cur = 60*5,    -- aktueller wert (current) der angezeigt werden soll
  	max = 60*5,    -- maximaler wert
  }
  
  -- d.h. hier wird 5*60 = 5 Minuten lang jede Sekunde ein Timer-Signal erzeugt
  

end)

quest.setScript( 1599, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 8715,
    visible = false,
  }
  setTimer {
  	id = 1599,
  	interval = 1,
  	count = 5,
  }

end)

quest.setScript( 1599, "OnTimer", function(args)
if args.count == 5 then
  	changeCreature {
  		tcid = 2168,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_CREATE-JEWELERY",
  		loopCount = 1,
  		bubble = 11,
  		action = "ACTION_CREATE_JEWELLERY",
  	}
  end
  
  if args.count == 2 then
  	solveQuest(args.id)
  end
  

end)

quest.setScript( 1971, "OnWon", function(args)
changeCreature {
  	tcid =5544,
  	behaviour= "JOB_QUESTSTAGING",
  	emotion= "ANIM_TYPE_MAGICA",
  	loopCount= 3,
  }
  

end)

quest.setScript( 2186, "OnWon", function(args)
creatureTeleportPosition(2220,0,{45;22;0;1100;950;0})

end)

quest.setScript( 2100, "OnTaskAwaiting", function(args)
--alte auf immortal oder so, role dialog usw...
  
  changeCreature {
    tcid = 3596,
    behaviour = "questCreatures",
    mortality = "IMMORTAL",
  	role = "ROLE_DIALOG"
  }
  
  changeCreature {
    tcid = 3597,
    behaviour = "questCreatures",
    mortality = "IMMORTAL",
  	role = "ROLE_DIALOG"
  }
  
  changeCreature {
    tcid = 3576,
    behaviour = "questCreatures",
    mortality = "IMMORTAL",
  	role = "ROLE_DIALOG"
  }

end)

quest.setScript( 2100, "OnTalk", function(args)
--if tcid==tcid von der alten and id==2100 and state== task awaiting
  --return lokaid end
  
  if args.tcid==3596 and args.id==2100 and args.state=="TASK_AWAITING" then
    	return "QUEST_1316_STATION02"
  end
  if args.tcid==3597 and args.id==2100 and args.state=="TASK_AWAITING" then
    	return "QUEST_1316_STATION03"
  end
  
  if args.tcid==3576 and args.id==2100 and args.state=="TASK_AWAITING" then
    	return "QUEST_1316_STATION04"
  end
  
  

end)

quest.setScript( 2790, "OnTaskFulfilled", function(args)
--for i,ref in getTeamRefs() do
  --  teleportHero {
  --    position = { px=300, py=2950, pz=0 , sx=33 , sy=58, sz=0 },
  --    orientation = 0,
  --    heroRef = ref,
  --  }
  --end 
  
  teleportTeam(2790,"33;58;0;300;2950;0;0")

end)

quest.setScript( 2790, "OnTaskAwaiting", function(args)
setTimer {
  	id = 2790,
  	count = 10,
  	interval = 1,
  }
  showTimer {
  	id = 2790,
  	cur = 10,
  	max = 10,
  }
  questMessage {
  	lokaid = "QUEST_2067_TCOUNT_MSG",
  	color = "#F0F8FF",
  	line = 1,
  	duration = 9.8,
  	fadeIn = 0.1,
  	fadeOut = 0.1,
  }

end)

quest.setScript( 2790, "OnSetup", function(args)
changeCreature {
  	tcid = 8001,
  	visible = false,
  	delay = 0.1,
  }
  

end)

quest.setScript( 2790, "OnTimer", function(args)
showTimer {
  	id = 2790,
  	cur = args.count,
  	max = 10,
  }
  
  if args.count == 10 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_01",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 9 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_02",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 8 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_03",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 7 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_04",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 6 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_05",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 5 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_06",
  		color = "#FF0000",
  		line = 5,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 4 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_07",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 3 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_08",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 2 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_09",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 1 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_10",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  	solveQuest(args.id)
  end 

end)

quest.setScript( 773, "OnWon", function(args)
changeCreature {
  	tcid = 2240,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_LAYGROUND-UP",
  	loopCount = 1,
  	dont_turn = true,
  --	bubble = 8,
  	delay = 2,
  }
  changeCreature {
  	tcid = 2240,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_IDLE",
  	dont_turn = false,
  --  bubble = 8,
  	loopCount = 1,
  	delay = 5,
  }
  changeCreature {
  	tcid = 2240,
  	behaviour = "questCreatures",
  	faction = "FACTION_FRIEND_HERO_ALL",
  	delay = 5.8,
  }

end)

quest.setScript( 773, "OnTalk", function(args)
if args.id == 773 and args.state == "TASK_FULFILLED" then
  	changeCreature {
  		tcid = 2240,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_EM15",
  		loopCount = 1,
  		bubble = 9,
  		dont_turn = true,
  	}
  	changeCreature {
  		tcid = 2240,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM19",
  		loopCount = 1,
  		--bubble = 8,
  		delay = 2,
  	}
  
  	changeCreature {
  		tcid = 2240,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  		delay = 7.1,
      --bubble = 8,
  	}
  end 

end)

quest.setScript( 1711, "OnStateChange", function(args)
if args.state == "TASK_AWAITING" then
  	rabbits = {4505,4506,4507,4508,4511,4512,4513,4514,4515}
  	for index,rabbit in rabbits do 
  		changeCreature {
  			tcid = rabbit,
  			livesRemaining = 0,
  			clearUnconscious=true,
  		}
  	end
  end

end)

quest.setScript( 1711, "OnWon", function(args)
changeCreature {
  	tcid = 4504,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 4504,
  	behaviour = "questCreatures",
  	delay = 4
  }

end)

quest.setScript( 1287, "OnWon", function(args)
--3 Ork Leichen in der Ork Region, duerfen sich niemals drehen... (MQ!)
  for index,tcid in {2112,2111,2110} do
  	changeCreature {
  		tcid = tcid,
  		dont_turn = true,
  	}
  end
  
  --Schiffskapitaene fuer die MQ, welche von Anfang an da sein muessen,
  --damit man sie auch vorher schon finden kann
  for index,tcid in {8861,8864,8866} do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_CAPTAIN",
  		merchantType = "MERCHANT_CAPTAIN",
  	}
  end
  
  --MQ: Dorfaeltester Schlehenfurt -> kniet nieder!
  changeCreature {
  	tcid = 1118,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_KNEE-IDLE",
  	loopCount = -1,
  }
  
  --Wasserfall in der Ork Region - MQ Good Path
  showWaterfall()
  
  --Die 4 Tueren am grossen Wall (HE zu HU) - werden am Anfang verschlossen!
  --Ausserdem der Stein in der Ork Region 1018380619
  --Ebenfalls die Tuer im Dungeon in der OR Region - Wasserfall - 1019420597
  local mainq_doors = {1013397754,1013397761,1013397738,1013397746,1018380619,1019420597}
  for index,woid in mainq_doors do
  	setWoobState {
  		woid = woid,
  		state = "WOOB_DOOR_LOCKED",
  	}
  end 
  
  -- AddOn Kapitaene freischalten
  -- Crystal Planes
  unlockShipPortal(1287,8,"NORTH",args.heroRef)
  -- Cursed Forest
  unlockShipPortal(1287,7,"SOUTH",args.heroRef)
  
  changeCreature {
  	tcid = 10447,
  	merchantType = "MERCHANT_COMBOMASTER",
  	delay = 1,
  }

end)

quest.setScript( 2514, "OnLost", function(args)
--addBookEntry(2514, "QUEST_LOST")
  looseQuest { id = 2513 }

end)

quest.setScript( 2514, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 7387,
  	role = "ROLE_VICTIM"
  }

end)

quest.setScript( 775, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 2224,
  	effect = "FXTYPE_GEN_TRANSFORM",
  	delay = 1,
  }

end)

quest.setScript( 2663, "OnWon", function(args)
changeCreature {
  	tcid = 7667,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM24",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7667,
  	behaviour = "questCreatures",
  	delay = 8
  }

end)

quest.setScript( 2994, "OnWon", function(args)
addGold (150)

end)

quest.setScript( 2661, "OnTaskAwaiting", function(args)
local tcids = {7662,7663,7664,7666,7653}
  for index, tcid in tcids do
   changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_GEN_TRANSFORM",
  		creature = "Monst_werewolf_fem_elite",
  		delay = 1,
   }
  end
  
  local tcidsa = {7654,7656,7658,7657}
  for index, tcid in tcidsa do
   changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_GEN_TRANSFORM",
  		creature = "Monst_werewolf_elite",
  		delay = 1,
   }
  end

end)

quest.setScript( 2661, "OnWon", function(args)
changeCreature {
  	tcid = 7652,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM22", --panic
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7652,
  	behaviour = "questCreatures",
  	delay = 5,
  }
  
  
  

end)

quest.setScript( 2665, "OnWon", function(args)
changeCreature {
  	tcid = 7674,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_EM13", --cry
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7674,
  	behaviour = "questCreatures",
  	delay = 4,
  }

end)

quest.setScript( 2020, "OnSetup", function(args)
setTimer {
  	id= 2020,
  	interval=1,
  	count=6,
  }
  

end)

quest.setScript( 2020, "OnTimer", function(args)
if args.state == "TASK_AWAITING" 
  	and args.count == 1 then 
  	solveQuest (args.id)
  end
  

end)

quest.setScript( 2020, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid= 5832,
  	behaviour= "JOB_QUESTSTAGING",
  	emotion= "ANIM_TYPE_MAGICA",
  	loopCount= 3,
  }

end)

quest.setScript( 2873, "OnWon", function(args)
changeCreature {
  	tcid = 8115,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08" --bow
  }
  changeCreature {
  	tcid = 8115,
  	behaviour = "JOB_RICH_STATIST",
  	delay = 4,
  }
  
  
  

end)

quest.setScript( 2664, "OnWon", function(args)
changeCreature {
  	tcid = 7669,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM08", --bow
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 7669,
  	behaviour = "questCreatures",
  	delay = 4,
  }
  
  
  

end)

quest.setScript( 2666, "OnStation", function(args)
if args.currentStation == 0 and args.tcid == 1463 then
  	changeCreature {
  		tcid = 1463,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  if args.currentStation == 1 and args.tcid == 1464 then
  	changeCreature {
  		tcid = 1464,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  
  if args.currentStation == 2 and args.tcid == 1465 then
  	changeCreature {
  		tcid = 1465,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  
  if args.currentStation == 3 and args.tcid == 1466 then
  	changeCreature {
  		tcid = 1466,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  
  if args.currentStation == 4 and args.tcid == 7677 then
  	changeCreature {
  		tcid = 7677,
  		behaviour = "JOB_RICH_STATIST",
  		}
  end
  

end)

quest.setScript( 2666, "OnWon", function(args)
changeCreature {
  	tcid = 1460,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM24", --pray
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 1460,
  	behaviour = "questCreatures",
  	delay = 9,
  }
  
  
  

end)

quest.setScript( 329, "OnTalk", function(args)
if args.state == "PRECONDS_FULFILLED" and args.tcid == 1199 and args.id == 329 then
  	changeCreature {
  		tcid = 1199,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_TALK",
  		loopCount = -1,
  	}
  end
  

end)

quest.setScript( 329, "OnDialog", function(args)
if args.state == "TASK_FULFILLED" then
  	return "QUEST_DIALOG_NO"
  end

end)

quest.setScript( 1070, "OnSetup", function(args)
-- Figur "zusammenschlagen":
  --
  -- 1. livesRemaining auf 1 damit die Figur einmal wieder aufsteht
  -- 2. useUnconscious = true: der kill entfernt die figur nicht!
  -- 3. unconsciousTime: weiterspielen wird solange verzoegert
  
  changeCreature {
  	tcid=2987,
  	livesRemaining=1,
  	useUnconscious=true,
  	unconsciousTime=1,
  	clearAutoTeleporting = true,
  }
  
  -- wenn die figur dann spaeter DOCH mal sterben soll:
  -- geht nicht, da useUnconscious noch gesetzt ist!
  -- dann: clearUnconscious = true verwenden!

end)

quest.setScript( 1070, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid=2987,
  	livesRemaining=0,
  	clearUnconscious=true,
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1, 	-- unlimited
  	behaviour = "JOB_QUESTSTAGING",
  	mortality = "MORTAL",
  	dont_turn = true,
  }

end)

quest.setScript( 1717, "OnSetup", function(args)
changeCreature {
  	tcid = 4519,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
    loopCount = -1,
  }

end)

quest.setScript( 1717, "OnWon", function(args)
changeCreature {
  	tcid = 4526,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 4526,
  	behaviour = "questCreatures",
  	delay = 4
  }

end)

quest.setScript( 3140, "OnTaskFulfilled", function(args)
local OLD_BEAR = 8841
  local NEW_BEAR = 8842
  
  teleport {
   tcid = NEW_BEAR,
   position = getPos{ tcid=OLD_BEAR }
  }
  
  destroyCreature {
    tcid=OLD_BEAR
  }
  
  changeCreature {
  	tcid = NEW_BEAR,
  	mortality = "MORTAL",
    effect = "FXTYPE_GEN_TRANSFORM",
  }

end)

quest.setScript( 3138, "OnTaskFulfilled", function(args)
--creatureTeleportsAway(8836,0)
  --local pos = {28;43;0;600.000000;2200.000000;0.000000;0.000000}
  --creatureTeleportPosition(8841,0,pos)
  
  local OLD_BEAR = 8836
  local NEW_BEAR = 8841
  
  teleport {
   tcid = NEW_BEAR,
   position = getPos{ tcid=OLD_BEAR }
  }
  
  destroyCreature {
    tcid=OLD_BEAR
  }
  
  changeCreature {
  	tcid = NEW_BEAR,
  	mortality = "MORTAL",
    effect = "FXTYPE_GEN_TRANSFORM",
  	useUnconscious = true,
  	livesRemaining = 255,
    unconsciousTime = 4,
  }
  
  
  

end)

quest.setScript( 2520, "OnWon", function(args)

  creatureTeleportsAway ( 3002, 1 )

end)

quest.setScript( 2520, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 3002,
  	effect = "FXTYPE_HOLOGRAM",
  }

end)

quest.setScript( 2193, "OnStateChange", function(args)
local tcids = {6724,6725}
  if args.state == "PREFIGHT" then
  	for index,tcid in tcids do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "Enemy_warrior_brave_ex",
  			faction = "FACTION_ENEMY_HERO",
  			mortality = "MORTAL",
  			role = "ROLE_ATTACKER",
  		}
  	end
  end

end)

quest.setScript( 441, "OnWon", function(args)
changeCreature {
  	tcid = 1601,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM32",
  	loopCount = 1,
  }
  changeCreature {
  	tcid = 1601,
  	behaviour = "questCreatures",
  	delay = 4
  }

end)

quest.setScript( 2519, "OnTaskFulfilled", function(args)

  changeCreature{
  	tcid = 7324,
  	role = "ROLE_INVALID",
  	behaviour = "questCreatures",
  	gotoPosition = {sx=0,sy=0,sz=0,px=0,py=0,pz=0}
  }
  
  changeCreature{
  	tcid = 7324,
  	effect = "FX_GEN_TRANSFORM",
  	delay = 5
  }
  
  

end)

quest.setScript( 3002, "OnWon", function(args)
creatureTeleportsAway(8359,2)

end)

quest.setScript( 3002, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid = 8359,
  	mortality = "IMMORTAL",
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 2512, "OnStation", function(args)

  if args.currentStation == 1 then
  		changeCreature {
  			tcid = 7324,
  			behaviour = "questCreatures"
  		}
  end
  

end)

quest.setScript( 2512, "OnTaskAwaiting", function(args)
changeCreature{
  tcid = 7324, 
  clearAutoTeleporting = true,
  }

end)

quest.setScript( 2848, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 8135,
  	mortality = "IMMORTAL",
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_KE11",
  	loopCount = -1,
  }

end)

quest.setScript( 2988, "OnWon", function(args)
addGold (50)

end)

quest.setScript( 2875, "OnWon", function(args)
changeCreature{
  	tcid=8177,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_EM15",
  	loopCount = 2,
  	delay = 0,
  }

end)

quest.setScript( 2875, "OnStation", function(args)
addGold(-100)
  
  questMessage {
     line = 1,
     lokaid = "QUEST_2875_GOLDMESSAGE",
     duration = 5.0,
     fadeIn = 0.5,
     fadeOut = 1.0,
     delay = 0,
     color = "#00ff00",
    }

end)

quest.setScript( 3128, "OnTaskAwaiting", function(args)
changeCreature {
   tcid = 8781,
   mortality = "IMMORTAL",
  }

end)

quest.setScript( 3128, "OnTaskFulfilled", function(args)
local OLD_BEAR = 8781
  local NEW_BEAR = 8836
  
  teleport {
   tcid = NEW_BEAR,
   position = getPos{ tcid=OLD_BEAR }
  }
  
  destroyCreature {
    tcid=OLD_BEAR
  }
  
  changeCreature {
  	tcid = NEW_BEAR,
  	mortality = "MORTAL",
    effect = "FXTYPE_GEN_TRANSFORM",
  	useUnconscious = true,
  	livesRemaining = 255,
    unconsciousTime = 4,
  }
  
  
  

end)

quest.setScript( 3003, "OnTaskFulfilled", function(args)
destroyCreature {
  	tcid = 8337,
  	splatter = false,
  }

end)

quest.setScript( 1748, "OnTaskAwaiting", function(args)
for index,tcid in {4650,4651,4652} do
  	changeCreature {
  		tcid = tcid,
  		mortality = "MORTAL",
  	}
  end 
  changeCreature {
  	tcid = 4650,
  	mortality = "MORTAL",
  	useUnconscious = true,
  	livesRemaining = 1,
  	unconsciousTime = 1,
  }

end)

quest.setScript( 1748, "OnUnconscious", function(args)
if args.tcid == 4650 then
  	changeCreature {
  		tcid = 4650,
  		clearUnconscious = true,
  		livesRemaining = 0,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_DEFENSE",
  		loopCount = -1,
  		faction = "FACTION_HUMAN",
  		role = "ROLE_VICTIM",
  		mortality = "IMMORTAL",
  	}
  end 

end)

quest.setScript( 3546, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9822,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM23",
  	loopCount = -1,
  }

end)

quest.setScript( 3651, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9969,
  	visible = false,
  }

end)

quest.setScript( 3652, "OnTaskAwaiting", function(args)
creatureTeleportsAway(9969,0)

end)

quest.setScript( 3652, "OnTaskFulfilled", function(args)
--
  
  for index,tcid in {9980,9981} do 
  	changeCreature {
  		tcid = tcid,
  		visible = false,
  	}
  end 

end)

quest.setScript( 3652, "OnPrecondsFulfilled", function(args)
changeCreature {
  	tcid = 9969,
  --	effect = "FXTYPE_SUMMON",
  	visible = true,
  --	delay = 0.2,
  }
  
  --56;14;0;3100.000000;450.000000;876.321228;0.000000
  createEffect { 
  	effect = "FXTYPE_SPPL_RISE",
    position = toWorldPosition("56;14;0;3100.000000;450.000000;876.321228;0.000000"),
    duration = 1.5, 
    delay = 0.1,
  }

end)

quest.setScript( 3808, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 10366,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("9;61;0;2838.550781;1721.203125;1560.371094;236.659302"),
  	followUpBhv = "questCreatures",
  }

end)

quest.setScript( 3811, "OnWon", function(args)
changeCreature {
    tcid = 10369,
    effect = "FXTYPE_SC_BURNINGDEAD",
    mortality = "MORTAL",
    behaviour = "Enemy_warrior_brave_ex",
    faction = "FACTION_ENEMY_HERO",
  }

end)

quest.setScript( 3811, "OnTaskAwaiting", function(args)
teleport {
    tcid = 10369,
    position = toWorldPosition("11;62;0;1301.089966;1912.770020;1445.739990;132.000000"),
    orientation = 132,
  }

end)

quest.setScript( 3812, "OnCounter", function(args)
return "TASKCREATURE_10370"

end)

quest.setScript( 3812, "OnTaskAwaiting", function(args)
for index,tcid in {10369,10370,10371,10372,10373,10374,10375,10376,10377,10378,10379,
  10380,10381,10382,10383,10384,10385,10386,10387,10388,10389} do
  
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_SC_BURNINGDEAD",
  		delay = 0.1,
  	}
  
  end 

end)

quest.setScript( 3549, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	return "REJECTNQ_09_SHADOWWARRIOR_BAD"
  end 

end)

quest.setScript( 3550, "OnTaskAwaiting", function(args)
addGold(-6)
  questMessage {
  	lokaid = "QUEST_3550_GOLD",
  	color = "#ffff11",
  	line = 2,
  	duration = 4.8,
  	fadeIn = 0.1,
  	fadeOut = 0.1,
  }

end)

quest.setScript( 3554, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	return "QUEST_301_DIALOG"
  end 

end)

quest.setScript( 3555, "OnUnconscious", function(args)
if args.tcid == 9813 then
  	changeCreature {
  		tcid = 9813,
  		mortality = "IMMORTAL",
  		behaviour = "JOB_QUESTSTAGING",
  		clearUnconscious = true,
  		livesRemaining = 0,
  		emotion = "ANIM_TYPE_KNEE-IDLE",
  		loopCount = -1,
  		role = "ROLE_INVALID",
  		clearAutoTeleporting = true,
  		faction = "FACTION_FRIEND_HERO_ALL"
  	}
  end 

end)

quest.setScript( 3555, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9813,
  	useUnconscious = true,
  	livesRemaining = 1,
  	unconsciousTime = 1,
  }
  
  local robber = {9814,9815,9816,9817,9818}
  for index,tcid in robber do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "Enemy_warrior_brave",
  		faction = "FACTION_ENEMY_HERO",
  		mortality = "MORTAL",
  	}
  end	

end)

quest.setScript( 3555, "OnWon", function(args)
changeCreature {
  	tcid = 9813,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_KNEE-UP",
  	loopCount = 1,
  }
  
  changeCreature {
  	tcid = 9813,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("40;31;0;366.023438;1808.789063;318.912079;225.458496"),
  	speed = 2,
  	followUpBhv = "questCreatures",
  	delay = 4,
  }
  creatureTeleportsAway(9813,10)

end)

quest.setScript( 3553, "OnWon", function(args)
addGold(-6)
  questMessage {
  	lokaid = "QUEST_3553_GOLD",
  	color = "#ffff11",
  	line = 2,
  	duration = 4.8,
  	fadeIn = 0.1,
  	fadeOut = 0.1,
  }

end)

quest.setScript( 3581, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9842,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("57;3;0;2784.406250;296.000000;528.275330;284.120453"),
  	followUpBhv = "questCreatures",
  	speed = 2,
  }
  creatureTeleportsAway(9842,15)

end)

quest.setScript( 3552, "OnTaskAwaiting", function(args)
setTimer {
  	id = 3552,
  	interval = 1,
  	count = 5,
  }

end)

quest.setScript( 3552, "OnTimer", function(args)
if args.count == 5 then
  	changeCreature {
  		tcid = 9810,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_CREATE-JEWELERY",
  		loopCount = 1,
  		bubble = 11,
  		action = "ACTION_CREATE_JEWELLERY",
  	}
  end
  
  if args.count == 2 then
  	solveQuest(args.id)
  end 

end)

quest.setScript( 3789, "OnTaskAwaiting", function(args)

  local grp = {10442, 10443, 10444, 10445}
  
  for index,tcid in grp do
  	changeCreature {
  		tcid = tcid,
  		addToGroup = 10227,
  	}
  end
  

end)

quest.setScript( 3577, "OnCounter", function(args)
if args.state == "TASK_AWAITING" then
  	return "TASKCREATURE_9844"
  end 

end)

quest.setScript( 3579, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	return "QUEST_3579_GIVER_ACCEPT","QUEST_3579_GIVER_DECLINE"
  end 

end)

quest.setScript( 3587, "OnTaskAwaiting", function(args)
local enemies = {9847,9848,9849,9853,9854,9856,9857,9858,9859,9863}
  for index,tcid in enemies do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "Enemy_mage",
  		faction = "FACTION_ENEMY_HERO",
  		mortality = "MORTAL",
  	}
  end 

end)

quest.setScript( 3587, "OnCounter", function(args)
if args.state == "TASK_AWAITING" then
  	return "TASKCREATURE_9848"
  end 

end)

quest.setScript( 3584, "OnTaskFulfilled", function(args)
--addBookEntry(3584,"QUEST_READY")

end)

quest.setScript( 3584, "OnTaskAwaiting", function(args)
--zombie: 9850 
  --augen: 9847,9848,9849
  --script: kill the zombie
  setTimer {
  	id = 3584,
  	interval = 1,
  	count = 5,
  }

end)

quest.setScript( 3584, "OnTimer", function(args)
--Kampf Script
  --3 Augen toeten 1 Zombie (SPELL)
  if args.count == 5 then
  	for index,tcid in {9847,9848,9849} do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_ATTACKA",
  			effect = "FXTYPE_HE_ENERGIEBLITZ",
  			effectParam = {
  				paramtype = "position",
  				position = toWorldPosition("57;4;0;1053.420044;2462.659912;792.382996;151.000000"),
  				duration = 1.8,
  			},
  			loopCount = 1,
  		}
  	end 
  end
  if args.count == 3 then
  	changeCreature {
  		tcid = 9850,
  		mortality = "MORTAL",
  	}
  	killCreature {
  		tcid = 9850,
  	}
  end 
  if args.count == 1 then
  	solveQuest(3584)
  end 

end)

quest.setScript( 3571, "OnSetup", function(args)
if nil then
  for index,woid in {1053132824,1053132871} do
  	setWoobState {
  		woid = woid,
  		state = "WOOB_INVISIBLE",
  	}
  end 
  end 

end)

quest.setScript( 3571, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9837,
  	role = "ROLE_VICTIM",
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 3571, "OnWon", function(args)
changeCreature {
  	tcid = 10176,
  	behaviour = "JOB_QUESTSTAGING",
  	faction = "FACTIO_FRIEND_HERO_ALL",
  	emotion = "ANIM_TYPE_SM23",
  	loopCount = -1,
  }

end)

quest.setScript( 3734, "OnWon", function(args)
creatureTeleportsAway(10121,0)

end)

quest.setScript( 3656, "OnWon", function(args)
changeCreature {
    tcid = 10237,
    behaviour = "JOB_CAPTAIN",
  	merchantType = "MERCHANT_CAPTAIN",
  } 
  
  for index,tcid in {9980,9981} do
  	changeCreature {
  		tcid = tcid,
  		mortality = "MORTAL",
  	}
  	destroyCreature {
  		tcid = tcid,
  		splatter = true,
  	}
  end
  for index,woid in {1053132824,1053132871} do
  	setWoobState {
  		woid = woid,
  		state = "WOOB_GRAVE_CLOSE",
  	}
  end 

end)

quest.setScript( 3740, "OnTaskAwaiting", function(args)
setTimer {
  	id = 3740,
  	inverval = 1,
  	count = 5,
  }

end)

quest.setScript( 3740, "OnTimer", function(args)
if args.count == 1 then
  	solveQuest(3740)
  end
  

end)

quest.setScript( 3517, "OnTaskAwaiting", function(args)
setTimer { 
  	id = 3517, 
  	interval = 1, 
  	count = 3, 
  }
  
  changeCreature {
  	tcid = 9786,
  	visible = true,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("3;5;0;500.000000;150.000000;45.000000;0.000000"),
  	speed = 2,
  	followUpBhv = "questCreatures",
  	followUbAngle = 270,	
  }

end)

quest.setScript( 3517, "OnPrecondsAwaiting", function(args)
if nil then
  changeCreature {
  	tcid = 9786,
  	visible = false,
  	delay = 1,
  }
  end
  

end)

quest.setScript( 3517, "OnTimer", function(args)
if args.count == 1 then
  	solveQuest(3517)
  end 

end)

quest.setScript( 3741, "OnWon", function(args)
teleport {
  	tcid = 10128,
  	position = toWorldPosition("0;0;0;0;0;0;0"),
  }

end)

quest.setScript( 3742, "OnWon", function(args)
teleport {
  	tcid = 10128,
  	position = toWorldPosition("0;0;0;0;0;0;0"),
  }

end)

quest.setScript( 3640, "OnWon", function(args)
-- 9970
  
  
  local tcids = {9970,9996,9997,9998}
  
  for i,tcid in tcids do
  
  changeCreature {
    tcid = tcid,
    behaviour = "JOB_QUESTSTAGING",
    followUpBhv = "questCreatures",
    emotion = "ANIM_TYPE_EM11",
    loopCount = 1,
  
  -- 0 = one shot (einmal durchlauf, dann ende und followUpBhv setzen
  -- 1 = endlos, immer in reihenfolge. es wird einmal das gesetzte ausgefuehrt (emotion oder gotoPosition), danach nur noch die extra liste
  -- 2 = random endlos
  
    extraMode = 2,
  
    -- wenn eintrag eine table, dann position {sx=1,sy=2,...} oder mit toWorldPosition("xx") aus string konvertieren
    -- wenn eintrag ein string, dann animation/emotion name
    extra = {
      "ANIM_TYPE_EM11",
      toWorldPosition("57;49;0;1254.062500;1569.812500;-17.770836;118.442932"),
      "ANIM_TYPE_EM10",
      toWorldPosition("57;49;0;1254.062500;1569.812500;-17.770836;118.442932"),
      "ANIM_TYPE_EM09",
      toWorldPosition("57;49;0;1254.062500;1569.812500;-17.770836;118.442932"),
      "ANIM_TYPE_EM08",
      toWorldPosition("57;49;0;1126.859375;1690.359375;-17.770836;226.064392"),
      "ANIM_TYPE_EM07",
      toWorldPosition("57;49;0;1141.343750;1548.500000;-17.770836;316.016052"),
    }
  }
  
  end
  

end)

quest.setScript( 3785, "OnPrecondsFulfilled", function(args)
local tcids = { 10190,10191,10192,10193,10194,10195,10196,10197,10198,10199,
  							10200,10201,10202,10203,10204,10205,10206,10207,10208,10209 }
  
  for i, tcid in tcids do 
  	local random = math.random(1,2)
  	if random == 1 then
  		changeCreature{
  			tcid = tcid,
  			role = "ROLE_INVALID",
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_EM01",
  			loopCount = -1
  		}
  	elseif random == 2 then
  		changeCreature{
  			tcid = tcid,
  			role = "ROLE_INVALID",
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_EM02",
  			loopCount = -1
  		}
  	end
  end
  
  

end)

quest.setScript( 3661, "OnWon", function(args)
changeCreature {
  	tcid = 9982,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("4;62;0;1413.966797;426.781250;1599.249390;355.163391")
  }
  
  changeCreature {
  	tcid = 9982,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTCREATURES",
  	emotion = "ANIM_TYPE_SCRATCH-BOTTOM",
  	delay = 8
  }
  
  changeCreature {
  	tcid = 9982,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("4;61;0;1676.493164;2751.359375;1613.706665;54.381653"),
  	delay = 10
  }
  
  changeCreature {
  	tcid = 9982,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTCREATURES",
  	emotion = "ANIM_TYPE_SCRATCH-BOTTOM",
  	delay = 16
  }
  
  changeCreature {
  	tcid = 9982,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("4;61;0;1498.908203;2475.140625;1627.914307;327.268585"),
  	delay = 18
  }
  
  changeCreature {
  	tcid = 9982,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTCREATURES",
  	emotion = "ANIM_TYPE_SCRATCH-BOTTOM",
  	delay = 24
  }
  
  changeCreature {
  	tcid = 9982,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("4;61;0;1799.700195;2324.500000;1680.907593;90.000000"),
  	delay = 26
  }
  
  changeCreature {
  	tcid = 9982,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTCREATURES",
  	emotion = "ANIM_TYPE_SCRATCH-BOTTOM",
  	delay = 32
  }
  
  changeCreature {
  	tcid = 9982,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("4;61;0;1942.033203;2029.671875;1707.928711;39.929657"),
  	delay = 34
  }
  
  changeCreature {
  	tcid = 9982,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTCREATURES",
  	emotion = "ANIM_TYPE_SCRATCH-BOTTOM",
  	delay = 40
  }
  
  changeCreature {
  	tcid = 9982,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("4;61;0;1903.693359;1662.093750;1834.478149;315.653442"),
  	delay = 42
  }
  
  changeCreature {
  	tcid = 9982,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTCREATURES",
  	emotion = "ANIM_TYPE_SCRATCH-BOTTOM",
  	delay = 48
  }
  
  changeCreature {
  	tcid = 9982,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("4;61;0;1632.750000;1257.656250;1711.844116;344.845917"),
  	delay = 50
  }
  
  changeCreature {
  	tcid = 9982,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTCREATURES",
  	emotion = "ANIM_TYPE_SCRATCH-BOTTOM",
  	delay = 56
  }
  
  changeCreature {
  	tcid = 9982,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("4;61;0;1620.324219;332.656250;1686.743774;333.589355"),
  	delay = 58
  }
  
  destroyCreature {
  	tcid = 9982,
  	splatter = false,
  	delay = 64
  }	

end)

quest.setScript( 3556, "OnDialog", function(args)
return "QUEST_3487_TF_DLG"

end)

quest.setScript( 3556, "OnTaskFulfilled", function(args)
--setSpellLevel {
  --  spellName = "dm_mount_reiseform",
  --  spellLevel = 2,
  --}

end)

quest.setScript( 3670, "OnTimer", function(args)
if args.state == "TASK_FULFILLED" and args.count >= 1 then
  	solveQuest(3670)
  end
  if args.count == 1 then
  	solveQuest(3670)
  end 

end)

quest.setScript( 3670, "OnTaskAwaiting", function(args)
setTimer {
  	id = 3670,
  	interval = 1,
  	count = 30,
  }

end)

quest.setScript( 3670, "OnTaskFulfilled", function(args)
teleport {
  	tcid = 9995,
  	position = toWorldPosition("6;61;0;1600.000000;1500.000000;0.000000;0.000000"),
  	orientation = 0,
  }
  changeCreature {
    tcid = 9995,
    merchantType = "MERCHANT_TRADER",
    behaviour = "JOB_TRADER",
    delay = 1,
  }
  

end)

quest.setScript( 3762, "OnTaskAwaiting", function(args)
setTimer{
  	id = 3762,
  	interval = 1,
  	count = 5,
  }

end)

quest.setScript( 3762, "OnTimer", function(args)
if args.count == 5 then
  	changeCreature {
  		tcid = 10155,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_KE07",
  		loopCount = 1,
  	}
  end 
  if args.count == 3 then
  	changeCreature {
  		tcid = 10157,
  		visible = true,
  		effect = "FXTYPE_GEN_SUMMON",
  	}
  	changeCreature {
  		tcid = 10158,
  		visible = true,
  		effect = "FXTYPE_GEN_SUMMON",
  	}
  end
  if args.count == 1 then
  	solveQuest(3762)
  end 

end)

quest.setScript( 3679, "OnWon", function(args)
changeCreature {
  	tcid = 10016,
  	mortality = "IMMORTAL",
  	role = "ROLE_VICTIM",
  	delay = 1,
  }

end)

quest.setScript( 1881, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid=4245,
  	role = "ROLE_VICTIM",
  }
  changeCreature {
  	tcid=4245,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition={sx=34,sy=37,sz=0,px=233,py=1253,pz=50},
  	delay=1,
  	followUpBhv = "questCreatures",
  }

end)

quest.setScript( 1568, "OnTaskFulfilled", function(args)
solveQuest(1881)
  creatureTeleportPosition(4245,1,{33,35,-2,350,1550,61})
  

end)

quest.setScript( 3787, "OnTaskAwaiting", function(args)
setTimer {
  	id = 3787,
  	count = 10,
  	interval = 1,
  }
  
  questMessage {
  	lokaid = "QUEST_2067_TCOUNT_MSG",
  	color = "#F0F8FF",
  	line = 1,
  	duration = 9.8,
  	fadeIn = 0.1,
  	fadeOut = 0.1,
  }

end)

quest.setScript( 3787, "OnTaskFulfilled", function(args)
teleportTeam(3787,"61;9;0;2679.656250;2792.449219;1000.663696;193.111710")

end)

quest.setScript( 3787, "OnTimer", function(args)
if args.count == 10 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_01",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 9 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_02",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 8 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_03",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 7 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_04",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 6 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_05",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 5 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_06",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 4 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_07",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 3 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_08",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 2 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_09",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  end
  if args.count == 1 then
  	questMessage {
  		lokaid = "QUEST_2067_TCOUNT_10",
  		color = "#FF0000",
  		line = 0,
  		duration = 0.8,
  		fadeIn = 0,
  		fadeOut = 0,
  	}
  	solveQuest(args.id)
  end 

end)

quest.setScript( 3766, "OnTaskAwaiting", function(args)
setTimer{
  	id = 3766,
  	interval = 1,
  	count = 5,
  }

end)

quest.setScript( 3766, "OnTimer", function(args)
if args.count == 5 then
  	changeCreature {
  		tcid = 10155,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_KE07",
  		loopCount = 1,
  	}
  end 
  if args.count == 1 then
  	solveQuest(3766)
  end 

end)

quest.setScript( 3674, "OnTaskAwaiting", function(args)
changeCreature{
  	tcid=8030,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 3667, "OnTalk", function(args)
if args.tcid == 9995 and args.state == "PRECONDS_FULFILLED" then
  	changeCreature {
  	tcid = 9995,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_RAISE-HANDS",
  	loopCount = 1,
  	delay = 4,
  	}
  end 

end)

quest.setScript( 3667, "OnWon", function(args)
-- Alter Mann faengt an sein Haus zu bauen:
  changeCreature {
    tcid = 9995,
    behaviour = "JOB_QUESTSTAGING",
    gotoPosition = toWorldPosition("6;61;0;1849.410156;1513.093750;2175.830078;113.409790"),
    followUpBhv = "questCreatures",
    extraMode = 2,
    extra = {
      toWorldPosition("6;61;0;1740.019531;1259.578125;2189.774414;67.031738"),
      toWorldPosition("6;61;0;1222.751953;1097.156250;2183.093506;58.061554"),
      toWorldPosition("6;61;0;1576.505859;1673.781250;2175.831299;122.101776"),
      "ANIM_TYPE_SHOUT",
      "ANIM_TYPE_SEED",
      "ANIM_TYPE_ATTACKA",
      "ANIM_TYPE_EM23",
      "ANIM_TYPE_EM07",
    },
  	delay = 2,
  }

end)

quest.setScript( 3678, "OnWon", function(args)
-- Oger laeuft zum Hafen
  changeCreature {
    tcid = 10009,
    behaviour = "JOB_QUESTSTAGING",
    gotoPosition = toWorldPosition("11;62;0;2711.351563;2587.750000;929.939270;131.420120"),
    followUpBhv = "questCreatures",
    extraMode = 0,
    extra = {
      toWorldPosition("11;62;0;3131.800781;1362.953125;880.342834;23.334015"),
  		toWorldPosition("12;62;0;940.648438;149.203125;775.968628;31.097290"),
  		toWorldPosition("12;61;0;1827.101563;2043.500000;700.539246;19.202728"),
  		toWorldPosition("12;61;0;2235.199219;216.906250;766.695801;330.425079"),
  		toWorldPosition("12;60;0;2628.601563;1907.546875;583.386047;19.119720"),
  		toWorldPosition("12;60;0;2241.500000;1692.296875;628.920166;325.454102"),
  		toWorldPosition("12;60;0;1461.917969;846.859375;749.353699;343.739807"),
  		toWorldPosition("12;60;0;1589.800781;28.000000;615.209351;342.576447"),
  		toWorldPosition("12;59;0;1795.449219;1606.250000;214.263992;14.888947"),
  		toWorldPosition("12;59;0;2328.089844;448.640625;28.137184;30.043274"),
    },
  }
  
  creatureTeleportsAway(10009,3600)

end)

quest.setScript( 3691, "OnTalk", function(args)
if args.tcid == 10023 then
  	changeCreature {
  	tcid = 10023,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_PICKUP",
  	loopCount = 1,
  	delay = 2,
  	}
  end 

end)

quest.setScript( 3585, "OnTalk", function(args)
if args.tcid == 9851 then
  	changeCreature {
  	tcid = 9851,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_WORSHIP",
  	loopCount = 1,
  	delay = 2,
  	}
  end 

end)

quest.setScript( 3680, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 10016,
    role = "ROLE_VICTIM",
    behaviour = "JOB_QUESTSTAGING",
    gotoPosition = toWorldPosition("57;11;0;1563.593750;2797.148438;547.561157;309.999329"),
    delay = 1,
    followUpBhv = "questCreatures",
  	speed = 2,
    extraMode = 0,
  	extra = {
  		toWorldPosition("57;12;0;1226.625000;124.925781;517.713196;210.374664"),
      toWorldPosition("57;12;0;882.000000;430.550781;447.119904;264.212769"),
      toWorldPosition("57;12;0;594.593750;239.800781;542.911926;306.674347"),
      toWorldPosition("57;11;0;441.343750;3128.648438;524.939209;295.175110"),
    }
  }
  
  teleport {
  	tcid = 10016,
  	position = toWorldPosition("57;11;0;441.343750;3128.648438;524.939209;295.175110"),
  	orientation = 295.175110,
  	delay = 40,
  }
  
  
  
  
  

end)

quest.setScript( 3788, "OnTalk", function(args)
--if args.state == "WON" and args.tcid == 10225 then
  --  return "QUEST_3788_GIVER_START"
  --end 

end)

quest.setScript( 3715, "OnTaskFulfilled", function(args)
--[[changeCreature {
  	tcid = 10093,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = {},
  }
  destroyCreature {
  	tcid = 10093,
  	delay = 10
  }]]
  
  return toWorldPosition("62;9;-1;449;1486;110;158")

end)

quest.setScript( 3715, "OnTaskAwaiting", function(args)
for index,tcid in {10093,10094} do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SITGROUND-IDLE",
  		loopCount = -1,
  	}
  end 
  
  teleportTeam(3715,"62;9;-1;449.703125;1486.099609;110.404182;158.876602")
  return toWorldPosition("62;9;-1;449;1486;110;158")

end)

quest.setScript( 3715, "OnWon", function(args)
for index,tcid in {10093,10094} do
    changeCreature {
      tcid = tcid,
      behaviour = "JOB_QUESTSTAGING",
      emotion = "ANIM_TYPE_SITGROUND-UP",
      loopCount = 1,
    }
  end 
  
  changeCreature {
    tcid = 10093,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_TALK",
    loopCount = -1,
    delay = 1.5,
  }
  changeCreature {
    tcid = 10094,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_TALK",
    loopCount = -1,
    delay = 3,
  }
  
  for index,tcid in {10093,10094} do
    creatureTeleportsAway(tcid,8)
  end 
  
  return {}

end)

quest.setScript( 3697, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 10345,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM01",
  	loopCount = -1
  }
  	

end)

quest.setScript( 3570, "OnWon", function(args)
changeCreature {
  	tcid = 9835,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("3;61;0;2656.084961;822.562500;1498.971680;264.320251"),
  	speed = 2,
  	extraMode = 0,
  	extra = {
  		toWorldPosition("3;61;0;1893.071289;1121.046875;1500.472900;248.779358"),
  		toWorldPosition("3;61;0;1326.549805;911.046875;1629.201294;290.255463"),
  		toWorldPosition("3;61;0;860.599609;1135.343750;1662.526489;251.209412"),
  		toWorldPosition("3;61;0;307.450195;1223.296875;1773.944336;232.106049"),
  		toWorldPosition("3;61;0;41.049805;1330.203125;1806.079224;241.859390"),
  	}
  }
  creatureTeleportsAway(9835,20)

end)

quest.setScript( 3784, "OnStation", function(args)
if args.currentStation == 0 then
  -- dis below be da station 1
  	-- Anlage aus
  	setWoobState {
  		woid = 1048876009, 
  		state = "WOOB_INVISIBLE",
  	}
  	-- Anlage an
  	setWoobState {
  		woid = 1048876011,
  		state = "WOOB_INVALID",
  	}
  	-- Rohr an
  	setWoobState {
  		woid = 1048876008,
  		state = "WOOB_INVALID",
  	}
  	-- Feuer-Effekt anflanschen
  	setWoobEffect {
  		woid = 1048876010,
  		effect = "FXTYPE_BLUEFIRE_LARGE",
  	}
  	-- naechster Schalter (4) auf Thingy Off
  	setWoobState {
  		woid = 1048877280,
  		state = "WOOB_THINGY_OFF",
  	}
  end
  if args.currentStation == 1 then
  -- dis below be da station 4
  	-- Anlage aus
  	setWoobState {
  		woid = 1048877277, 
  		state = "WOOB_INVISIBLE",
  	}
  	-- Anlage an
  	setWoobState {
  		woid = 1048877279,
  		state = "WOOB_INVALID",
  	}
  	-- Rohr an
  	setWoobState {
  		woid = 1048877276,
  		state = "WOOB_INVALID",
  	}
  	-- Feuer-Effekt anflanschen
  	setWoobEffect {
  		woid = 1048877278,
  		effect = "FXTYPE_BLUEFIRE_LARGE",
  	}
  	-- naechster Schalter (3) auf Thingy Off
  	setWoobState {
  		woid = 1048642833,
  		state = "WOOB_THINGY_OFF",
  	}
  end
  if args.currentStation == 2 then
  -- dis below be da station 3
  	--
  	setWoobState {
  		woid = 1048613003,
  		state = "WOOB_INVISIBLE",
  	}
  	-- Anlage an
  	setWoobState {
  		woid = 1048612968,
  		state = "WOOB_INVALID",
  	}
  	-- Rohr an
  	setWoobState {
  		woid = 1048613314,
  		state = "WOOB_INVALID",
  	}
  	-- Feuer-Effekt anflanschen
  	setWoobEffect {
  		woid = 1048614077,
  		effect = "FXTYPE_BLUEFIRE_LARGE",
  	}
  	-- naechster Schalter (2) auf Thingy Off
  	setWoobState {
  		woid = 1048876801,
  		state = "WOOB_THINGY_OFF",
  	}
  end
  if args.currentStation == 3 then
  -- dis below be da station 2
  	-- Anlage aus
  	setWoobState {
  		woid = 1048876798, 
  		state = "WOOB_INVISIBLE",
  	}
  	-- Anlage an
  	setWoobState {
  		woid = 1048876800,
  		state = "WOOB_INVALID",
  	}
  	-- Rohr an
  	setWoobState {
  		woid = 1048876797,
  		state = "WOOB_INVALID",
  	}
  	-- Feuer-Effekt anflanschen
  	setWoobEffect {
  		woid = 1048876799,
  		effect = "FXTYPE_BLUEFIRE_LARGE",
  	}
  end 

end)

quest.setScript( 3588, "OnCounter", function(args)
if args.state == "TASK_AWAITING" then
  	return "TASKCREATURE_9855"
  end
  if args.state == "TASK_FULFILLED" then
  	return "TASKCREATURE_9855"
  end 

end)

quest.setScript( 3792, "OnSetup", function(args)
setWoobEffect { effect="FXTYPE_CHEST1W", woid=1050361415}

end)

quest.setScript( 3576, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 9842 then
  	for index,tcid in {9842,9843,9844,9845} do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "questCreatures",
  		}
  	end 
  end 

end)

quest.setScript( 3576, "OnTaskAwaiting", function(args)
local delay = 0.4
  for index,tcid in {9843,9844,9845} do
    changeCreature {
      tcid = tcid,
      behaviour = "JOB_QUESTSTAGING",
      emotion = "ANIM_TYPE_PUT-HERBS",
  		delay = delay+0.7,
  	  extraMode = 2,
      extra = {
        "ANIM_TYPE_PUT-HERBS",
        "ANIM_TYPE_PICK-IN-POCKET",
        "ANIM_TYPE_PICK-UP-ITEM",
      },
    }
  end 

end)

quest.setScript( 3601, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9903,
  	role = "ROLE_VICTIM",
  	mortality = "MORTAL",
  	useUnconscious = true,
  	unconsciousTime = 1,
  	livesRemaining = -1,
  	behaviour = "Hireling_brave",
  	faction = "FACTION_HIGHELVE_GUARD"
  }
  
  --kein timer!

end)

quest.setScript( 3601, "OnUnconscious", function(args)
if args.tcid == 9903 then 
  	teleport {
  		tcid = 9903,
  		position = toWorldPosition("47;4;0;1850.000000;1150.000000;50.000000;0.000000"),
  		-- POSITION ANPASSEN!
  		orientation = 0,
  		-- ORIENTATION ANPASSEN!
  	}
  	changeCreature {
  		tcid = 9903,
  		role = "ROLE_INVALID",
  		mortality = "IMMORTAL",
  		clearUnconscious = true,
  		livesRemaining = 0,
  		behaviour = "JOB_QUESTSTAGING",
  		faction = "FACTION_FRIEND_HERO_ALL",
  		emotion = "ANIM_TYPE_SM23",
  		loopCount = -1,
  		clearAutoTeleporting = true,
  		delay = 1,
  	}
  end 

end)

quest.setScript( 3601, "OnLost", function(args)
--addBookEntry(3601,"QUEST_LOST")

end)

quest.setScript( 3634, "OnTaskAwaiting", function(args)
setWoobEffect {
  	woid = 1051583664,
  	effect = "FXTYPE_PORTAL2",
  }

end)

quest.setScript( 3682, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 10016,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("0;0;-1;0;0;0;0"),
  	followUpBhv = "questCreatures",
  	mortality = "MORTAL",
  	delay = 1,
  	role = "ROLE_INVALID",
  }
  creatureTeleportsAway(10016,0)
  destroyCreature {
  	tcid = 10016,
  	delay = 2,
  }
  
  solveQuest(3680)

end)

quest.setScript( 3686, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 10235,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM23",
  	loopCount = -1,
  }

end)

quest.setScript( 3698, "OnWon", function(args)
changeCreature {
  	tcid = 10509,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_ATTACKA",
  	loopCount = -1
  }

end)

quest.setScript( 3698, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 10345,
  	--behaviour = "questCreatures",
  	emotion = "ANIM_TYPE_IDLE"
  }
  	

end)

quest.setScript( 3761, "OnTaskAwaiting", function(args)
for index,tcid in {10307,10308,10309,10310,10311} do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM23",
  		loopCount = -1,
  		delay = 1,
  	}
  end 

end)

quest.setScript( 3761, "OnPrecondsFulfilled", function(args)
for index,tcid in {10157,10158} do
  	changeCreature {
  		tcid = tcid,
  		visible = false,
  		delay = 1,
  	}
  end 

end)

quest.setScript( 3770, "OnStation", function(args)
if args.currentStation == 0 then
    setWoobState {
      woid = 1051587639,
      state = "WOOB_THINGY_OFF",
    }
  end 
  if args.currentStation == 1 then
    setWoobState {
      woid = 1051576192,
      state = "WOOB_THINGY_OFF",
    }
  end 

end)

quest.setScript( 3768, "OnTaskFulfilled", function(args)
setWoobState {
    woid = 1051481207,
    state = "WOOB_INVALID",
  }
  
  setWoobEffect {
  	woid = 1051481207,
  	effect = "FXTYPE_INVALID",
  }

end)

quest.setScript( 3727, "OnStation", function(args)
if args.currentStation == 0 then
  	setWoobState {
  		woid = 1052011472,
  		state = "WOOB_THINGY_OFF",
  	}
  end 

end)

quest.setScript( 3522, "OnTaskFulfilled", function(args)
for index,tcid in {10314,10315,10316,10317,10319} do
  	changeCreature {
  		tcid = tcid,
  		behaviour = "JOB_RICH_STATIST",
  		mortality = "MORTAL",
  	}
  	killCreature {
  		tcid = tcid,
  		delay = 150,
  	}
  end
  
  WeatherDefinitions.quest_3522_56_12 = {sx=56,sy=12,sz=0,density=100,flags=WEATHERFLAG_RAIN+WEATHERFLAG_WIND}
  WeatherDefinitions.quest_3522_57_12 = {sx=57,sy=12,sz=0,density=100,flags=WEATHERFLAG_RAIN+WEATHERFLAG_WIND}
  WeatherDefinitions.quest_3522_58_12 = {sx=58,sy=12,sz=0,density=100,flags=WEATHERFLAG_RAIN+WEATHERFLAG_WIND}
  WeatherDefinitions.quest_3522_57_11 = {sx=57,sy=11,sz=0,density=100,flags=WEATHERFLAG_RAIN+WEATHERFLAG_WIND}
  updateWeather()

end)

quest.setScript( 3522, "OnStation", function(args)
if args.currentStation == 0 then
  	setWoobState {
  		woid = 1050865354,
  		state = "WOOB_START",
  	}
  end
  if args.currentStation == 1 then
  	setWoobState {
  		woid = 1050865354,
  		state = "WOOB_START",
  	}
  end
  if args.currentStation == 2 then
  	setWoobEffect {
  		woid = 1050865354,
  		effect = "FXTYPE_FIRE1",
  	}
  	setWoobState {
  		woid = 1050865354,
  		state = "WOOB_STOP",
  	}
  end 

end)

quest.setScript( 3776, "OnTalk", function(args)
if args.tcid == args.tcid then
  	changeCreature {
  		tcid = args.tcid,
  		behaviour = "questCreatures",
  		gotoPosition = toWorldPosition("0;0;-1;0;0;0;0"),
  	}
  end 

end)

quest.setScript( 3776, "OnStation", function(args)
if args.currentStation == 0 then
  --	changeCreature {
  --		tcid = 10160,
  --		effect = "FXTYPE_QFX_CAST",
  --	}
  	destroyCreature {
  		tcid = 10160,
  		splatter = true,
  		delay = 1,
  	}
  end 
  if args.currentStation == 1 then
  --	changeCreature {
  --		tcid = 10161,
  --		effect = "FXTYPE_QFX_CAST",
  --	}
  	destroyCreature {
  		tcid = 10161,
  		splatter = true,
  		delay = 1,
  	}
  end 
  if args.currentStation == 2 then
  --	changeCreature {
  --		tcid = 10162,
  --		effect = "FXTYPE_QFX_CAST",
  --	}
  	destroyCreature {
  		tcid = 10162,
  		splatter = true,
  		delay = 1,
  	}
  end 
  if args.currentStation == 3 then
  --	changeCreature {
  --		tcid = 10163,
  --		effect = "FXTYPE_QFX_CAST",
  --	}
  	destroyCreature {
  		tcid = 10163,
  		splatter = true,
  		delay = 1,
  	}
  end 
  if args.currentStation == 4 then
  --	changeCreature {
  --		tcid = 10164,
  --		effect = "FXTYPE_QFX_CAST",
  --	}
  	destroyCreature {
  		tcid = 10164,
  		splatter = true,
  		delay = 1,
  	}
  end 
  if args.currentStation == 5 then
  --	changeCreature {
  --		tcid = 10165,
  --		effect = "FXTYPE_QFX_CAST",
  --	}
  	destroyCreature {
  		tcid = 10165,
  		splatter = true,
  		delay = 1,
  	}
  end 
  if args.currentStation == 6 then
  --	changeCreature {
  --		tcid = 10166,
  --		effect = "FXTYPE_QFX_CAST",
  --	}
  	destroyCreature {
  		tcid = 10166,
  		splatter = true,
  		delay = 1,
  	}
  end 

end)

quest.setScript( 3776, "OnTaskAwaiting", function(args)
for index,tcid in {10160,10161,10162,10163,10164,10165,10166,10167} do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_SC_BURNINGDEAD",
  		delay = 0.1,
  	}
  end 

end)

quest.setScript( 3776, "OnTaskFulfilled", function(args)
--changeCreature {
  --	tcid = 10167,
  --	effect = "FXTYPE_QFX_CAST",
  --}
  destroyCreature {
  	tcid = 10167,
  	splatter = true,
  	delay = 1,
  }

end)

quest.setScript( 3781, "OnTaskAwaiting", function(args)
setTimer {
  	id = 3781,
  	interval = 120,
  	count = 2,
  }

end)

quest.setScript( 3781, "OnTimer", function(args)
if args.count == 1 then
    WeatherDefinitions.quest_3522_56_12 = {sx=56,sy=12,sz=0,density=0,flags=0}
    WeatherDefinitions.quest_3522_57_12 = {sx=57,sy=12,sz=0,density=0,flags=0}
    WeatherDefinitions.quest_3522_58_12 = {sx=58,sy=12,sz=0,density=0,flags=0}
    WeatherDefinitions.quest_3522_57_11 = {sx=57,sy=11,sz=0,density=0,flags=0}
  	updateWeather()	
  	solveQuest(3781)
  end 

end)

quest.setScript( 3607, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	return "QUEST_3607_GIVER_OK"
  end 

end)

quest.setScript( 3607, "OnWon", function(args)
-- Mishirla geht weg 9903
  -- 55;9;0;1236.890625;2901.683594;719.263184;121.624313
  
  changeCreature {
  	tcid = 9903,
  	behaviour = "JOB_QUESTSTAGING",
  	mortality = "IMMORTAL",
  	gotoPosition = toWorldPosition("55;9;0;1236.890625;2901.683594;719.263184;121.624313"),
  	followUpBhv = "questCreatures",
  	speed = 2,
  }
  changeCreature {
  	tcid = 9903,
  	visible = false,
  	delay = 45,
  }

end)

quest.setScript( 3611, "OnWon", function(args)
-- Kill Hattmir
  
  changeCreature {
  	tcid = 9842,
  	mortality = "MORTAL",
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM22",
  	loopCount = 1,
  }
  killCreature {
  	tcid = 9842,
  	delay = 2,
  }	

end)

quest.setScript( 3713, "OnPrecondsFulfilled", function(args)
changeCreature {
  	tcid = 10433,
  	effect = "FXTYPE_HOLOGRAM",
  	delay = 0.5
  }

end)

quest.setScript( 3713, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 10433,
  	effect = "FXTYPE_HOLOGRAM"
  }
  changeCreature {
  	tcid = 10433,
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("62;12;-1;2643.656250;131.750000;-300.075470;125.649643"),
  	speed = 2
  }
  
  destroyCreature {
  	tcid = 10433,
  	splatter = false,
  	delay = 12
  }

end)

quest.setScript( 3695, "OnWon", function(args)
changeCreature {
  	tcid = 10029,
  	effect = "FXTYPE_HOLOGRAM",
  }	

end)

quest.setScript( 3695, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 10029,
  	effect = "FXTYPE_HOLOGRAM",
  }	

end)

quest.setScript( 3695, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 10029,
  	effect = "FXTYPE_HOLOGRAM",
  }	

end)

quest.setScript( 3695, "OnPrecondsFulfilled", function(args)
changeCreature {
  	tcid = 10029,
  	effect = "FXTYPE_HOLOGRAM",
  }	

end)

quest.setScript( 3798, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 10105 then
  	changeCreature {
  		tcid = 10105,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  end 

end)

quest.setScript( 3798, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 10105,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  }

end)

quest.setScript( 3798, "OnWon", function(args)
changeCreature {
  	tcid = 10105,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM23",
  	loopCount = -1,
  	mortality = "MORTAL",
  }
  
  killCreature {
  	tcid = 10105,
  	delay = 2,
  }

end)

quest.setScript( 3747, "OnStation", function(args)
if args.currentStation == 0 then
  	setWoobState {
  		woid = 1050715474,
  		state = "WOOB_THINGY_OFF",
  	}
  end
  if args.currentStation == 1 then
  	setWoobState {
  		woid = 1050716053,
  		state = "WOOB_THINGY_OFF",
  	}
  end
  if args.currentStation == 2 then
  	setWoobState {
  		woid = 1050716348,
  		state = "WOOB_THINGY_OFF",
  	}
  end
  if args.currentStation == 3 then
  	setWoobState {
  		woid = 1050716789,
  		state = "WOOB_THINGY_OFF",
  	}
  end 

end)

quest.setScript( 3803, "OnPrecondsFulfilled", function(args)
--10358
  
  changeCreature {
  	tcid = 10358,
  	behaviour = "Enemy_warrior_brave_ex",
  	faction = "FACTION_ENEMY_HERO",
  	effect = "FXTYPE_SC_BURNINGDEAD",
    role = "ROLE_ATTACKER"
  }

end)

quest.setScript( 3816, "OnTaskAwaiting", function(args)
local tcids = {10453,10454,10455,10456}
  for index,tcid in tcids do
    changeCreature {
      tcid = tcid,
      effect = "FXTYPE_GEN_SPAWN1",
      delay = 0.2,
    }
  end 

end)

quest.setScript( 3822, "OnTaskAwaiting", function(args)
for index,tcid in {10458,10459,10460,10461,10462} do
  	changeCreature {
  		tcid = tcid,
  		effect = "FXTYPE_SPPL_RISE",
  		delay = 0.2,
  	}
  end 

end)

quest.setScript( 3771, "OnTaskFulfilled", function(args)
setWoobEffect {
  	woid = 1051583599,
  	effect = "FXTYPE_PORTAL1",
  }

end)

quest.setScript( 3826, "OnTimer", function(args)
if args.count == 1 then
  	solveQuest(3826)
  end 

end)

quest.setScript( 3826, "OnTaskAwaiting", function(args)
setTimer {
  	id = 3826,
  	count = 3,
  	interval = 1,
  }

end)

quest.setScript( 3532, "OnWon", function(args)
setWoobState {
  	woid = 1050361415,
  	state = "WOOB_CHEST_CLOSE",
  }

end)

quest.setScript( 3532, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 9804,
    behaviour = "JOB_QUESTSTAGING",
    gotoPosition = toWorldPosition("5;1;0;2569.814453;2938.104492;550.289734;266.937683"),
    speed = 2,
  }
  
  creatureTeleportsAway(9804,10)

end)

quest.setScript( 3829, "OnPrecondsFulfilled", function(args)
cutscene_DM(args)

end)

quest.setScript( 3824, "OnTaskFulfilled", function(args)
killCreature {
  	tcid = 10463,
  }

end)

quest.setScript( 3824, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 10463,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM23",
  	loopCount = -1,
  	mortality = "MORTAL",
  	delay = 1,
  }

end)

quest.setScript( 3832, "OnTaskAwaiting", function(args)
local pos = getPos{heroRef = args.heroRef}
  
  createEffect {
  	effect = "FXTYPE_GEN_SPAWN1",
  	position = pos,
  }

end)

quest.setScript( 3818, "OnTaskAwaiting", function(args)
setTimer {
  	id = 3818,
  	count = 30,
  	interval = 1,
  }

end)

quest.setScript( 3818, "OnTimer", function(args)
quest_3818_ta = 0
  quest_3818_tf = 0
  
  if args.count == 1 and args.state == "TASK_AWAITING" then
  	quest_3818_ta = 1
  	solveQuest(3818)
  end 
  if args.count >= 1 and args.state == "TASK_FULFILLED" then
  	quest_3818_tf = 1
  	solveQuest(3818)
  end 

end)

quest.setScript( 3818, "OnStation", function(args)
if args.currentStation == 0 then
  	quest_3818_tf = 1
  end 

end)

quest.setScript( 3817, "OnTaskAwaiting", function(args)
-- helf 10457 geht ins dorf, anschliessend rich statist

end)

quest.setScript( 3820, "OnTaskAwaiting", function(args)
if quest_3818_tf == 1 then
  	solveQuest(3820)
  end 

end)

quest.setScript( 3820, "OnTaskFulfilled", function(args)
quest_3818_tf = nil
  quest_3818_ta = nil 

end)

quest.setScript( 3819, "OnTaskAwaiting", function(args)
if quest_3818_ta == 1 then
  	solveQuest(3819)
  end 

end)

quest.setScript( 3819, "OnTaskFulfilled", function(args)
quest_3818_tf = nil
  quest_3818_ta = nil 

end)

quest.setScript( 3827, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 10464,
  	effect = "FXTYPE_SPPL_RISE",
  	delay = 0.2,
  }

end)

quest.setScript( 3534, "OnTaskAwaiting", function(args)
setTimer {
  	id = 3534,
  	interval = 1,
  	count = 9
  }
  local tcid = 9795
  local position = toWorldPosition("55;12;0;1537.250000;1126.601563;455.892975;11.309937")
  
  createEffect {
  	position = position,
  	effect = "FXTYPE_SK_KOHORTE_I",
  	delay = 2,
  	duration = 7
  }
  
  createEffect {
  	position = position,
  	effect = "FXTYPE_GEN_FRAG_DUST",
  	delay = 4,
  	duration = 5
  }
  
  createEffect {
  	position = position,
  	effect = "FXTYPE_GEN_SPAWN1",
  	delay = 6,
  	duration = 3
  }
  
  changeCreature {
  	tcid = tcid,
  	effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
  	delay = 9
  }
  
  destroyCreature {
  	tcid = tcid,
  	splatter = true,
  	delay = 9
  }
  

end)

quest.setScript( 3529, "OnTaskAwaiting", function(args)
setTimer {
  	id = 3529,
  	interval = 1,
  	count = 9
  }
  local tcid = 9790
  local position = toWorldPosition("55;9;0;3105.590088;452.199005;939.927979;335.000000")
  
  createEffect {
  	position = position,
  	effect = "FXTYPE_SK_KOHORTE_I",
  	delay = 2,
  	duration = 7
  }
  
  createEffect {
  	position = position,
  	effect = "FXTYPE_GEN_FRAG_DUST",
  	delay = 4,
  	duration = 5
  }
  
  createEffect {
  	position = position,
  	effect = "FXTYPE_GEN_SPAWN1",
  	delay = 6,
  	duration = 3
  }
  
  changeCreature {
  	tcid = tcid,
  	effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
  	delay = 9
  }
  
  destroyCreature {
  	tcid = tcid,
  	splatter = true,
  	delay = 9
  }
  

end)

quest.setScript( 3848, "OnPrecondsFulfilled", function(args)
setWoobState {
  	woid = 1052091316,
  	state = "WOOB_DOOR_UNLOCKED",
  }

end)

quest.setScript( 3573, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 9838,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM20",
  	loopCount = -1,
  	delay = 1,
  }

end)

quest.setScript( 3573, "OnTalk", function(args)
if args.state == "TASK_AWAITING" then
  	changeCreature {
  		tcid = 9838,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  end 

end)

quest.setScript( 3573, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 9838,
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM23",
  	loopCount = -1,
  	role = "ROLE_INVALID",
  }

end)

quest.setScript( 3575, "OnWon", function(args)
creatureTeleportsAway(9837,90)

end)

quest.setScript( 3796, "OnCounter", function(args)
if args.state == "TASK_AWAITING" then
  	return "TASKCREATURE_9896"
  end
  if args.state == "TASK_FULFILLED" then
  	return "TASKCREATURE_9884"
  end 

end)

quest.setScript( 3594, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 9903,
  	mortality = "IMMORTAL",
  }

end)

quest.setScript( 3594, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then 
  	return "QUEST_3594_GIVER_ACCEPT"
  end 

end)

quest.setScript( 3594, "OnPrecondsFulfilled", function(args)
teleport {
  	tcid = 9903,
    position = toWorldPosition("55;6;0;1548.800049;320.350006;720.171997;0.000000"),
  }

end)

quest.setScript( 3610, "OnTaskAwaiting", function(args)
-- Hattmir: 9842
  if getQuestState(3579) == "LOST" then
  	teleport {
  		--Hattmir in den Kaefig ...
  		tcid = 9842,
  		position = toWorldPosition("54;12;0;785.171997;1231.739990;463.266998;126.000000"),
  	}
  	changeCreature {
  		-- Hattmir auf den Boden legen!
  		tcid = 9842,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  	}
  	destroyCreature {
  		tcid = 9929, --Gerund
  		splatter = false,
  		delay = 1,
  	}
  end 
  if getQuestState(3579) == "WON" then
  	teleport {
  		--Gerund in den Kaefig ...
  		tcid = 9929,
  		position = toWorldPosition("54;12;0;785.171997;1231.739990;463.266998;126.000000"),
  	}
  	changeCreature {
  		-- Gerund auf den Boden legen!
  		tcid = 9929,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM20",
  		loopCount = -1,
  	}
  end 

end)

quest.setScript( 3647, "OnTaskAwaiting", function(args)
--9973,10406,10407,10408,10409,10410,10411,10412
  
  local tcids = {9973,10406,10407,10408,10409,10410,10411,10412}
  for index,tcid in tcids do
    changeCreature {
      tcid = tcid,
      effect = "FXTYPE_GEN_SPAWN1",
      delay = 0.2,
    }
  end 

end)

quest.setScript( 3647, "OnCounter", function(args)
return "TASKCREATURE_9973"

end)

quest.setScript( 3648, "OnTaskAwaiting", function(args)
--9974,10413,10414,10415,10416,10417,10418,10419,10420
  
  local tcids = {9974,10413,10414,10415,10416,10417,10418,10419,10420}
  for index,tcid in tcids do
    changeCreature {
      tcid = tcid,
      effect = "FXTYPE_GEN_SPAWN1",
      delay = 0.2,
    }
  end 

end)

quest.setScript( 3648, "OnCounter", function(args)
return "TASKCREATURE_9974"

end)

quest.setScript( 3649, "OnTaskAwaiting", function(args)
--9975,10421,10422,10423,10424,10425,10426,10427,10428,10429,10430
  
  local tcids = {9975,10421,10422,10423,10424,10425,10426,10427,10428,10429,10430}
  for index,tcid in tcids do
    changeCreature {
      tcid = tcid,
      effect = "FXTYPE_GEN_SPAWN1",
      delay = 0.2,
    }
  end 

end)

quest.setScript( 3649, "OnTaskFulfilled", function(args)
questMessage {
  	lokaid = "QUEST_3649_TF_RITUAL",
  	color = "#F0F8FF",
  	line = 1,
  	duration = 4.8,
  	fadeIn = 0.1,
  	fadeOut = 0.1,
  }
  setWaterType { 
  	sx = 62, 
  	sy = 14, 
  	sz = -1, 
  	waterType = 29,
  }

end)

quest.setScript( 3649, "OnCounter", function(args)
return "TASKCREATURE_9975"

end)

quest.setScript( 3650, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 9971,
    behaviour = "JOB_QUESTSTAGING",
    emotion = "ANIM_TYPE_RAISE-HANDS",
    loopCount = 1,
  }
  changeCreature {
    tcid = 9971,
    behaviour = "questCreatures",
  	delay = 3,
  }

end)

quest.setScript( 3849, "OnTaskAwaiting", function(args)

  changeCreature {
    tcid = 10027,
    merchantType = "MERCHANT_TRADER",
    behaviour = "JOB_TRADER",
    delay = 1,
  }

end)

quest.setScript( 3653, "OnWon", function(args)
-- Die Dienerin spaziert zum Dorf:
  changeCreature {
    tcid = 9976,
    behaviour = "JOB_QUESTSTAGING",
    gotoPosition = toWorldPosition("5;52;0;3100.000000;750.000000;0.000000;0.000000"),
    followUpBhv = "questCreatures",
  	delay = 2,
  }

end)

quest.setScript( 3709, "OnTaskAwaiting", function(args)

  
  if quest_3673_dcount < 16 then 
  	solveQuest{id=3709}
  else
  	looseQuest{id=3709}
  end 

end)

quest.setScript( 3710, "OnTaskAwaiting", function(args)

  if quest_3673_dcount >= 16 and quest_3673_dcount < 30 then 
  	solveQuest{id=3710}
  else
  	looseQuest{id=3710}
  end 

end)

quest.setScript( 3711, "OnTaskAwaiting", function(args)
if quest_3673_dcount >= 30 then
  	solveQuest{id=3711}
  else
  	looseQuest{id=3711}
  end 

end)

quest.setScript( 3531, "OnTimer", function(args)
showTimer {
  	id = 3531,
  	cur = args.count,
  	max = 60*7,
  }
  
  if args.count == 40*4 then
    --10314
  	changeCreature {
  		tcid = 10314,
      behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_KE01",
  		extraMode = 2,
  		extra = {
  			"ANIM_TYPE_KE01",
  			"ANIM_TYPE_KE06",
  			"ANIM_TYPE_KE07",
  			"ANIM_TYPE_KE08",
  			"ANIM_TYPE_KE09",
  		}
  	}
  end
  
  if args.count == 60*3 then
    --10315
  	changeCreature {
  		tcid = 10315,
      behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_KE01",
  		extraMode = 2,
  		extra = {
  			"ANIM_TYPE_KE01",
  			"ANIM_TYPE_KE06",
  			"ANIM_TYPE_KE07",
  			"ANIM_TYPE_KE08",
  			"ANIM_TYPE_KE09",
  		}
  	}
  end 
  
  if args.count == 60*2 then
    --10316
  	changeCreature {
  		tcid = 10316,
      behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_KE01",
  		extraMode = 2,
  		extra = {
  			"ANIM_TYPE_KE01",
  			"ANIM_TYPE_KE06",
  			"ANIM_TYPE_KE07",
  			"ANIM_TYPE_KE08",
  			"ANIM_TYPE_KE09",
  		}
  	}
  end 
  
  if args.count == 60 then
    --10317,10319
  	for index,tcid in {10317,10319} do
  		changeCreature {
  			tcid = tcid,
  			behaviour = "JOB_QUESTSTAGING",
  			emotion = "ANIM_TYPE_KE01",
  			extraMode = 2,
  			extra = {
  				"ANIM_TYPE_KE01",
  				"ANIM_TYPE_KE06",
  				"ANIM_TYPE_KE07",
  				"ANIM_TYPE_KE08",
  				"ANIM_TYPE_KE09",
  			}
  		}
  	end
  end
  
  if getQuestState(3522) == "TASK_FULFILLED" or getQuestState(3522) == "WON" then
  	for index,tcid in {10314,10315,10316,10317,10319} do
  		destroyCreature {
  			tcid = tcid,
  			splatter = true,
  		}
  	end
  	solveQuest(3531)
  end 
  
  if getQuestState(3531) == "TASK_AWAITING" and args.count == 1 then
  	if getQuestState(3522) == "TASK_FULFILLED" or getQuestState(3522) == "WON" then
  	for index,tcid in {10314,10315,10316,10317,10319} do
  		destroyCreature {
  			tcid = tcid,
  			splatter = true,
  		}
  	end
  		--y()
  		solveQuest(3531)
  	else
  		--x()
  		addBookEntry { id=3850, textid="QUEST_READY", continues_bookentry=3518, position = toWorldPosition("0;0;-1;0;0;0;0") }
  		solveQuest(3531)
  	end
  end 

end)

quest.setScript( 3531, "OnTaskAwaiting", function(args)
setTimer {
  	id = 3531,
  	interval = 1,
  	count = 60*7,
  }
  
  for index,tcid in {10314,10315,10316,10317,10319} do
  	changeCreature {
      tcid = tcid,
      visible = false,
      delay = 1,
  	}
  end 

end)

quest.setScript( 3655, "OnDialog", function(args)
if args.state == "PRECONDS_FULFILLED" then
  	return "QUEST_3655_GIVER_OK"
  end 

end)

quest.setScript( 3809, "OnTaskAwaiting", function(args)
setTimer {
  	id = 3809,
  	count = 12,
  	interval = 1,
  }

end)

quest.setScript( 3809, "OnTimer", function(args)
--10365,10366
  if args.count == 10 then
    changeCreature {
      tcid = 10365,
      behaviour = "JOB_QUESTSTAGING",
      emotion = "ANIM_TYPE_SM06",
      loopCount = 1,
    }
  --  changeCreature {
  --    tcid = 10365,
  --    behaviour = "JOB_QUESTSTAGING",
  --		effect = "FXTYPE_HE_ENERGIEBLITZ",
  --		effectParam = {
  --			paramtype = "position",
  --			position = toWorldPosition("9;61;0;3068.250000;1569.750000;1567.619995;218.000000"),
  --			duration = 1.2,
  --		},
  --		delay = 1.2,
  --  }
  	changeCreature {
      tcid = 10366,
  		effect = "FXTYPE_QFX_BLITZVOMHIMMEL",
  	}
  end 
  if args.count == 8 then
    changeCreature {
      tcid = 10366,
      behaviour = "JOB_QUESTSTAGING",
      effect = "FXTYPE_SC_BURNINGDEAD",
      mortality = "MORTAL",
      gotoPosition = toWorldPosition("9;61;0;2785.599609;1634.406250;1565.843384;327.994629"),
      speed = 2,
      delay = 2,
      extraMode = 2,
      extra = {
        toWorldPosition("9;61;0;2862.250000;1757.500000;1554.153198;147.039093"),
        toWorldPosition("9;61;0;2898.400391;1702.750000;1554.658936;20.031006"),
        toWorldPosition("9;61;0;2876.972656;1644.687500;1562.750732;339.863708"),
        toWorldPosition("9;61;0;2950.753906;1698.640625;1545.885986;74.485199"),
        toWorldPosition("9;61;0;2901.300781;1571.656250;1567.249390;309.207214"),
      },
    }
  end 
  
  if args.count == 1 then
    killCreature {
      tcid = 10366,
      delay = 9,
    }
    solveQuest(3809)
  end 

end)

quest.setScript( 3835, "OnWon", function(args)
addGold(-150)
  
  questMessage {
  	lokaid = "QUEST_3835_GOLD",
  	color = "#ffff11",
  	line = 2,
  	duration = 4.8,
  	fadeIn = 0.1,
  	fadeOut = 0.1,
  }

end)

quest.setScript( 3836, "OnWon", function(args)
local pos = getPos{heroRef = args.heroRef}
  
  createEffect {
  	effect = "FXTYPE_GEN_SPAWN1",
  	position = pos,
  }

end)

quest.setScript( 3673, "OnCounter", function(args)
return "TASKCREATURE_10246"

end)

quest.setScript( 3673, "OnTaskAwaiting", function(args)
quest_3673_dcount = 0
  setTimer {
    id = 3673,
    interval = 1,
    count = 300,       
  }

end)

quest.setScript( 3673, "OnDeath", function(args)
quest_3673_dcount = quest_3673_dcount + 1

end)

quest.setScript( 3673, "OnTimer", function(args)
showTimer {
    id = 3673,
    cur = args.count,
    max = 300
  }
  if args.state == "TASK_FULFILLED" and args.count >= 1 then 
    solveQuest(3673)
  end
  if args.count == 1 then 
  	solveQuest(3673)
  end 

end)

quest.setScript( 3714, "OnTaskAwaiting", function(args)
setWoobEffect {effect="FXTYPE_INVALID", woid=1052616164}

end)

quest.setScript( 3714, "OnWon", function(args)
changeCreature {
  	tcid = 10074,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("62;11;0;1694.937500;1823.980469;595.546875;55.782837")
  }
  
  creatureTeleportPosition(10074,12,toWorldPosition("60;11;0;1750;2100;734.589294;282.008179"))
  
  setWoobEffect {effect="FXTYPE_PORTAL2", woid=1052616164}
  
  

end)

quest.setScript( 3613, "OnTaskFulfilled", function(args)
setWoobEffect {
  	woid = 1050703089,
  	effect = "FXTYPE_INVALID",
  }

end)

quest.setScript( 3616, "OnTaskFulfilled", function(args)
setWoobEffect {
  	woid = 1050703107,
  	effect = "FXTYPE_INVALID",
  }

end)

quest.setScript( 3617, "OnTaskFulfilled", function(args)
setWoobEffect {
  	woid = 1050703067,
  	effect = "FXTYPE_INVALID",
  }

end)

quest.setScript( 3618, "OnTaskFulfilled", function(args)
setWoobEffect {
  	woid = 1050703098,
  	effect = "FXTYPE_INVALID",
  }
  
  for index,woid in {1052258793,1052258804,1052258816} do
  	setWoobState {
  		woid = woid,
  		state = "WOOB_DOOR_UNLOCKED",
  	}
  end 

end)

quest.setScript( 3621, "OnCounter", function(args)
return "TASKCREATURE_9944"

end)

quest.setScript( 3622, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 9949,
  	visible = false,
  }

end)

quest.setScript( 3815, "OnTaskFulfilled", function(args)

  changeCreature {
  	tcid = 9980,
  	effect = "FXTYPE_SUMMON",
  	visible = true,
  	delay = 0.2,
  }
  changeCreature {
  	tcid = 9981,
  	effect = "FXTYPE_SUMMON",
  	visible = true,
  	delay = 0.2,
  }
  
  changeCreature {
  	tcid = 10237,
  	behaviour = "JOB_TRADER",
  	merchantType = "MERCHANT_CAPTAIN",
  }

end)

quest.setScript( 3847, "OnTaskFulfilled", function(args)

  changeCreature {
  	tcid = 9980,
  	effect = "FXTYPE_SUMMON",
  	visible = true,
  	delay = 0.2,
  }
  changeCreature {
  	tcid = 9981,
  	effect = "FXTYPE_SUMMON",
  	visible = true,
  	delay = 0.2,
  }
  
  changeCreature {
  	tcid = 10237,
  	behaviour = "JOB_TRADER",
  	merchantType = "MERCHANT_CAPTAIN",
  }

end)

quest.setScript( 3847, "OnTaskAwaiting", function(args)
local pos = getPos{tcid=9978}
  
  destroyCreature {
  	tcid = 9978,
  	splatter = false,
  }
  teleport {
  	tcid = 10505,
  	position = pos,
  	orientation = pos.orient,
  }

end)

quest.setScript( 3602, "OnTaskAwaiting", function(args)
local tcids = {9920,10327,10328,10329,10331,10332}
  for index,tcid in tcids do
    changeCreature {
      tcid = tcid,
      effect = "FXTYPE_GEN_SPAWN1",
      delay = 0.2,
    }
  end 

end)

quest.setScript( 3604, "OnWon", function(args)
if getQuestState(3601) ~= "LOST" then
  	solveQuest(3601)
  end 

end)

quest.setScript( 3604, "OnTaskAwaiting", function(args)
local tcids = {9921,10334,10335,10337,10338,10340,10341}
  for index,tcid in tcids do
    changeCreature {
      tcid = tcid,
      effect = "FXTYPE_GEN_SPAWN1",
      delay = 0.2,
    }
  end 

end)

quest.setScript( 3605, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" and args.tcid == 9903 then
  	changeCreature {
  		tcid = 9903,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_LAYGROUND-UP",
  		loopCount = 1,
  	}
  	changeCreature {
  		tcid = 9903,
  		behaviour = "questCreatures",
  		delay = 4,
  	}
  end 

end)

quest.setScript( 3701, "OnPrecondsFulfilled", function(args)
for index,tcid in {10502,10503,10507} do
    changeCreature {
      tcid = tcid,
      behaviour = "JOB_QUESTSTAGING",
      emotion = "ANIM_TYPE_SM01",
      loopCount = 1,
      extraMode = 2,
      extra = {
        "ANIM_TYPE_IDLE",
        "ANIM_TYPE_IDLE",
        "ANIM_TYPE_IDLE",
        "ANIM_TYPE_IDLE",
        "ANIM_TYPE_IDLEA",
        "ANIM_TYPE_IDLEB",
        "ANIM_TYPE_SM01",
        "ANIM_TYPE_SM02",
        toWorldPosition("57;12;0;2387.250000;357.050781;554.095703;153.434937"),
        toWorldPosition("57;12;0;2533.250000;223.648438;554.049072;47.652100"),
        toWorldPosition("57;12;0;2667.156250;97.199219;548.290833;46.496674"),
        toWorldPosition("57;11;0;2577.593750;3120.550781;547.216064;34.592285"),
        toWorldPosition("57;11;0;2457.250000;3050.250000;547.216125;299.820068"),
        toWorldPosition("57;12;0;2156.406250;217.148438;554.095703;147.002304"),
      }
    }
  end 

end)

quest.setScript( 3701, "OnWon", function(args)
changeCreature {
  	tcid = 10501,
  	behaviour = "questCreatures",
  	merchantType = "MERCHANT_PRIEST",
  	delay = 2,
  }
  changeCreature {
  	tcid = 10550,
  	behaviour = "questCreatures",
  	merchantType = "MERCHANT_HORSETRADER",
  	delay = 2,
  }

end)

quest.setScript( 3700, "OnTaskAwaiting", function(args)
--Effekt fuer die Schalter
  for index,woid in {1048876012,1048877280,1048642833,1048876801} do
  	setWoobEffect {
  		woid = woid,
  		effect = "FXTYPE_DEFEKTEMASCHINE1"
  	}
  end 

end)

quest.setScript( 3756, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 10145,
  	behaviour = "JOB_TRADER",
  	faction = "FACTION_FRIEND_HERO_ALL",
  	merchantType = "MERCHANT_COMBOMASTER",
  	role = "ROLE_INVALID",
  }

end)

quest.setScript( 3636, "OnTaskAwaiting", function(args)

  setTimer {
  	id = 3636,     -- eigene quest ID
  	interval = 1,  -- interval in sekunden
  	count = 60*10,  -- anzahl der zeitintervalle (ein count-down)
  }
  
  -- initial einmal anzeigen
  
  showTimer {
  	id = 3636,     -- eigene quest ID
  	cur = 60*10,    -- aktueller wert (current) der angezeigt werden soll
  	max = 60*10,    -- maximaler wert
  }
  
  -- d.h. hier wird 10*60 = 10 Minuten lang jede Sekunde ein Timer-Signal erzeugt

end)

quest.setScript( 3636, "OnTimer", function(args)
showTimer {
  	id = 3636,
  	cur = args.count,  -- in diesem fall zaehlt der counter ja von 3*60 runter auf null, also einfach current auf args.count setzen
  	max = 60*10
  }
  
  -- gewinnbedingung: quest ist gewonnen: timer abbrechen, quest auf gewonnen setzen
  
  if args.state == "TASK_FULFILLED" 
  	and args.count >= 1 then
  	solveQuest (args.id)
  end 

end)

quest.setScript( 3636, "OnCounter", function(args)
if args.state == "TASK_AWAITING" then
  	return "QUEST_3636_COUNT"
  elseif args.state == "TASK_FULFILLED" then
  	return "TASKCREATURE_9966"
  end
  
  

end)

quest.setScript( 3596, "OnTaskAwaiting", function(args)
creatureTeleportPosition(9905,0,{5;57;0;1423.199219;585.312500;2613.576416;213.690063})

end)

quest.setScript( 3626, "OnTaskAwaiting", function(args)
changeCreature {
    tcid = 9903,
    clearUnconscious = true,
    livesRemaining = 0,
  }

end)

quest.setScript( 3626, "OnWon", function(args)
creatureTeleportsAway(9946,0)

end)

quest.setScript( 3639, "OnTaskAwaiting", function(args)
--
  
  changeCreature {
  	tcid = 9968,
  	behaviour = "JOB_TRADER",
  	faction = "FACTION_FRIEND_HERO_ALL",
  	merchantType = "MERCHANT_COMBOMASTER",
  	role = "ROLE_INVALID",
  }	

end)

quest.setScript( 3639, "OnWon", function(args)
changeCreature {
  	tcid = 9969,
  	behaviour = "JOB_QUESTSTAGING",
  	role = "ROLE_INVALID",
  	gotoPosition = toWorldPosition("57;11;0;1883.156250;3135.851563;547.215637;150.325943"),
  	followUpBhv = "questCreatures",
  }

end)

quest.setScript( 3729, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 10119,
    role = "ROLE_DROPPER",
  }

end)

quest.setScript( 3628, "OnCounter", function(args)
if args.state == "TASK_AWAITING" then
  	return "TASKCREATURE_9953"
  	end
  if args.state == "TASK_FULFILLED" then
  	return "TASKCREATURE_9905"
  end 

end)

quest.setScript( 3628, "OnTaskAwaiting", function(args)
local tcids = {9951,9952,9953,9954,10521,10522,10523,10529,10530}
  for index,tcid in tcids do
    changeCreature {
      tcid = tcid,
      effect = "FXTYPE_GEN_SPAWN1",
      delay = 0.2,
    }
  end 

end)

quest.setScript( 3732, "OnStation", function(args)
if args.currentStation == 0 then
   	setWoobState {
   		woid = 1050804897,
   		state = "WOOB_THINGY_OFF",
   	}
  end 
  if args.currentStation == 0 then
  	setWoobState {
  		woid = 1050804903,
  		state = "WOOB_THINGY_OFF",
  	}
  end 

end)

quest.setScript( 3702, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 10038,
  	useUnconscious = true,
  	livesRemaining = 1,
  	unconsciousTime = 1,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 3703, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 10038,
  	mortality = "IMMORTAL",
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM21",
  	loopCount = -1,
  	role = "ROLE_INVALID",
  	faction = "FACTION_FRIEND_HERO_ALL",
  	clearUnconscious = true,
  	livesRemaining = 0,
  }
  
  changeCreature {
  	tcid = 10038,
  	mortality = "MORTAL",
  	behaviour = "Enemy_warrior_brave",
  	role = "ROLE_ATTACKER",
  	faction = "FACTION_ENEMY_HERO",
  	useUnconscious = true,
  	livesRemaining = 1,
  	unconsciousTime = 1,
  	delay = 3,
  }

end)

quest.setScript( 3703, "OnTaskFulfilled", function(args)
changeCreature {
  	tcid = 10038,
  	mortality = "IMMORTAL",
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM21",
  	loopCount = -1,
  	role = "ROLE_INVALID",
  	faction = "FACTION_FRIEND_HERO_ALL",
  	clearUnconscious = true,
  	livesRemaining = 0,
  }
  changeCreature {
  	tcid = 10038,
  	behaviour = "JOB_QUESTSTAGING",
  	gotoPosition = toWorldPosition("57;11;0;3066.796875;1626.617188;515.528625;47.038025"),
  	speed = 2,
  	followUpBhv = "questCreatures",
  	delay = 3,
  }
  creatureTeleportsAway(10038,12)

end)

quest.setScript( 3705, "OnUnconscious", function(args)
if args.tcid == 10039 then
  	changeCreature {
  		tcid = 10039,
  		mortality = "IMMORTAL",
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  		role = "ROLE_INVALID",
  		faction = "FACTION_FRIEND_HERO_ALL",
  	}
  end 

end)

quest.setScript( 3705, "OnWon", function(args)
changeCreature {
  	tcid = 10039,
  	mortality = "MORTAL",
  	role = "ROLE_INVALID",
  	behaviour = "JOB_QUESTSTAGING",
  	emotion = "ANIM_TYPE_SM22",
  	loopCount = 1,
  }
  killCreature {
  	tcid = 10039,
  	delay = 3,
  }
  destroyCreature {
  	tcid = 10039,
  	splatter = false,
  	delay = 6,
  }

end)

quest.setScript( 3705, "OnTalk", function(args)
if args.state == "TASK_FULFILLED" then
  	changeCreature {
  		tcid = 10039,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_SM21",
  		loopCount = -1,
  	}
  end 

end)

quest.setScript( 3705, "OnTaskAwaiting", function(args)
changeCreature {
  	tcid = 10039,
  	useUnconscious = true,
  	livesRemaining = 1,
  	unconsciousTime = 1,
  	clearAutoTeleporting = true,
  }

end)

quest.setScript( 3707, "OnTaskAwaiting", function(args)
setTimer {
  	id = 3707,
  	interval = 1,
  	count = 32,
  }

end)

quest.setScript( 3707, "OnTimer", function(args)
if args.count == 32 then
    changeCreature {
      tcid = 10002,
  		behaviour = "JOB_QUESTSTAGING",
      gotoPosition = toWorldPosition("57;12;0;529.906250;1096.199219;454.611908;355.456238"),
      followUpBhv = "JOB_QUESTSTAGING",
      followUpAngle = 355.456238,
      speed = 2,
  	}
  end
  if args.count == 12 then
    changeCreature {
      tcid = 10002,
  		behaviour = "JOB_QUESTSTAGING",
      gotoPosition = toWorldPosition("0;0;-1;0;0;0;0"),
      followUpBhv = "JOB_QUESTSTAGING",
      followUpAngle = 355.456238,
  	}
    teleport {
      tcid = 10002,
      position = toWorldPosition("57;12;0;529.906250;1096.199219;454.611908;355.456238"),
      orientation = 355.456238,
    }
  end
  if args.count == 11 then
  	changeCreature {
  		tcid = 10002,
  		behaviour = "JOB_QUESTSTAGING",
  		emotion = "ANIM_TYPE_KE07",
  		extraMode = 0,
  		extra = {
  			"ANIM_TYPE_KE01",
  			"ANIM_TYPE_KE01",
  			"ANIM_TYPE_KE09",
  			"ANIM_TYPE_KE08",
  		}
  	}
  end
  if args.count == 2 then
    for index,tcid in {10299,10300,10301,10302,10303,10304,10305} do
      changeCreature {
        tcid = tcid,
        behaviour = "JOB_QUESTSTAGING",
        emotion = "ANIM_TYPE_KE08",
        loopCount = 1,
      }
    end
  end
  if args.count == 1 then
    for index,tcid in {10299,10300,10301,10302,10303,10304,10305,10002} do
      changeCreature {
        tcid = tcid,
        behaviour = "JOB_RICH_STATIST",
      }
  		creatureTeleportsAway(tcid,120)
    end
    solveQuest(3707)
  end
  
  
  
  
  
  
  -- Glenn: 10002
  
  -- Pult: 
  -- 57;12;0;529.906250;1096.199219;454.611908;355.456238
  
  
  -- Zuschauer:
  -- 57;12;0;597.703125;888.250000;416.628754;174.968063
  -- 57;12;0;553.203125;986.351563;420.370789;202.034958
  -- 57;12;0;501.843750;920.750000;422.798676;189.309937
  -- 57;12;0;480.500000;977.300781;418.440216;150.664719
  -- 57;12;0;391.296875;941.625000;434.415894;150.622192
  -- 57;12;0;401.500000;1015.000000;425.581512;129.427811
  -- 57;12;0;443.796875;1092.378906;435.926300;120.679947
  
  -- Kopf: 1050890032
  
  -- Zuschauer:
  -- 10299
  -- 10300
  -- 10301
  -- 10302
  -- 10303
  -- 10304
  -- 10305

end)

quest.setScript( 3598, "OnTaskAwaiting", function(args)
--9910,9912,10511,10512,10513
  
  
  local tcids = {9910,9912,10511,10512,10513}
  for index,tcid in tcids do
    changeCreature {
      tcid = tcid,
      effect = "FXTYPE_GEN_SPAWN1",
      delay = 0.2,
    }
  end 

end)

quest.setScript( 3598, "OnCounter", function(args)
if args.state == "TASK_AWAITING" then
  	return "TASKCREATURE_9910"
  	end
  if args.state == "TASK_FULFILLED" then
  	return "TASKCREATURE_9905"
  end 

end)

quest.setScript( 3599, "OnTaskAwaiting", function(args)
local tcids = {9913,9914,9915,9916,9917,10514,10515}
  for index,tcid in tcids do
    changeCreature {
      tcid = tcid,
      effect = "FXTYPE_GEN_SPAWN1",
      delay = 0.2,
    }
  end 

end)

quest.setScript( 3599, "OnCounter", function(args)
if args.state == "TASK_AWAITING" then
  	return "TASKCREATURE_9913"
  	end
  if args.state == "TASK_FULFILLED" then
  	return "TASKCREATURE_9905"
  end 

end)

quest.setScript( 3629, "OnTaskAwaiting", function(args)
local tcids = {9955,10531,10532,10533,10534,10535}
  for index,tcid in tcids do
    changeCreature {
      tcid = tcid,
      effect = "FXTYPE_GEN_SPAWN1",
      delay = 0.2,
    }
  end 

end)

quest.setScript( 3629, "OnCounter", function(args)
if args.state == "TASK_AWAITING" then
  	return "TASKCREATURE_9955"
  	end
  if args.state == "TASK_FULFILLED" then
  	return "TASKCREATURE_9905"
  end 

end)

quest.setScript( 3614, "OnTaskAwaiting", function(args)
local tcids = {9932,9934,9935,10516,10517,10518}
  for index,tcid in tcids do
    changeCreature {
      tcid = tcid,
      effect = "FXTYPE_GEN_SPAWN1",
      delay = 0.2,
    }
  end 

end)

quest.setScript( 3614, "OnCounter", function(args)
if args.state == "TASK_AWAITING" then
  	return "TASKCREATURE_9932"
  	end
  if args.state == "TASK_FULFILLED" then
  	return "TASKCREATURE_9905"
  end 

end)

quest.setScript( 3615, "OnTaskAwaiting", function(args)
local tcids = {9936,9937,9938,9939,9940,9941,10519,10520}
  for index,tcid in tcids do
    changeCreature {
      tcid = tcid,
      effect = "FXTYPE_GEN_SPAWN1",
      delay = 0.2,
    }
  end 

end)

quest.setScript( 3615, "OnCounter", function(args)
if args.state == "TASK_AWAITING" then
  	return "TASKCREATURE_9936"
  	end
  if args.state == "TASK_FULFILLED" then
  	return "TASKCREATURE_9905"
  end 

end)

quest.setScript( 3630, "OnWon", function(args)
creatureTeleportPosition(9905,0,{5;57;0;150.000000;850.000000;2663.256104;358.181244})

end)

quest.setScript( 3630, "OnTaskAwaiting", function(args)
local tcids = {9956,9957,9958,10536,10537,10538,10539,10540}
  for index,tcid in tcids do
    changeCreature {
      tcid = tcid,
      effect = "FXTYPE_GEN_SPAWN1",
      delay = 0.2,
    }
  end 

end)

quest.setScript( 3630, "OnCounter", function(args)
if args.state == "TASK_AWAITING" then
  	return "TASKCREATURE_9956"
  	end
  if args.state == "TASK_FULFILLED" then
  	return "TASKCREATURE_9905"
  end 

end)

quest.setScript( 3624, "OnTaskAwaiting", function(args)
local tcids = {9947,9948,10524,10525,10526,10527,10528}
  for index,tcid in tcids do
    changeCreature {
      tcid = tcid,
      effect = "FXTYPE_GEN_SPAWN1",
      delay = 0.2,
    }
  end 

end)

quest.setScript( 3624, "OnCounter", function(args)
if args.state == "TASK_AWAITING" then
  	return "TASKCREATURE_9947"
  	end
  if args.state == "TASK_FULFILLED" then
  	return "TASKCREATURE_9905"
  end 

end)

quest.setScript( 1364, "OnTaskAwaiting", function(args)
local tcids = { 2562, 2563, 2564, 2565, 2566, 2567, 2568, 3848, 3849, 3850, 
  								3851, 3852 }
  
  for index, tcid in tcids do
  	changeCreature {
  		tcid=tcid,
  		role = "ROLE_ATTACKER",
  	}
  end
  

end)

quest.setScript( 3631, "OnTaskAwaiting", function(args)
local tcids = {9959,9960,9961,9962,9963,9964,10541,10542,10543,10544,10545,10546,10547,10548,10549}
  for index,tcid in tcids do
    changeCreature {
      tcid = tcid,
      effect = "FXTYPE_GEN_SPAWN1",
      delay = 0.2,
    }
  end 

end)

quest.setScript( 3631, "OnCounter", function(args)
if args.state == "TASK_AWAITING" then
  	return "TASKCREATURE_3631"
  	end
  if args.state == "TASK_FULFILLED" then
  	return "TASKCREATURE_9905"
  end 

end)

